/*  THIS PRODUCT CONTAINS RESTRICTED MATERIALS OF IBM  
    (C) COPYRIGHT International Business Machines Corp., 2010 
    All Rights Reserved * Licensed Materials - Property of IBM 
    US Government Users Restricted Rights - Use, duplication or disclosure 
    restricted by GSA ADP Schedule Contract with IBM Corp.
*/
//>>built
require({cache:{"builder/workbench/componentsView/ComponentProperty":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentProperty.html","dijit/Dialog","dijit/form/Button"],function(_1,_2,_3,_4,_5,_6,_7){return _1("builder.workbench.componentsView.ComponentProperty",[_2,_3,_4],{templateString:_5,widgetsInTemplate:true,appModel:null,constructor:function(){this.hintBtnOk=builder.Environment.messages.BUILDER_CLEDITOR_BTN_OK;this.hintBtnCancel=builder.Environment.messages.BUILDER_CLEDITOR_BTN_CANCEL;this.hintAdvancedSettings=builder.Environment.messages.BUILDER_CLEDITOR_ADV_SETTINGS;},postCreate:function(){dojo.connect(this.advancedSettingsCancel,"onClick",dojo.hitch(this,"cancelAdvancedSettings"));dojo.connect(this.advancedSettingsSave,"onClick",dojo.hitch(this,"saveAdvancedSettings"));var _8=this.nameColumn.insertRow(0);this.nameItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"name",label:builder.Environment.messages.BUILDER_CLEDITOR_NAME,type:"string",regExp:"^[a-zA-Z0-9]+$",required:true},properties:{name:""},labelWidth:"60px",model:this.appModel},_8);var _9=this.descriptionColumn.insertRow(0);this.descriptionItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"description",label:builder.Environment.messages.BUILDER_CLEDITOR_PROPERTY_DESCRIPTION,type:"string",required:false},properties:{name:""},labelWidth:"60px",model:this.appModel},_9);var _a=this.typeColumn.insertRow(0);this.typeItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"type",label:builder.Environment.messages.BUILDER_CLEDITOR_TYPE,type:"string",options:[{name:builder.Environment.messages.BUILDER_CLEDITOR_PROPERTY_TYPE_STRING,value:"string"},{name:builder.Environment.messages.BUILDER_CLEDITOR_PROPERTY_TYPE_PASSWORD,value:"password"},{name:builder.Environment.messages.BUILDER_CLEDITOR_PROPERTY_TYPE_NUMBER,value:"number"},{name:builder.Environment.messages.BUILDER_CLEDITOR_PROPERTY_TYPE_BOOLEAN,value:"boolean"}],displayType:"list",required:true},properties:{type:""},labelWidth:"60px",model:this.appModel},_a);var _b=this.valueColumn.insertRow(0);this.valueItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"value",label:builder.Environment.messages.BUILDER_CLEDITOR_PROPERTY_VALUE,type:"string",required:false},properties:{value:""},labelWidth:"150px",model:this.appModel},_b);var _c=this.required.insertRow(0);this.required=new builder.workbench.componentsView.ComponentItem({metadata:{id:"required",label:builder.Environment.messages.BUILDER_CLEDITOR_ADV_SETTINGS_REQUIRED,type:"boolean"},labelWidth:"150px",model:this.appModel},_c);this.required.setPropertyValue(true);var _d=this.regex.insertRow(0);this.regex=new builder.workbench.componentsView.ComponentItem({metadata:{id:"regex",label:builder.Environment.messages.BUILDER_CLEDITOR_ADV_SETTINGS_REGEX,type:"string"},labelWidth:"150px",model:this.appModel},_d);var _e=this.validValues.insertRow(0);this.validValues=new builder.workbench.componentsView.ComponentItem({metadata:{id:"validValue",label:builder.Environment.messages.BUILDER_CLEDITOR_ADV_SETTINGS_VALIDVALUES,type:"string"},labelWidth:"150px",model:this.appModel},_e);var _f=this.advancedColumn.insertRow(0);var _10=document.createElement("span");_10.className="boldFont";_10.style.cursor="pointer";_10.appendChild(document.createTextNode(builder.Environment.messages.BUILDER_CLEDITOR_ADV_SETTINGS_DOTS));_f.appendChild(_10);dojo.connect(_10,"onclick",dojo.hitch(this,"showAdvancedSettings"));var _11=this.deleteColumn.insertRow(0);var _12=document.createElement("img");_12.src="/tooling/images/close_normal.png";_12.style.cursor="pointer";_11.appendChild(_12);this.deleteHandle=dojo.connect(_12,"onclick",dojo.hitch(this,"deleteItem"));},deleteItem:function(){},showAdvancedSettings:function(){this.advancedSettingsDialog.show();},cancelAdvancedSettings:function(){this.advancedSettingsDialog.hide();},saveAdvancedSettings:function(){this.advancedSettingsDialog.hide();},destroy:function(){dojo.disconnect(this.deleteHandle);if(this.nameItem!=null){this.nameItem.destroyRecursive();}if(this.typeItem!=null){this.typeItem.destroyRecursive();}if(this.valueItem!=null){this.valueItem.destroyRecursive();}this.inherited(arguments);},getProperty:function(){var _13={};var _14={};_13.name=this.nameItem.getPropertyValue();_13.description=this.descriptionItem.getPropertyValue();_13.type=this.typeItem.getPropertyValue();_13.value=this.valueItem.getPropertyValue();_14.required=this.required.getPropertyValue();if(this.regex.getPropertyValue()!=null){_14.regex=this.regex.valueWidget.value;}if(this.validValues.getPropertyValue()!=null){_14.validValues=this.validValues.valueWidget.value;}_13.advancedProperty=_14;return _13;}});});},"builder/workbench/linksView/LinksView":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/LinksView.html","builder/workbench/linksView/Link","builder/workbench/property/PropertyWidget"],function(_15,_16,_17,_18,_19,_1a,_1b){return _15("builder.workbench.linksView.LinksView",[_16,_17,_18],{templateString:_19,widgetsInTemplate:true,appModel:null,postCreate:function(){var _1c=document.styleSheets;for(var _1d in _1c){var _1e=_1c[_1d];var _1f=_1e.cssRules;for(var _20 in _1f){var _21=_1f[_20];if(_21.selectorText==".claro .dijitInlineEditBoxDisplayModeHover"){_21.style.setProperty("border","1px solid #E9F4FE",null);break;}}}var _22=dijit.byId("linkCategoryPalette");dojo.connect(_22,"itemSelected",dojo.hitch(this,"selectLink"));},saveLink:function(){if(this.link!=null){this.link.save();var _23=dijit.byId("linkCategoryPalette");_23.clearLinkSelection();var _24=_23.addLink(this.link);_24.setSelected(true);}},newLink:function(){var _25=dijit.byId("linkCategoryPalette");_25.clearLinkSelection();if(this.link!=null){this.page.removeChild(this.link.domNode);}var _26=document.createElement("div");this.page.appendChild(_26);this.link=new builder.workbench.linksView.Link({appModel:this.appModel},_26);this.link.startup();},cloneLink:function(){},selectLink:function(_27){if(_27!=null){var _28=dijit.byId("linkCategoryPalette");var _29=_28.getSelectedLinkItem();if(_29!=null){var _2a=_29.getLink().getID();var _2b=_27.getLink().getID();if(_2a!=_2b){this.page.removeChild(_29.getLink().domNode);_29.setSelected(false);}}this.page.appendChild(_27.getLink().domNode);_27.setSelected(true);this.link=_27.getLink();}},deleteLink:function(){if(this.link!=null){var _2c=dijit.byId("linkCategoryPalette");_2c.removeLink(this.link);}this.link=null;this.page.innerHTML="";}});});},"builder/base/dnd/common":function(){define(["dojo/_base/lang","dojo/dnd/common"],function(_2d,_2e){var _2f=_2d.getObject("builder",true);var _30=_2d.getObject("base",true,_2f);var _31=_2d.getObject("dnd",true,_30);_2f.base.dnd.getAttribute=function(_32,_33){_32=dojo.byId(_32);if((!_32)||(!_32.getAttribute)){return null;}var ta=typeof _33=="string"?_33:new String(_33);var v=_32.getAttribute(ta.toUpperCase());if((v)&&(typeof v=="string")&&(v!="")){return v;}if(v&&v.value){return v.value;}if((_32.getAttributeNode)&&(_32.getAttributeNode(ta))){return (_32.getAttributeNode(ta)).value;}else{if(_32.getAttribute(ta)){return _32.getAttribute(ta);}else{if(_32.getAttribute(ta.toLowerCase())){return _32.getAttribute(ta.toLowerCase());}}}return null;};_2f.base.dnd.hasAttribute=function(_34,_35){return _2f.base.dnd.getAttribute(dojo.byId(_34),_35)?true:false;};_2f.base.dnd.isChild=function(_36,_37){var tn=_37;while(tn!=dojo.body()){tn=tn.parentNode;if(tn==_36){return true;}}return false;};_2f.base.dnd.acceptsType=function(_38,_39){if(_38==null){return false;}if(dojo.indexOf(_38,"*")<0){if(dojo.indexOf(_38,_39)<0){return false;}}return true;};return _31;});},"builder/vsys/workbench/editor/VSysComponentFigureFrame":function(){define(["dojo/_base/declare","builder/workbench/editor/ComponentFigureFrame","builder/vsys/workbench/editor/VSysComponentFrame","builder/util/Util"],function(_3a,_3b,_3c,_3d){return _3a("builder.vsys.workbench.editor.VSysComponentFigureFrame",[_3b,_3c],{postCreate:function(){this.inherited(arguments);},constructor:function(){this.buttons.splice(1,2,{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_ADDPOLICY_TITLE,todo:dojo.hitch(this,this.onShowPolicies),imageUrl:"/tooling/images/add_policy.png"},{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_ADDADDON_TITLE,todo:dojo.hitch(this,this.onShowAddons),imageUrl:"/tooling/images/add_addon.png"});},calculateShowPosition:function(){var _3e=_3d.coords(this.toolbar.domNode,true);var _3f=_3e.x+24;var top=_3e.y+24;return {"left":_3f,"top":top};},showPolicyShortcutContainer:function(){},updateAddPolicyButton:function(){},toStandardView:function(evt){this.inherited(arguments);this.component.restoreDelegatedConnections();},addSubComponent:function(_40){this.inherited(arguments);this.toStandardView();}});});},"builder/vsys/command/VSysAddPolicyCommand":function(){define(["dojo/_base/declare","builder/command/AddPolicyCommand","dojo/topic"],function(_41,_42,_43){return _41("builder.vsys.command.VSysAddPolicyCommand",[_42],{undo:function(){this.inherited(arguments);this._checkContainerFrame();},_checkContainerFrame:function(){if(this.toComponentId){var _44=builder.Environment.diagram.getComponentById(this.toComponentId);if(_44!=null){_44.componentFrame&&_44.componentFrame.checkSeparatorLine();}}}});});},"paas/widgets/MultiSelectExt":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/dom-construct","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/Button","dijit/form/CheckBox","dijit/form/TextBox","dijit/form/SimpleTextarea","dijit/Dialog","dojo/text!./templates/MultiSelectExt.html"],function(_45,_46,_47,_48,_49,_4a,_4b,_4c,_4d,_4e,_4f,_50){return _45("paas.widgets.MultiSelectExt",[_48,_49,_4a],{templateString:_50,items:null,url:null,itemStore:null,value:null,checkBoxs:null,label:"selected",initiated:false,constructor:function(){this.editTitle=paas.Base.messages.MULTISELECT_WIDGET_SELECT_BUTTON;this.hint=paas.Base.messages.MULTISELECT_WIDGET_HINT;this.loadingHint=paas.Base.messages.LOADING;},postCreate:function(){this.optionsSelection.startup();dojo.connect(this.optionsSelection,"onClick",this,"initOptions");this.checkBoxs={};this.set("value",this.value);this.optionsSelection.domNode.style.marginLeft="0px";},initOptions:function(){this._resize();if(this.initiated){return;}this.loadItems();this.handleInvalidValue();this.createOptionPanel();this.disableIfRequired();this._resize();this.initiated=true;},_resize:function(){var _51={width:"",height:""};dojo.style(this.multiSelectDialog.domNode,_51);},loadItems:function(){if(dojo.isArray(this.items)){return;}var _52=this;this.url=_52.constructOptionsURL();if(!dojo.isString(this.url)){this.items=[];}var _53={url:this.url,sync:true,handleAs:"json",encoding:"utf-8",load:function(_54){_52.itemStore=_54;},error:function(_55){_52._showNoneItem();_52.itemStore=null;}};dojo.xhrGet(_53);this.items=[];if(this.itemStore){_46.forEach(this.itemStore.items,function(_56){var _57={};_57.name=_56[_52.itemStore.label];_57.value=_56[_52.itemStore.identifier];_52.items.push(_57);});this.items.sort(paasUtil.compareByNameIgnoreCase);}},tweakResponseAsNeeded:function(_58){return _58;},_showNoneItem:function(){this.multiSelect.innerHTML=paas.Base.messages.NONE_MESSAGE;this._resize();},createOptionPanel:function(){if(this.items==null||this.items.length==0){this._showNoneItem();return;}var _59=this;this.multiSelect.innerHTML="";_46.forEach(this.items,function(_5a){var _5b=_47.create("div");_5b.title=_5a.disabled?paas.Base.messages.VALUE_SELECTED:"";var _5c=_47.create("input",{type:"checkBox"},_5b);var _5d=new dijit.form.CheckBox({"disabled":(_5a.disabled==null)?false:_5a.disabled},_5c);_59.checkBoxs[_5a.value]={value:_5a.value,checkBox:_5d};var _5e=_47.create("span",{innerHTML:_5a.name},_5b);_59.multiSelect.appendChild(_5b);dojo.connect(_5d,"onChange",_59,"onChange");});this._updateCheckBox(this.value);},onChange:function(){this.value=[];for(var i in this.checkBoxs){if(this.checkBoxs[i].checkBox.checked){this.value.push(this.checkBoxs[i].value);}}this._updateTextArea(this.value);},get:function(_5f){if(_5f==="value"){return this.value;}else{return this.inherited(arguments);}},_updateCheckBox:function(_60){for(var i in this.checkBoxs){var _61=this;var _62=this.checkBoxs[i];var _63=false;dojo.forEach(_60,function(_64){if(_61.sameValues(_62.value,_64)){_63=true;}});_62.checkBox.set("checked",_63);}},sameValues:function(_65,_66){return _65==_66;},disableIfRequired:function(){},_updateTextArea:function(_67){var _68="";var _69=this;_46.forEach(_67,function(va){_46.forEach(_69.items,function(_6a){if(va==_6a.value){_68=_68+_6a.name+", ";}});});if(_68!=""){_68=_68.substring(0,_68.length-2);this.placeHolder.style.display="none";}else{this.placeHolder.style.display="";}this.inputValueNode.set("value",_68);},set:function(_6b,_6c){if(_6b=="value"){this.setValue(_6c);this._updateCheckBox(this.value);this._updateTextArea(this.value);}else{if(_6b=="disabled"){this.optionsSelection.set("disabled",_6c);}else{this.inherited(arguments);}}},isValid:function(){return true;},setValue:function(_6d){if(!_6d||!dojo.isArray(_6d)){this.value=[];return;}this.value=_6d;},handleInvalidValue:function(){var _6e=this;var _6f=_46.filter(this.value,function(_70){return _46.every(this.items,function(_71){return !_6e.sameValues(_71.value,_70);},this);},this);_46.forEach(_6f,function(_72){this.items.push({name:_72,value:_72});},this);},constructOptionsURL:function(){return this.items;}});});},"builder/util/UrlGenerator":function(){define(["dojo/_base/lang"],function(_73){var _74=_73.getObject("builder",true);var _75=_73.getObject("util.UrlGenerator",true,_74);_75=_74.util.UrlGenerator={generateUrl:function(url,_76,_77){if(!url){return null;}if(!_76){return url;}var _78=_76;if(_77){_78=_78+"="+_77;}if(url.indexOf("?")<0){return url+"?"+_78;}else{return url+"&"+_78;}}};return _75;});},"builder/vsys/command/RemoveImageCommand":function(){define(["dojo/_base/declare","builder/command/RemoveComponentCommand","builder/vsys/command/ImageCommandUtil","dojo/_base/array","builder/command/ChangePropertyCommand","builder/util/Util","builder/vsys/util/VSysUtil","builder/util/CommandFactoryUtil","builder/vsys/command/VSysRemoveCommandMixin","dojo/_base/lang","builder/vsys/command/OrderCommandMixin"],function(_79,_7a,_7b,_7c,_7d,_7e,_7f,_80,_81,_82,_83){return _79("builder.vsys.command.RemoveImageCommand",[_7a,_7b,_81,_83],{execute:function(){var _84=this;var _85=builder.Environment.diagram.getComponentById(this.modelId);if(_85.componentFrame){this.ismini=_85.ismini;}this.locked=_85.locked;this.compoundCmd=new builder.base.command.CompoundCommand();var _86=_85.getAttachedPolicies();for(var i=_86.length-1;i>=0;i--){var cmd=_80.getCommmandFactory().getRemovePolicyCommand(_86[i]);this.compoundCmd.add(cmd);}this._removeIncomingConnections(_85.incomingConnections,this.compoundCmd);dojo.forEach(_85.outgoingConnections,dojo.hitch(this,function(_87){var cmd=new builder.command.RemoveConnectionCommand(_87);this.compoundCmd.add(cmd);}));this.compoundCmd.execute();if(_85.layer){_85.layer.removeComponent(_85);}_85.remove();builder.Environment.diagram.resetSurfaceArea();this._updatePatternLevelAttributeReference(_85);this.updateStartsAfter(this.modelId);dojo.publish("onDiagramChanged",null);if(this.isAppPolicy){_7e.locateAppPolicy(builder.Environment.diagram);}this.afterExecute();},_removeIncomingConnections:function(_88,_89){_7c.forEach(_88,_82.hitch(this,function(_8a){if(!_8a.isSubComponentLink()&&_8a.type===constants.DATA_DEPENDS_LINK){this._removeIncomingConnection(_8a,_89);}}));},undo:function(){this.beforeUndo();this.inherited(arguments);this.restoreStartsAfter();this.updateHVImages();}});});},"builder/workbench/listView/ConnectionItem":function(){define(["dojo/_base/declare","builder/workbench/listView/ListItem","builder/workbench/property/ConnectionPropertiesWidget"],function(_8b,_8c,_8d){return _8b("builder.workbench.listView.ConnectionItem",[_8c,_8d],{isLockVisible:true,createTitleWidget:function(){this.titleImageNode.src="/tooling/images/cloud/link_pal_24.gif";var _8e=this.model.fromComponent;var _8f=this.model.toComponent;var _90=_8e.id;if(_8e.layer&&_8e.layer.isReferenced()){_90=builder.util.Util.getReferModelName(_90,_8e.layer.id);}var _91=_8f.id;if(_8f.layer&&_8f.layer.isReferenced()){_91=builder.util.Util.getReferModelName(_91,_8f.layer.id);}this.titleNameNode.innerHTML="<span class='boldFont'>"+_90+"</span>&nbsp;<span class='wca-image-arrow-icon' style='vertical-align:middle; display:inline-block'"+" alt="+builder.Environment.messages.CONNECTION_TARGET_ALT+"></span>"+" &nbsp;<span class='boldFont'>"+_91+"</span>"+"&nbsp;&nbsp;-&nbsp;<span>"+this.model.metadata.label+"</span>";},updateMetadata:function(){builder.service.AppBindingService.updateMetadata(this.model);},createNameWidget:function(){},postCreate:function(){this.inherited(arguments);this.subscribes.push(dojo.subscribe("onLoadingReferences",this,function(id){if(id==this.model.fromComponent.id||id==this.model.toComponent.id){this.updateMetadata();this.changePropertyWidgets();}}));}});});},"builder/workbench/orderView/FlowConnection":function(){define(["dojo/_base/declare","builder/workbench/editor/PropertiesContainer","builder/workbench/property/PropertiesEditable","builder/workbench/orderView/OrderConstants","builder/vsys/util/VSysUtil"],function(_92,_93,_94,_95,_96){return _92("builder.workbench.orderView.FlowConnection",[_93,_94],{fromComponent:null,toComponent:null,link:null,id:null,needRepaint:false,type:_95.FLOW_CONNECTION,fixed:false,constructor:function(_97){this.fromComponent=_97.source;this.toComponent=_97.target;this.fixed=_97.fixed;this.fromComponent.orderFrame.addFlowOutConnection(this);this.toComponent.orderFrame.addFlowInConnection(this);this.id=this.fromComponent.id+"_"+this.toComponent.id;},_createLink:function(){var _98=new builder.workbench.editor.Link(builder.Environment.diagram);_98.surface=builder.Environment.orderView.surface;return _98;},paint:function(){if(!this.link){this.link=this._createLink();}this.fromComponent.orderFrame.caculatePositionInSurface();this.toComponent.orderFrame.caculatePositionInSurface();var _99=this.getColor();this.link.setStyle({color:_99});var p1=this.fromComponent.orderFrame.rightPositionInSurface;var p2=this.toComponent.orderFrame.leftPositionInSurface;var _9a;if(p1.x<p2.x){_9a=1;}else{_9a=2;}this.link.paint(p1,p2,false,_9a);},getColor:function(){if(_96.isImage(this.fromComponent.metadata)||this.fixed||this.fromComponent.readOnly){return "#808080";}else{return "#a52a2a";}},repaint:function(){if(!this.link){return;}this.link.remove();this.paint();this.needRepaint=false;},remove:function(){if(this.link){this.link.remove();}}});});},"builder/command/AddLayerCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/workbench/layer/Layer"],function(_9b,_9c,_9d){return _9b("builder.command.AddLayerCommand",[_9c],{container:null,id:null,layerPalette:null,curLayerId:null,constructor:function(){this.container=builder.Environment.diagram;this.id=this.container.getUniqueLayerId();this.layerPalette=builder.Environment.layerPalette;},execute:function(){var _9e=new builder.workbench.layer.Layer(this.id);this.container.addLayer(_9e);this.layerPalette.addLayerItem(_9e);dojo.publish("onDiagramChanged");dojo.publish("/layer/add",[_9e]);},undo:function(){var _9f=this.container.getLayerById(this.id);this.container.removeLayer(_9f);this.layerPalette.removeLayerItem(_9f);dojo.publish("onDiagramChanged");dojo.publish("/layer/remove",[_9f]);}});});},"builder/workbench/componentsView/ComponentsView":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentsView.html","builder/workbench/componentsView/Component","builder/workbench/property/PropertyWidget"],function(_a0,_a1,_a2,_a3,_a4,_a5,_a6){return _a0("builder.workbench.componentsView.ComponentsView",[_a1,_a2,_a3],{templateString:_a4,widgetsInTemplate:true,appModel:null,postCreate:function(){var _a7=document.styleSheets;for(var _a8 in _a7){var _a9=_a7[_a8];var _aa=_a9.cssRules;for(var _ab in _aa){var _ac=_aa[_ab];if(_ac.selectorText==".claro .dijitInlineEditBoxDisplayModeHover"){_ac.style.setProperty("border","1px solid #E9F4FE",null);}}}},saveComponent:function(){if(this.component!=null){this.component.save();}},newComponent:function(){if(this.component!=null){this.page.removeChild(this.component.domNode);}var _ad=document.createElement("div");this.page.appendChild(_ad);this.component=new builder.workbench.componentsView.Component({appModel:this.appModel},_ad);this.component.startup();},cloneComponent:function(){},deleteComponent:function(){if(this.component!=null){this.component.destroy();}this.page.innerHTML="";}});});},"builder/workbench/editor/CompOuterDisplay":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/CompOuterDisplay.html","builder/util/Util"],function(_ae,_af,_b0,_b1,_b2,_b3){return _ae("builder.workbench.editor.CompOuterDisplay",[_af,_b0,_b1],{templateString:_b2,widgetsInTemplate:true,component:null,propertiesWidget:null,constructor:function(){this.compOuterDisplayContentTitle="Scaling Policy";},postCreate:function(){this.propertiesWidget=this.component.createNewPropertiesWidget(true);this.compOuterDisplayContent.appendChild(this.propertiesWidget.domNode);this.propertiesWidget.show();var _b4={w:550,h:400};this.compOuterDisplay.show();var _b5=this;dojo.connect(_b5.compOuterDisplay,"hide",this,function(e){_b5.remove();});},remove:function(){this.component.componentFrame.setCompOuterDisplay();this.destroyRendering(false);dijit.registry.remove(this.id);this._destroyed=true;this.destroyRecursive();}});});},"builder/workbench/HintWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/HintWidget.html"],function(_b6,_b7,_b8,_b9,_ba){return _b6("builder.workbench.HintWidget",[_b7,_b8,_b9],{templateString:_ba,isHintDisplayed:false,hintTitles:null,hintImages:["images/cloud/hint1.png","images/cloud/hint2.png","images/cloud/hint3.png"],hintPageIndex:0,hintContent:null,hintTitleBarImage:null,hintStepText:null,hintTitleText:null,hintContentBox:null,hintPreviousPage:null,hintNextPage:null,constructor:function(){this.hintBarTitle=builder.Environment.messages.APPMODEL_TOOLING_HINT_TITLE_BAR_TITLE;this.hintsToolTip=builder.Environment.messages.APPMODEL_TOOLING_HINT_TITLE_BAR_TOOLTIP;this.prePage=builder.Environment.messages.APPMODEL_TOOLING_HINTWIDGET_PREVIOUS_PAGE;this.nextPage=builder.Environment.messages.APPMODEL_TOOLING_HINTWIDGET_NEXT_PAGE;},postCreate:function(){this.hintTitles=[builder.Environment.messages.APPMODEL_TOOLING_HINT_TITLE_1,builder.Environment.messages.APPMODEL_TOOLING_HINT_TITLE_2,builder.Environment.messages.APPMODEL_TOOLING_HINT_TITLE_3];this.displayHintContent(0);},switchHintPanelStatus:function(){if(this.isHintDisplayed==false){this.hintContent.style.display="";this.hintTitleBarImage.className="hintTitleBarImage hintTitleBarImageShow";this.isHintDisplayed=true;}else{this.hintContent.style.display="none";this.hintTitleBarImage.className="hintTitleBarImage hintTitleBarImageHide";this.isHintDisplayed=false;}},previousHintPage:function(){if(this.hintPageIndex>0){this.hintPageIndex--;}this.displayHintContent(this.hintPageIndex);},nextHintPage:function(){if(this.hintPageIndex<this.hintTitles.length){this.hintPageIndex++;}this.displayHintContent(this.hintPageIndex);},displayHintContent:function(_bb){this.hintStepText.innerHTML=dojo.string.substitute(builder.Environment.messages.APPMODEL_TOOLING_HINT_STEP,[(_bb+1)]);this.hintTitleText.innerHTML=this.hintTitles[_bb];this.hintContentBox.innerHTML="<img width='300' height='200' alt="+builder.Environment.messages.IMAGE_ALT+" src='"+this.hintImages[_bb]+"'></img>";this.hintPreviousPage.style.display="";this.hintNextPage.style.display="";if(_bb==0){this.hintPreviousPage.style.display="none";}if(_bb==this.hintTitles.length-1){this.hintNextPage.style.display="none";}}});});},"builder/service/PaletteServiceExt":function(){define(["dojo/_base/declare","builder/util/Util","paas/common/util","dojo/Deferred"],function(_bc,_bd,_be,_bf){return _bc("builder.service.PaletteServiceExt",null,{allCategories:null,allItems:null,DEFAULT_CATEGORY:"Others",getCategoriesDeferred:null,constructor:function(_c0,_c1,_c2){this.allItems={};this.plugins=_c0;this.patterntype=_c1;this.version=_c2;},compareCategory:function(a,b){if(a.id==""){return 1;}if(b.id==""){return -1;}if(a.name.toLocaleLowerCase()<b.name.toLocaleLowerCase()){return -1;}if(a.name.toLocaleLowerCase()>b.name.toLocaleLowerCase()){return 1;}return 0;},compareItem:function(a,b){a.name=a.name||"";b.name=b.name||"";if(a.name.toLocaleLowerCase()<b.name.toLocaleLowerCase()){return -1;}if(a.name.toLocaleLowerCase()>b.name.toLocaleLowerCase()){return 1;}return 0;},getCategories:function(){if(!this.getCategoriesDeferred){this.getCategoriesDeferred=new _bf();if(this.allCategories){this.getCategoriesDeferred.resolve(this.allCategories);}else{var _c3=this;var _c4=this.plugins||[];var _c5={plugins:_c4,patterntype:this.patterntype,version:this.version};var url="../resources/ApplicationModelMetadataCategories";var def=_be.getDeferred("POST",url,dojo.toJson(_c5));def.addCallbacks(function(_c6){_c3.allCategories=_c3.sortCategoryItems(_c6);_c3.getCategoriesDeferred.resolve(_c3.allCategories);});def.addErrback(function(_c7){console.error("Get the palette categories fail.");_c3.getCategoriesDeferred.reject(_c7);});}}return this.getCategoriesDeferred.promise;},sortCategoryItems:function(_c8){dojo.forEach(_c8,dojo.hitch(this,function(_c9){if(_c9.items!=null){_c9.items.sort(this.compareItem);}if(_c9.categories!=null){this.sortCategoryItems(_c9.categories);}if(!_c9.name){var _ca=builder.Environment.categories&&builder.Environment.categories[_c9.id];_c9.name=_ca||_c9.id;}if(_c9.id==""){defaultCategory=_c9;}}));_c8.sort(this.compareCategory);return _c8;},getCategoryComponents:function(_cb){return this.getCategories().then(function(_cc){var len=_cc.length;for(var i=0;i<len;i++){if(_cc[i].id==_cb){return _cc[i].items;}}});}});});},"builder/util/FileResolver":function(){define(["dojo/_base/declare"],function(_cd){return _cd("builder.util.FileResolver",null,{fileURL:"",constructor:function(_ce){this.fileURL=_ce;},getFileName:function(){return null;},getFilePath:function(){return this.fileURL;},getFullPathUnderPublic:function(){return "/public/"+this.getFilePath();},getFullPathUnderView:function(){return "/app/views/"+this.getFilePath();},getFullPathUnderScript:function(){return "/app/scripts/"+this.getFilePath();},getFullPathRelatedWithFlow:function(_cf){if(this.fileURL.indexOf("/")==0){return this.getFullPathUnderPublic();}else{return new utils.FileResolver(_cf).getFullPathUnderPublic()+this.fileURL;}},getFullPathUnderAssembleModels:function(){return "/app/assemble/models/"+this.getFilePath();},getFileDirectory:function(){var _d0=this.getFilePath().lastIndexOf("/");if(_d0>0){return this.getFilePath().substring(0,_d0);}else{return "";}}});});},"builder/command/ChangeComponentItemNameCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/command/ChangeComponentNameCommand"],function(_d1,_d2,_d3){return _d1("builder.command.ChangeComponentItemNameCommand",[_d3],{item:null,constructor:function(id,_d4,_d5){this.inherited(arguments);this.item=_d5;},execute:function(){this.inherited(arguments);this.item.updateAfterNameChange();},undo:function(){this.inherited(arguments);this.item.updateAfterNameChange();}});});},"builder/vsys/command/DisablePropertyWidgetCommand":function(){define(["dojo/_base/declare","builder/base/command/Command"],function(_d6,_d7){return _d6("builder.vsys.command.DisablePropertyWidgetCommand",[_d7],{constructor:function(_d8,_d9){this.component=_d8;if(!_d8.propertiesWidget){_d8.createPropertiesWidget();}this.propsMap=_d8.propertiesWidget.propsMap;this.propertyId=_d9;},execute:function(){this.propsMap[this.propertyId].disableReferenceEditing();},undo:function(){this.propsMap[this.propertyId].enableReferenceEditing();}});});},"builder/command/RemoveComponentCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/util/Util","builder/command/ChangePropertyCommand","builder/util/CommandFactoryUtil"],function(_da,_db,_dc,_dd,_de){return _da("builder.command.RemoveComponentCommand",[_db],{modelId:null,type:null,properties:null,position:null,layerId:null,compoundCmd:null,ismini:null,constructor:function(_df){this.model=_df;this.modelId=_df.id;this.type=_df.metadata.id;this.properties=_df.properties;this.groups=_df.groups;this.position=_df.getPosition();if(_df.layer){this.layerId=_df.layer.id;}this.isAppPolicy=_df.isAppPolicy();},execute:function(){var _e0=this;var _e1=builder.Environment.diagram.getComponentById(this.modelId);if(_e1.componentFrame){this.ismini=_e1.ismini;}this.locked=_e1.locked;this.compoundCmd=new builder.base.command.CompoundCommand();var _e2=_e1.getAttachedPolicies();for(var i=_e2.length-1;i>=0;i--){var cmd=_de.getCommmandFactory().getRemovePolicyCommand(_e2[i]);this.compoundCmd.add(cmd);}dojo.forEach(_e1.incomingConnections,dojo.hitch(this,function(_e3){if(_e3.isSubComponentLink()){return;}var cmd=new builder.command.RemoveConnectionCommand(_e3);this.compoundCmd.add(cmd);}));dojo.forEach(_e1.outgoingConnections,dojo.hitch(this,function(_e4){var cmd=new builder.command.RemoveConnectionCommand(_e4);this.compoundCmd.add(cmd);}));this.compoundCmd.execute();if(_e1.layer){_e1.layer.removeComponent(_e1);}_e1.remove();builder.Environment.diagram.resetSurfaceArea();dojo.publish("onDiagramChanged",null);if(this.isAppPolicy){_dc.locateAppPolicy(builder.Environment.diagram);}},undo:function(){var _e5={id:this.modelId,type:this.type,properties:this.properties,groups:this.groups,position:this.position,locked:this.locked,loadFromModel:true};var _e6=builder.Environment.diagram.addComponentByType(_e5);var _e7=builder.Environment.diagram.getLayerById(this.layerId);_e7&&_e7.addComponent(_e6);_e6.showWidget(this.position,this.ismini);builder.Environment.diagram.resetSurfaceArea();this.compoundCmd.undo();builder.Environment.diagram.selectModel(_e6);dojo.publish("onDiagramChanged",null);if(this.isAppPolicy){_dc.locateAppPolicy(builder.Environment.diagram);}_e6.checkValidation&&_e6.checkValidation();},canExecute:function(){if(this.model.isReferenced()){dojo.publish("/builder/editor/notification",[["info","REFER_COMPONENT_NOT_REMOVED"]]);return false;}return true;}});});},"builder/workbench/linksView/ListCollapsibleSection":function(){define(["dojo/_base/declare","builder/workbench/componentsView/CollapsibleSection","dojo/text!./templates/ListCollapsibleSection.html"],function(_e8,_e9,_ea){return _e8("builder.workbench.linksView.ListCollapsibleSection",[_e9],{templateString:_ea,appModel:null,label:"",postCreate:function(){this.inherited(arguments);this.items=new Array();dojo.connect(this.addRowButton,"onclick",dojo.hitch(this,"addRow"));this.initializeData();},setAppModel:function(_eb){this.appModel=_eb;},initializeData:function(){},addRow:function(){var row=this.contentTable.insertRow(-1);var _ec=this.createRowData(row);if(_ec!=null){dojo.connect(_ec,"deleteItem",dojo.hitch(this,"deleteRow",this.items.length));this.items.push(_ec);}},createRowData:function(row){return null;},deleteRow:function(_ed){var _ee=this.items[_ed];_ee.destroy();delete this.items[_ed];this.items[_ed]=null;this.items.splice(_ed,1);},getItems:function(){return this.items;},destroy:function(){dojo.forEach(this.items,function(_ef){_ef.destroyRecursive();});}});});},"builder/workbench/editor/ComponentFigureFrame":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/_base/lang","dojo/_base/array","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentFigureFrame.html","builder/workbench/editor/ComponentFrame"],function(_f0,_f1,_f2,_f3,_f4,_f5,_f6,_f7){return _f0("builder.workbench.editor.ComponentFigureFrame",[_f1,_f4,_f5,_f7],{templateString:_f6,widgetsInTemplate:true,component:null,toolbar:null,readOnlyMode:false,eventHandles:null,badgeWidgets:null,constructor:function(){this.available_policy_hint=paas.Base.messages.Available_Policy_Hint;this.scanningHint=builder.Environment.messages.ARTIFACT_SCANNING;this.addButtonDefinition();},addButtonDefinition:function(){var _f8={title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_REMOVE_TITLE,imageUrl:"/tooling/images/close_normal.png",hoverImageUrl:"/tooling/images/close_normal_hover.png",eventHandler:dojo.hitch(this,this.onDelete)};var _f9={title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_HELP_TITLE,eventHandler:dojo.hitch(this,this.onHelp),imageUrl:"/tooling/images/suggest_normal.png",hoverImageUrl:"/tooling/images/suggest_normal_hover.png",isReadOnly:true};var _fa={title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_MOVE_TO_TITLE,imageUrl:"/tooling/images/layer/move_to_layer_normal.png",hoverImageUrl:"/tooling/images/layer/move_to_layer_hover.png",eventHandler:dojo.hitch(this,this.moveTo),iconClass:"toolbar_moveto"};var _fb={title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_STANDARDVIEW_TITLE,eventHandler:dojo.hitch(this,this.toStandardView),imageUrl:"/tooling/images/toolbar/standard_view.png",hoverImageUrl:"/tooling/images/standard_view_hover.png",isReadOnly:true};var _fc={title:paas.Base.messages.COMPONENT_FIGURE_FRAME_PRECONFIG_BTN_TITLE,eventHandler:dojo.hitch(this,this.onAddComponent),imageUrl:"/tooling/images/add_palette.png",hoverImageUrl:"/tooling/images/add_palette_hover.png",isReadOnly:true,enableRole:window.globalSetting.isCATALOG_CREATOR};this.buttons=[_fb,_fa,_fc,_f8,_f9];},createToolbar:function(){this.toolbar=new builder.workbench.editor.ModelToolbar({onDelete:dojo.hitch(this,this.onDelete)});_f3.forEach(this.buttons,_f2.hitch(this,function(_fd){if(_fd.enableRole!==false){_fd.eventHandler=_fd.eventHandler||_fd.todo;var _fe=new builder.workbench.editor.ToolbarItem(_fd);this.toolbar.addItem(_fe);if(_fd.iconClass){dojo.addClass(_fe.domNode,_fd.iconClass);}}}));this.toolbarContainer.style.display="none";this.toolbarContainer.appendChild(this.toolbar.domNode);},postCreate:function(){var _ff=this;this.addPolicyBtn=this.policyShortcutContainer;this.setName(this.component.id);this.createToolbar();this.backgroundCreate();this.registerEvents();this._setFigureMovable();this._setDndTarget();this.badgeWidgets={};dojo.forEach(this.component.getAttachedPolicies(),function(_100){_ff.appendPolicy(_100);});this.appendFigureToDiagram(this.component.position);this.createPort();this.appendConnectionPort();if(this.component.readOnly){this.setUnchangable();}else{if(this.component.isReferenced()){this.setReferenced();}}dojo.subscribe("/builder/artifact/scanning",dojo.hitch(this,function(_101,_102){if(_102.id==this.component.id){if(this.scanContainer){this.scanContainer.style.display=_101?"":"none";}}}));},backgroundCreate:function(){this.figureImage.style.background="url("+builder.util.FileUtil.getComponentFigurePath(this.component.metadata.image)+") no-repeat center";this.figureImage.style.width="64px";this.figureImage.style.height="64px";dojo.addClass(this.backImageContainer,builder.util.CssUtil.getComponentBakImgByType(this.component.metadata.type));},onSelected:function(evt){dojo.addClass(this.frameBorderContainer,"compSelected");this.toolbarContainer.style.display="";if(this.connectionPort&&this.connectionPort.domNode){this.connectionPort.domNode.style.display="";}this.component.showPropertiesWidget();this.focus();},onUnselect:function(){dojo.removeClass(this.frameBorderContainer,"compSelected");this.toolbarContainer.style.display="none";if(this.connectionPort&&this.connectionPort.domNode){this.connectionPort.domNode.style.display="none";}this.policyShortcutContainer.style.display="none";if(this.policyWidget&&this.policyWidget.domNode){this.policyWidget.destroyRecursive();}if(this.moveToLayerDlg&&this.moveToLayerDlg.domNode){this.moveToLayerDlg.destroyRecursive();}this.blur();},registerEvents:function(){this.inherited(arguments);this.eventHandles.push(dojo.connect(this.domNode,"onmousedown",this,function(e){var _103=builder.base.dnd.dragManager.getDropTarget(e);if(_103&&builder.base.dnd.isChild(this.domNode,_103.domNode)){return;}this.component.diagram.selectModel(this.component);}));this.eventHandles.push(dojo.connect(this.nameNode,"onChange",this,"onNameChange"));this.eventHandles.push(dojo.connect(this.domNode,"onmouseenter",this,"onHover"));this.eventHandles.push(dojo.connect(this.domNode,"onmouseleave",this,"onUnHover"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseover",this,"showTooltip"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseout",this,"hideTooltip"));this.eventHandles.push(dojo.connect(this.domNode,"onmouseenter",this,"showPolicyShortcutContainer"));this.eventHandles.push(dojo.connect(this.domNode,"onmouseleave",this,"hidePolicyShortcutContainer"));this.eventHandles.push(dojo.connect(this.policyShortcutContainer,"onclick",this,"onShowPolicies"));},toStandardView:function(evt){if(evt){dojo.stopEvent(evt);}this.component.changeComponentView();},appendPolicy:function(_104){var _105=_104.metadata.display;if(_105&&_105.autoAttach){dojo.style(_104.componentFrame.domNode,"display","none");if(this.component.isSelected()){this.component.showPropertiesWidget();}}if(_105&&_105.widgetType){dojo["require"](_105.widgetType);var _106=new dojo.getObject(_105.widgetType)({"policy":_104,"componentID":this.component.id});this.outerDisplayContainer.appendChild(_106.domNode);dojo.style(this.outerDisplayContainer,"display","block");this.badgeWidgets[_104.id]=_106;}this.rebuildPropertiesWidget(_104);},removePolicy:function(_107){if(this.badgeWidgets[_107.id]!=null){var _108=this.badgeWidgets[_107.id];dijit.registry.remove(_108);_108.destroyRecursive();delete this.badgeWidgets[_107.id];}this.rebuildPropertiesWidget(_107);},remove:function(){this.inherited(arguments);if(this.badgeWidgets){for(key in this.badgeWidgets){var _109=this.badgeWidgets[key];dijit.registry.remove(_109);_109.destroyRecursive();}}},rebuildPropertiesWidget:function(_10a){if(_10a.metadata.type=="component"&&this.component.propertiesWidget){this.component.rebuildPropertiesWidget();if(this.component.isSelected()){this.component.showPropertiesWidget();}var self=this;var _10b=this.component.getAttachedPolicies();if(_10b){dojo.forEach(_10b,function(_10c){if(_10c.metadata.type=="policy"){if(self.badgeWidgets[_10c.id]!=null){self.badgeWidgets[_10c.id].refreshBadgeWidget();}}});}}},calculateShowPosition:function(){var _10d=builder.util.Util.coords(this.policyShortcutContainer,true);var left=_10d.x+12;var top=_10d.y+12;return {"left":left,"top":top};},moveTo:function(evt){if(evt){dojo.stopEvent(evt);}if(this.moveToLayerDlg&&this.moveToLayerDlg.domNode){return;}var _10e=builder.util.Util.coords(this.domNode,true);var left=_10e.x+_10e.w;var top=_10e.y+20;var dlg=new builder.workbench.MoveToLayerDialog({component:this.component});dlg.show();dlg.setLocation(left,top);this.moveToLayerDlg=dlg;},_checkPolicyIsValid:function(_10f){for(var i=0;i<this.component.incomingConnections.length;i++){if(_10f.id==this.component.incomingConnections[i].fromComponent.metadata.id){return false;}}return true;},showPolicyShortcutContainer:function(){if(builder.base.dnd.dragManager.currentDragSource!=null){return;}if(this.component.metadata.type!="policy"){this.policyShortcutContainer.style.display="";}this.updateAddPolicyButton();},hidePolicyShortcutContainer:function(){if(this.component.diagram.selectedModel===this.component){return;}this.policyShortcutContainer.style.display="none";},disableToolbar:function(){if(this.toolbar&&this.toolbar.setUnchangable){this.toolbar.setUnchangable();}},enable:function(){this.inherited(arguments);if(dojo.isIE==8&&document.documentMode==8){dojo.removeClass(this.frameBorderContainer,"disabledLayer");dojo.removeClass(this.statusContainer,"disabledLayer");dojo.removeClass(this.figureImage,"disabledLayer");dojo.removeClass(this.backImageContainer,"disabledLayer");}if(!this.component.readOnly){if(this.figureMoveable===null){this._setFigureMovable();}}},disable:function(){this.inherited(arguments);if(dojo.isIE==8&&document.documentMode==8){dojo.addClass(this.frameBorderContainer,"disabledLayer");dojo.addClass(this.statusContainer,"disabledLayer");dojo.addClass(this.figureImage,"disabledLayer");dojo.addClass(this.backImageContainer,"disabledLayer");}this.unResigterMove();},removePort:function(){if(this.connectionPort){this.connectionPort.destroyRecursive();}},onHover:function(){if(builder.base.dnd.dragManager.currentDragSource!=null){return;}if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","");}this.updateAddPolicyButton();},onUnHover:function(){if(this.component.diagram.selectedModel===this.component){return;}if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","none");}},remove:function(){this.inherited(arguments);if(this.moveToLayerDlg&&this.moveToLayerDlg.domNode){this.moveToLayerDlg.destroy();this.moveToLayerDlg=null;}},setReferenced:function(){if(this.isReferenced===true){return;}this.inherited(arguments);if(this.toolbar&&this.toolbar.setUnchangable){this.toolbar.setUnchangable();}},setUnchangable:function(){if(this.readOnlyMode===true){return;}this.inherited(arguments);}});});},"builder/workbench/editor/EditorTabContainer":function(){define(["dojo/_base/declare","dijit/layout/TabContainer","dojox/html/entities","builder/workbench/orderView/OrderContainer","builder/workbench/orderView/OrderController"],function(_110,_111,_112,_113,_114){return _110("builder.workbench.editor.EditorTabContainer",[_111],{subscribeHandles:null,constructor:function(){this.subscribeHandles=[];this.subscribeHandles.push(dojo.subscribe("onDiagramChanged",this,function(){dojo.byId("modificationIndicator").innerHTML="*";dojo.byId("modificationIndicator").title=builder.Environment.messages.BUILEDER_LALEL_WITHOUT_SAVE;builder.Environment.diagram.changed=true;}));this.subscribeHandles.push(dojo.subscribe("onDiagramSaved",this,function(){dojo.byId("modificationIndicator").innerHTML="";builder.Environment.diagram.changed=false;}));},selectChild:function(page,_115){this.inherited(arguments);window.location.hash=page.id;if(page.id=="editorTab"){var _116=builder.Environment.diagram;if(_116.selectedModel){_116.selectModel(_116.selectedModel);}_116.repaintDataDependencyConnections();}else{if(page.id=="sourceArea"){this.getSourceMarkup();}else{if(page.id=="listArea"){this.getSourceListView();}else{if(page.id=="orderArea"){this.getOrderView();}else{if(page.id=="componentsArea"){this.getComponentsView();}else{if(page.id=="linksArea"){this.getLinksView();}}}}}}},uninitialize:function(){dojo.forEach(this.subscribeHandles,dojo.unsubscribe);},getSourceMarkup:function(){var _117=new builder.service.DiagramToJson(builder.Environment.diagram).getModel();delete _117.tooling;var str=dojo.toJson(_117,true);var _118=dojox.html.entities.encode(str);if(dojo.isIE){dojo.style(builder.Environment.source,{"padding-top":"5px","border-top":"none"});builder.Environment.source.innerHTML="<pre style='border-top: none; border-bottom: none; padding-top:0px;'>"+_118+"</pre>";}else{builder.Environment.source.innerHTML=_118;}dojo.style(builder.Environment.source,"display","");dojo.style(dijit.byId("sourceEditor").domNode,"display","none");},getSourceListView:function(){builder.Environment.listViewContainer.innerHTML="";if(builder.Environment.listView){builder.Environment.listView.destroyRecursive();}builder.Environment.listView=new builder.workbench.listView.ListView({appModel:builder.Environment.diagram});builder.Environment.listViewContainer.appendChild(builder.Environment.listView.domNode);},getOrderView:function(){_114.displayOrderView();},getComponentsView:function(){builder.Environment.componentsViewContainer.appendChild(builder.Environment.componentsView.domNode);},getLinksView:function(){builder.Environment.linksViewContainer.appendChild(builder.Environment.linksView.domNode);}});});},"builder/util/ValidationUtil":function(){define(["dojo/_base/lang","builder/util/Util","builder/util/array","dojo/_base/array","builder/util/CapabilityUtil","builder/vsys/util/VSysUtil","dojo/string"],function(lang,_119,_11a,_11b,_11c,_11d,_11e){var _11f=lang.getObject("builder",true);var _120=lang.getObject("util.ValidationUtil",true,_11f);_120=_11f.util.ValidationUtil={patternLevelCompName:"pattern",getScannableFile:function(_121){if(!_121.properties){return null;}var type=null;if(_121.getType){type=_121.getType();}if(!type){return null;}var _122=null;if(arguments.length>1){_122=this.getScannableAttributeByType(type,arguments[1]);}else{_122=this.getScannableAttributeByType(type);}if(_122==null){return null;}return _121.properties[_122.id];},getScannableAttributeByType:function(_123){if(!_123){return null;}var _124=_11f.util.Util.getMetadataService().getComponentMetadata(_123);if(_124==null||_124.attributes==null){return null;}if(arguments.length>1){for(var i=0;i<_124.attributes.length;i++){if(_124.attributes[i].scannable&&_124.attributes[i].id===arguments[1]){return _124.attributes[i];}}}else{for(var i=0;i<_124.attributes.length;i++){if(_124.attributes[i].scannable){return _124.attributes[i];}}}return null;},getComponentFileById:function(_125,_126){var type=component.getType();if(!("archive" in component.properties)){return null;}return component.properties.archive;},getValidationResult:function(_127){var _128=this.checkAttributeValidation(_127);if(_127&&_127.metadata&&"component"===_127.metadata.type){var _129=_127.getAttachedPolicies();dojo.forEach(_129,function(_12a){var _12b=this.checkAttributeValidation(_12a);if(!_12b.result){return;}_128.result=true;_128.description=_128.description.concat(_12b.description);},this);this.checkCapabilityValidation(_128,_127);this.checkLicenseStatus(_128,_127,_129);}var _12c=this.getScannableFile(_127);if(_12c){var _12d=this.checkArtifactValidation(_127,_12c);_128.description=_128.description.concat(_12d);_128.result=(_12d.length==0)?_128.result:true;_128.level=(_12d.length==0)?"":"error";var _12e=this.checkMissingReferences(_127,_12c);_128.description=_128.description.concat(_12e);_128.result=(_12e.length==0)?_128.result:true;}var _12f=this.checkAttributeConstraintValidation(_127);_128.description=_128.description.concat(_12f);_128.result=(_12f.length==0)?_128.result:true;return _128;},checkLicenseStatus:function(_130,_131,_132){var _133=_11f.Environment.messages;if(_131.metadata.licenseaccepted){if(_131.metadata.licenseaccepted==="F"){_130.description.push(_11e.substitute(_133.APPMODEL_VSYSNEXT_LICENSE_NOT_ACCEPTED,[_131.id]));_130.result=true;}}_11b.forEach(_132,function(_134){if(_134.metadata.licenseStatus===false){_130.description.push(_11e.substitute(_133.APPMODEL_VSYSNEXT_LICENSE_NOT_ACCEPTED,[_134.id]));_130.result=true;return;}if(_134.metadata.licensestatus==="F"){_130.description.push(_11e.substitute(_133.APPMODEL_VSYSNEXT_LICENSE_NOT_ACCEPTED,[_134.id]));_130.result=true;}});},checkCapabilityValidation:function(_135,_136){var _137=_136.getAttachedPolicies();var _138=_136.getCombinedProvides();_11b.forEach(_137,function(item){var _139=item.getMetadataRequires();if(_139){if(_139["components"]){return;}var _13a=_11c.matches(_138,_139);if(_13a==null){return;}for(var _13b in _13a){var _13c=dojo.string.substitute(_11f.Environment.messages.APPMODEL_TOOLING_MISMATCH_REQUIRES,[_13b,item.id]);_135.description.push(_13c);}}});},checkSubComponentCapability:function(_13d,_13e){var _13f=_11d.getJsonObjectByPath(_13d,"capabilities","requires");var _140=_13e.getCombinedProvides();if(_13f){if(_13f["components"]){return {"match":true};}var _141=_11c.matches(_140,_13f);if(_141==null){return {"match":true};}var _142="";for(var _143 in _141){_142=_142+_143+", ";}return {"match":false,"reqKeys":_142.substring(0,_142.length-2)+" "};}return {"match":true};},checkAttributeConstraintValidation:function(_144){if(!_144.metadata){return [];}var _145=_144.metadata.constraints;if(!_145){return [];}if(!_144.metadata.attributes){return [];}if(_144.metadata.type!="link"){return [];}var _146=[];for(var j=0;j<_145.length;j++){if(_145[j].type=="ANY"){var _147=_144.metadata.constraints[j].attributes;if(this.isEmpty(_147)){return [];}var _148=0;var _149=_144.properties;for(var k in _149){if(_11f.util.array.contains(_147,k)){if(dojo.isArray(_149[k])&&!this.isEmpty(_149[k])){_148++;}else{if(!dojo.isArray(_149[k])&&_149[k]){_148++;}}}}var _14a=_144.propertyMetadata;var _14b={};var _14c=[];dojo.forEach(_14a,function(_14d,m){if(!(_14d&&_14d.referenceType&&(!_14d.options||_14d.options.length==0))){_14c.push(_14d.id);_14b[_14d.id]=_14d.label;}});if(_148==0){var _14e="";dojo.forEach(_147,function(data,i){if(_11f.util.array.contains(_14c,data)){_14e=_14e.concat(_14b[data]+", ");}});var _14f=dojo.string.substitute(_11f.Environment.messages.APPMODEL_TOOLING_ANY_ONE_PROPERTY_REQUIRED,[_14e.substring(0,_14e.length-2)]);_146.push(_14f);}}}return _146;},isEmpty:function(_150){var x;for(var key in _150){if(x!==key&&_150.hasOwnProperty(key)){return false;}}return true;},checkArtifactValidation:function(_151,_152){var _153=_11f.service.AppBindingService.getInvalidArtifact(_151.id,_152);return _153||[];},checkAttributeValidation:function(_154,_155){return this.checkRequiredMetadata(_154.metadata,_154.properties,_154.groups,_155);},checkRequiredMetadata:function(_156,_157,_158,_159){var _15a=false;var _15b=[];if(!_156){return {result:false,description:_15b};}if(_156.enabled===false){_15a=true;var msg=null;if(_156.type==="component"){msg=_11f.Environment.messages.COMPONENT_DISABLED;}else{if(_156.type==="policy"){msg=_11f.Environment.messages.POLICY_DISABLED;}else{if(_156.type==="link"){msg=_11f.Environment.messages.CONNECTION_DISABLED;}}}if(_159){_15b.push({propName:null,des:msg});}else{_15b.push(msg);}}if(_156.deprecated==true){_15a=false;var msg=null;if(_156.type==="component"){msg=_11f.Environment.messages.COMPONENT_DEPRECATED;}if(_159){_15b.push({propName:null,des:msg});}else{_15b.push(msg);}}var _15c=_156.groups;dojo.forEach(_156.attributes,function(data){if(!data.required){return;}var _15d=data.id;if(false===this.isGroupEnable(_15d,_15c,_158)){return;}var _15e=_157[_15d];if((_15e===""||_15e===null)||(_15e===undefined)||(data.type=="number"&&isNaN(_15e)&&_15e.indexOf("$")==-1)){_15a=true;if(_159){_15b.push({propName:_15d,des:dojo.string.substitute(_11f.Environment.messages.APPMODEL_TOOLING_ATTRIBUTE_REQUIRED,[data.label])});}else{_15b.push(dojo.string.substitute(_11f.Environment.messages.APPMODEL_TOOLING_ATTRIBUTE_REQUIRED,[data.label]));}}},this);return {result:_15a,description:_15b};},isGroupEnable:function(_15f,_160,_161){if(!_160||!_161||!dojo.isArray(_160)){return true;}var _162=null;for(var i=0;i<_160.length;i++){if(_11f.util.array.contains(_160[i].attributes,_15f)){_162=_160[i].id;break;}if(_160[i].groups){for(var j=0;j<_160[i].groups.length;j++){if(_11f.util.array.contains(_160[i].groups[j].attributes,_15f)){_162=_160[i].groups[j].id;break;}}}}if(!_162){return true;}var _163=_161[_162];if(_163===undefined){_163=false;}return _163;},componentNameCheck:function(_164,_165,_166){var _167=this.validateUnique(_164,_165,_166);if(_167.isValid===false){return _167;}var _168={isValid:true,messager:""};var _169=/^[a-zA-Z0-9_\- ]+$/;if(!_169.exec(_166)){_168.isValid=false;_168.messager=_11f.Environment.messages.APPMODEL_TOOLING_INVALID_NAME;return _168;}if(_166&&_166.toLowerCase()=="pattern"){_168.messager=_11f.Environment.messages.APPMODEL_TOOLING_INVALID_NAME_PATTERN;_168.isValid=false;return _168;}return _168;},validateUnique:function(_16a,_16b,_16c){var _16d={isValid:true,messager:""};_16c=dojo.trim(_16c||"");if(_16c==null||_16c.length==0){_16d.isValid=false;_16d.messager=_11f.Environment.messages.APPMODEL_TOOLING_NONEMPTY_NAME;return _16d;}for(var id in _16a){var _16e=_16a[id];if(_16e!=_16b&&_16e.id===_16c){_16d.isValid=false;_16d.messager=_11f.Environment.messages.APPMODEL_TOOLING_DUPLICATED_NAME;return _16d;}}return _16d;},validateChars:function(str){var _16f={isValid:true,message:""};return _16f;},validateImportLayers:function(_170,resp){var _171={isValid:true,message:""};if(resp.references){var refs=resp.references;var _172={};for(var i=0;i<refs.length;i++){if(refs[i]===_170.appId){_171.isValid=false;_171.message=_11f.Environment.messages.APPMODEL_TOOLING_CYCLIC_REFERENCE;return _171;}_172[refs[i]]=true;}var _173=_170.layers;var _174=resp.layers[0].referenceID;for(var i=0;i<_173.length;i++){if(!_173[i].isReferenced()){continue;}if(_173[i].referenceID===_174){_171.isValid=false;_171.message=_11f.Environment.messages.APPMODEL_TOOLING_DUPLICATE_REFERENCE;return _171;}refs=_173[i].references;for(var j=0;j<refs.length;j++){if(_172[refs[j]]===true){_171.isValid=false;_171.message=dojo.string.substitute(_11f.Environment.messages.APPMODEL_TOOLING_DUPLICATED_REFERENCE,[refs[j]]);return _171;}_172[refs[j]]=true;}}}return _171;},validateApp:function(){var _175=false;var self=this;dojo.forEach(_11f.Environment.diagram.components,function(_176){_175=_175||self.getValidationResult(_176).result;});dojo.forEach(_11f.Environment.diagram.connections,function(_177){_175=_175||self.getValidationResult(_177).result;});return _175;},getSatisfiedReferences:function(_178,_179){var _17a=[];var _17b=_179.outgoingConnections;dojo.forEach(_178,function(_17c){var _17d=_17c.referenceValue;var _17e=false;if(_17c.links){for(var i=0;i<_17c.links.length;i++){var link=_17c.links[i];for(var j=0;j<_17b.length;j++){var _17f=_17b[j];if(_17f.getType()===link.type){var _180=_17f.properties[link.referenceAttribute];if(this.isReferenceSatisfied(_180,_17d)){_17e=true;_17a.push({"referenceValue":_17d,"referenceType":_17c.referenceType,"referenceKey":_17c.referenceKey,"referenceAttribute":link.referenceAttribute,"connectionId":_17f.getId()});break;}}}if(_17e){break;}}}},this);return _17a;},isReferenceSatisfied:function(_181,_182){if(dojo.isArray(_181)){return dojo.some(_181,function(_183){return _183===_182;});}else{return _181===_182;}},getMissingReferences:function(_184,_185){var _186=_11f.service.AppBindingService.getBindingsByMatches(_184,_185);var _187=this.getSatisfiedReferences(_186,_184);return dojo.filter(_186,function(_188){return dojo.every(_187,function(_189){return (_189.referenceValue!==_188.referenceValue||_189.referenceKey!==_188.referenceKey||_189.referenceType!==_188.referenceType);});});},checkMissingReferences:function(_18a,_18b){var _18c=this.getMissingReferences(_18a,_18b);var _18d=[];dojo.forEach(_18c,dojo.hitch(this,function(_18e){var _18f=this._createAppScanMessge(_18e);_18d.push(_18f);}));return _18d;},_createAppScanMessge:function(_190){var _191=" ";var _192=[];if(_190.links){var ms=_11f.util.Util.getMetadataService();dojo.forEach(_190.links,function(link){var _193;var _194=link.target;dojo.forEach(_194,function(_195){var _196=ms.getComponentMetadata(_195);if(_196){var _197=_196.label;var _198=_11f.util.Util.splitName(_197);if(_198.shortName){_193=_198.shortName;}else{if(_198.longName){_193=_198.longName;}}}if(_193){if(!_11f.util.array.contains(_192,_193)){_192.push(_193);}}});});}var _199=_190.referenceValue.split("#");var _19a=_190.referenceValue;if(_199.length>=2){_19a=_199[1];}if(_192.length==0){var _19b=_190.moduleName?_11f.Environment.messages.APPMODEL_TOOLING_APP_SCAN_WARNING_MESSAGE_0:_11f.Environment.messages.APPMODEL_TOOLING_APP_SCAN_WARNING_MESSAGE_2;return dojo.string.substitute(_19b,[_190.referenceKey,_19a,_190.moduleName]);}_191=_192[0];for(var i=0;i<_192.length;i++){if(i==0){continue;}_191=_191+"/"+_192[i];}var _19b=_190.moduleName?_11f.Environment.messages.APPMODEL_TOOLING_APP_SCAN_WARNING_MESSAGE_1:_11f.Environment.messages.APPMODEL_TOOLING_APP_SCAN_WARNING_MESSAGE_3;return dojo.string.substitute(_19b,[_190.referenceKey,_19a,_191,_190.moduleName]);},supportedConnection:function(_19c,_19d,_19e){if(_19e==null||_19e=="undefined"){_19e=true;}if(_19c===_19d){return false;}if(_19d&&_19d.isAppPolicy()){return false;}if(_19d.layer&&!_19d.layer.enabled){_11f.util.ValidationUtil._publishMessage([["warning","APPMODEL_TOOLING_LINK_NOT_ALLOWED_DISABLED"]],_19e);return false;}var _19f=_11f.util.Util.getMetadataService().getConnectionMetadata(_19c.metadata.id,_19d.metadata.id);if(!_19f){_11f.util.ValidationUtil._publishMessage([["warning","APPMODEL_TOOLING_LINK_NOT_ALLOWED",_19c.metadata.label,_19d.metadata.label]],_19e);return false;}var _1a0=false;if(_19f.type=="policyLink"){var _1a1=_19f.id;for(var i=0;i<_19d.incomingConnections.length;i++){if(_1a1==_19d.incomingConnections[i].metadata.id){_1a0=true;break;}}}if(_1a0){_11f.util.ValidationUtil._publishMessage([["warning","APPMODEL_TOOLING_SAME_POLICYTYPE",_19d.id]],_19e);return false;}if(_19f.type=="policyLink"){if(_19c.outgoingConnections.length>=1){_11f.util.ValidationUtil._publishMessage([["warning","APPMODEL_TOOLING_DUPLICATED_POLICY",_19c.id]],_19e);return false;}}if(_19c.isReferenced()&&_19d.isReferenced()&&_19c.layer==_19d.layer){_11f.util.ValidationUtil._publishMessage([["warning","BUILDER_LAYER_REFERENCE_NO_OPERATION"]],_19e);return false;}if(_19f.multiplicity){var _1a2=0;var _1a3=0;for(var i=0;i<_19c.outgoingConnections.length;i++){if(_19f.id===_19c.outgoingConnections[i].metadata.id){_1a2++;}}for(var i=0;i<_19d.incomingConnections.length;i++){if(_19f.id===_19d.incomingConnections[i].metadata.id){_1a3++;}}if(_19f.multiplicity=="one-to-one"){if(_1a2>=1||_1a3>=1){_11f.util.ValidationUtil._publishMessage([["warning","APPMODEL_TOOLING_LINK_RELATIONSHIP_NOT_ALLOWED",_19c.metadata.label,_19d.metadata.label]],_19e);return false;}}else{if(_19f.multiplicity=="one-to-many"){if(_1a2>=1){_11f.util.ValidationUtil._publishMessage([["warning","APPMODEL_TOOLING_LINK_RELATIONSHIP_NOT_ALLOWED",_19c.metadata.label,_19d.metadata.label]],_19e);return false;}}else{if(_19f.multiplicity=="many-to-one"){if(_1a3>=1){_11f.util.ValidationUtil._publishMessage([["warning","APPMODEL_TOOLING_LINK_RELATIONSHIP_NOT_ALLOWED",_19c.metadata.label,_19d.metadata.label]],_19e);return false;}}}}}if(_19e&&_19f.maxOccurs&&_19f.maxOccurs!==-1){var _1a4=0;for(var i=0;i<_19c.outgoingConnections.length;i++){if(_19f.id===_19c.outgoingConnections[i].metadata.id){_1a4++;}}if(_1a4>=_19f.maxOccurs){_11f.util.ValidationUtil._publishMessage([["warning","BUILDER_LAYER_EXCEEDED_CONNECTION_LIMIT"]],_19e);return false;}}return true;},_publishMessage:function(_1a5,_1a6){if(_1a6){dojo.publish("/builder/editor/notification",_1a5);}},validateAppModel:function(_1a7,_1a8){var _1a9={isValid:true,result:[]};var _1aa=["nodes","links"];dojo.forEach(_1aa,function(type,_1ab){var _1ac=_1ab==0?true:false;dojo.forEach(_1a7[type],function(_1ad){var type=_1ad.type;var _1ae=_1ac?_1a8.getComponentMetadata(type):_1a8.getConnectionMetadataByType(type);var _1af=this.validatePlugin(_1ad,_1ae);if(_1af.isValid===false){_1a9.isValid=false;_1a9.result=_1a9.result.concat(_1af.result);}},this);},this);return _1a9;},validatePlugin:function(_1b0,_1b1){var _1b2={isValid:true,isPluginLevel:false,result:[]};if(!_1b1){return _1b2;}var _1b3=_11f.Environment.messages;if(this.isDeprecated(_1b1)){_1b2.isValid=false;_1b2.isPluginLevel=true;_1b2.result.push(dojo.string.substitute(_1b3.PLUGIN_DEPRECATED,[_1b1.label]));return _1b2;}var _1b4=_1b1.attributes;dojo.forEach(_1b4,function(_1b5){if(this.isDeprecated(_1b5)){_1b2.isValid=false;_1b2.result.push(dojo.string.substitute(_1b3.ATTRIBUTE_DEPRECATED,[_1b5.id,_1b1.label]));}},this);return _1b2;},isDeprecated:function(_1b6){return _1b6.deprecated===true;},allowDataDependsOnBetweenComps:function(_1b7,_1b8){if((_1b7.isReferenced()&&_1b7.layer)||(_1b8.layer&&_1b8.isReferenced())){this._publishMessage([["warning","INVALID_DATA_DEPENDENCY_CONNECTION_3"]],true);return false;}else{return this.allowDataDependsOnBetweenTypes(_1b7.metadata.id,_1b8.metadata.id);}},allowDataDependsOnBetweenTypes:function(_1b9,_1ba){var _1bb=_119.getComponentRootType(_1b9);var _1bc=_119.getComponentRootType(_1ba);if(_1bb==="IMAGE"&&(_1bc==="PART"||_1bc==="SCRIPT_PACKAGE")){this._publishMessage([["warning","INVALID_DATA_DEPENDENCY_CONNECTION_1"]],true);return false;}return true;},validateDataDependsOnValue:function(_1bd,_1be){if(!_1be){return {valid:false,message:_11f.Environment.messages.INVALID_VALUE_FORMAT};}var _1bf=_1be.match(_11d.getDataDependencyRegexp());if(_1bf&&_1bf instanceof Array&&_1bf.length>0){for(var i=0;i<_1bf.length;i++){var _1c0=this.validateComponentAndAttriubte(_1bd,_1bf[i]);if(!_1c0.valid){return _1c0;}}return {valid:true};}return {valid:false,message:_11f.Environment.messages.INVALID_VALUE_FORMAT};},validateComponentAndAttriubte:function(_1c1,_1c2){if(_1c2&&_1c2.indexOf("${"+this.patternLevelCompName+".")===0){var _1c3=_1c2.substring(this.patternLevelCompName.length+3,_1c2.length-1);for(var i=0;i<_11f.Environment.diagram.patternAttrMetadata.length;i++){if(_11f.Environment.diagram.patternAttrMetadata[i].id==_1c3){_1c4=true;break;}}if(!_1c4){return {valid:_1c4,message:_11f.Environment.messages.INVALID_ATTRIBUTE_ID+_1c3};}return {valid:true};}var _1c5=_11f.Environment.diagram.components;var _1c6=_1c2.substring(2,_1c2.indexOf("."));if(_11d.dataDependsCompIDClusterPattern.test(_1c6)){_1c6=_1c6.substring(0,_1c6.indexOf("["));}var _1c3=_1c2.substring(_1c2.indexOf(".")+1,_1c2.length-1);var _1c7=false;var _1c4=false;var _1c8=null;for(var i=0;i<_1c5.length;i++){if(_1c5[i].id===_1c6){_1c7=true;_1c8=_1c5[i];break;}}if(!_1c7){return {valid:_1c7,message:_11f.Environment.messages.INVALID_COMPONENT_ID+_1c6};}if(!this.allowDataDependsOnBetweenComps(_1c1,_1c1.diagram.getComponentById(_1c6))){return {valid:false,message:_11f.Environment.messages.INVALID_DATA_DEPENDENCY_CONNECTION_1};}var _1c9=_1c8.metadata.outputs;for(var j=0;j<_1c9.length;j++){if(_1c9[j].id===_1c3){_1c4=true;break;}}if(!_1c4){return {valid:_1c4,message:_11f.Environment.messages.INVALID_ATTRIBUTE_ID+_1c3};}return {valid:true};}};return _120;});},"paas/widgets/ConfirmDialogExt":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ConfirmDialog.html","dijit/Dialog"],function(_1ca,_1cb,_1cc,_1cd,_1ce,_1cf){return _1ca("paas.widgets.ConfirmDialogExt",[_1cb,_1cc,_1cd],{templateString:_1ce,confirmMsg:"",widgets_confirmdialog_yes:null,widgets_confirmdialog_no:null,widgets_confirmdialog_title:null,action:null,constructor:function(){this.widgets_confirmdialog_yes=paas.Base.messages.BUILDER_EDITOR_CONFIRMDIALOG_OK;this.widgets_confirmdialog_no=paas.Base.messages.BUILDER_EDITOR_CONFIRMDIALOG_CANCEL;this.widgets_confirmdialog_title=paas.Base.messages.widgets_confirmdialog_title;},postMixInProperties:function(){this.inherited(arguments);try{this.confirmMsg=eval(this.confirmMsg);}catch(ex){}},postCreate:function(){dojo.connect(this.confirmBtn,"onClick",this,"onConfirm");dojo.connect(this.cancelBtn,"onClick",this,"onCancel");},show:function(){this.confirmDialog.show();},hide:function(){this.confirmDialog.hide();},uninitialize:function(){this.confirmDialog.destroyRecursive();},set:function(name,_1d0){if(name==="message"){this.confirmMsgContent.innerHTML=_1d0;return;}this.inherited(arguments);},onCancel:function(){this.hide();},onConfirm:function(){this.hide();}});});},"builder/workbench/property/PolicySection":function(){define(["dojo/_base/declare","dijit/TitlePane","builder/util/array"],function(_1d1,_1d2,_1d3){return _1d1("builder.workbench.property.PolicySection",[_1d2],{policyPropWidgets:null,propertyViewId:"propertyView",constructor:function(){this.policyPropWidgets=[];this.defaultParentWidget=builder.Environment.propertyView;},clearData:function(){this.policyPropWidgets.length=0;},addChildWidget:function(_1d4){if(_1d4.propertiesWidget==null){_1d4.propertiesWidget=_1d4.createPropertiesWidget();}if(!_1d3.contains(this.policyPropWidgets,_1d4.propertiesWidget)){this.policyPropWidgets.push(_1d4.propertiesWidget);}if(!_1d3.contains(this.containerNode.childNodes,_1d4.propertiesWidget.domNode)){this.containerNode.insertBefore(_1d4.propertiesWidget.domNode,this.containerNode.lastChild);}},toggleDisplay:function(_1d5){dojo.style(this.domNode,"display",_1d5);dojo.forEach(this.policyPropWidgets,function(_1d6){_1d6.domNode&&dojo.style(_1d6.domNode,"display",_1d5);});},moveOutPropNodes:function(){var _1d7=this.defaultParentWidget.domNode?this.defaultParentWidget.domNode:dijit.byId(this.propertyViewId).domNode;dojo.forEach(this.policyPropWidgets,function(_1d8){if(!_1d8.domNode){return;}_1d7.insertBefore(_1d8.domNode,_1d7.lastChild);});this.policyPropWidgets.length=0;},uninitialize:function(){this.toggleDisplay("none");this.moveOutPropNodes();},selectChild:function(_1d9){if(!_1d3.contains(this.policyPropWidgets,_1d9)){return;}this.open===false&&this.set("open",true);dojo.forEach(this.policyPropWidgets,function(_1da){if(_1da===_1d9){_1da.open===false&&_1da.set("open",true);}else{_1da.open===true&&_1da.set("open",false);}});_1d9.focus();}});});},"builder/workbench/editor/LayerItem":function(){define(["dojo/_base/declare","builder/util/CssUtil","dijit/Toolbar","dijit/InlineEditBox","dijit/form/Select","builder/workbench/editor/ComponentFrame"],function(_1db,_1dc,_1dd,_1de,_1df,_1e0){return _1db("builder.workbench.editor.LayerItem",[_1df],{enableImgUrl:"/tooling/images/layer/eye_enable.png",disableImgUrl:"/tooling/images/layer/eye_disable.png",subscribes:null,constructor:function(){this.options=this.createOptions();this.subscribes=[];this.diagram=builder.Environment.diagram;},postCreate:function(){this.inherited(arguments);this._overrideDefaultStyle();this.set("title",builder.Environment.messages.COMPONENT_LAYER_HINT);this.subEvents();if(this.diagram.layers.length===1){dojo.style(this.domNode,"display","none");}},subEvents:function(){this.subscribes.push(dojo.subscribe("/layer/add",this,function(_1e1){if(!_1e1.isReferenced()){this.addOption(this.createLayerOption(_1e1));}if(this.diagram.layers.length>1){dojo.style(this.domNode,"display","");}}));this.subscribes.push(dojo.subscribe("/layer/remove",this,function(_1e2){this.removeOption(_1e2.id);if(this.diagram.layers.length===1){dojo.style(this.domNode,"display","none");}}));this.subscribes.push(dojo.subscribe("/layer/nameChange",this,function(_1e3,_1e4){var id=this.get("value");this.removeOption(_1e3);var _1e5=builder.Environment.diagram.getLayerById(_1e4);if(_1e5!=null){this.addOption(this.createLayerOption(_1e5));}if(id===_1e3){this.set("value",_1e4);}}));this.subscribes.push(dojo.subscribe("/layer/changeStatus",this,"changeLayerStatus"));},changeLayerStatus:function(_1e6){var id=this.get("value");if(_1e6!=null){this.removeOption(_1e6.id);this.addOption(this.createLayerOption(_1e6));}if(id===_1e6.id){this.set("value",id);}},_overrideDefaultStyle:function(){dojo.style(this.containerNode.parentNode,"border","none");dojo.style(this.titleNode,"display","none");},createOptions:function(){var _1e7=builder.Environment.diagram.layers;var _1e8=[];dojo.forEach(_1e7,function(_1e9){if(_1e9.isReferenced()){return;}_1e8.push(this.createLayerOption(_1e9));},this);return _1e8;},createLayerOption:function(_1ea){var obj={};var _1eb=builder.Environment.messages;var _1ec="<span><img style='vertical-align: middle;' ";var _1ed=" src="+(_1ea.enabled?this.enableImgUrl:this.disableImgUrl);_1ed=_1ed+"  alt="+(_1ea.enabled?_1eb.APPMODEL_TOOLING_STATUS_NODE_ENABLE:_1eb.APPMODEL_TOOLING_STATUS_NODE_DISABLE);var end=" />&nbsp;&nbsp;"+_1ea.id+"</span>";obj.label=_1ec+_1ed+end;obj.value=_1ea.id;return obj;},uninitialize:function(){dojo.forEach(this.subscribes,dojo.unsubscribe);}});});},"builder/workbench/AppPolicyWidget":function(){define(["dojo/_base/declare","builder/workbench/PolicyWidget","builder/command/AddAppPolicyCommand","builder/service/PatternTypeService","paas/common/SolutionUtil"],function(_1ee,_1ef,_1f0,_1f1,_1f2){return _1ee("builder.workbench.AppPolicyWidget",[_1ef],{diagram:null,constructor:function(){this.diagram=builder.Environment.diagram;this.connects=[];},createItems:function(){this.buttons=[];var _1f3=[];var self=this;var _1f4=this.diagram.plugins;if(this.diagram.isLocked()&&!this.diagram.isFoundationLocked()){_1f4=_1f2.getPlugins(this.diagram.patterntype,this.diagram.version,false);}var ms=_1f1.getMetadataService(_1f4);dojo.forEach(this.diagram.components,function(_1f5){if(_1f5.isSubComponent()){return;}var _1f6=ms.getComponentPoliciesByType(_1f5.metadata.id);dojo.forEach(_1f6,function(_1f7){if(_1f7.type!="policy"){return;}if(!builder.util.array.contains(_1f3,_1f7)){_1f3.push(_1f7);}});});for(var i=0;i<_1f3.length;i++){var _1f8=_1f3[i];if(!this._checkPolicyIsValid(_1f8)){continue;}this.addItem(_1f8);this.noPolicy=false;}},_checkPolicyIsValid:function(_1f9){if(_1f9.supportGlobalPolicy===false){return false;}for(var i=0;i<this.diagram.components.length;i++){var _1fa=this.diagram.components[i];if(_1fa.isAppPolicy()&&_1fa.metadata.id==_1f9.id){return false;}}return true;},addItem:function(data){var opt={icon:builder.util.FileUtil.getComponentIconPath(data.thumbnail),data:data,open:this.open,root:this.root};var item=new builder.workbench.PolicyItem(opt);this.policyContainer.appendChild(item.domNode);this.connects.push(dojo.connect(item.domNode,"onclick",this,function(e){this.addPolicy(e,data);}));},addPolicy:function(_1fb,_1fc){dojo.stopEvent(_1fb);this.destroyRecursive();var _1fd={x:"0px",y:"0px"};var _1fe={type:_1fc.id};var cmd=new _1f0(_1fe,_1fd);builder.Environment.commandStack.executeCommand(cmd);},uninitialize:function(){dojo.forEach(this.connects,dojo.disconnect);}});});},"paas/widgets/DateTimeTextBoxExt":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/TimeTextBox","dijit/form/DateTextBox","dojo/text!./templates/DateTimeTextBoxExt.html"],function(_1ff,_200,_201,_202,_203,_204,_205){return _1ff("paas.widgets.DateTimeTextBoxExt",[_200,_201,_202],{templateString:_205,postCreate:function(){this.dateWidget.set("value",new Date());this.timeWidget.set("value",new Date());dojo.connect(this.dateWidget,"onChange",this,"onChange");dojo.connect(this.timeWidget,"onChange",this,"onChange");},_setValueAttr:function(_206){var date=new Date(_206);this.dateWidget.set("value",date);this.timeWidget.set("value",date);},_getValueAttr:function(){var date=this.dateWidget.get("value");var time=this.timeWidget.get("value");date.setHours(time.getHours(),time.getMinutes(),time.getSeconds(),time.getMilliseconds());return date.getTime();},onChange:function(){},isValid:function(){return true;}});});},"builder/vsys/workbench/editor/DataDependsOnConnectionMiniFrame":function(){define(["dojo/_base/declare","builder/workbench/editor/ConnectionFrame","builder/vsys/workbench/editor/VSysMiniLink","builder/vsys/util/VSysMiniPaintUtil","builder/util/Util","builder/util/CssUtil","builder/vsys/util/VSysUtil"],function(_207,_208,_209,_20a,util,_20b,_20c){return _207("builder.vsys.workbench.editor.DataDependsOnConnectionMiniFrame",[_208],{isMiniView:true,postCreate:function(){this.inherited(arguments);},paint:function(_20d){if(this.connection.delegated){if(!this.link){this.link=this._createLink();}var _20e=this.getPositionObj(this.connection.fromComponent,this.connection.toComponent,this.connection);this.inportPos=_20e.inportPos;this.outportPos=_20e.outportPos;var _20f=_20b.getLinkStyleByComponentType(this.connection.fromComponent.metadata.type);this.link.setStyle(_20f);this.link.paint(this.outportPos,this.inportPos,this.connection.selected,this.connection.mode);var _210=true;if((this.connection.fromComponent.layer&&!this.connection.fromComponent.layer.enabled)||(this.connection.toComponent.layer&&!this.connection.toComponent.layer.enabled)){_210=false;}this.setStrokeOpacity(_210);this.annotation.paint(this.outportPos,this.inportPos);if(!this.connection.selected){this.removeToolbar();}if(this.connection.selected){this.showToolbar(_20d);}this.locateStatusContainer();}else{return;}},_createLink:function(){var link=new _209(this.connection.diagram);return link;},getPositionObj:function(){return _20a.getPosition(this.connection.fromComponent,this.connection.toComponent,this.connection);},setStrokeOpacity:function(_211){var _212=_211?1:0.2;if(dojo.isIE){this.link.pathShape.rawNode.stroke.opacity=_212;}else{this.link.pathShape.rawNode.setAttribute("stroke-opacity",_212);}},registerEvents:function(){if(this.connection.delegated){var self=this;if(!this.eventHandles){this.eventHandles=[];this.eventHandles.push(dojo.connect(this.link,"onclick",this,function(evt){var _213=self.connection.fromComponent;var _214=self.connection.toComponent;var _215=_20c.findHostedOnTarget(_213.outgoingConnections);var _216=_20c.findHostedOnTarget(_214.outgoingConnections);if(_215&&_215.ismini){_215.componentFrame.toStandardView();}else{if(_213.ismini){_213.componentFrame.toStandardView();}}if(_216&&_216.ismini){_216.componentFrame.toStandardView();}else{if(_214.ismini){_214.componentFrame.toStandardView();}}}));}}else{}}});});},"builder/base/dnd/Avatar":function(){define(["dojo/_base/declare"],function(_217){return _217("builder.base.dnd.Avatar",null,{constructor:function(){this.node=this.makeSimpleAvatar();},makeSimpleAvatar:function(){var a=dojo.doc.createElement("table");a.className="dojoDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dojo.doc.createElement("tbody");var _218=builder.base.dnd.dragManager.currentDragSource;var _219=_218.domNode.cloneNode(true);_219.style.position="relative";_219.style.left="";_219.style.top="";if(_219.tagName.toLowerCase()==="tr"){dojo.addClass(_219,"dojoDndAvatarItem");b.appendChild(_219);}else{var tr=dojo.doc.createElement("tr");tr.className="dojoDndAvatarItem";if(_219.tagName.toLowerCase()==="td"){tr.appendChild(_219);}else{var td=dojo.doc.createElement("td");td.appendChild(_219);tr.appendChild(td);}b.appendChild(tr);}a.appendChild(b);return a;},makeDojoStyleAvatar:function(){var a=dojo.doc.createElement("table");a.className="dojoDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dojo.doc.createElement("tbody");var tr=dojo.doc.createElement("tr");tr.className="dojoDndAvatarHeader";var td=dojo.doc.createElement("td");td.innerHTML=this._generateText();tr.appendChild(td);dojo.style(tr,"opacity",0.9);b.appendChild(tr);var _21a=builder.base.dnd.dragManager.currentDragSource;tr=dojo.doc.createElement("tr");tr.className="dojoDndAvatarItem";td=dojo.doc.createElement("td");node=_21a.domNode.cloneNode(true);node.id="";td.appendChild(node);tr.appendChild(td);dojo.style(tr,"opacity",0.9);b.appendChild(tr);a.appendChild(b);return a;},destroy:function(){dojo._destroyElement(this.node);this.node=false;},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");var t=this.node.getElementsByTagName("td");for(var i=0;i<t.length;++i){var n=t[i];if(dojo.hasClass(n.parentNode,"dojoDndAvatarHeader")){n.innerHTML=this._generateText();break;}}},_generateText:function(){return "Dragging...";},updateDragOffset:function(){var _21b=dojo.html.getScroll().offset;if(_21b.y!=this.scrollOffset.y){var diff=_21b.y-this.scrollOffset.y;this.dragOffset.y+=diff;this.scrollOffset.y=_21b.y;}if(_21b.x!=this.scrollOffset.x){var diff=_21b.x-this.scrollOffset.x;this.dragOffset.x+=diff;this.scrollOffset.x=_21b.x;}},onDragMove:function(e){this.updateDragOffset();var x=this.dragOffset.x+e.pageX;var y=this.dragOffset.y+e.pageY;if(this.constrainToContainer){if(x<this.constraints.minX){x=this.constraints.minX;}if(y<this.constraints.minY){y=this.constraints.minY;}if(x>this.constraints.maxX){x=this.constraints.maxX;}if(y>this.constraints.maxY){y=this.constraints.maxY;}}this.setAbsolutePosition(x,y);dojo.event.topic.publish("dragMove",{source:this});}});});},"builder/workbench/property/ContainerPropertiesWidget":function(){define(["dojo/_base/declare","builder/workbench/property/PropertiesWidget","paas/common/SolutionUtil"],function(_21c,_21d,_21e){return _21c("builder.workbench.property.ContainerPropertiesWidget",[_21d],{postCreate:function(){this.inherited(arguments);},createTitleWidget:function(){this.titleImageNode.src="/tooling/images/cloud/ac22_application_24.png";this.titleNameNode.innerHTML=builder.Environment.messages.CONTAINER_PROP_TITLE_WIDGET_TITLE;this.helpBtn.style.display="none";},createNameWidget:function(){},createPropertiesWidget:function(){this.inherited(arguments);if(!window.saveType||window.saveType==this.properties.type){this.propsMap["type"].setUnchangable();}},updatePropertyWidget:function(_21f,_220){this.inherited(arguments);if(_21f==="name"){builder.Environment.modelService.setWindowTitle(_220);}},onPropertyChange:function(args){this.inherited(arguments);if(args[1]==="type"){if(args[0]===this.model.id){var _221=(args[2]==="template")?true:false;var _222=["components","connections"];dojo.forEach(_222,function(_223){dojo.forEach(this.model[_223],function(_224){dojo.publish("onApplicationTypeChange",[[_224.id,_221]]);},this);},this);}}if(args[1]==="locked"){if(args[2]==="3"){this.model.plugins=_21e.getPlugins(this.model.patterntype,this.model.version);this.model.images=_21e.getDefaultImage();}else{if(args[2]==="2"){this.model.plugins=_21e.getPlugins(this.model.patterntype,this.model.version,true);this.model.images=_21e.getDefaultImage();}else{delete this.model.plugins;delete this.model.images;dojo.publish("pubUnlocked",[{itemVar:"unlocked"}]);builder.Environment.modelService.unlockModel();}}}}});});},"builder/workbench/componentsView/OperationListCollapsibleSection":function(){define(["dojo/_base/declare","builder/workbench/componentsView/ComponentOperation","builder/workbench/componentsView/ListCollapsibleSection"],function(_225,_226,_227){return _225("builder.workbench.componentsView.OperationListCollapsibleSection",[_227],{createRowData:function(row){var _228=new builder.workbench.componentsView.ComponentOperation({appModel:this.appModel},row);return _228;}});});},"builder/workbench/orderView/AddDependencyConnectionCommand":function(){define(["dojo/_base/declare","builder/workbench/editor/Connection","builder/base/command/Command","dojo/topic","builder/workbench/orderView/DependencyConnection","builder/workbench/orderView/DependencyConnectionCommandMixin"],function(_229,_22a,_22b,_22c,_22d,_22e){return _229("builder.workbench.orderView.AddDependencyConnectionCommand",[_22b,_22e],{connection:null,connectionId:null,fromComponentId:null,toComponentId:null,fromComponent:null,toComponent:null,fromOrderFrame:null,toOrderFrame:null,container:null,invisible:false,constructor:function(_22f,_230,_231){if(_231==true){this.invisible=true;}this.fromComponent=_22f;this.toComponent=_230;this.fromComponentId=_22f.id;this.toComponentId=_230.id;this.fromOrderFrame=_22f.orderFrame;this.toOrderFrame=_230.orderFrame;this.xShift=0;},execute:function(){this._changeTargetPosition();this._addDependencyConnection();this._disableUselessDependencyConnection();_22c.publish("onOrderingChanged");},undo:function(){this._removeDependencyConnection();this._restoreTargetPosition();_22c.publish("onOrderingChanged");},reexecute:function(){this._changeTargetPosition();this.connection.repaint();this._disableUselessDependencyConnection();}});});},"builder/workbench/editor/Container":function(){define(["dojo/_base/declare","builder/workbench/editor/PropertiesContainer","builder/workbench/editor/Component","builder/workbench/editor/Connection","builder/workbench/property/PropertiesEditable","builder/util/Util","builder/util/array","builder/service/PatternTypeService","paas/common/constants","builder/util/LayoutUtil"],function(_232,_233,_234,_235,_236,Util,_237,_238,_239,_23a){return _232("builder.workbench.editor.Container",[_233,_236],{components:null,connections:null,layers:null,currentLayer:null,name:null,patternAttrMetadata:null,patternAttrData:null,patternAttrLocked:null,subscribes:null,constructor:function(){this.subscribes=[];this.components=[];this.connections=[];this.layers=[];this.properties={};this.patternAttrMetadata=[];this.patternAttrData={};builder.util.Util.setDefaultProperties(this.propertyMetadata,this.properties);this.propertyMetadata=[{"advanced":false,"label":builder.Environment.messages.CONTAINER_PROP_METADATA_NAME_LABEL,"sampleValue":builder.Environment.messages.APPMODEL_DEFAULT_NAME,"invalidMessage":builder.Environment.messages.CONTAINER_PROP_METADATA_NAME_INVALID_LABEL,"type":"string","name":"name","id":"name","description":paas.Base.messages.CONTAINER_PROP_METADATA_NAME_DESC,"required":true,"regExp":"^[^<>!?]{1,64}"},{"advanced":false,"label":builder.Environment.messages.CONTAINER_PROP_METADATA_DESCRIPTION_LABEL,"sampleValue":"","type":"string","displayType":"multi-string","name":"description","id":"description","description":paas.Base.messages.CONTAINER_PROP_METADATA_DESCRIPTION_DESC,"required":false},{"advanced":false,"label":builder.Environment.messages.CONTAINER_PROP_METADATA_TYPE_LABEL,"displayType":"radio","sampleValue":"application","type":"string","name":"type","id":"type","description":paas.Base.messages.CONTAINER_PROP_METADATA_TYPE_DESC,"options":[{"value":"application","name":builder.Environment.messages.CONTAINER_PROP_METADATA_TYPE_LABEL_APPLICATION},{"value":"template","name":builder.Environment.messages.CONTAINER_PROP_METADATA_TYPE_LABEL_TEMPLATE}],"required":true},{"label":builder.Environment.messages.LOCK_OPTION,"sampleValue":"1","displayType":"radio","type":"string","id":"locked","description":paas.Base.messages.LOCKED_SOLUTION_DESC,"required":false,"options":[{"value":"1","name":builder.Environment.messages.PATTERN_UNLOCKED},{"value":"2","name":builder.Environment.messages.PATTERN_LOCK_FOUND_UNLOCK},{"value":"3","name":builder.Environment.messages.PATTERN_LOCKED}]}];this.watch("patterntype",function(attr,_23b,_23c){var self=this;if(_23c=="vsys"){var _23d={"label":builder.Environment.messages.PATTERN_ATTR_TITLE,"type":"string","id":"patternAttribute","name":"patternAttribute","description":paas.Base.messages.PATTERN_ATTR_DESC,"required":false,"widgetType":"paas.widgets.PatternAttrMainWidget"};this.propertyMetadata.push(_23d);var _23e={"advanced":false,"label":builder.Environment.messages.CONTAINER_PROP_METADATA_VAERSION_LABEL,"sampleValue":builder.Environment.messages.APPMODEL_DEFAULT_VERSION,"type":"string","name":"patternversion","id":"patternversion","description":paas.Base.messages.CONTAINER_PROP_METADATA_VERSION_DESC,"required":true,"regExp":".{1,64}"};this.propertyMetadata.splice(1,0,_23e);}});this.ps=builder.service.PatternTypeService;this.subscribes.push(dojo.subscribe("/builder/lockChange",this,"onLockChange"));},getUniqueId:function(_23f,_240,_241){var _242;_23f=_240?_240:_23f;var n=_23f.indexOf("(");if(n>0){_23f=dojo.trim(_23f.substring(0,n));}_23f=_23f.replace(/\./g,"_");if(_241){_23f=_23f.replace(/[^a-zA-Z0-9_\-: ]/g,"");}else{_23f=_23f.replace(/[^a-zA-Z0-9_\- ]/g,"");}if(_23f==""){_23f="Script";}var i=0;do{_242=(i==0)?_23f:(_23f+"_"+i);i++;}while(this.getComponentById(_242));return _242;},getUniqueLayerId:function(_243){var _244=2;var _245=_243||builder.Environment.messages.BUILDER_LAYER_TITLE;var _246=_245;while(this.getLayerById(_246)){_246=_245+_244;_244++;}return _246;},getConnectionById:function(id){if(!id){return null;}for(var i in this.connections){if(this.connections[i].id==id){return this.connections[i];}}return null;},getComponentById:function(id){if(!id){return null;}for(var i in this.components){if(this.components[i].id==id){return this.components[i];}}return null;},getModelById:function(id){var _247=this.getComponentById(id)||this.getConnectionById(id);if(!_247){if(id==_239.PatternAttrMainWidgetID){return null;}return this;}return _247;},getLayerById:function(_248){for(var i in this.layers){if(this.layers[i].id==_248){return this.layers[i];}}return null;},getExportedCapabilities:function(){var _249=[];for(var i=0;i<this.components.length;i++){_249=_249.concat(this.components[i].getExportedCapabilities());}return _249;},addComponent:function(_24a){this.components.push(_24a);_24a.container=this;},addComponentByType:function(args,_24b){var _24c=args.metadata;if(_24c==null){var ms=this.ps.getMetadataService(this.plugins,this.patterntype,this.version);_24c=ms.getComponentMetadata(args.type);}if(!_24c){return;}var _24d=_24c.displayId||_24c.id;var _24e=this.getUniqueId(_24d,args.id,_24b);args.componentId=_24e;args.metadata=_24c;args.diagram=this;var _24f=_23a.createComponentWidget(args);if(_24f){this.addComponent(_24f);}return _24f;},addConnectionByType:function(args){var ms=this.ps.getMetadataService(this.plugins,this.patterntype,this.version);var _250=(args.type!=null)?ms.getConnectionMetadataByType(args.type):ms.getConnectionMetadata(args.source.metadata.id,args.target.metadata.id,args.invisible);if(_250.length>1){return _250;}else{_250=dojo.clone(_250);var _251=this.getUniqueConnectionId(_250.id);var _252={id:_251,metadata:_250,diagram:builder.Environment.diagram};dojo.mixin(_252,args);var _253=_23a.createConnectionWidget(_252);if(_253){this.addConnection(_253);}return _253;}},getUniqueConnectionId:function(_254){var _255=_254.replace(":","_");var _256=1;var _257=_255+"_"+_256;while(this.getConnectionById(_257)){_256++;_257=_255+"_"+_256;}return _257;},removeComponent:function(_258){builder.util.array.remove(this.components,_258);},addConnection:function(_259){this.connections.push(_259);},removeConnection:function(_25a){builder.util.array.remove(this.connections,_25a);},getConnectionById:function(_25b){for(var i=0;i<this.connections.length;i++){if(this.connections[i].getId()===_25b){return this.connections[i];}}},addLayer:function(_25c){this.layers.push(_25c);},removeLayer:function(_25d){builder.util.array.remove(this.layers,_25d);},refreshLayer:function(){if(this.currentLayer){this.currentLayer.enable();}dojo.forEach(this.layers,function(_25e){if(this.currentLayer!=_25e){_25e.disable();}});},clean:function(){dojo.forEach(this.components,function(_25f){_25f.stopFileSending();if(this.selectedModel===_25f){this.selectModel(this);}_25f.removePropertiesWidget();if(_25f.componentFrame){_25f.componentFrame.remove();}dojo.forEach(_25f.subscribes,dojo.unsubscribe);},this);dojo.forEach(this.connections,function(_260){_260._removeWidget();if(_260.propertiesWidget){_260.propertiesWidget.destroyRecursive();}dojo.forEach(_260.subscribes,dojo.unsubscribe);});this.components=[];this.connections=[];this.layers=[];this.properties={};this.patternAttrMetadata=[];this.patternAttrData={};},checkValidation:function(){for(var i=0;i<this.components.length;i++){this.components[i].checkValidation();}for(var i=0;i<this.connections.length;i++){this.connections[i].checkValidation();}},getName:function(){return this.getProperty("name",builder.Environment.messages.APPMODEL_DEFAULT_NAME);},setName:function(_261){this.setProperty("name",_261);},getPatternVersion:function(){return this.getProperty("patternversion",builder.Environment.messages.APPMODEL_DEFAULT_VERSION);},setPatternVersion:function(_262){this.setProperty("patternversion",_262);},getType:function(){return this.getProperty("type","application");},setType:function(type){this.setProperty("type",type);},setDescription:function(_263){this.setProperty("description",_263);},getDescription:function(){return this.getProperty("description","");},isTemplate:function(){return "template"===this.getType();},setLocked:function(_264){this.setProperty("locked",_264);},isLocked:function(){var _265=this.getProperty("locked");return _265==="2"||_265==="3";},isFoundationLocked:function(){return this.getProperty("locked")==="3";},repaintDataDependencyConnections:function(){for(var i=0;i<this.connections.length;i++){if(this.connections[i].type===_239.DATA_DEPENDS_LINK){this.connections[i].paint();}}},getMetadataService:function(){return this.ps.getMetadataService(this.plugins,this.patterntype,this.version);},onLockChange:function(args){if(args[0]!=this.id){return;}if(args[1]===true){this.patternAttrLocked=this.patternAttrLocked||[];builder.util.array.add(this.patternAttrLocked,args[2]);}else{builder.util.array.remove(this.patternAttrLocked,args[2]);}var _266="${pattern."+args[2]+"}";dojo.forEach(builder.Environment.diagram.components,function(comp){dojo.forEach(comp.metadata.attributes,function(attr){var _267=comp.properties[attr.id];if(_267&&dojo.isString(_267)&&_267.indexOf(_266)>-1){dojo.publish("/builder/lockChange",[[comp.id,args[1],args[2]]]);dojo.publish("/builder/refreshLockStatus",[[comp.id]]);}});});},serialize:function(){var _268={};_268.name=this.getName();_268.description=this.getDescription()||"";_268["app_type"]=this.getType();if(this.patterntype=="vsys"){_268.patternversion=this.getPatternVersion();}if(this.isLocked()){_268.plugins=this.patternTypePlugins?this.patternTypePlugins:this.plugins;_268.images=this.images;_268.locked=true;if(this.isFoundationLocked()){_268.lock_foundation=true;}else{_268.lock_foundation=false;}}else{_268.locked=false;if(this.customizedPlugins){_268.plugins=this.customizedPlugins;}}if(this.patterntype){_268["patterntype"]=this.patterntype;}if(this.version){_268["version"]=this.version;}if(this.patternAttrMetadata.length>0){_268["attribute_metadata"]=dojo.clone(this.patternAttrMetadata);_268["attributes"]=dojo.clone(this.patternAttrData);if(this.patternAttrLocked&&this.patternAttrLocked.length>0){_268["lockedAttributes"]=this.patternAttrLocked;}}return _268;},addPatternAttributeMetadata:function(_269){var _26a=-1;var self=this;dojo.forEach(self.patternAttrMetadata,function(_26b,i){if(_26b["id"]==_269.id){_26a=i;}});if(_26a>=0){dojo.publish("/builder/editor/notification",[["warning",builder.Environment.messages.PATTERN_ATTR_DUPID]]);}else{this.patternAttrMetadata.push(_269);this.patternAttrData[_269.id]=_269.sampleValue;this.properties[_269.id]=_269.sampleValue;}},deletePatternAttributeMetadata:function(id){var _26c=-1;var self=this;dojo.forEach(self.patternAttrMetadata,function(_26d,i){if(_26d["id"]==id){_26c=i;}});if(_26c>=0){self.patternAttrMetadata.splice(_26c,1);}delete this.patternAttrData[id];},updatePatternAttributeMetadata:function(_26e){var _26f=-1;var self=this;dojo.forEach(self.patternAttrMetadata,function(_270,i){if(_270["id"]==_26e["id"]){_26f=i;}});if(_26f>=0){self.patternAttrMetadata[_26f]=_26e;}}});});},"builder/service/MetadataServiceExt":function(){define(["dojo/_base/declare","builder/util/Util","paas/common/constants","builder/util/array"],function(_271,Util,_272,_273){return _271("builder.service.MetadataServiceExt",null,{metadata:null,components:null,connections:null,operationMetadata:null,applicablePolicies:null,configurations:null,constructor:function(_274,_275,_276,_277){this.applicablePolicies={};this.plugins=_274;this.patterntype=_275;this.version=_276;if(_277){this.metadata=_277;this.components=_277.components;this.connections=_277.links;}},loadOperationMetadata:function(_278){if(this.operationMetadata){return this.operationMetadata;}var self=this;var _279=_278?"?deploymentId="+_278:"";var _27a={url:"/resources/operationMetadata/"+_279,load:function(resp,args){self.operationMetadata=resp;},error:function(type,_27b){return null;},handleAs:"json",sync:true};dojo.xhrGet(_27a);return this.operationMetadata;},getOperations:function(_27c,_27d){this.loadOperationMetadata(_27d);return this.operationMetadata[_27c];},getOperation:function(_27e,_27f,_280){this.loadOperationMetadata(_27f);var _281=this.operationMetadata[_27e];for(var _282 in _281){if(_281[_282].id==_280){return _281[_282];}}return null;},loadMetadata:function(_283){if(this.metadata){return this.metadata;}var self=this;var _284={plugins:this.plugins||[],patterntype:this.patterntype,version:this.version};var _285={url:"/resources/ApplicationModelMetadata",load:function(resp){self.metadata=resp;self.components=resp.components;self.connections=resp.links;},error:function(type,_286){return null;},headers:{"Content-Type":"application/json"},handleAs:"json",sync:_283?false:true,postData:dojo.toJson(_284)};return dojo.xhrPost(_285);},getComponents:function(){this.loadMetadata();return this.components;},getConnections:function(){this.loadMetadata();return this.connections;},getComponentMetadata:function(name){this.loadMetadata();return this.components[name];},getConnectionMetadataByType:function(type){this.loadMetadata();return this.connections[type];},containsComponentType:function(list,type){if(type!=null&&list!=null){if(typeof (list)=="string"){list=[list];}if(type instanceof Array){return dojo.some(type,function(item){return this.containsComponentType(list,item);},this);}else{if(_273.contains(list,type)){return true;}if(!this.components){return false;}var _287=this.components[type];if(_287){return this.containsComponentType(list,_287["extends"]);}}}return false;},isAbstractComponent:function(type){var _288=this.getComponentMetadata(type);return (_288&&_288["abstract"]===true);},getComponentPoliciesByType:function(type){if(this.applicablePolicies[type]){return this.applicablePolicies[type];}this.loadMetadata();var _289=[];var src=this.components[type];if(src&&src.type=="component"){for(var id in this.components){var _28a=this.components[id];if(_28a.applicableTo&&(_28a.applicableTo=="*"||this.containsComponentType(_28a.applicableTo,type))){_289.push(_28a);}}}this.applicablePolicies[type]=_289;return _289;},getChildrenComponents:function(_28b){this.loadMetadata();var _28c=[];for(var id in this.components){var _28d=this.components[id];if(_28d["extends"]!=null){if(_28d["extends"][0]===_28b){_28c.push(_28d);}}}return _28c;},getComponentTargetsByType:function(_28e){this.loadMetadata();var _28f=[];for(var id in this.connections){var _290=this.connections[id];if(this.containsComponentType(_290.source,_28e)){dojo.forEach(_290.target,dojo.hitch(this,function(_291){if(this.components[_291].type=="component"){_28f.push(this.components[_291]);}}));}}return _28f;},getComponentSourcesByType:function(_292){this.loadMetadata();var _293=[];for(var id in this.connections){var _294=this.connections[id];if(this.containsComponentType(_294.target,_292)){dojo.forEach(_294.source,dojo.hitch(this,function(_295){if(this.components[_295].type=="component"){_293.push(this.components[_295]);}}));}}return _293;},checkInvisibleLink:function(_296){return (_296.type==="policyLink"||_296.id===_272.HOSTED_ON_LINK||_296.id===_272.HOSTED_ON_LINK);},getConnectionMetadata:function(_297,_298,_299){if(_297==_298){return null;}this.loadMetadata();var _29a=[];for(var id in this.connections){var _29b=this.connections[id];if((!_299||this.checkInvisibleLink(_29b))&&(this.containsComponentType(_29b.source,_297)||(_273.contains(_29b.source,"*")&&this.components[_297].type=="component"))&&(this.containsComponentType(_29b.target,_298)||(_273.contains(_29b.target,"*")&&this.components[_298].type=="component"))){_29a.push(_29b);}}if(_29a.length==0){return null;}if(_29a.length==1){return _29a[0];}return _29a;},getConnectionMetadataById:function(id){this.loadMetadata();return this.connections[id];},getComponentIncomingConnections:function(_29c){this.loadMetadata();var _29d=[];for(var id in this.connections){var _29e=this.connections[id];if(this.containsComponentType(_29e.target,_29c)||_273.contains(_29e.target,"*")){_29d.push(_29e);}}return _29d;},getComponentOutgoingConnections:function(_29f){this.loadMetadata();var _2a0=[];for(var id in this.connections){var _2a1=this.connections[id];if(this.containsComponentType(_2a1.source,_29f)||_273.contains(_2a1.source,"*")){_2a0.push(_2a1);}}return _2a0;},getReferences:function(){var _2a2=this.getConnections();var _2a3=[];for(var id in _2a2){var _2a4=_2a2[id];if(_2a4.attributes){dojo.forEach(_2a4.attributes,function(_2a5){if(_2a5.referenceType){_2a3.push({type:id,referenceAttribute:_2a5.id,source:_2a4.source,target:_2a4.target,referenceType:_2a5.referenceType,referenceKey:_2a5.referenceKey});}});}}return _2a3;},loadConfigurations:function(){var self=this;return paasUtil.getDeferred("GET","/resources/configurationMetadata",null,true).addCallback(function(resp){self.configurations=resp;});},getConfigurationsByType:function(type){if(this.configurations==null){this.loadConfigurations();}return dojo.filter(this.configurations||[],function(iter){return iter.applicableTo&&dojo.some(iter.applicableTo,function(it){return it==type;});});},hasParentType:function(type,_2a6){var _2a7=this.getComponentMetadata(type);return this.containsComponentType(_2a6,_2a7["extends"]);}});});},"builder/vsys/workbench/editor/InterchangableMixin":function(){define(["dojo/_base/declare","builder/command/ChangeVersionCommand","builder/util/Util","dojo/store/Memory","dojo/data/ObjectStore","dojo/_base/lang","builder/vsys/util/VSysUtil"],function(_2a8,_2a9,Util,_2aa,_2ab,lang,_2ac){return _2a8("builder.vsys.workbench.editor.InterchangableMixin",null,{_getVersionList:function(){var _2ad=this.component.getParentType();var _2ae=[];if(_2ad!=null&&_2ad!="PART"){_2ae=Util.getMetadataService().getChildrenComponents(_2ad);}var _2af=[];dojo.forEach(_2ae,function(item){var _2b0=_2ac.getVersionFromMetadata(item);if(_2b0!=null){var name=_2ac.getNameFromMetadata(item);if(name!=""){var _2b1="<span title='"+name+"'>"+_2b0+"</span>";}else{var _2b1="<span>"+_2b0+"</span>";}_2af.push({"id":item.id,"name":_2b0,"label":_2b1});}});return _2af;},getVersionStore:function(_2b2){var _2b3=new _2aa({data:_2b2,idProperty:"id"});var os=new _2ab({objectStore:_2b3});return os;},initVersionFilter:function(){var _2b4=this._getVersionList();if(_2b4.length==0){dojo.style(this.versionFilter.domNode,"display","none");return;}var _2b5=this.store=this.getVersionStore(_2b4);if(this.versionFilter.setStore){this.versionFilter.setStore(_2b5);}else{this.versionFilter.set("store",_2b5);}this.setVersionFilterValue();if(_2b4.length===1){this.versionFilter.set("disabled",true);}this.versionFilter.on("change",lang.hitch(this,this.changeComponent));},setVersionFilterValue:function(){this.versionFilter.set("value",this.component.metadata.id);},changeComponent:function(_2b6){var cmd=new _2a9(this.component,_2b6);builder.Environment.commandStack.executeCommand(cmd);},updateComboboxValue:function(_2b7){this.versionFilter&&this.versionFilter.set("value",_2b7);},uninitialized:function(){if(this.store&&this.store.destroyRecursive){this.store.destroyRecursive();}}});});},"builder/workbench/editor/Link":function(){define(["dojo/_base/declare","builder/util/PaintUtil","builder/util/CssUtil"],function(_2b8,_2b9,_2ba){return _2b8("builder.workbench.editor.Link",null,{style:null,pathShape:null,surface:null,diagram:null,constructor:function(_2bb,_2bc){if(_2bb){this.setContainer(_2bb);}var _2bd=builder.util.CssUtil.getDefaultLinkStyle();this.style=_2bc||_2bd;},setContainer:function(_2be){this.diagram=_2be;this.surface=_2be.surface;},setStyle:function(_2bf){if(_2bf){for(var att in _2bf){this.style[att]=_2bf[att]||this.style[att];}}},paint:function(p1,p2,_2c0,mode,_2c1){var _2c2=_2c0?this.style.highlightcolor:this.style.color;var _2c3=this.style.width;var _2c4=(this.style.dashstyle==="dash")?this.style.dasharray:null;var _2c5=1;var _2c6=2;if(_2c1){}var _2c7={color:_2c2,width:_2c3,dasharray:_2c4,dashstyle:this.style.dashstyle,opacity:_2c5,join:_2c6};var _2c8={color:_2c2,width:_2c3,opacity:_2c5,join:_2c6};var path=builder.util.PaintUtil.getPath(p1,p2,mode);var _2c9=path.linePathD;var _2ca=path.arrowPathD;if(this.pathShape&&this.pathShape.rawNode){if(!(dojo.isIE)){this.pathShape.rawNode.setAttribute("d",_2c9);this.arrowPathShape.rawNode.setAttribute("d",_2ca);this.setPathShapeStyle(this.pathShape,_2c7);this.setPathShapeStyle(this.arrowPathShape,_2c8);}else{this.remove();this.pathShape=this.createPathShape(_2c9,_2c7);this.arrowPathShape=this.createPathShape(_2ca,_2c8);}}else{this.pathShape=this.createPathShape(_2c9,_2c7);this.arrowPathShape=this.createPathShape(_2ca,_2c8);}},createPathShape:function(path,_2cb){var _2cc=this.surface.createPath(path).setStroke(_2cb).setFill("none");if(!(dojo.isIE)){_2cc.rawNode.setAttribute("stroke-opacity",_2cb.opacity);if(_2cb.dasharray&&_2cb.dasharray!=0){_2cc.rawNode.setAttribute("stroke-dasharray",_2cb.dasharray);}_2cc.rawNode.setAttribute("style","cursor:pointer;");}else{_2cc.rawNode.stroke.opacity=_2cb.opacity;_2cc.rawNode.stroke.dashstyle=_2cb.dashstyle;_2cc.rawNode.stroke.miterlimit=_2cb.strokeMiterLimit;_2cc.rawNode.style.cursor="pointer";}dojo.connect(_2cc.rawNode,"onclick",this,"onclick");return _2cc;},setPathShapeStyle:function(_2cd,_2ce){_2cd.setStroke(_2ce);_2cd.rawNode.setAttribute("stroke-opacity",_2ce.opacity);if(_2ce.dasharray&&_2ce.dasharray!=0){_2cd.rawNode.setAttribute("stroke-dasharray",_2ce.dasharray);}else{_2cd.rawNode.removeAttribute("stroke-dasharray");}},onclick:function(){},remove:function(){if(this.pathShape){this.pathShape.removeShape();}if(this.arrowPathShape){this.arrowPathShape.removeShape();}this.pathShape=null;this.arrowPathShape=null;}});});},"builder/vsys/workbench/editor/AddonListWidget":function(){define(["dojo/_base/declare","builder/workbench/PolicyWidget","builder/vsys/util/VSysUtil","paas/common/constants"],function(_2cf,_2d0,_2d1,_2d2){return _2cf("builder.vsys.workbench.editor.AddonListWidget",[_2d0],{constructor:function(){this.AVILABLE_POLICIES_TITLE=builder.Environment.messages.APPMODEL_TOOLING_AVILABLE_ADDON_TITLE;},getNoPolicyMessage:function(){return builder.Environment.messages.APPMODEL_TOOLING_NO_AVIALABLE_ADDON;},_isConcreteAddOn:function(_2d3){if(_2d3["abstract"]){return false;}if(_2d1.isAddon(_2d3)){return true;}return false;},checkPolicyExtension:function(_2d4){return this._isConcreteAddOn(_2d4)&&_2d1.scriptComponentLicenseAccepted(_2d4);},createItems:function(){this.buttons=[];var self=this;var _2d5=builder.util.Util.getMetadataService().getComponentPoliciesByType(this.component.metadata.id);var _2d6={};for(var i=0;i<_2d5.length;i++){var _2d7=_2d5[i];if(_2d6[_2d7.displayId]){continue;}if(!this._checkPolicyIsValid(_2d7)){continue;}this.addItem(_2d7);_2d6[_2d7.displayId]=true;this.noPolicy=false;}}});});},"builder/workbench/orderView/SwapComponentsOrderCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","dojo/topic","paas/common/constants","dojo/_base/lang"],function(_2d8,_2d9,_2da,_2db,lang){return _2d8("builder.workbench.orderView.SwapComponentsOrderCommand",[_2d9],{orderRow:null,framesPosition:null,constructor:function(_2dc){this.firstExec=true;this.orderRow=_2dc;this.framesPosition=[];this.diagram=builder.Environment.diagram;this.storeOrderFramesPosition();},execute:function(){if(!this.firstExec){this.moveFramesForExecute();}this.firstExec=false;this.process("execute");},undo:function(){this.moveFramesForUndo();this.process("undo");},process:function(type){this._updateComponentsOrderByRow();this._updateConnetionsOrderByRow();_2da.publish("/Ordering/LinkablePolicyFrame/Orders",this.orderRow.orderFrames[0].component.id);builder.Environment.orderView.repaintOrderingView(type);_2da.publish("onOrderingChanged");},_updateComponentsOrderByRow:function(){var _2dd=this.diagram.components;var _2de=0;for(var i=0;i<_2dd.length;i++){if(!_2dd[i].orderFrame){continue;}if(_2dd[i].orderFrame.orderRow===this.orderRow){_2dd[i]=this.orderRow.orderFrames[_2de].component;_2de++;}}},_updateConnetionsOrderByRow:function(){var _2df=this.diagram.connections;var _2e0=[];for(var i=0;i<_2df.length;i++){if(_2df[i].metadata.id===_2db.HOSTED_ON_LINK&&_2df[i].target===this.orderRow.orderFrames[0].component){var _2e1=this.orderRow.orderFrames;for(var j=1;j<_2e1.length;j++){if(_2df[i].source===_2e1[j].component){_2e0.push({oldRef:_2df[i],indexInFrames:j});}}}}_2e0.sort(function(_2e2,_2e3){return _2e2.indexInFrames-_2e3.indexInFrames;});var _2e4=0;for(var k=0;k<_2df.length;k++){if(_2df[k].metadata.id===_2db.HOSTED_ON_LINK&&_2df[k].target===this.orderRow.orderFrames[0].component){if(this.orderRow.containComponent(_2df[k].source)){_2df[k]=_2e0[_2e4].oldRef;_2e4++;}}}},storeOrderFramesPosition:function(){var _2e5=this.orderRow.orderFrames;for(var i=0;i<_2e5.length;i++){var _2e6={frame:_2e5[i],currentLeft:_2e5[i].x};if(_2e5[i].previousLeft==undefined){_2e6.previousLeft=_2e5[i].x;}else{_2e6.previousLeft=_2e5[i].previousLeft;_2e5[i].previousLeft=null;}this.framesPosition.push(_2e6);}},moveFramesForExecute:function(){var _2e7=this.orderRow.orderFrames;for(var i=0;i<_2e7.length;i++){_2e7[i].setXPosition(this._findCurrentLeftByFrame(_2e7[i]));}},moveFramesForUndo:function(){var _2e8=this.orderRow.orderFrames;for(var i=0;i<_2e8.length;i++){_2e8[i].setXPosition(this._findPreviousLeftByFrame(_2e8[i]));}},_findCurrentLeftByFrame:function(_2e9){for(var i=0;i<this.framesPosition.length;i++){if(this.framesPosition[i].frame===_2e9){return this.framesPosition[i].currentLeft;}}},_findPreviousLeftByFrame:function(_2ea){for(var i=0;i<this.framesPosition.length;i++){if(this.framesPosition[i].frame===_2ea){return this.framesPosition[i].previousLeft;}}}});});},"builder/workbench/editor/PolicyFrame":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/PolicyFrame.html","builder/util/CssUtil","dijit/Toolbar","dijit/InlineEditBox","builder/util/CommandFactoryUtil","dijit/form/Select","builder/workbench/editor/ComponentFrame","builder/vsys/workbench/editor/InterchangableMixin","builder/util/Util","builder/vsys/util/VSysUtil","builder/workbench/orderView/OrderUtil","dojo/_base/array","builder/vsys/workbench/editor/DataDependsOnIconMixin"],function(_2eb,_2ec,_2ed,_2ee,_2ef,_2f0,_2f1,_2f2,_2f3,_2f4,_2f5,_2f6,Util,_2f7,_2f8,_2f9,_2fa){return _2eb("builder.workbench.editor.PolicyFrame",[_2ec,_2ed,_2ee,_2f5,_2f6,_2fa],{widgetsInTemplate:true,templateString:_2ef,component:null,buttons:null,constructor:function(){this.buttons=[{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_REMOVE_TITLE,todo:dojo.hitch(this,this.onDelete),iconClass:"frameToolbarIcon deleteIcon"},{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_HELP_TITLE,todo:dojo.hitch(this,this.onHelp),iconClass:"frameToolbarIcon helpIcon"}];this.attention_normal=paas.Base.messages.Status_Warning;},postCreate:function(){var data=this.component.metadata;this.imgNode.src=builder.util.FileUtil.getComponentIconPath(data.thumbnail);this.imgNode.alt=data.id;this.setName(data.label);if(_2f7.isAddon(data)){if(this.buttons){this.buttons.splice(2,3,{title:builder.Environment.messages.APPMODEL_TOOLING_MOVE_UP,todo:dojo.hitch(this,this.moveUp),iconClass:"frameToolbarIcon moveupIcon"},{title:builder.Environment.messages.APPMODEL_TOOLING_MOVE_DOWN,todo:dojo.hitch(this,this.moveDown),iconClass:"frameToolbarIcon movedownIcon"});}}if(!_2f7.isAddon(data)){this.nameNode.set("disabled",true);this.setName(data.label);}else{this.nameNode.set("disabled",false);this.setName(this.component.id);}this.createButtonsForToolbar();this.registerEvents();if(data.enabled==false){dojo.style(this.disablePolicy,"display","");}if(this.component.isReferenced()){this.layerNode.addOption(this.layerNode.createLayerOption(this.component.layer));}if(this.component.layer){this.setLayer(this.component.layer.id);}if(this.component.readOnly){this.setUnchangable();}else{if(this.component.isReferenced()){this.setReferenced();}}this.initVersionFilter();},setLayer:function(_2fb){this.layerNode.set("value",_2fb);},setName:function(name){var n=name.indexOf("(");if(n<=0){n=name.indexOf("（");}if(n>=0){name=name.substring(0,n);}this.nameNode.set("value",name||"");},createButtonsForToolbar:function(){var self=this;dojo.forEach(this.buttons,function(_2fc){var _2fd=new dijit.form.Button({title:_2fc.title,onClick:_2fc.todo,iconClass:_2fc.iconClass,showLabel:false,isReadOnly:_2fc.isReadOnly});self.toolbar.addChild(_2fd);});},helpWidget:null,onHelp:function(evt){dojo.stopEvent(evt);var _2fe=this.component.metadata;var _2ff=builder.util.Util.coords(this.domNode);if(!this.helpWidget||!this.helpWidget.domNode){this.helpWidget=new builder.workbench.editor.Help({metadata:_2fe,position:{left:_2ff.x,top:_2ff.y}});dojo.body().appendChild(this.helpWidget.domNode);this.helpWidget.setLocation(_2ff.x,_2ff.y);}else{this.helpWidget.setLocation(_2ff.x,_2ff.y);}this.helpWidget.focus();},onDelete:function(evt){if(evt){dojo.stopEvent(evt);}var cmd=_2f3.getCommmandFactory().getRemovePolicyCommand(this.component);builder.Environment.commandStack.executeCommand(cmd);},onSelected:function(){dojo.style(this.toolbar.domNode,"display","block");dojo.style(this.domNode,{"borderStyle":"dashed","borderColor":"gray"});this.component.showPropertiesWidget();this.focus();},onUnselect:function(){dojo.style(this.toolbar.domNode,"display","none");dojo.style(this.domNode,{"borderStyle":"solid","borderColor":"#D4D4D4"});this.blur();},onHover:function(evt){dojo.stopEvent(evt);if(builder.base.dnd.dragManager.currentDragSource!=null){return;}if(this.toolbar&&this.toolbar.domNode){dojo.style(this.toolbar.domNode,"display","block");}},onUnHover:function(evt){dojo.stopEvent(evt);if(this.component.diagram.selectedModel===this.component){return;}if(this.toolbar&&this.toolbar.domNode){dojo.style(this.toolbar.domNode,"display","none");}},onNameFocus:function(_300){if(!this.setTimeID){this.setTimeID=setTimeout("dojo.publish('onComponentChangeWidth')",300);}else{setTimeout("dojo.publish('onComponentChangeWidth')",120);}},remove:function(){if(this.helpWidget&&this.helpWidget.domNode){this.helpWidget.destroy();}this.destroyRecursive();},enable:function(){this.inherited(arguments);if(!this.component.isReferenced()&&!this.component.readOnly){this.layerNode.set("disabled",false);}},disable:function(){this.inherited(arguments);dojo.style(this.toolbar.domNode,"display","none");this.layerNode.set("disabled",true);},setReferenced:function(){if(this.isReferenced===true){return;}this.inherited(arguments);this.layerNode.set("disabled",true);this.disableToolbar();},setUnchangable:function(){if(this.readOnlyMode===true){return;}this.inherited(arguments);this.setReferenced();this.unregisterEvents();this.versionFilter.set("disabled",true);},disableToolbar:function(){var _301=this.toolbar.getChildren();if(!_301){return;}for(var i=0;i<_301.length;i++){if(!_301[i].isReadOnly){this.toolbar.removeChild(_301[i]);}}},onLayerChange:function(_302){if(this.component.layer.id===_302){return;}var cmd=new builder.command.MoveToLayerCommand(this.component,_302);builder.Environment.commandStack.executeCommand(cmd);},registerEvents:function(){this.inherited(arguments);this.eventHandles.push(dojo.connect(this.domNode,"onmousedown",this,function(evt){if(!_2f7.isAddon(this.component.metadata)){dojo.stopEvent(evt);}this.component.diagram.selectModel(this.component);}));this.eventHandles.push(dojo.connect(this.domNode,"onmouseenter",this,"onHover"));this.eventHandles.push(dojo.connect(this.domNode,"onmouseleave",this,"onUnHover"));this.eventHandles.push(dojo.connect(this.nameNode,"onChange",this,"onNameChange"));this.eventHandles.push(dojo.connect(this.nameNode,"onFocus",this,"onNameFocus"));this.eventHandles.push(dojo.connect(this.layerNode,"onChange",this,"onLayerChange"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseenter",this,"showTooltip"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseleave",this,"hideTooltip"));},getPosition:function(){return {x:"0px",y:"0px"};},moveUp:function(){_2f8.moveUp(this);},moveDown:function(){_2f8.moveDown(this);},_getVersionList:function(){var _303=this.component.getParentType();var _304=[];if(_303!=null&&_303!="PART"){var _305=this.component.getDisplayId();var _306=Util.getMetadataService().getChildrenComponents(_303);_2f9.forEach(_306,function(_307){if(_307.displayId===_305){_304.push(_307);}});}var _308=[];dojo.forEach(_304,function(item){var _309=_2f7.getVersionFromMetadata(item);if(_309!=null){_308.push({"id":item.id,"name":_309,"label":_309});}});return _308;},getInnerBox:function(){return Util.coords(this.domNode);}});});},"builder/service/ModelService":function(){define(["dojo/_base/declare","dojox/html/entities","builder/workbench/editor/Diagram","builder/service/JsonToDiagram","builder/service/DiagramToJson","builder/service/LayoutService","builder/util/FileUploadManager","builder/command/ChangeLayoutCommand","builder/util/UrlGenerator","builder/util/ValidationUtil","builder/workbench/ConfirmDialog","builder/workbench/listView/ListView","paas/common/SolutionUtil","paas/widgets/ConfirmDialogExt","builder/workbench/componentsView/ComponentsView","builder/workbench/linksView/LinksView","builder/util/Util","dojo/_base/array"],function(_30a,_30b,_30c,_30d,_30e,_30f,_310,_311,_312,_313,_314,_315,_316,_317,_318,_319,Util,_31a){return _30a("builder.service.ModelService",null,{diagram:null,componentsView:null,linksView:null,resourceURL:paas.common.constants.APPLICATION_REST_URL,applicationURL:null,constructor:function(_31b){this.diagram=_31b;this.applicationURL=this.resourceURL+encodeURI(this.diagram.appId);},createEmpty:function(){var _31c=new dojo.Deferred();_31c.callback(new builder.service.JsonToDiagram(this.diagram).load({"model":{"nodes":[],"links":[]},"tooling":{"nodes":[]},"layers":[{"nodes":[],"id":"layer_1","name":"layer_1"}]}));return _31c;},load:function(){this.showloading();var _31d=this.applicationURL+"?isTemp";var _31e=this.applicationURL+"?temp";var self=this;var _31f={url:_31d,load:function(resp,args){if(resp.isTemp){dojo.publish("/builder/editor/recover",[["warningWithoutFade",builder.Environment.messages.APPMODEL_TOOLING_LOAD_APPLICATION_UNSAVED_MSG]]);}},error:function(resp,args){if(resp&&resp.responseText){var _320=dojo.fromJson(resp.responseText).errorMessage;dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_LOAD_ERROR",_320]]);}},handleAs:"json",sync:false};var _321=dojo.xhrGet(_31f);this.loadApplication(false);return _321;},loadFromTempConfirm:function(_322,_323,_324){var _325=new builder.workbench.ConfirmDialog({executionScope:this,executionMethod:function(_326){_324.apply(this,[true]);},action:_322,confirmMsg:_323});dojo.connect(_325.cancelBtn,"onClick",this,function(_327){_324.apply(this,[false]);});_325.show();},loadAppDetails:function(){var _328=builder.util.UrlGenerator.generateUrl(this.applicationURL,"meta");var self=this;var _329={url:_328,load:function(resp,args){var _32a=resp.readonly;builder.Environment.diagram.lastModified=dojo.date.stamp.fromISOString(resp.last_modified);builder.Environment.diagram.creator=resp.creator;if(_32a){window.readOnly=true;}else{if(window.globalSetting.isAPPLIANCE_ADMIN_WRITER){window.readOnly=false;}else{window.readOnly=true;var _32b=resp.access_rights;var _32c="";for(var i in _32b){_32c=_32b[i]?_32b[i]:"";if(_32c.indexOf("W")>-1||_32c.indexOf("F")>-1){window.readOnly=false;break;}}}}},error:function(resp,args){if(resp&&resp.responseText){var _32d=dojo.fromJson(resp.responseText).errorMessage;dojo.publish("/builder/editor/notification",[["warning","APPMODEL_TOOLING_LOAD_DETAILS_ERROR",_32d]]);}},handleAs:"json",sync:true};dojo.xhrGet(_329);},setBuilderStatus:function(){if(window.readOnly=="true"||window.readOnly==true||window.globalSetting.isReadOnly==true){dojo.publish("/builder/diagram/modeChange",["readOnly"]);builder.Environment.layerPalette.setReadOnlyMode();builder.Environment.layerPalette.setReadOnlyMode();builder.Environment.diagram.setReadOnlyMode();builder.Environment.categoryPalette.setReadOnlyMode();builder.Environment.propertyView.setReadOnlyMode();}},discardTemp:function(){var _32e=this.applicationURL;_32e=builder.util.UrlGenerator.generateUrl(_32e,"discardTemp");var _32f=paasUtil.getDeferred("get",_32e);_32f.addErrback(function(_330){console.error(_330);});},loadApplication:function(_331){var _332=dojo.byId("splash-page");if(_332&&_331==true){dojo.byId("splash-page-text").innerHTML=builder.Environment.messages.APPMODEL_TOOLING_LOADING_APPLICATION_MESSAGE;dojo.style(_332,"display","block");}var _333=this.applicationURL;if(_331==true){_333=builder.util.UrlGenerator.generateUrl(_333,"temp");}_333=builder.util.UrlGenerator.generateUrl(_333,"normalization","true");this.loadAppDetails();this.setBuilderStatus();var self=this;var _334={headers:{"Content-Type":"application/json"},url:_333,load:function(resp,args){self.validatePlugins(resp,_331);if(_331){dojo.publish("onDiagramChanged",null);}setInterval(dojo.hitch(builder.Environment.modelService,builder.Environment.modelService.autoSave),10*60*1000);},error:function(resp,args){if(resp&&resp.responseText){var _335=dojo.fromJson(resp.responseText).errorMessage;dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_LOAD_ERROR",_335]]);}_332&&dojo.style(_332,"display","none");},handleAs:"json",sync:true};dojo.xhrGet(_334);},postLoadApplication:function(resp,_336){var mode="write";if(this.isReadOnly()){mode="readonly";}var _337=new builder.service.JsonToDiagram(this.diagram);_337.loadApplicationProperty(resp.model);this.setPatternType(this.diagram.patterntype,this.diagram.version);this.loadPalette(this.diagram.plugins);_337.load(resp,false,mode,true);this.setWindowTitle(this.diagram.getName());dojo.byId("appTitle").innerHTML=this.getShownName(this.diagram.getName());this.setBannerTitle();var _338=dojo.byId("splash-page");_338&&dojo.style(_338,"display","none");if(_337.valid){this.hideloading();}if(_316.isToscaEnabledPatternType(this.diagram.patterntype)){var _339=dijit.byId("toolingTabContainer");if(builder.Environment.componentsArea!=undefined){_339.addChild(builder.Environment.componentsArea,builder.Environment.componentsAreaIndex);}if(builder.Environment.linksArea!=undefined){_339.addChild(builder.Environment.linksArea,builder.Environment.linksAreaIndex);}}},validatePlugins:function(resp,_33a){var _33b=resp.model;if(!_33b||!_33b.locked){this.postLoadApplication(resp,_33a);return;}var _33c=this._transformPlugins(_33b.plugins);var temp=_316.getPlugins(_33b.patterntype,_33b.version,!_33b.lock_foundation);var _33d=this._transformPlugins(temp);var _33e=[];for(var key in _33c){var _33f=true;if(!_33d[key]){_33f=false;}else{var _340=_33d[key];var _341=_33c[key];var lns=_340.split(".");var cns=_341.split(".");for(var i=0;i<cns.length;i++){if(parseInt(cns[i])>parseInt(lns[i])){_33f=false;break;}}}if(!_33f){_33e.push(key+"/"+_33c[key]);}}if(_33e.length>0){var _342="<br>";for(var i=0;i<_33e.length;i++){if(i===_33e.length-1){_342+=_33e[i];}else{_342+=_33e[i]+" , ";}}var _343=_33b.patterntype+" "+_33b.version;_342=dojo.string.substitute(builder.Environment.messages.PLUGINS_NOT_EXIST,[_343,_342]);var _344=new paas.widgets.ConfirmDialogExt({confirmMsg:_342});_344.show();dojo.connect(_344,"onConfirm",this,function(){_33b.plugins=temp;_344.destroy();this.postLoadApplication(resp);});dojo.connect(_344,"onCancel",this,function(){_344.destroy();this.postLoadApplication(resp);});var _345=dojo.byId("splash-page");_345&&dojo.style(_345,"display","none");_344.show();}else{this.postLoadApplication(resp);}},_transformPlugins:function(_346){var _347={};dojo.forEach(_346,function(_348){var _349=_348.split("/");if(dojo.isArray(_349)&&_349.length==2){_347[_349[0]]=_349[1];}});return _347;},_saveCallBack:function(_34a){this.diagram.isNew="false";this.updateLastModified();dojo.publish("onDiagramSaved",null);var _34b=this._getRootWindowOpener();try{if(_34b&&_34b.dashboardApp){_34b.dashboardApp.userShowWizard=0;_34b.js_app_gridview&&(_34b.location.hash=_34a);_34b.js_app_gridview&&_34b.js_app_gridview.onRefresh();}}catch(e){console.error("Error to refresh Virtual appldashboard");console.error(e);dojo.publish("/builder/editor/notification",[["error","APPMODEL_DASHBOARD_REFRESH_FAIL"]]);}},updateLastModified:function(){this.loadAppDetails();},showConfirmSaveDialog:function(_34c,_34d,_34e,_34f){var _350=new builder.workbench.ConfirmDialog({executionScope:this,executionMethod:function(_351){_34f.apply(this,[_34c,_34d,_34e]);},action:builder.Environment.messages.BUILDER_EDITOR_SAVECONFIRMDIALOG_TITLE,confirmMsg:builder.Environment.messages.BUILDER_EDITOR_SAVECONFIRMDIALOG_MESSAGE});_350.show();},prepareSave:function(_352,_353,_354){var _355=builder.util.UrlGenerator.generateUrl(this.applicationURL,"meta");var self=this;var _356={url:_355,load:function(resp,args){var _357=dojo.date.stamp.fromISOString(resp.last_modified);if(dojo.date.compare(_357,builder.Environment.diagram.lastModified)!=0){self.showConfirmSaveDialog(_352,_353,_354,dojo.hitch(self,self.save));}else{self.save(_352,_353,_354);}},error:function(resp,args){if(resp&&resp.responseText){var _358=dojo.fromJson(resp.responseText).errorMessage;dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_LOAD_DETAILS_ERROR",_358]]);}},handleAs:"json",sync:true};dojo.publish("/builder/editor/notification",[["infoWithoutFade","APPMODEL_TOOLING_APPLICATION_SAVING"]]);dojo.xhrGet(_356);},save:function(_359,_35a,_35b,json){this.diagram.setName(_359);this.diagram.setDescription(_35a?_35a:"");this.diagram.setType(_35b?"template":"application");this.diagram.updatePropertiesWidget();dojo.publish("onDiagramChanged",null);this.setWindowTitle(_359);dojo.publish("/builder/editor/notification",[["infoWithoutFade","APPMODEL_TOOLING_APPLICATION_SAVING"]]);builder.Environment.diagram.saving=true;var _35c=new builder.service.DiagramToJson(this.diagram).getModel();if(json!=null){_35c.model=json.model;_35c.layers=json.layers;}var _35d=dojo.toJson(_35c);var _35e=this.applicationURL;var self=this;var _35f={headers:{"Content-Type":"application/json"},url:_35e,encoding:"utf-8",load:function(resp,args){dojo.publish("/builder/editor/notification",[["info","APPMODEL_TOOLING_APPLICATION_SAVED"]]);builder.Environment.diagram.saving=false;self._saveCallBack(resp.app_id);},error:function(resp,args){builder.Environment.diagram.saving=false;var _360="";if(resp.responseText){_360=dojo.fromJson(resp.responseText).errorMessage;}if(_360.indexOf("AccessControlException")!=-1){dojo.publish("/builder/editor/notification",[["warning","APPMODEL_TOOLING_NO_PERMISSION"]]);}else{dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_APPLICATION_SAVE_FAIL",_360]]);}},handleAs:"json",putData:_35d};return dojo.rawXhrPut(_35f);},create:function(_361,_362,_363){var _364=builder.Environment.messages.APPMODEL_ID_NOT_EXIST;dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_APPLICATION_SAVE_FAIL",_364]]);},createWithVersion:function(_365,_366,_367,_368){var _369=builder.Environment.messages.APPMODEL_ID_NOT_EXIST;dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_APPLICATION_SAVE_FAIL",_369]]);},saveAs:function(_36a,_36b,_36c){dojo.publish("/builder/modelservice/saveAsBtnStatus",[false]);var _36d=new builder.service.DiagramToJson(this.diagram).getModel();_36d.model.description=(_36b)?_36b:"";_36d.model.name=(_36a)?_36a:"";_36d.model["app_type"]=(_36c?"template":"application");var _36e=this.resourceURL+"?source="+encodeURI(this.diagram.appId)+"&reserveTemp=true";if(_36c){_36e=_36e+"&app_type=template";}var self=this;var _36f={headers:{"Content-Type":"application/json"},url:_36e,encoding:"utf-8",load:function(resp,args){dojo.publish("/builder/editor/notification",[["infoWithoutFade","APPMODEL_TOOLING_APPLICATION_SAVED"]]);self._saveCallBack(resp.app_id);self.replaceWindow(dojo.trim(resp.app_id));},error:function(resp,args){var _370="";if(resp.responseText){_370=dojo.fromJson(resp.responseText).errorMessage;}dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_APPLICATION_SAVEAS_FAIL",_370]]);dojo.publish("/builder/modelservice/saveAsBtnStatus",[true]);},handleAs:"json",putData:dojo.toJson(_36d)};dojo.publish("/builder/editor/notification",[["infoWithoutFade","APPMODEL_TOOLING_APPLICATION_SAVINGAS"]]);dojo.rawXhrPost(_36f);},saveAsWithVersion:function(_371,_372,_373,_374){dojo.publish("/builder/modelservice/saveAsBtnStatus",[false]);var _375=new builder.service.DiagramToJson(this.diagram).getModel();_375.model.description=(_373)?_373:"";_375.model.name=(_371)?_371:"";_375.model.patternversion=(_372)?_372:"";_375.model["app_type"]=(_374?"template":"application");var _376=this.resourceURL+"?source="+encodeURI(this.diagram.appId)+"&reserveTemp=true";if(_374){_376=_376+"&app_type=template";}var self=this;var _377={headers:{"Content-Type":"application/json"},url:_376,encoding:"utf-8",load:function(resp,args){dojo.publish("/builder/editor/notification",[["infoWithoutFade","APPMODEL_TOOLING_APPLICATION_SAVED"]]);self._saveCallBack(resp.app_id);self.replaceWindow(dojo.trim(resp.app_id));},error:function(resp,args){var _378="";if(resp.responseText){_378=dojo.fromJson(resp.responseText).errorMessage;}dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_APPLICATION_SAVEAS_FAIL",_378]]);dojo.publish("/builder/modelservice/saveAsBtnStatus",[true]);},handleAs:"json",putData:dojo.toJson(_375)};dojo.publish("/builder/editor/notification",[["infoWithoutFade","APPMODEL_TOOLING_APPLICATION_SAVINGAS"]]);dojo.rawXhrPost(_377);},showloading:function(){},hideloading:function(){},layout:function(){var acts=[];if(Util.patternTypeIsVSys()){acts=this._getVSysActs();}else{acts=this._getActs();}var _379=new builder.service.LayoutService(acts).generatePrettyPosition();var _37a=this._getPosition();var cmd=new builder.command.ChangeLayoutCommand(_37a,_379);builder.Environment.commandStack.executeCommand(cmd);},_getActs:function(){var _37b=this.diagram.components;var acts=[];for(var i in _37b){if(_37b[i].isSubComponent()){continue;}var _37c=[];var _37d=[];for(var j in _37b[i].incomingConnections){if(_37b[i].incomingConnections[j].fromComponent.isSubComponent()){continue;}_37c.push(_37b[i].incomingConnections[j].fromComponent.id);}for(var j in _37b[i].outgoingConnections){if(_37b[i].outgoingConnections[j].toComponent.isSubComponent()){continue;}_37d.push(_37b[i].outgoingConnections[j].toComponent.id);}acts.push({nodeName:_37b[i].id,incoming:_37c,outgoing:_37d,type:_37b[i].componentType});}return acts;},_getVSysActs:function(){var _37e=this.diagram.components;var acts=[];var _37f={};var _380={};for(var i in _37e){if(_37e[i].isSubComponent()){continue;}var _381=[];var _382=[];var _383=_37e[i].getDataDependsIncomingConnectionsIncludeSubComponents();for(var j in _383){if((!_37f[_37e[i].id]||_31a.indexOf(_37f[_37e[i].id],_383[j].source.id)<0)&&(!_37f[_383[j].source.id]||_31a.indexOf(_37f[_383[j].source.id],_37e[i].id)<0)&&(!_380[_37e[i].id]||_31a.indexOf(_380[_37e[i].id],_383[j].source.id)<0)){_381.push(_383[j].source.id);if(!_37f[_37e[i].id]){_37f[_37e[i].id]=[];}_37f[_37e[i].id].push(_383[j].source.id);}}var _384=_37e[i].getDataDependsOutgoingConnectionsIncludeSubComponents();for(var j in _384){if((!_380[_37e[i].id]||_31a.indexOf(_380[_37e[i].id],_384[j].target.id)<0)&&(!_380[_384[j].target.id]||_31a.indexOf(_380[_384[j].target.id],_37e[i].id)<0)&&(!_37f[_37e[i].id]||_31a.indexOf(_37f[_37e[i].id],_384[j].target.id)<0)){_382.push(_384[j].target.id);if(!_380[_37e[i].id]){_380[_37e[i].id]=[];}_380[_37e[i].id].push(_384[j].target.id);}}acts.push({nodeName:_37e[i].id,incoming:_381,outgoing:_382,type:_37e[i].componentType});}return acts;},_getPosition:function(){var _385=[];dojo.forEach(this.diagram.components,function(_386){_385.push({name:_386.id,location:_386.getPosition()});});return _385;},cleanupModel:function(){this.diagram.clean();},_getRootWindowOpener:function(){var _387=window;while((_387.opener!==null)&&(_387.opener!==undefined)&&(_387.opener!==_387)){_387=_387.opener;}return _387;},openWindow:function(url,name,_388){var _389;if(!(_388)){_388=this._getRootWindowOpener();}if(dojo.isSafari){var _38a=window.screen.width-80;var _38b=window.screen.height-80;var _38c="top=40, left=40, width="+_38a+"height="+_38b+", resizable=yes";_389=_388.open(url,name,_38c);}else{_389=_388.open(url,name);}_389.focus();},updateWindowName:function(_38d){var _38e=new RegExp("-","g");window.name=_38d.replace(_38e,"");},autoSave:function(){if(this.isReadOnly()||!builder.Environment.diagram.changed||builder.Environment.diagram.saving){return;}if(builder.util.FileUploadManager.hasFileUploading()){return;}dojo.publish("/builder/editor/notification",[["info","APPMODEL_TOOLING_AUTO_SAVING"]]);var _38f=new builder.service.DiagramToJson(this.diagram).getModel();var _390=_38f;var _391={headers:{"Content-Type":"application/json"},url:this.applicationURL+"?temp",encoding:"utf-8",load:function(resp,args){dojo.publish("/builder/editor/notification",[["info","APPMODEL_TOOLING_APPLICATION_SAVED"]]);},error:function(resp,args){console.error("Failed to save the application automatically");if(resp.responseText){var _392=dojo.fromJson(resp.responseText).errorMessage;console.error(_392);}},handleAs:"text",putData:dojo.toJson(_390)};dojo.rawXhrPut(_391);},replaceWindow:function(_393){var url="../../tooling/index.gt?appID="+_393;var view=window.location.hash;if(view&&view!="null"){url=url+view;}window.location.href=url;this.updateWindowName(_393);},getShownName:function(_394){return _394;},setWindowTitle:function(_395){var _396=this.isReadOnly()?(" ("+builder.Environment.messages.APPMODEL_TOOLING_APPLICATION_READONLY+")"):"";document.title=builder.Environment.messages.APPMODEL_TOOLING_TITLE+" '"+_395+"'"+_396;var _397=this.getShownName(_395);dojo.byId("appTitle").innerHTML=" - [ "+_397+" ]"+_396;},isReadOnly:function(){return (readOnly=="true"||readOnly==true||window.globalSetting.isReadOnly==true);},importApplication:function(_398){var _399={isValid:false,resp:{}};var _39a=builder.util.UrlGenerator.generateUrl(_398,"normalization","import");var self=this;var _39b={headers:{"Content-Type":"application/json"},url:_39a,load:function(resp,args){dojo.publish("/builder/editor/notification",[["hide"]]);var _39c=builder.util.ValidationUtil.validateImportLayers(self.diagram,resp);if(!_39c.isValid){dojo.publish("/builder/editor/notification",[["warning",_39c.message]]);return;}_399.isValid=true;_399.resp=resp;},error:function(resp,args){var _39d="";if(resp.responseText){_39d=dojo.fromJson(resp.responseText).errorMessage;}dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_LOAD_ERROR",_39d]]);},handleAs:"json",sync:true};this.showloading();dojo.xhrGet(_39b);return _399;},setPatternType:function(_39e,_39f){if(!_39e||!_39f){return;}var _3a0={url:"/resources/patternTypes/"+_39e+"/"+_39f,handleAs:"json",encoding:"utf-8",load:function(resp){if(resp&&resp.name){var _3a1=dojo.byId("appPatternType");if(!_3a1){return;}var text=builder.Environment.messages.SOLUTION_TITLE+": "+resp.name+" "+_39f;_3a1.innerHTML=text;}},error:function(resp){if(resp&&resp.responseText){var _3a2=dojo.fromJson(resp.responseText).errorMessage;dojo.publish("/builder/editor/notification",[["error",_3a2]]);}},sync:false};dojo.xhrGet(_3a0);},setBannerTitle:function(){var _3a3=dojo.byId("top-banner-main-title");if(!_3a3){return;}var text=_3a3.innerHTML+" - "+builder.Environment.messages.APPMODEL_TOOLING_TITLE;_3a3.innerHTML=text;},loadPalette:function(_3a4){var _3a5=dijit.byId("categoryPalette");if(_3a5){_3a5.load(_3a4);if(this.isReadOnly()){_3a5.setReadOnlyMode();}}var _3a6=dijit.byId("componentCategoryPalette");if(_3a6){_3a6.load(_3a4);if(this.isReadOnly()){_3a6.setReadOnlyMode();}}var _3a7=dijit.byId("linkCategoryPalette");if(_3a7){_3a7.load(_3a4);if(this.isReadOnly()){_3a7.setReadOnlyMode();}}},unlockModel:function(){delete this.diagram.plugins;var _3a8=dijit.byId("categoryPalette");this.diagram.plugins=_316.getPlugins(this.diagram.patterntype,this.diagram.version);this.loadPalette(_316.getPlugins(this.diagram.patterntype,this.diagram.version));dojo.publish("/builder/editor/notification",[["info","APPMODEL_TOOLING_CATEGORY_REFRESHED"]]);}});});},"builder/util/FileUtil":function(){define(["dojo/_base/lang"],function(lang){var _3a9=lang.getObject("builder",true);var _3aa=lang.getObject("util.FileUtil",true,_3a9);_3aa=_3a9.util.FileUtil={};_3a9.util.FileUtil.getFixedPath=function(path,_3ab){var _3ac="";if(path){if(path.charAt(0)=="/"){_3ac=path;}else{_3ac=_3ab+path;}}return _3ac;};_3a9.util.FileUtil.getComponentIconPath=function(_3ad){if(_3ad&&_3ad.indexOf("/")==0){return _3ad;}return _3a9.util.FileUtil.getFixedPath(_3ad,"/resources/tooling/appmodel/metadata/apptypes/");};_3a9.util.FileUtil.getComponentFigurePath=function(_3ae){if(_3ae&&_3ae.indexOf("/")==0){return _3ae;}return _3a9.util.FileUtil.getFixedPath(_3ae,"/resources/tooling/appmodel/metadata/apptypes/");};_3a9.util.FileUtil.getVirtualFigurePath=function(_3af){if(!_3af){_3af="/tooling/images/group.gif";}return _3af;};return _3a9.util.FileUtil;});},"builder/workbench/property/HorizontalRuleWithOptions":function(){define(["dojo/_base/declare","dojo/number","dojo/query","dijit/form/HorizontalRuleLabels"],function(_3b0,_3b1,_3b2,_3b3){return _3b0("builder.workbench.property.HorizontalRuleWithOptions",_3b3,{options:null,_suffix:"</div><div class=\"dijitRuleLabel dijitRuleLabelH\" style=\"height:5px ; width:50%; border-right: 1px solid black;\"></div></div>",_genHTML:function(pos,ndx){return this._positionPrefix+this._calcPosition(pos)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[ndx]+this._suffix;},getLabels:function(){var _3b4=this.labels;if(!_3b4.length&&this.srcNodeRef){_3b4=_3b2("> li",this.srcNodeRef).map(function(node){return String(node.innerHTML);});}if(!_3b4.length&&this.count>1){dojo.forEach(this.options,function(_3b5){_3b4.push(_3b5.name||_3b5.value);});}return _3b4;},buildRendering:function(){this.inherited(arguments);var min=this.options[0].value;var max=this.options[this.options.length-1].value;var _3b6=100/(max-min);var _3b7=this.options.length;var i;var _3b8="";if(!this._isHorizontal||this.isLeftToRight()){for(i=0;i<_3b7;i++){var pos=(this.options[i].value-min)*_3b6;_3b8+=this._genHTML(pos,i);}}else{for(i=_3b7-1;i>=0;i--){var pos=(this.options[i].value-min)*_3b6;_3b8+=this._genHTML(pos,i);}}setTimeout(dojo.hitch(this,function(){this.domNode.innerHTML=_3b8;}),10);}});});},"builder/command/AddAppPolicyCommand":function(){define(["dojo/_base/declare","builder/command/AddComponentCommand","builder/util/Util"],function(_3b9,_3ba,Util){return _3b9("builder.command.AddAppPolicyCommand",[_3ba],{hasLayer:false,execute:function(){this.inherited(arguments);Util.locateAppPolicy(builder.Environment.diagram);if(this.component.getFrame()){this.component.getFrame().focus();}},undo:function(){this.inherited(arguments);Util.locateAppPolicy(builder.Environment.diagram);}});});},"paas/widgets/PatternAttrPropertiesWidget":function(){define(["dojo/_base/declare","builder/workbench/property/PropertiesWidget","builder/util/FileUtil","builder/util/ValidationUtil","builder/command/ChangeComponentNameCommand","builder/workbench/property/PatternAttrPropertyWidget","builder/util/Util"],function(_3bb,_3bc,_3bd,_3be,_3bf,_3c0,util){return _3bb("paas.widgets.PatternAttrPropertiesWidget",[_3bc],{nameWidget:null,displayName:true,isLockVisible:true,supportRemoteFile:true,mainWidget:null,constructor:function(){if(util.patternTypeIsVSys()){this.DEFAULT_PROPERTY_WIDGET_NAME="builder.workbench.property.PatternAttrPropertyWidget";}},postCreate:function(){this.inherited(arguments);var self=this;if(!this.propertiesEnv){this.propertiesEnv={mainWidget:self.mainWidget};}else{this.propertiesEnv.mainWidget=this.mainWidget;}},createTitleWidget:function(){},createNameWidget:function(){},setName:function(name){},_validateNameChange:function(){return true;}});});},"builder/util/Util":function(){define(["dojo/_base/lang","builder/service/PatternTypeService","paas/common/constants"],function(lang,_3c1,_3c2){var _3c3=lang.getObject("builder",true);var Util=lang.getObject("util.Util",true,_3c3);Util=_3c3.util.Util={isSubComponent:function(_3c4){return _3c4&&(_3c4.type=="policy"||_3c4.applicableTo&&_3c4.applicableTo.length!==0);},getCenterPosition:function(_3c5){var _3c6=dojo.coords(_3c5,true);var _3c7=_3c6.x+_3c6.w/2;var _3c8=_3c6.y+_3c6.h/2;return {x:_3c7,y:_3c8};},getCursorPosition:function(e){var _3c9={x:0,y:0};if(e.pageX||e.pageY){_3c9.x=e.pageX;_3c9.y=e.pageY;}else{var de=dojo.doc.documentElement;var db=dojo.body();_3c9.x=e.clientX+((de||db)["scrollLeft"])-((de||db)["clientLeft"]);_3c9.y=e.clientY+((de||db)["scrollTop"])-((de||db)["clientTop"]);}return _3c9;},setDefaultProperties:function(_3ca,_3cb){if(!_3ca||!dojo.isArray(_3ca)){return;}for(var i=0;i<_3ca.length;i++){var data=_3ca[i];var _3cc=data.id;var _3cd=_3cb[_3cc];if(_3cd===undefined||_3cd===null){_3cd=data.sampleValue;if(data.type=="boolean"&&!_3cd){_3cd=false;}if(_3cd!==undefined){_3cb[_3cc]=_3cd;}}}},setDefaultGroupStatus:function(_3ce,_3cf,_3d0,_3d1){if(!_3d1||_3cf[_3d1]){var _3d2=_3ce.id;if(_3cf[_3d2]===undefined){if(_3ce.required===true){_3cf[_3d2]=true;}else{if(_3ce.defaultValue===undefined){_3cf[_3d2]=true;}else{_3cf[_3d2]=_3ce.defaultValue;}}}if(_3cf[_3d2]!=true){dojo.forEach(_3ce.attributes,function(attr){delete _3d0[attr];});}}else{_3cf[_3ce.id]=false;dojo.forEach(_3ce.attributes,function(attr){delete _3d0[attr];});}},setDefaultGroupsStatus:function(_3d3,_3d4,_3d5,_3d6){if(!_3d3||!dojo.isArray(_3d3)){return;}if(!_3d4){_3d4={};}dojo.forEach(_3d3,function(data){_3c3.util.Util.setDefaultGroupStatus(data,_3d4,_3d5,_3d6);if(data.groups){_3c3.util.Util.setDefaultGroupsStatus(data.groups,_3d4,_3d5,data.id);}});return _3d4;},coords:function(node,_3d7){var _3d8=dojo.position(node,_3d7);var _3d9=dojo.marginBox(node);dojo.mixin(_3d8,_3d9);return _3d8;},isPointInRect:function(_3da,rect){if(_3da.x>rect.l&&_3da.x<rect.l+rect.w&&_3da.y>rect.t&&_3da.y<rect.t+rect.h){return true;}return false;},isPointInRectEdge:function(_3db,rect){if(((_3db.x==rect.l||_3db.x==rect.l+rect.w)&&(_3db.y>=rect.t&&(_3db.y<=rect.t+rect.h)))||((_3db.y==rect.t||_3db.y==rect.t+rect.h)&&(_3db.x>=rect.l&&(_3db.x<=rect.l+rect.w)))){return true;}return false;},isPatternComponent:function(item){var _3dc="patterncomponents:";if(item&&item.id&&item.id.indexOf(_3dc)===0){return true;}return false;},splitName:function(name){var _3dd={};if(!name){return _3dd;}var _3de=name.indexOf("(");if(_3de<0){_3dd.shortName=name;return _3dd;}var _3df=name.length-1;_3dd.shortName=dojo.trim(name.substring(0,_3de));_3dd.longName=dojo.trim(name.substring(_3de+1,_3df));return _3dd;},getCompName:function(comp){var _3e0=null;if(comp&&comp.metadata){var _3e1=this.splitName(comp.metadata.label);var _3e2=_3e1.shortName?_3e1.shortName:"";var _3e3=_3e1.longName?_3e1.longName:"";if(_3e3){_3e0=_3e3;}else{_3e0=_3e2;}}return _3e0;},getReferModelName:function(_3e4,_3e5){var _3e6=dojo.indexOf(_3e4,":");if(_3e6>=0){return _3e5+":"+_3e4.substring(_3e6+1);}return _3e4;},locateAppPolicy:function(_3e7){var _3e8=_3e7.getAttachedPolicies();var _3e9=dojo.marginBox(_3e7.addBtn.domNode);var _3ea=110,_3eb=_3e9?(_3e9.w+15):170,_3ec=0;var _3ed=_3eb,_3ee=_3ec;dojo.forEach(_3e8,function(_3ef){var _3f0=_3ef.getFrame();if(!_3f0){return;}if(_3ed!=parseInt(_3ef.getPosition().x)){dojo.style(_3f0.domNode,{"left":_3ed+"px","top":_3ee+"px"});}_3ed+=_3ea;});},getMetadataService:function(){var _3f1=[],_3f2,_3f3;if(_3c3.Environment&&_3c3.Environment.diagram){_3f1=_3c3.Environment.diagram.plugins;_3f2=_3c3.Environment.diagram.patterntype;_3f3=_3c3.Environment.diagram.version;}var ps=_3c3.service.PatternTypeService;return ps.getMetadataService(_3f1,_3f2,_3f3);},modelContainDeployableAttributes:function(_3f4){var _3f5=_3c3.service.PatternTypeService.getMetadataServiceByModel(_3f4);var _3f6=dojo.some(_3f4.nodes,function(node){var _3f7=_3f5.getComponentMetadata(node.type);return _3c3.util.Util.cpContainDeployableAttributes(node,_3f7)==true;},this);if(!_3f6){_3f6=dojo.some(_3f4.links,function(link){var _3f8=_3f5.getComponentMetadata(link.type);return _3c3.util.Util.cpContainDeployableAttributes(link,_3f8)==true;},this);}return _3f6;},cpContainDeployableAttributes:function(node,_3f9){if(_3f9==null){return false;}var _3fa=node.groups;var _3fb=false;if(_3fa&&_3fa["SLAHigh"]===true){for(var _3fc in _3fa){if(_3fa[_3fc]==true&&_3fc!="SLAHigh"){_3fb=_3c3.util.Util.groupContainDeployableAttributes(_3fc,_3f9);}if(_3fb){break;}}}else{for(var _3fc in _3fa){if(_3fa[_3fc]==true&&_3fc!="SLANormal"){_3fb=_3c3.util.Util.groupContainDeployableAttributesRC(_3fc,_3f9);}if(_3fb){break;}}}return _3fb;},groupContainDeployableAttributes:function(_3fd,_3fe){if(_3fe==null){return false;}var _3ff=_3c3.util.Util.findGroupByIdUnderSLAHigh(_3fd,_3fe);if(_3ff==null){return false;}var _400=dojo.some(_3ff.attributes,function(_401){var _402=false;for(var k=0;k<_3fe.attributes.length;k++){var _403=_3fe.attributes[k];if(_403.id==_401){_402=_403.deployable===true;break;}}return _402===true;},this);return _400;},groupContainDeployableAttributesRC:function(_404,_405){if(_405==null){return false;}var _406=_3c3.util.Util.findGroupById(_404,_405);if(_406==null){return false;}var _407=dojo.some(_406.attributes,function(_408){var _409=false;for(var k=0;k<_405.attributes.length;k++){var _40a=_405.attributes[k];if(_40a.id==_408){_409=_40a.deployable===true;break;}}return _409===true;},this);return _407;},findGroupById:function(_40b,_40c){if(_40c==null||_40c.groups==undefined){return null;}var _40d=null;for(var i=0;i<_40c.groups.length;i++){_40d=_40c.groups[i];if(_40d.id!=_40b){_40d=_3c3.util.Util.findGroupById(_40b,_40d);}if(_40d!=null){break;}}return _40d;},findTopGroupById:function(_40e,_40f){if(_40f==null){return null;}var _410=null;var _411=_40f.groups.length;for(var i=0;i<_411;i++){_410=_40f.groups[i];if(_410.id==_40e){return _410;}}return null;},addAttrsToProperties:function(_412,_413){if(!_412||!_413||!dojo.isArray(_412)){return;}for(var i=0;i<_412.length;i++){var _414=_412[i];var _415=_413[_414];if(_415===undefined){_413[_414]=null;}}},getAttrsFromSelectedGrps:function(_416,_417){if(!_416||!_417){return null;}var _418=[];var _419=_416.groups;var _41a=null;var _41b=true;for(var key in _419){if(_419.hasOwnProperty(key)&&_419[key]&&key!="SLANormal"&&key!="SLAHigh"){_41a=_3c3.util.Util.findGroupById(key,_417);if(_41b){_418=_41a.attributes;_41b=false;}else{dojo.forEach(_41a.attributes,function(attr){_418.push(attr);});}}}return _418;},findGroupByIdUnderSLAHigh:function(_41c,_41d){if(_41d==null){return null;}var _41e=_3c3.util.Util.findTopGroupById("SLAHigh",_41d);if(_41e==null){return null;}var _41f=null;for(var j=0;j<_41e.groups.length;j++){_41f=_41e.groups[j];if(_41f.id==_41c){break;}}return _41f;},patternTypeIsVSys:function(){if(_3c3.Environment.diagram&&_3c3.Environment.diagram.patterntype==="vsys"){return true;}return false;},isTablet:function(){var info=navigator.userAgent;if(info.indexOf("iPod")!=-1||info.indexOf("iPad")!=-1||info.indexOf("iPhone")!=-1||info.indexOf("Android")!=-1){return true;}else{return false;}},getComponentRootType:function(id){var _420=this.getMetadataService().getComponentMetadata(id);if(_420["extends"]&&_420["extends"] instanceof Array){return arguments.callee.call(this,_420["extends"][0]);}return _420.id;},stringContainContent:function(_421,_422){if(_421.indexOf){return _421.indexOf(_422)>-1;}else{return new String(_421).indexOf(_422)>-1;}}};return Util;});},"builder/workbench/BorderContainerExt":function(){define(["dojo/_base/declare","dijit/layout/BorderContainer"],function(_423,_424){return _423("builder.workbench.BorderContainerExt",[_424],{sizeLeft:0,sizeRight:0,sizeTop:0,sizeBottom:0,splitLocLeft:0,splitLocRight:0,splitLocTop:0,splitLocBottom:0,postCreate:function(){this.inherited("postCreate",arguments);},startup:function(){if(this._started){return;}this.inherited(arguments);dojo.forEach(this.getChildren(),this._showChild,this);},_showChild:function(_425){if(_425.splitter){var _426=_425._splitterWidget;var _427;if(_425.region=="bottom"){_427="toggle toggleHorizontal toggleDown";}else{if(_425.region=="top"){_427="toggle toggleHorizontal toggleTop";}else{if(_425.region=="right"){_427="toggle toggleVertical toggleRight";}else{if(_425.region=="left"){_427="toggle toggleVertical toggleLeft";}}}}this.setChildStatus(_425,true);var _428=dojo.create("div",{id:_425.id+"_"+_425.region,className:_427,style:"top:50%;"});if(_426){_426.domNode.appendChild(_428);var _429=(builder.util.Util.isTablet())?"touchstart":"onmousedown";dojo.connect(_428,_429,this,function(){this.toggle(_425);});}}},toggle:function(_42a){var _42b=_42a.region;var _42c=_42a._splitterWidget;var _42d=document.getElementById(_42a.id+"_"+_42a.region);if(_42b=="bottom"){if(this.getChildStatus(_42a)===true){this.sizeBottom=dojo.position(_42a.domNode,true).h-2;this.buttomSplitExpandedTop=_42c.domNode.style.top;this.splitMoveToBottom="";_42a._setStyleAttr({height:_42a.minSize+"px"});if(this.buttomSplitExpandedTop){this.splitMoveToBottom=parseInt(this.buttomSplitExpandedTop.substring(0,this.buttomSplitExpandedTop.indexOf("px")))+parseInt(this.sizeBottom)-_42a.minSize-2+"px";if(this.splitMoveToBottom){try{_42c._setStyleAttr({top:this.splitMoveToBottom});}catch(error){}}}_42d.className="toggle toggleHorizontal toggleUp";this.setChildStatus(_42a,false);}else{_42a._setStyleAttr({height:this.sizeBottom+"px"});_42c._setStyleAttr({top:this.buttomSplitExpandedTop});_42d.className="toggle toggleHorizontal toggleDown";this.setChildStatus(_42a,true);}}else{if(_42b=="top"){if(this.getChildStatus(_42a)===true){this.sizeTop=_42a.domNode.style.height;this.splitLocTop=_42c.domNode.style.top;_42a._setStyleAttr({height:_42a.minSize+"px"});_42c._setStyleAttr({top:this.splitMoveToButton});_42d.className="toggle toggleHorizontal toggleDown";this.setChildStatus(_42a,false);}else{_42a._setStyleAttr({height:this.sizeTop});_42c._setStyleAttr({top:this.splitLocTop});_42d.className="toggle toggleHorizontal toggleUp";this.setChildStatus(_42a,true);}}else{if(_42b=="right"){if(this.getChildStatus(_42a)===true){this.sizeRight=_42a.domNode.style.width;this.leftValue=_42c.domNode.style.left;this.splitMoveToLeft=parseInt(this.leftValue.substring(0,this.leftValue.indexOf("px")))+parseInt(this.sizeRight.substring(0,this.sizeRight.indexOf("px")))+"px";_42a._setStyleAttr({width:_42a.minSize+"px"});_42c._setStyleAttr({left:this.splitMoveToLeft});_42d.className="toggle toggleVertical toggleLeft";this.setChildStatus(_42a,false);}else{_42a._setStyleAttr({width:this.sizeRight});_42c._setStyleAttr({left:this.leftValue});_42d.className="toggle toggleVertical toggleRight";this.setChildStatus(_42a,true);}}else{if(_42b=="left"){if(this.getChildStatus(_42a)===true){this.sizeLeft=_42a.domNode.style.width;this.splitLocLeft=_42c.domNode.style.left;_42a._setStyleAttr({width:_42a.minSize+"px"});_42c._setStyleAttr({left:(_42a.minSize+2)+"px"});_42d.className="toggle toggleVertical toggleRight";this.setChildStatus(_42a,false);}else{_42a._setStyleAttr({width:this.sizeLeft});_42c._setStyleAttr({left:this.splitLocLeft});_42d.className="toggle toggleVertical toggleLeft";this.setChildStatus(_42a,true);}}}}}},setChildStatus:function(_42e,open){_42e.open=open;},getChildStatus:function(_42f){return _42f.open;}});});},"paas/widgets/MappingWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/MappingWidget.html","paas/widgets/Dialog","builder/util/Util","builder/vsys/util/VSysUtil"],function(_430,_431,_432,_433,_434,_435,util,_436){return _430("paas.widgets.MappingWidget",[_431,_432,_433],{templateString:_434,widgetsInTemplate:true,connection:null,mappings:null,tbody:null,model:null,showWarning:false,mappingTable:null,constructor:function(){this.mappings={};},postCreate:function(){this.configureButton.set("label",paas.Base.messages.DATA_DEPENDS_EDIT_MAPPING);if(this.model.readOnly===true){this.configureButton.set("disabled",true);}},showConfiguration:function(){var _437=new paas.widgets.MappingDialog({connection:this.model,fromConfigure:true});_437.showDialog(this.model);},showMappings:function(_438,_439){var self=this;if(self.mappingTable){dojo.destroy(self.mappingTable);}var _43a=dojo.create("table",{"style":"width: 100%; padding: 5px 10px; border: 0px solid #B5BCC7;"},this.possibleMappingsDiv);self.mappingTable=_43a;_43a.setAttribute("role","presentation");this.tbody=dojo.create("tbody",null,self.mappingTable);dojo.forEach(_439.metadata.attributes,function(attr){var _43b=self.matches(_439,_438,attr.id);if(_43b){self.createMapEntry(attr.id,_43b,attr.label,_438);}});},getLabelFromID:function(id,_43c){var _43d=id;dojo.forEach(_43c.metadata.attributes,function(attr){if(attr.id==id){_43d=attr.label;}});return _43d;},createMapEntry:function(_43e,_43f,_440,_441){var self=this;if(!_440){_440=_43e;}var _442=_43f;var tr=dojo.create("tr",null,self.tbody);var td0=dojo.create("td",{"class":"boldFont","style":"width: 3%;"},tr);if(self.showWarning){var _443=dojo.create("div",{className:"wca-image-warning-icon",title:"The attribute has already a value."},td0);}var td=dojo.create("td",{"class":"boldFont","style":"width: 40%;"},tr);td.innerHTML=_440;var td1=dojo.create("td",{"innerHTML":"<img src='/tooling/images/cloud/arrow.gif'/>","class":"boldFont","style":"width: 10%;"},tr);var td2=dojo.create("td",{"innerHTML":_442,"class":"boldFont","style":"width: 40%;"},tr);var td3=dojo.create("td",{"style":"width: 10%;"},tr);var _444=dojo.create("div",{className:"wca-image-delete-icon-small",title:builder.Environment.messages.REMOVE_DEPRECATED,style:{display:"none"}},td3);dojo.connect(_444,"onclick",dojo.hitch(this,function(){var o=dojo.create("option",{label:_440,value:_43e});self.selectSourceAttr.addOption(o);dojo.destroy(tr);delete self.mappings[_43e];}));self.mappings[_43e]=_43f;},findRightLabels:function(_445,_446){var _447=null;dojo.forEach(_446.metadata.attributes,function(attr){if(_445.indexOf(attr.id)>=0){if(_447==null){_447=attr.label;}else{_447+=", "+attr.label;}}});return _447;},matches:function(_448,_449,id){var self=this;var _44a=null;if(_448.properties[id]){dojo.forEach(_449.metadata.outputs,function(_44b){if(_436.getDataDependencyRegexp(_449.id,_44b.id).test(_448.properties[id])){if(_44a==null){_44a=_44b.id;}else{_44a+=", "+_44b.id;}}});}return _44a;}});});},"builder/command/RemoveConnectionCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/util/LayoutUtil"],function(_44c,_44d,_44e){return _44c("builder.command.RemoveConnectionCommand",[_44d],{id:null,fromCompId:null,toCompId:null,metadata:null,properties:null,annotation:null,diagram:null,constructor:function(_44f){this.connection=_44f;this.id=_44f.id;this.metadata=_44f.metadata;this.properties=_44f.properties;this.annotation=_44f.getAnnotationContent();this.locked=_44f.locked;this.fromCompId=_44f.getSourceComponent().id;this.toCompId=_44f.getTargetComponent().id;this.container=builder.Environment.diagram;this.groups=_44f.groups;this.diagram=_44f.diagram;this.type=_44f.type;},forcedRemove:function(flag){},execute:function(){var _450=this.container.getConnectionById(this.id);var _451=_450.getSourceComponent();_450.remove();_451.rePaintComponent();dojo.publish("onDiagramChanged");dojo.publish("onReferencesChanged",[this.fromCompId]);},isEmpty:function(map){for(var key in map){if(map.hasOwnProperty(key)){return false;}}return true;},undo:function(){var _452=this.container.getComponentById(this.fromCompId);var _453=this.container.getComponentById(this.toCompId);var args={id:this.id,source:_452,target:_453,metadata:this.metadata,properties:this.properties,groups:this.groups,annotation:this.annotation,locked:this.locked,loadFromModel:true,diagram:this.diagram};if(this.type){args.type=this.type;}var _454=_44e.createConnectionWidget(args);if(_454){this.container.addConnection(_454);if(_454.isVisible()){_454.showWidget();builder.Environment.diagram.selectModel(_454);if(!_452.layer.enabled||(_453.layer&&!_453.layer.enabled)){_454.disable();}}}_452.rePaintComponent();dojo.publish("onDiagramChanged");dojo.publish("onReferencesChanged",[this.fromCompId]);},canExecute:function(){if(this.connection.isReferenced()){dojo.publish("/builder/editor/notification",[["info","REFER_CONNECTION_NOT_REMOVED"]]);return false;}return true;}});});},"builder/workbench/componentsView/ListCollapsibleSection":function(){define(["dojo/_base/declare","builder/workbench/componentsView/CollapsibleSection","dojo/text!./templates/ListCollapsibleSection.html"],function(_455,_456,_457){return _455("builder.workbench.componentsView.ListCollapsibleSection",[_456],{templateString:_457,appModel:null,label:"",postCreate:function(){this.inherited(arguments);this.items=new Array();dojo.connect(this.addRowButton,"onclick",dojo.hitch(this,"addRow"));this.initializeData();},setAppModel:function(_458){this.appModel=_458;},initializeData:function(){},addRow:function(){var row=this.contentTable.insertRow(-1);var _459=this.createRowData(row);if(_459!=null){dojo.connect(_459,"deleteItem",dojo.hitch(this,"deleteRow",this.items.length));this.items.push(_459);}},createRowData:function(row){return null;},deleteRow:function(_45a){var _45b=this.items[_45a];_45b.destroy();delete this.items[_45a];this.items[_45a]=null;this.items.splice(_45a,1);},getItems:function(){return this.items;},destroy:function(){dojo.forEach(this.items,function(item){item.destroyRecursive();});}});});},"builder/workbench/editor/Port":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","builder/util/Util","builder/base/dnd/DragSource","builder/workbench/editor/Link"],function(_45c,_45d,_45e,_45f,Util,_460,Link){return _45c("builder.workbench.editor.Port",[_45d,_45e,_45f],{templateString:"<div class='outportcss'></div>",componentMarginBox:null,portMarginBox:{width:20,height:21},component:null,eventHandles:null,name:null,positionNode:null,display:true,drag:null,type:null,_templink:null,width:18,height:18,constructor:function(){},postCreate:function(){var self=this;this.setDraggable();dojo.connect(this.domNode,"onmouseover",this,"highlight");dojo.connect(this.domNode,"onmouseout",this,"unHighlight");this.name=this.component.componentId+"_outport";},rePaint:function(){if(!this.component.componentFrame){return;}this.componentMarginBox=dojo.marginBox(this.component.componentFrame.domNode);if(this.componentMarginBox.w==0){this.componentMarginBox.w=150;}if(this.componentMarginBox.h==0){this.componentMarginBox.h=30;}},disableDragSource:function(){this.drag.unregister();},enableDragSource:function(){this.drag.reregister();},setDraggable:function(){var self=this;this.drag=new builder.base.dnd.DragSource(this.domNode,"Port",{offsetX:-this.width/2,offsetY:-this.width/2});this.drag.avatarRequired=false;this.drag.component=this.component;this.drag.portWidget=this;this.startPosition=builder.util.Util.getCenterPosition(self.domNode);dojo.connect(this.drag,"onDragMove",function(evt){builder.Environment.diagram.setSurfaceArea(evt.pageX,evt.pageY);builder.Environment.diagram.setSurface();self._showTempLink(self.startPosition,{x:evt.pageX,y:evt.pageY});self.component.highlightLinkableComponents();});dojo.connect(this.drag,"onDragStart",function(evt){self.component.highlightLinkableComponents();self.startPosition=builder.util.Util.getCenterPosition(self.domNode);});dojo.connect(this.drag,"onDragEnd",function(evt){self._hideTempLink();self.component.unHighlightLinkableComponents();builder.Environment.diagram.resetSurfaceArea();});},_showTempLink:function(_461,_462){if(!(this._templink)){this._templink=new builder.workbench.editor.Link(builder.Environment.diagram);}var mode;if(_461.x<_462.x){mode=1;}else{mode=2;}var _463=this.component.diagram;var p1=_463.getCoordinate(_461);var p2=_463.getCoordinate(_462);this._templink.setStyle(builder.util.CssUtil.getLinkStyleByComponentType(this.component.metadata.type));this._templink.paint(p1,p2,false,mode);},_hideTempLink:function(){if(this._templink){this._templink.remove();this._templink=null;}},highlight:function(){dojo.addClass(this.domNode,"outportcssHighlight");this.component.highlightLinkableComponents();},unHighlight:function(){dojo.removeClass(this.domNode,"outportcssHighlight");this.component.unHighlightLinkableComponents();},activateEvents:function(){this.eventHandles=[];this.eventHandles.push(dojo.connect(this.domNode,"onmouseover",this,"highlight"));this.eventHandles.push(dojo.connect(this.domNode,"onmouseout",this,"unHighlight"));},deactivateEvents:function(){dojo.forEach(this.eventHandles,function(_464){dojo.disconnect(_464);});},uninitialize:function(){this.deactivateEvents();}});});},"builder/workbench/property/FileSelectWidgetBase":function(){define(["dojo/_base/declare","dojo/text!./templates/FileUploadExt.html","dijit/form/_FormWidget","paas/widgets/FileSelectDialog"],function(_465,_466,_467,_468){return _465("builder.workbench.property.FileSelectWidgetBase",[_467],{templateString:_466,uploadURL:null,handlers:null,disabled:false,envModel:null,uploadOnSubmit:false,fileInput:null,scannable:false,label:"",cancelText:"",deleteText:"",name:"attachment",constructor:function(){this.cancel_btn_title=builder.Environment.messages.CANCEL;this.cancelText=builder.Environment.messages.CANCEL;this.label=builder.Environment.messages.BROWSE;this.deleteText=builder.Environment.messages.DELETE;},postCreate:function(){this.handlers=[];this.handlers.push(this.connect(this.titleNode,"onclick","showDialog"));this.domNode.style.paddingBottom="5px";this.hideOverlay();},showOverlay:function(){dojo.style(this.fakeNodeHolder,"display","none");this.progressDiv.style.display="";dojo.style(this.overlay,{opacity:0,display:"block"});dojo.fadeIn({node:this.overlay,duration:100}).play();},hideOverlay:function(){dojo.style(this.fakeNodeHolder,"display","block");dojo.style(this.overlay,{opacity:0});this.progressDiv.style.display="none";},showDialog:function(){if(this.disabled){return;}if(!this.dialog){this.createSelectDialog();this._connectEvents();}this.dialog.show();},_connectEvents:function(){this.connect(this.dialog,"onUpload",function(data){var _469=data.filename;if(data.url){this.value=data;this.inputNode.value=decodeURI(_469);}else{this.set("value",_469);}this.onChange();});},createSelectDialog:function(){var self=this;this.dialog=new _468({localAction:this.uploadURL,remoteAction:this.uploadURL,localFormValidate:function(_46a){if(_46a&&_46a!=""){var _46b=this.fileInput.isValid();if(!_46b){return _46b;}_46b=self.validateDuplicateArtifacts(_46a);if(!_46b){dojo.publish("/builder/property/notification",[["warning","APPMODEL_TOOLING_UPLOAD_SAME_NAME"]]);}return _46b;}else{var msg=dojo.string.substitute(paas.Base.messages.APPMODEL_TOOLING_NAME_REQUIRED,[paas.Base.messages.LOCAL_FILE]);dojo.publish("/builder/property/notification",[["warning",msg]]);return false;}},getFileNameFromURL:dojo.hitch(this,this.getFileNameFromURL),fileExtensions:this.fileExtensions,uploadOnSubmit:this.uploadOnSubmit,name:this.name,scannable:this.scannable});this.fileInput=this.dialog.fileInput.fileInput;},deleteFile:function(){if(this.disabled){return;}this.set("value","");this.onChange();},_tranformFilePath:function(_46c){var _46d="";if(dojo.isIE||dojo.isChrome||dojo.isSafari){var _46e=_46c.lastIndexOf("\\")+1;_46d=_46c.slice(_46e);}else{_46d=_46c;}return _46d;},getFileNameFromURL:function(url){if(!url){return;}var _46f=url;var _470=url.lastIndexOf("/");if(_470>-1){_46f=url.substring(_470+1);}var _471=_46f;var i=1;var _470=0;while(this.validateDuplicateArtifacts(_471)===false){_470=_46f.indexOf(".");_471=_46f.substring(0,_470)+"-"+i+_46f.substring(_470);i++;}return _471;},validateDuplicateArtifacts:function(_472){return true;var i,j;var _473;var _474;var _475=true;dojo.forEach(builder.util.FileUploadManager.uploadingFiles,function(_476){if(this._tranformFilePath(_472)===_476){_475=false;}},this);if(!_475){return _475;}var _477=this._tranformFilePath(_472);var _478=null;if(this.envModel){_478=this.envModel.components;}else{if(builder&&builder.Environment&&builder.Environment.diagram){_478=builder.Environment.diagram.components;}else{_478=[this.model];}}dojo.forEach(_478,function(_479){_473=_479.propertyMetadata?_479.propertyMetadata:[];for(j=0;j<_473.length;j++){if(_473[j].type&&_473[j].type==="file"&&_479.properties){_474=_479.properties[_473[j].id];if(_477==_474){if(_479.id==this.model.id&&_473[j].id==this.metadata.id){}else{_475=false;}}}}},this);return _475;},onChange:function(){},set:function(name,_47a){if(name=="value"){this.value=_47a?_47a:"";var _47b=_47a;if(_47a&&_47a.url){_47b=_47a.filename;}this.inputNode.value=decodeURI(_47b);if(_47b!=""){this.deleteNode.style.display="";}else{this.deleteNode.style.display="none";}}else{if(name=="disabled"){this.disabled=_47a;this.inputNode.disabled=_47a;}}},get:function(name){if(name=="value"){return this.value;}else{if(name=="disabled"){return this.disabled;}}}});});},"paas/widgets/MaintenanceNotification":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_Templated","builder/workbench/MessageBoxWidget","paas/common/util"],function(_47c,_47d,_47e,_47f,_480){return _47c("paas.widgets.MaintenanceNotification",[_47d,_47e],{templateString:"<div style=\"position:absolute; top: 0px; left: 560px; width: 400px; display: none; z-index: 1000;\"><div dojoattachpoint=\"messageBox\" dojotype=\"builder.workbench.MessageBoxWidget\"></div></div>",widgetsInTemplate:true,postCreate:function(){var self=this;_480.getDeferred("GET","/admin/resources/maintenance_schedules").addCallback(function(resp){if(dojo.isArray(resp)&&resp.length>0){self.showNotification(resp[0]);}else{dojo.style(self.domNode,"display","none");}}).addErrback(function(_481){dojo.style(self.domNode,"display","none");console.error(_481);});},showNotification:function(_482){if(_482.start_time==null||_482.end_time==null){return;}var _483=new Date().getTime();var _484=_482.start_time;var _485=_482.end_time;if(_483<_484){var _486=_480.formatDateLong(_484,"short")+" - "+_480.formatDateLong(_485,"short");var _487=dojo.string.substitute(dojo.string.substitute(paas.Base.messages.SYSTEM_IN_MAINTENANCE_TO_BE,[_486]));this.messageBox.infoWithoutFade(_487);if(this.messageBox.msgPaneText){this.messageBox.msgPaneText.title=_487;}}else{if(_483>=_484&&_483<=_485){var _486=_480.formatDateLong(_484,"short")+" - "+_480.formatDateLong(_485,"short");this.messageBox.infoWithoutFade(dojo.string.substitute(paas.Base.messages.SUSPENDING_M,[_486]));if(this.messageBox.msgPaneText){this.messageBox.msgPaneText.title=dojo.string.substitute(paas.Base.messages.SYSTEM_IN_MAINTENANCE,[_486]);}}else{return;}}dojo.style(this.domNode,"display","");}});});},"builder/util/Encoder":function(){define(["dojo/_base/lang","dojox/encoding/base64"],function(lang,_488){var _489=lang.getObject("builder",true);var _48a=lang.getObject("util.Encoder",true,_489);_48a=_489.util.Encoder={XOR_PREFIX:"<xor>",dataDependencyPattern:/\$\{.+\}/,stringToBytes:function(s){var ba=[];for(var i=0;i<s.length;++i){ba.push(s.charCodeAt(i));}return ba;},bytesToString:function(ba){var s="";dojo.forEach(ba,function(c){s+=String.fromCharCode(c);});return s;},xor:function(_48b){var _48c=95;if(_48b!=null){for(i=0;i<_48b.length;i++){_48b[i]=_48c^_48b[i];}}return _48b;},startsWith:function(str,_48d){return str.substring(0,_48d.length)===_48d;},decode:function(_48e){if(_48e!=null&&this.startsWith(_48e,this.XOR_PREFIX)){_48e=_48e.substring(this.XOR_PREFIX.length);var _48f=_488.decode(_48e);result=this.xor(_48f);var _490=this.bytesToString(result);return _490;}else{return _48e;}},encode:function(_491){var _492=_491;if(_491!=null&&_491.length>0&&!this.startsWith(_491,this.XOR_PREFIX)&&!_491.match(this.dataDependencyPattern)){var _493=this.xor(this.stringToBytes(_491));_492=this.XOR_PREFIX+_488.encode(_493);}return _492;}};return _48a;});},"builder/command/MoveToLayerCommand":function(){define(["dojo/_base/declare","builder/base/command/Command"],function(_494,_495){return _494("builder.command.MoveToLayerCommand",[_495],{componentId:null,newLayerId:null,oldLayerId:null,constructor:function(_496,_497){this.component=_496;this.componentId=_496.id;this.newLayerId=_497;},execute:function(){var _498=builder.Environment.diagram.getComponentById(this.componentId);if(!_498){return;}var _499=_498.layer;this.oldLayerId=_499.id;_499.removeComponent(_498);var _49a=builder.Environment.diagram.getLayerById(this.newLayerId);_49a.addComponent(_498);this._postProcessStatus(_499,_49a,_498);dojo.publish("onDiagramChanged");},undo:function(){var _49b=builder.Environment.diagram.getComponentById(this.componentId);if(!_49b){return;}var _49c=_49b.layer;_49c.removeComponent(_49b);var _49d=builder.Environment.diagram.getLayerById(this.oldLayerId);_49d.addComponent(_49b);_49b.setLayer(_49d);this._postProcessStatus(_49c,_49d,_49b);dojo.publish("onDiagramChanged");},canExecute:function(){if(this.component.isReferenced()){dojo.publish("/builder/editor/notification",[["info","BUILDER_LAYER_REFERENCE_NO_OPERATION"]]);return false;}return true;},_postProcessStatus:function(_49e,_49f,_4a0){var _4a1=_49e.enabled;var _4a2=_49f.enabled;if((_4a1&&_4a2)||(!_4a1&&!_4a2)){return;}_4a2?_4a0.enable():_4a0.disable();var self=this;dojo.forEach(_4a0.incomingConnections,function(_4a3){self._changeConnectionStatus(_4a3);});dojo.forEach(_4a0.outgoingConnections,function(_4a4){self._changeConnectionStatus(_4a4);});},_changeConnectionStatus:function(_4a5){var _4a6=_4a5.fromComponent.layer.enabled&&_4a5.toComponent.layer.enabled;_4a6?_4a5.enable():_4a5.disable();}});});},"builder/workbench/componentsView/ComponentOperation":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentOperation.html"],function(_4a7,_4a8,_4a9,_4aa,_4ab){return _4a7("builder.workbench.componentsView.ComponentOperation",[_4a8,_4a9,_4aa],{templateString:_4ab,widgetsInTemplate:true,appModel:null,postCreate:function(){var _4ac=this.nameColumn.insertRow(0);this.nameItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"name",label:builder.Environment.messages.BUILDER_CLEDITOR_NAME,type:"string",required:false},properties:{name:""},labelWidth:"60px",model:this.appModel},_4ac);var _4ad=this.implementationColumn.insertRow(0);this.implementationItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"implementation",label:builder.Environment.messages.BUILDER_CLEDITOR_OPERATION_IMPL,type:"file",required:false},properties:{implementation:""},propertiesEnv:{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"},labelWidth:"120px",model:this.appModel},_4ad);var _4ae=this.deleteColumn.insertRow(0);var _4af=document.createElement("img");_4af.src="/tooling/images/close_normal.png";_4af.style.cursor="pointer";_4ae.appendChild(_4af);this.deleteHandle=dojo.connect(_4af,"onclick",dojo.hitch(this,"deleteItem"));},deleteItem:function(){},destroy:function(){dojo.disconnect(this.deleteHandle);if(this.nameItem!=null){this.nameItem.destroyRecursive();}if(this.implementationItem!=null){this.implementationItem.destroyRecursive();}this.inherited(arguments);},getOperation:function(){var _4b0={};_4b0.name=this.nameItem.getPropertyValue();_4b0.implementation=this.implementationItem.getPropertyValue();return _4b0;}});});},"builder/workbench/linksView/Link":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/Link.html","builder/workbench/componentsView/ComponentItem","builder/workbench/componentsView/CollapsibleSection","builder/workbench/componentsView/ComponentProperty","builder/workbench/componentsView/ComponentOperation","builder/workbench/linksView/LinkListCollapsibleSection","builder/workbench/linksView/ComponentPatternType","builder/workbench/componentsView/NodeListCollapsibleSection","builder/workbench/componentsView/OperationListCollapsibleSection","builder/workbench/componentsView/PatternTypeListCollapsibleSection","builder/workbench/componentsView/PropertyListCollapsibleSection"],function(_4b1,_4b2,_4b3,_4b4,_4b5,_4b6,_4b7,_4b8,_4b9,_4ba,_4bb,_4bc,_4bd){return _4b1("builder.workbench.linksView.Link",[_4b2,_4b3,_4b4],{templateString:_4b5,widgetsInTemplate:true,baseDir:"/opt/ibm/rainmaker/purescale.app/private/expanded/ibm/maestro.appmodel.tooling-4.1.0.0/public/tooling/builder/workbench/linksView/links/",appModel:null,rowCount:0,id:null,constructor:function(){this.hintAssocPtypes=builder.Environment.messages.BUILDER_CLEDITOR_ASSOC_PTYPES;this.hintValidSources=builder.Environment.messages.BUILDER_CLEDITOR_LINK_VALID_SOURCES;this.hintValidTargets=builder.Environment.messages.BUILDER_CLEDITOR_LINK_VALID_TARGETS;this.hintProperties=builder.Environment.messages.BUILDER_CLEDITOR_PROPERTIES;this.hintLinkOps=builder.Environment.messages.BUILDER_CLEDITOR_LINK_OPS;this.hintCustomOps=builder.Environment.messages.BUILDER_CLEDITOR_CUSTOM_OPS;this.hintBtnOk=builder.Environment.messages.BUILDER_CLEDITOR_BTN_OK;this.hintBtnCancel=builder.Environment.messages.BUILDER_CLEDITOR_BTN_CANCEL;this.hintAdvancedSettings=builder.Environment.messages.BUILDER_CLEDITOR_ADV_SETTINGS;this.hintAdvancedSettingsDots=builder.Environment.messages.BUILDER_CLEDITOR_ADV_SETTINGS_DOTS;this.sourceLabel=builder.Environment.messages.BUILDER_CLEDITOR_LINK_SOURCE_LABEL;this.targetLabel=builder.Environment.messages.BUILDER_CLEDITOR_LINK_TARGET_LABEL;},postCreate:function(){this.id=new Date().getTime();this.sourcesSection.setAppModel(this.appModel);this.sourcesSection.addRow();this.targetsSection.setAppModel(this.appModel);this.targetsSection.addRow();this.propertiesSection.setAppModel(this.appModel);this.customOperationsSection.setAppModel(this.appModel);this.nameItems=new Array();this.linkOperationItemsSource=new Array();this.linkOperationItemsTarget=new Array();this.addRow(this.nameTable,this.nameItems,{id:"name",label:builder.Environment.messages.BUILDER_CLEDITOR_NAME,type:"string",regExp:"^[a-zA-Z0-9]+$",required:false},{name:""},null,"80px");this.addRow(this.nameTable,this.nameItems,{id:"description",label:builder.Environment.messages.BUILDER_CLEDITOR_DESCRIPTION,type:"string",required:false},{description:""},null,"80px");var _4be=new Array();_4be=this.createDerivedFromPosibilitiesArray();this.addRow(this.nameTable,this.nameItems,{id:"derivedFrom",label:builder.Environment.messages.BUILDER_CLEDITOR_DERIVEDFROM,type:"string",options:_4be,displayType:"list"},{derivedFrom:""});this.addRow(this.sourceTable,this.linkOperationItemsSource,{id:"source_preconfigure",label:builder.Environment.messages.BUILDER_CLEDITOR_LINK_OP_SOURCE_PRECONFIGURE_ENDPOINT,type:"file",required:false},{source_preconfigure:""},{uploadFileUrl:"/tooling/builder/workbench/linksView/uploader.groovy"},"200px");this.addRow(this.sourceTable,this.linkOperationItemsSource,{id:"source_postconfigure",label:builder.Environment.messages.BUILDER_CLEDITOR_LINK_OP_SOURCE_POSTCONFIGURE_ENDPOINT,type:"file",required:false},{source_postconfigure:""},{uploadFileUrl:"/tooling/builder/workbench/linksView/uploader.groovy"},"200px");this.addRow(this.sourceTable,this.linkOperationItemsSource,{id:"source_establish",label:builder.Environment.messages.BUILDER_CLEDITOR_LINK_OP_SOURCE_ESTABLISH,type:"file",required:false},{source_establish:""},{uploadFileUrl:"/tooling/builder/workbench/linksView/uploader.groovy"});this.addRow(this.targetTable,this.linkOperationItemsTarget,{id:"target_preconfigure",label:builder.Environment.messages.BUILDER_CLEDITOR_LINK_OP_TARGET_PRECONFIGURE_ENDPOINT,type:"file",required:false},{target_preconfigure:""},{uploadFileUrl:"/tooling/builder/workbench/linksView/uploader.groovy"},"400px");this.addRow(this.targetTable,this.linkOperationItemsTarget,{id:"target_postconfigure",label:builder.Environment.messages.BUILDER_CLEDITOR_LINK_OP_TARGET_POSTCONFIGURE_ENDPOINT,type:"file",required:false},{target_postconfigure:""},{uploadFileUrl:"/tooling/builder/workbench/linksView/uploader.groovy"},"400px");this.addRow(this.targetTable,this.linkOperationItemsTarget,{id:"target_establish",label:builder.Environment.messages.BUILDER_CLEDITOR_LINK_OP_TARGET_ESTABLISH,type:"file",required:false},{target_establish:""},{uploadFileUrl:"/tooling/builder/workbench/linksView/uploader.groovy"});dojo.xhrGet({url:"/resources/patternTypes?version=vr&status=avail",headers:{"Content-Type":"application/json"},sync:false,handleAs:"json",load:dojo.hitch(this,"initialize"),error:dojo.hitch(this,"handlePatternTypesLoadError")});},createDerivedFromPosibilitiesArray:function(){var _4bf=new Array();_4bf.push({name:"HostedOn",value:"HostedOn"});_4bf.push({name:"DependsOn",value:"DependsOn"});_4bf.push({name:"ConnectsTo",value:"ConnectsTo"});return _4bf;},handlePatternTypesLoadError:function(_4c0,_4c1){},initialize:function(_4c2,_4c3){var _4c4=builder.Environment.diagram;this.primaryPatternType=_4c4.patterntype;this.primaryPatternTypeShortname=_4c4.patterntype;var _4c5="";var _4c6=new Array();for(var _4c7 in _4c2){var _4c8=_4c2[_4c7];if(_4c8.shortname==this.primaryPatternType){for(var _4c9 in _4c8.categories){var _4ca=_4c8.categories[_4c9];if(_4c5.length==0){_4c5=_4ca.id;}_4c6.push({name:_4ca.label,value:_4ca.id});}this.primaryPatternType=this.primaryPatternType+"/"+_4c8.version;this.primaryPatternTypeVersion=_4c8.version;}}},addRow:function(_4cb,_4cc,_4cd,_4ce,_4cf,_4d0){if(_4d0==null){_4d0="100px";}var row=_4cb.insertRow(_4cc.length);var item=new builder.workbench.componentsView.ComponentItem({metadata:_4cd,properties:_4ce,propertiesEnv:_4cf,labelWidth:_4d0,model:this.appModel},row);_4cc.push(item);},getID:function(){return this.id;},getName:function(){var name=null;var link=this;var _4d1=link.nameItems;for(var i=0;i<_4d1.length;i++){if(_4d1[i].metadata.id=="name"){name=_4d1[i].valueWidget.value;break;}}return name;},save:function(){var node={};node.baseDir=this.baseDir;node.patternType=this.primaryPatternType;node.secondaryPatternTypes=new Array();node.links=new Array();var link={};if(this.nameItems&&(this.nameItems.length==3)){var name=this.nameItems[0].getPropertyValue();var _4d2=this.nameItems[1].getPropertyValue();var _4d3=this.nameItems[2].getPropertyValue();link.name=name;link.description=_4d2;link.derivedFrom=_4d3;}link.sources=new Array();var _4d4=this.sourcesSection.getItems();for(var _4d5 in _4d4){var _4d6=_4d4[_4d5];var _4d7=_4d6.getPatternType();var _4d8=_4d7.type;link.sources.push(_4d8);}link.targets=new Array();var _4d9=this.targetsSection.getItems();for(var _4d5 in _4d9){var _4da=_4d9[_4d5];var _4d7=_4da.getPatternType();var _4d8=_4d7.type;link.targets.push(_4d8);}link.properties=new Array();var _4db=this.propertiesSection.getItems();for(var _4d5 in _4db){var _4dc=_4db[_4d5];var _4dd=_4dc.getProperty();link.properties.push(_4dd);}link.interfaces=new Array();var _4de={};_4de.name="linkOperations";_4de.operations=new Array();var _4df=this.linkOperationItemsSource[0];var _4e0=_4df.getPropertyValue();var _4e1={};_4e1.name="source_preconfigure";_4e1.implementation=_4e0;_4de.operations.push(_4e1);var _4df=this.linkOperationItemsSource[1];var _4e0=_4df.getPropertyValue();var _4e2={};_4e2.name="source_postconfigure";_4e2.implementation=_4e0;_4de.operations.push(_4e2);var _4df=this.linkOperationItemsSource[2];var _4e0=_4df.getPropertyValue();var _4e3={};_4e3.name="source_establish";_4e3.implementation=_4e0;_4de.operations.push(_4e3);var _4df=this.linkOperationItemsTarget[0];var _4e0=_4df.getPropertyValue();var _4e4={};_4e4.name="target_preconfigure";_4e4.implementation=_4e0;_4de.operations.push(_4e4);var _4df=this.linkOperationItemsTarget[1];var _4e0=_4df.getPropertyValue();var _4e5={};_4e5.name="target_postconfigure";_4e5.implementation=_4e0;_4de.operations.push(_4e5);var _4df=this.linkOperationItemsTarget[2];var _4e0=_4df.getPropertyValue();var _4e6={};_4e6.name="target_establish";_4e6.implementation=_4e0;_4de.operations.push(_4e6);link.interfaces.push(_4de);var _4e7=null;var _4e8=this.customOperationsSection.getItems();for(var _4d5 in _4e8){var _4e9=_4e8[_4d5];var _4ea=_4e9.getOperation();var _4eb={};_4eb.name=_4ea.name;_4eb.implementation=_4ea.implementation;if(_4e7==null){_4e7={};_4e7.name="custom";_4e7.operations=new Array();}_4e7.operations.push(_4eb);}if(_4e7!=null){link.interfaces.push(_4e7);}node.links.push(link);dojo.publish("/builder/linkeditor/notification",[["infoWithoutFade","BUILDER_CLEDITOR_MSG_LINK_SAVING",this.nameItems[0].getPropertyValue()]]);dojo.xhrPost({url:"/resources/linkTypes",headers:{"Content-Type":"application/json"},encoding:"utf-8",postData:dojo.toJson(node),handleAs:"json",load:dojo.hitch(this,"handleSave"),error:dojo.hitch(this,"handleSaveError")});},handleSave:function(_4ec){var _4ed=new Array();_4ed=paas.common.SolutionUtil.getPatternTypes();var _4ee=new Array();for(var i=0;i<_4ed.length;i++){var _4ef=_4ed[i].version;var _4f0=_4ed[i].shortname;var _4f1=_4ee.concat(paas.common.SolutionUtil.getPlugins(_4f0,_4ef));_4ee=_4f1;}var _4f2=[];var l=_4f1.length;for(var i=0;i<l;i++){for(var j=i+1;j<l;j++){if(_4f1[i]===_4f1[j]){j=++i;}}_4f2.push(_4f1[i]);}var _4f3=new Object();_4f3.category="";_4f3.enabled=true;_4f3.id=this.nameItems[0].getPropertyValue();_4f3.label=this.nameItems[1].getPropertyValue();for(var _4f4 in _4f2){var _4f5=_4f2[_4f4].split("/");if(_4f5[0]==_4f3.id){_4f3.pluginName=_4f2[_4f4];break;}}_4f3.source=new Array();_4f3.target=new Array();_4f3.source.push(this.sourcesSection.items[0].typeItem.getPropertyValue());_4f3.target.push(this.targetsSection.items[0].typeItem.getPropertyValue());_4f3.type="link";_4f3.properties=new Array();_4f3.attributes=new Array();var _4f6=this.propertiesSection.getItems();propertyKeyValues=new Object();for(var _4f7 in _4f6){var _4f8=_4f6[_4f7];var _4f9=_4f8.getProperty();propertyKeyValues[_4f9.name]=_4f9.value;var _4fa=new Object();var _4fb=_4f9.advancedProperty;_4fa.advanced=false;_4fa.description=_4f9.description;if(_4f9.type=="password"){_4fa.displayType="password";_4fa.type="string";}else{_4fa.displayType=null;_4fa.type=_4f9.type;}_4fa.id=_4f9.name;_4fa.label=_4f9.description;_4fa.name=_4f9.name;_4fa.required=_4f9.advancedProperty.required;_4fa.sampleValue=_4f9.value;if(_4fb.validValues!=""){var _4fc=new Array();var _4fd=_4fb.validValues;var _4fe=_4fd.split(",");for(var _4f7 in _4fe){var _4ff=_4fe[_4f7];var _500=new Object();_500.name=_4ff;_500.value=_4ff;_4fc.push(_500);}_4fa.option=_4fc;}_4f3.properties.push(_4f9);_4f3.attributes.push(_4fa);}if(JSON.stringify(propertyKeyValues)!="{}"){builder.util.Util.getMetadataService().properties=propertyKeyValues;}builder.util.Util.getMetadataService().metadata.links[_4f3.id]=_4f3;dojo.publish("/builder/linkeditor/notification",[["info","BUILDER_CLEDITOR_MSG_LINK_SAVED",this.nameItems[0].getPropertyValue()]]);},handleSaveError:function(_501){dojo.publish("/builder/linkeditor/notification",[["error","BUILDER_CLEDITOR_MSG_COMPONENT_SAVE_ERROR",this.nameItems[0].getPropertyValue()]]);},destroy:function(){dojo.forEach(this.nameItems,function(item){item.destroyRecursive();});this.sourcesSection.destroy();this.targetsSection.destroy();this.propertiesSection.destroy();dojo.forEach(this.linkOperationItemsSource,function(item){item.destroyRecursive();});dojo.forEach(this.linkOperationItemsTarget,function(item){item.destroyRecursive();});this.customOperationsSection.destroy();this.inherited(arguments);}});});},"builder/command/EnableGroupCommand":function(){define(["dojo/_base/declare","builder/base/command/Command"],function(_502,_503){return _502("builder.command.EnableGroupCommand",[_503],{modelId:null,groupId:null,newValue:null,oldValue:null,constructor:function(_504,_505,_506,_507){this.modelId=_504;this.groupId=_505;this.oldValue=_506;this.newValue=_507;if(builder.Environment.diagram){var _508=builder.Environment.diagram.getComponentById(this.modelId);this.model={"attributes":dojo.clone(_508.getProperties()),"groups":dojo.clone(_508.getGroups())};}},execute:function(){dojo.publish("onDiagramChanged");dojo.publish("onGroupChanged",[[this.modelId,this.groupId,this.newValue,this.model]]);},undo:function(){dojo.publish("onDiagramChanged");dojo.publish("onGroupChanged",[[this.modelId,this.groupId,this.oldValue,this.model]]);},canExecute:function(){return true;}});});},"builder/workbench/editor/AppPolicyFrame":function(){define(["dojo/_base/declare","builder/workbench/editor/ComponentFigureFrame"],function(_509,_50a){return _509("builder.workbench.editor.AppPolicyFrame",[_50a],{imageSize:"64px",constructor:function(){this.buttons.splice(0,3);},backgroundCreate:function(){this.figureImage.style.background="url("+builder.util.FileUtil.getComponentFigurePath(this.component.metadata.image)+") no-repeat center";dojo.style(this.figureImage,{"width":this.imageSize,"height":this.imageSize,"position":"absolute"});dojo.style(this.backImageContainer,{width:this.imageSize,height:this.imageSize});dojo.style(this.toolbarContainer,"left","83px");dojo.removeClass(this.contentContainer,"firgureFrame_content");dojo.style(this.nameNode.domNode,"width",this.imageSize);},onSelected:function(){this.inherited(arguments);dojo.removeClass(this.frameBorderContainer,"compSelected");dojo.addClass(this.frameBorderContainer,"policySelected");},onUnselect:function(){this.inherited(arguments);dojo.removeClass(this.frameBorderContainer,"policySelected");},onHover:function(){},_setFigureMovable:function(){},postCreate:function(){this.inherited(arguments);this.nameNode.set("disabled",true);dojo.removeClass(this.nameNode.domNode,"dijitInlineEditBoxDisplayMode");this.removePort();}});});},"dojox/widget/WizardPane":function(){define(["dojo/_base/lang","dojo/_base/declare","dijit/layout/ContentPane"],function(lang,_50b,_50c){return _50b("dojox.widget.WizardPane",_50c,{canGoBack:true,passFunction:null,doneFunction:null,startup:function(){this.inherited(arguments);if(this.isFirstChild){this.canGoBack=false;}if(lang.isString(this.passFunction)){this.passFunction=lang.getObject(this.passFunction);}if(lang.isString(this.doneFunction)&&this.doneFunction){this.doneFunction=lang.getObject(this.doneFunction);}},_onShow:function(){if(this.isFirstChild){this.canGoBack=false;}this.inherited(arguments);},_checkPass:function(){var r=true;if(this.passFunction&&lang.isFunction(this.passFunction)){var _50d=this.passFunction();switch(typeof _50d){case "boolean":r=_50d;break;case "string":alert(_50d);r=false;break;}}return r;},done:function(){if(this.doneFunction&&lang.isFunction(this.doneFunction)){this.doneFunction();}}});});},"builder/command/ImportApplicationCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/util/array","builder/command/RemoveLayerCommand"],function(_50e,_50f,_510,_511){return _50e("builder.command.ImportApplicationCommand",[_50f],{resourceURL:paas.common.constants.APPLICATION_REST_URL,removeLayerCmd:null,loadResult:null,constructor:function(_512){this.applicationURL=this.resourceURL+encodeURI(_512);this.diagram=builder.Environment.diagram;},execute:function(){var _513=this.diagram.currentLayer;if(this.removeLayerCmd){this.removeLayerCmd.undo();this.removeLayerCmd=null;}else{if(this.loadResult.isValid){new builder.service.JsonToDiagram(this.diagram).load(this.loadResult.resp,true);}}var _514=_510.last(this.diagram.layers);var _515=builder.Environment.layerPalette;_515.getLayerItem(_514).setUnchangable();if(_513.isReferenced()){for(var i=0;i<this.diagram.layers.length;i++){if(!this.diagram.layers[i].isReferenced()){_513=this.diagram.layers[i];break;}}}_515.getLayerItem(_513).onSelect();dojo.publish("onDiagramChanged");dojo.publish("/layer/add",[_514]);},undo:function(){var _516=_510.last(this.diagram.layers);this.removeLayerCmd=new builder.command.RemoveLayerCommand(_516);this.removeLayerCmd.execute();dojo.publish("onDiagramChanged");dojo.publish("/layer/remove",[_516]);},canExecute:function(){this.loadResult=builder.Environment.modelService.importApplication(this.applicationURL);if(!this.loadResult.isValid){return false;}return true;}});});},"builder/workbench/listView/ApplicationItem":function(){define(["dojo/_base/declare","builder/workbench/listView/ListItem"],function(_517,_518){return _517("builder.workbench.listView.ApplicationItem",[_518],{postCreate:function(){this.inherited(arguments);},createTitleWidget:function(){this.titleImageNode.src="/tooling/images/cloud/ac22_application_24.png";this.titleNameNode.innerHTML="<span class='boldFont' style='padding-top:5px'>"+builder.Environment.messages.APPLICATION_ITEM_TITLE_WIDGET_TITLE+"</span>";if(this.helpBtnContainer){this.helpBtnContainer.style.display="none";}},createNameWidget:function(){},createPropertiesWidget:function(){this.inherited(arguments);if(!window.saveType||window.saveType==this.properties.type){this.propsMap["type"].setUnchangable();}},updatePropertyWidget:function(_519,_51a){this.inherited(arguments);if(_519==="name"){builder.Environment.modelService.setWindowTitle(_51a);}}});});},"builder/workbench/orderView/OrderFramePort":function(){define(["dojo/_base/declare","builder/workbench/editor/Port"],function(_51b,Port){return _51b("builder.workbench.orderView.OrderFramePort",[Port],{frame:null,_showTempLink:function(_51c,_51d){if(!(this._templink)){this._templink=new builder.workbench.editor.Link(builder.Environment.diagram);this._templink.surface=builder.Environment.orderView.surface;}this.frame.caculatePositionInSurface();var p1=this.frame.rightPositionInSurface;var p2={x:_51d.x-this.frame.orderViewPosition.x,y:_51d.y-this.frame.orderViewPosition.y};var mode;if(p1.x<p2.x){mode=1;}else{mode=2;}this._templink.setStyle(builder.util.CssUtil.getLinkStyleByComponentType(this.component.metadata.type));this._templink.paint(p1,p2,false,mode);}});});},"builder/workbench/linksView/LinkCategoryPalette":function(){define(["dojo/_base/declare","builder/workbench/palette/CategoryPalette","builder/workbench/linksView/LinkCategoryPaletteItem"],function(_51e,_51f,_520){return _51e("builder.workbench.linksView.LinkCategoryPalette",[_51f],{postCreate:function(){this.linkItems=new Array();this.linkItemSeparators=new Array();var _521=dijit.byId("linkControlContainer");if(_521){var self=this;this.connect(_521,"layout",function(){var _522=dojo.marginBox(self.assetContainer.domNode);if(_522&&_522.h>=60){self.menuContainer.style.height=(_522.h-60)+"px";}});this.connect(_521,"toggle",function(){_521.layout();});}this.containerMenu=new dijit.Menu({style:"border: none; width: 100%"});this.containerMenu.startup();this.containerNode.appendChild(this.containerMenu.domNode);},load:function(_523){var _524=new Array();dojo.forEach(_524,dojo.hitch(this,function(link){this.addLink(link);}));},getLinkItemIndex:function(link){var _525=-1;if(link!=null){for(var _526 in this.linkItems){var _527=this.linkItems[_526];if(_527.getLink().getID()==link.getID()){return _526;}}}return _525;},getLinkItem:function(link){var _528=null;var _529=this.getLinkItemIndex(link);if(_529!=-1){_528=this.linkItems[_529];}return _528;},getSelectedLinkItem:function(){for(var _52a in this.linkItems){var _52b=this.linkItems[_52a];if(_52b.isSelected()){return _52b;}}return null;},clearLinkSelection:function(){for(var _52c in this.linkItems){var _52d=this.linkItems[_52c];_52d.setSelected(false);}},addLink:function(link){var self=this;var _52e=this.getLinkItem(link);if(_52e!=null){_52e.setLink(link);}else{var _52f={link:link,root:self};_52e=new builder.workbench.linksView.LinkCategoryPaletteItem(_52f);dojo.connect(_52e,"onClick",dojo.hitch(this,"itemSelected",_52e));this.containerMenu.addChild(_52e);this.linkItems.push(_52e);var _530=new dijit.MenuSeparator();this.containerMenu.addChild(_530);var _531=link.getID();this.linkItemSeparators[_531]=_530;}return _52e;},removeLink:function(link){var _532=this.getLinkItemIndex(link);if(_532!=-1){var _533=this.linkItems[_532];var _534=_533.getLink().getID();this.containerMenu.removeChild(_533);var _535=this.linkItemSeparators[_534];this.containerMenu.removeChild(_535);_533.destroy();this.linkItems.splice(_532,1);this.linkItemSeparators[_534]=null;delete this.linkItemSeparators[_534];var wait="here";}},itemSelected:function(item){}});});},"paas/vsys/VSysInterchangeableDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/VSysInterchangeableDialog.html","dojo/_base/array","dojo/_base/lang","dojo/store/Memory","dijit/form/FilteringSelect","dojo/dom-construct","dojo/dom-style","dojo/json"],function(_536,_537,_538,_539,_53a,_53b,lang,_53c,_53d,_53e,_53f,JSON){return _536("paas.vsys.VSysInterchangeableDialog",[_537,_538,_539],{templateString:_53a,constructor:function(){this.componentNotExistedTitle=paas.Base.messages.NOT_EXISTED_COMPONENT_TYPES;this.interchangeableComponentTitle=paas.Base.messages.INTERCHANGEABLE_COMPONENT_TYPES;this.notInterchangeableTitle=paas.Base.messages.NOT_INTERCHANGEABLE_TITLE;this.canInterchangeableTitle=paas.Base.messages.CAN_INTERCHANGEABLE_TITLE;this.filteringSelectMap={};},postCreate:function(){this.inherited(arguments);this.canInterchangeList=[];this.canNotInterchangeList=[];this.checkInterchangeableList();if(this.canNotInterchangeList.length>0){this.setTitleForNotInterchange();this.createMissingComponentsSection();this.dialog.onConfirm=lang.hitch(this,this.onConfirmNotInterchange);this.dialog.onCancel=lang.hitch(this,this.onCancelNotInterchange);}else{if(this.canInterchangeList.length>0){this.setTitleForCanInterchange();this.createInterchangeableSection();this.dialog.onConfirm=lang.hitch(this,this.onConfirmCanInterchange);}}},checkInterchangeableList:function(){if(!this.interchangeableResult){return;}for(var key in this.interchangeableResult){var item=this.interchangeableResult[key];if(!item.valid){var _540=item.interchangeableComponents;if(_540&&_540.length>0){this.canInterchangeList.push(key);}else{this.canNotInterchangeList.push(key);}}}},createInterchangeableSection:function(){_53b.forEach(this.canInterchangeList,lang.hitch(this,function(id){var _541=this.interchangeableResult[id].interchangeableComponents;var data=[];_53b.forEach(_541,function(item){data.push({"id":item,"name":item});});this.filteringSelectMap[id]=this.createInterchangeableItem(id,data);}));_53f.set(this.interchangeableTable,"display","");},createInterchangeableItem:function(id,data){var _542=new _53c({data:{identifier:"id",items:data}});var _543=new _53d({store:_542,value:data[0].id});var _544=_53e.create("tr");var td1=_53e.create("td",{"innerHTML":id},_544);var td2=_53e.create("td",null,_544);_53f.set(_543.domNode,"width","100%");_543.placeAt(td2).startup();this.interchangeableList.appendChild(_544);return _543;},createMissingComponentsSection:function(){_53b.forEach(this.canNotInterchangeList,lang.hitch(this,function(id){var _545=_53e.create("tr");var _546=_53e.create("td",{"innerHTML":id},_545);this.missingComponentsTable.appendChild(_545);}));_53f.set(this.missingComponentsTable,"display","");},setTitleForNotInterchange:function(){this.dialog.set("title",this.notInterchangeableTitle);},setTitleForCanInterchange:function(){this.dialog.set("title",this.canInterchangeableTitle);},onConfirmNotInterchange:function(){this.hide();},onCancelNotInterchange:function(){window.close();},onConfirmCanInterchange:function(){var _547={};for(var key in this.filteringSelectMap){_547[key]=this.filteringSelectMap[key].get("value");}var _548={"typeMap":_547};paasUtil.getDeferred("PUT","/resources/virtualSystemPatterns/"+appId,JSON.stringify(_548)).addCallback(lang.hitch(this,function(){this.hide();location.reload(true);}));},show:function(){this.dialog.show();},hide:function(){this.dialog.hide();}});});},"builder/vsys/workbench/editor/AdvancedOptionsDialog":function(){define(["dojo/_base/declare","paas/widgets/Dialog","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dijit/form/CheckBox","dojo/dom-attr","dojo/dom-style","builder/service/DiagramToJson","paas/common/util","dojo/json","builder/base/command/CompoundCommand","builder/util/CommandFactoryUtil","dojo/topic","dijit/form/RadioButton"],function(_549,_54a,lang,_54b,_54c,_54d,_54e,_54f,_550,_551,JSON,_552,_553,_554,_555){return _549("builder.vsys.workbench.editor.AdvancedOptionsDialog",[_54a],{constructor:function(_556){this.description=builder.Environment.messages.APPMODEL_VSYSNEXT_ADVANCED_OPTIONS_DESCRIPTION;this.configurations=lang.clone(_556);this.optionsValueMap={};this.subOptionsMap={};this.subFacetsMap={};this.facetCheckBoxMap={};},constructContent:function(){_54f.set(this.domNode,"width","700px");_54b.forEach(this.configurations,lang.hitch(this,function(_557){if(_557.facets&&_557.facets instanceof Array&&_557.facets[0]){var _558=this.createFacetSection(_557.facets[0],true);this.containerNode.appendChild(_558);}}));if(this.configurations.length===0){var _559=_54c.create("span",{"innerHTML":builder.Environment.messages.APPMODEL_VSYSNEXT_ADVANCED_OPTIONS_NO_OPTIONS});this.containerNode.appendChild(_559);}_54f.set(this.containerNode,"padding","0px");},createFacetSection:function(_55a,_55b,_55c){var id=_55a.id;var _55d=_55a.options;var _55e=_54c.create("div",{"style":_55c?"padding: 5px 0px 5px 25px":"padding: 5px 0px","class":_55b?"advancedOptionsDefault":"advancedOptionsDisabled"});var _55f=_54c.create("input",null,_55e);var _560=_54c.create("label",{"innerHTML":_55d[0].label,"style":"font: bold 12px Verdana,Arial,sans-serif; padding-left: 5px;"},_55e);var _561=_55d[0].isselected=="true"||(_55d[0].isselected!="false"&&_55d[0].isdefault=="true");if(_561){_55d[0].isselected=_561;}var self=this;var _562=this._createInfoDiv(_55d[0]);if(_562){_55e.appendChild(_562);}this.optionsValueMap[_55d[0].name]=_55d[0];this.subOptionsMap[id]=[];this.subFacetsMap[id]=[];if(_55d.length>1){if(_55a.maxcardinality===1&&_55a.mincardinality===1){var _563=this._createRadioSection(_55d,_561);_55e.appendChild(_563);}else{var _564=this._createOptionsSection(_55d,_561);_55e.appendChild(_564);}}if(_55a.facets){var _565=_55a.facets;_54b.forEach(_565,lang.hitch(this,function(_566){this.subFacetsMap[id].push(_566.id);var _567=this.createFacetSection(_566,_561,true);_55e.appendChild(_567);}));}(function(){var _568=_562;var _569=new _54d({"name":_55d[0].name,"checked":_561,"disabled":!_55b,"onChange":function(_56a){var _56b=_569.get("name");self._triggerEventOnRootOption(_56b,_56a,_55e,_568);}},_55f);self.facetCheckBoxMap[id]=_569;})();return _55e;},_createRadioSection:function(_56c,_56d){var _56e=_54c.create("div",{"style":"padding-left: 20px","class":_56d?"advancedOptionsDefault":"advancedOptionsDisabled"});for(var i=1;i<_56c.length;i++){var _56f=_54c.create("div",{"style":"padding: 5px;"},_56e);var _570=_54c.create("input",null,_56f);var _571=_54c.create("label",{"innerHTML":_56c[i].label,"style":"font: 12px Verdana,Arial,sans-serif; padding-left: 5px"},_56f);var _572=_56c[i].isselected=="true"||(_56c[i].isselected!="false"&&_56c[i].isdefault=="true");if(_572){_56c[i].isselected=_572;}var _573=this._createInfoDiv(_56c[i]);if(_573){_56e.appendChild(_573);}var self=this;(function(){var _574=_573;var _575=i;var _576=new _555({"name":_56c[i].name,"checked":_572,"disabled":!_56d,"onChange":function(_577){var _578=_576.get("name");var _579=_56c[_575].facetid;self._triggerEventOnSubRadio(_579,_578,_577,_574);}},_570);self.subOptionsMap[_56c[i].facetid].push(_576);})();this.optionsValueMap[_56c[i].name]=_56c[i];}return _56e;},_createOptionsSection:function(_57a,_57b){var _57c=_54c.create("div",{"style":"padding-left: 20px","class":_57b?"advancedOptionsDefault":"advancedOptionsDisabled"});for(var i=1;i<_57a.length;i++){var _57d=_54c.create("div",{"style":"padding: 5px;"},_57c);var _57e=_54c.create("input",null,_57d);var _57f=_54c.create("label",{"innerHTML":_57a[i].label,"style":"font: 12px Verdana,Arial,sans-serif; padding-left: 5px"},_57d);var _580=_57a[i].isselected=="true"||(_57a[i].isselected!="false"&&_57a[i].isdefault=="true");if(_580){_57a[i].isselected=_580;}var _581=this._createInfoDiv(_57a[i]);if(_581){_57c.appendChild(_581);}var self=this;(function(){var _582=_581;var _583=new _54d({"name":_57a[i].name,"checked":_580,"disabled":!_57b,"onChange":function(_584){var _585=_583.get("name");self._triggerEventOnSubOption(_585,_584,_582);}},_57e);self.subOptionsMap[_57a[i].facetid].push(_583);})();this.optionsValueMap[_57a[i].name]=_57a[i];}return _57c;},_createInfoDiv:function(_586){if(_586.infomessage){var _587=_54c.create("div",{"style":"padding-left: 20px; border: 1px solid #AAAAAA; display: none;"});var _588=_54c.create("img",{"src":"/images/info-icon.gif","alt":"General information","style":"vertical-align: bottom; opacity: 0.5;"},_587);var _589=_54c.create("span",{"innerHTML":_586.infomessage},_587);if(_586.isselected){_54f.set(_587,"display","");}return _587;}else{return null;}},_triggerEventOnRootOption:function(_58a,_58b,_58c,_58d){var _58e=this.optionsValueMap[_58a];_58e.isselected=_58b;this.setFacetDisabled(_58e.facetid,!_58b,false);var _58f=_58c.childNodes;if(_58f.length>2){for(var i=2;i<_58f.length;i++){_54e.set(_58f[i],"class",_58b?"advancedOptionsDefault":"advancedOptionsDisabled");}}if(_58d){if(_58b){_54f.set(_58d,"display","");}else{_54f.set(_58d,"display","none");}}},_triggerEventOnSubOption:function(_590,_591,_592){var _593=this.optionsValueMap[_590];_593.isselected=_591;if(_591){if(_592){_54f.set(_592,"display","");}}else{if(_592){_54f.set(_592,"display","none");}}},_triggerEventOnSubRadio:function(_594,_595,_596,_597){if(_596){var _598=this.optionsValueMap[_595];_598.isselected=_596;if(_597){_54f.set(_597,"display","");}var _599=this.subOptionsMap[_594];_54b.forEach(_599,lang.hitch(this,function(_59a){var _59b=_59a.get("name");if(_59b!=_595){_59a.set("checked",!_596);this.optionsValueMap[_59b].isselected=!_596;}}));}else{if(_597){_54f.set(_597,"display","none");}}},setFacetDisabled:function(_59c,_59d,_59e){if(_59e){this.facetCheckBoxMap[_59c].set("disabled",_59d);}var _59f=this.subOptionsMap[_59c];if(_59f){_54b.forEach(_59f,function(_5a0){_5a0.set("disabled",_59d);});}var _5a1=this.subFacetsMap[_59c];if(_5a1){if(_59d){_54b.forEach(_5a1,lang.hitch(this,function(_5a2){this.setFacetDisabled(_5a2,_59d,true);}));}else{_54b.forEach(_5a1,lang.hitch(this,function(_5a3){if(this.facetCheckBoxMap[_5a3].get("checked")){this.setFacetDisabled(_5a3,_59d,true);}else{this.facetCheckBoxMap[_5a3].set("disabled",_59d);}}));}}},_addOptions:function(_5a4,_5a5){var _5a6=[];var _5a7=[];var _5a8={};var _5a9=_5a5.nodes;var _5aa=_5a4.nodes;for(var i=0;i<_5a9.length;i++){for(var j=0;j<_5aa.length;j++){if(_5a9[i].id===_5aa[j].id){_5a8[_5a9[i].id]=true;break;}}}for(var m=0;m<_5a9.length;m++){if(!_5a8[_5a9[m].id]){_5a7.push(_5a9[m]);}}for(var n=0;n<_5aa.length;n++){if(!_5a8[_5aa[n].id]){_5a6.push(_5aa[n]);}}var _5ab=new _552();var _5ac=builder.Environment.diagram;for(var p=0;p<_5a6.length;p++){var _5ad=_5ac.getComponentById(_5a6[p].id);var _5ae=_553.getCommmandFactory().getRemovePolicyCommand(_5ad);_5ab.add(_5ae);}for(var q=0;q<_5a7.length;q++){var _5af=this._getContainerComponent(_5a7[q].id,_5a5.links);var _5b0=_553.getCommmandFactory().getAddPolicyCommand(_5a7[q].type,_5af);_5ab.add(_5b0);}builder.Environment.commandStack.executeCommand(_5ab);},_getContainerComponent:function(_5b1,_5b2){var _5b3=builder.Environment.diagram;for(var i=0;i<_5b2.length;i++){if(_5b2[i].source===_5b1){var _5b4=_5b3.getComponentById(_5b2[i].target);return _5b4;}}return null;},scanConfigurationsValue:function(_5b5){_54b.forEach(_5b5,lang.hitch(this,function(_5b6){if(_5b6.facets){this.scanFacetsValue(_5b6.facets,true);}}));},scanFacetsValue:function(_5b7,_5b8){_54b.forEach(_5b7,lang.hitch(this,function(_5b9){var _5ba=_5b9.options;if(_5ba&&_5ba.length>0){if(!_5b8){for(var i=0;i<_5ba.length;i++){_5ba[i].isselected=false;}}else{if(!_5ba[0].isselected&&_5ba.length>1){for(var j=1;j<_5ba.length;j++){_5ba[j].isselected=false;}}}}var _5bb=_5b9.facets;if(_5bb&&_5bb.length>0){if(_5ba&&_5ba.length>0){this.scanFacetsValue(_5bb,_5ba[0].isselected);}else{this.scanFacetsValue(_5bb,_5b8);}}}));},onConfirm:function(){var _5bc="/resources/vSysMetadata/realizedPatten";var _5bd=new _550(builder.Environment.diagram).getModel();this.scanConfigurationsValue(this.configurations);var _5be={"model":_5bd,"configurations":this.configurations};_551.getDeferred("put",_5bc,JSON.stringify(_5be)).addCallback(lang.hitch(this,function(resp){builder.Environment.diagram.selectedOptions=resp.model.selectedOptions;this._addOptions(_5bd.model,resp.model);_554.publish("/HVImages/AdvancedOptions/DataDirty",true);}));this.inherited(arguments);this.destroyRecursive();},onCancel:function(){this.scanConfigurationsValue(this.configurations);this.inherited(arguments);this.destroyRecursive();}});});},"builder/workbench/editor/ComponentContainerFrame":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentContainerFrame.html","builder/workbench/editor/ComponentFrame","builder/workbench/editor/PolicyFrame","builder/workbench/editor/LinkablePolicyFrame","builder/workbench/editor/LayerItem","builder/workbench/editor/CompOuterDisplay","dojo/topic","dojo/_base/lang","paas/common/constants","dojo/dom-construct","builder/util/Util","builder/vsys/util/VSysUtil","dojo/dom-style"],function(_5bf,_5c0,_5c1,_5c2,_5c3,_5c4,_5c5,_5c6,_5c7,_5c8,_5c9,lang,_5ca,_5cb,util,_5cc,_5cd){return _5bf("builder.workbench.editor.ComponentContainerFrame",[_5c0,_5c1,_5c2,builder.workbench.editor.ComponentFrame],{templateString:_5c3,widgetsInTemplate:true,component:null,toolbar:null,readOnlyMode:false,eventHandles:null,badgeWidgets:null,constructor:function(){this.buttons=[{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_ADDPOLICY_TITLE,todo:dojo.hitch(this,this.onShowPolicies),iconClass:"frameToolbarIcon addIcon"},{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_ADD_TITLE,todo:dojo.hitch(this,this.onAddComponent),iconClass:"frameToolbarIcon preconfigIcon"},{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_REMOVE_TITLE,todo:dojo.hitch(this,this.onDelete),iconClass:"frameToolbarIcon deleteIcon"},{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_HELP_TITLE,todo:dojo.hitch(this,this.onHelp),iconClass:"frameToolbarIcon helpIcon"}];this.attention_normal=paas.Base.messages.Status_Warning;this.scanningHint=builder.Environment.messages.ARTIFACT_SCANNING;this.scalingTitle=builder.Environment.messages.ARTIFACT_SCALING;},postCreate:function(){var _5ce=[{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_MINIVIEW_TITLE,todo:dojo.hitch(this,"toMiniView"),iconClass:"frameToolbarIcon miniviewIcon",isReadOnly:true}];this.badgeWidgets={};this.buttons=_5ce.concat(this.buttons);this.setName(this.component.id);this.createToolbar();this.createTitle(this.component);this.registerEvents();if(this.component.isReferenced()){this.layerNode.addOption(this.layerNode.createLayerOption(this.component.layer));}if(this.component.layer){this.setLayer(this.component.layer.id);}this._setFigureMovable();this._setDndTarget();this.appendFigureToDiagram(this.component.position);this.createPort();this.appendConnectionPort();this.createAttachedPolicies();if(this.component.readOnly){this.setUnchangable();}else{if(this.component.isReferenced()){this.setReferenced();}}dojo.subscribe("/builder/artifact/scanning",dojo.hitch(this,function(_5cf,_5d0){if(_5d0.id==this.component.id){if(this.scanContainer){this.scanContainer.style.display=_5cf?"":"none";}}}));},_checkPolicyIsValid:function(_5d1){if(_5d1.applicationPolicy){return false;}for(var i=0;i<this.component.incomingConnections.length;i++){if(_5d1.id==this.component.incomingConnections[i].fromComponent.metadata.id){return false;}}return true;},setLayer:function(_5d2){this.layerNode.set("value",_5d2);},onLayerChange:function(_5d3){if(this.component.layer.id===_5d3){return;}var cmd=new builder.command.MoveToLayerCommand(this.component,_5d3);builder.Environment.commandStack.executeCommand(cmd);},getInnerBox:function(){return builder.util.Util.coords(this.frameInnerContainer);},createToolbar:function(){var self=this;dojo.forEach(this.buttons,function(_5d4){var _5d5=new dijit.form.Button({title:_5d4.title,onClick:_5d4.todo,iconClass:_5d4.iconClass,showLabel:false,isReadOnly:_5d4.isReadOnly});self.toolbar.addChild(_5d5);});if(window.globalSetting.isCATALOG_CREATOR!==true){var _5d6=self.toolbar.getChildren()[2];if(_5d6.domNode){dojo.style(_5d6.domNode,"display","none");}}this.addPolicyBtn=this.toolbar.getChildren()[1];},createAttachedPolicies:function(){var _5d7=this.component.getAttachedPolicies();if(_5d7==null||_5d7.length==0){return;}dojo.forEach(_5d7,dojo.hitch(this,function(_5d8){if(_5d8.isVisible()){this.appendPolicy(_5d8);}}));},createPolicyFrame:function(_5d9){if(!_5d9.componentFrame||!_5d9.componentFrame.domNode){_5d9.componentFrame=new builder.workbench.editor.PolicyFrame({component:_5d9});}this.policiesNode.appendChild(_5d9.componentFrame.domNode);},appendPolicy:function(_5da){var self=this;this.createPolicyFrame(_5da);var _5db=_5da.metadata.display;if(_5db&&_5db.autoAttach){dojo.style(_5da.componentFrame.domNode,"display","none");if(this.component.isSelected()){this.component.showPropertiesWidget();}}else{if(_5cc.isLinkableSubComponent(_5da.metadata)){_5cd.set(this.policiesNode,"display","block");_5cd.set(this.separator,"display","block");}}if(_5db&&_5db.widgetType){dojo["require"](_5db.widgetType);var _5dc=new dojo.getObject(_5db.widgetType)({"policy":_5da,"componentID":this.component.id});this.outerDisplayContainer.appendChild(_5dc.domNode);dojo.style(this.outerDisplayContainer,"display","block");this.badgeWidgets[_5da.id]=_5dc;}this.rebuildPropertiesWidget(_5da);},removePolicy:function(_5dd){if(this.badgeWidgets[_5dd.id]!=null){var _5de=this.badgeWidgets[_5dd.id];dijit.registry.remove(_5de);_5de.destroyRecursive();delete this.badgeWidgets[_5dd.id];}this.rebuildPropertiesWidget(_5dd);},rebuildPropertiesWidget:function(_5df){if(_5df.metadata.type=="component"&&this.component.propertiesWidget){this.component.rebuildPropertiesWidget();if(this.component.isSelected()){this.component.showPropertiesWidget();}var self=this;var _5e0=this.component.getAttachedPolicies();if(_5e0){dojo.forEach(_5e0,function(_5e1){if(_5e1.metadata.type=="policy"){if(self.badgeWidgets[_5e1.id]!=null){self.badgeWidgets[_5e1.id].refreshBadgeWidget();}}});}}},createTitle:function(_5e2){var _5e3=_5e2.metadata;var _5e4=builder.util.Util.splitName(_5e3.label);var _5e5=_5e4.shortName?_5e4.shortName:"";this.titleNameNode.innerHTML=_5e5;this.titleImageNode.src=builder.util.FileUtil.getComponentIconPath(_5e3.image);this.titleImageNode.alt=builder.Environment.messages.IMAGE_ALT;},registerEvents:function(){this.inherited(arguments);var _5e6=(builder.util.Util.isTablet())?"touchstart":"onmousedown";this.eventHandles.push(dojo.connect(this.domNode,_5e6,this,function(e){var _5e7=builder.base.dnd.dragManager.getDropTarget(e);if(_5e7&&builder.base.dnd.isChild(this.domNode,_5e7.domNode)){return;}if(this.component.diagram.selectedModel&&_5cc.isAddon(this.component.diagram.selectedModel.metadata)){return;}this.component.diagram.selectModel(this.component);}));this.eventHandles.push(dojo.connect(this.domNode,"onmouseenter",this,"onHover"));this.eventHandles.push(dojo.connect(this.domNode,"onmouseleave",this,"onUnHover"));this.eventHandles.push(dojo.connect(this.nameNode,"onChange",this,"onNameChange"));this.eventHandles.push(dojo.connect(this.layerNode,"onChange",this,"onLayerChange"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseenter",this,"showTooltip"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseleave",this,"hideTooltip"));},calculateShowPosition:function(){var _5e8=builder.util.Util.coords(this.domNode,true);var left=_5e8.x+_5e8.w;var top=_5e8.y+12;return {left:left,top:top};},toMiniView:function(evt){if(evt){dojo.stopEvent(evt);}this.component.changeComponentView();},_checkPolicyIsValid:function(_5e9){for(var i=0;i<this.component.incomingConnections.length;i++){if(_5e9.id==this.component.incomingConnections[i].fromComponent.metadata.id){return false;}}return true;},onSelected:function(evt){dojo.addClass(this.frameInnerContainer,"containerFrame_border_selected");if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","");dojo.style(this.portContainer,"top",this.getPortYPosition()+"px");}dojo.style(this.toolbar.domNode,"display","block");this.component.showPropertiesWidget();this.focus();},onUnselect:function(){dojo.removeClass(this.frameInnerContainer,"containerFrame_border_selected");dojo.style(this.toolbar.domNode,"display","none");if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","none");}if(this.policyWidget&&this.policyWidget.domNode){this.policyWidget.destroyRecursive();}this.blur();},onHover:function(evt){if(builder.base.dnd.dragManager.currentDragSource!=null){return;}dojo.style(this.portContainer,"display","");if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","");dojo.style(this.portContainer,"top",this.getPortYPosition()+"px");}this.updateAddPolicyButton();if(this.toolbar&&this.toolbar.domNode){dojo.style(this.toolbar.domNode,"display","block");}},onUnHover:function(evt){if(this.component.diagram.selectedModel===this.component){return;}if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","none");}if(this.toolbar&&this.toolbar.domNode){dojo.style(this.toolbar.domNode,"display","none");}},getPortYPosition:function(){var rect=builder.util.Util.coords(this.frameInnerContainer);if(rect.h>8){rect.h=rect.h-8;}return rect.h/2;},disableToolbar:function(){if(!this.toolbar){return;}var _5ea=this.toolbar.getChildren();if(!_5ea){return;}for(var i=0;i<_5ea.length;i++){!_5ea[i].isReadOnly&&this.toolbar.removeChild(_5ea[i]);}},setReferenced:function(){if(this.isReferenced===true){return;}this.inherited(arguments);this.layerNode.set("disabled",true);if(!this.toolbar){return;}var _5eb=this.toolbar.getChildren();if(!_5eb){return;}_5eb[3]&&this.toolbar.removeChild(_5eb[3]);},enable:function(){this.inherited(arguments);this.toggleUIStatus("removeClass","disabledLayer");dojo.removeClass(this.frameInnerContainer,"disabledColor");if(!this.component.isReferenced()&&!this.component.readOnly){this.layerNode.set("disabled",false);}if(!this.component.readOnly){if(this.figureMoveable===null){this._setFigureMovable();}}if(!this.component.readOnly&&this.connectionPort){this.connectionPort.enableDragSource();}},disable:function(){this.inherited(arguments);dojo.removeClass(this.domNode,"disabledLayer");dojo.addClass(this.frameInnerContainer,"disabledColor");this.toggleUIStatus("addClass","disabledLayer");this.layerNode.set("disabled",true);this.unResigterMove();if(this.connectionPort){this.connectionPort.disableDragSource();}},toggleUIStatus:function(_5ec,_5ed){var _5ee=dojo[_5ec];this.toolbar&&_5ee.apply(null,[this.toolbar.domNode,_5ed]);_5ee.apply(null,[this.titleNode,_5ed]);_5ee.apply(null,[this.separator,_5ed]);_5ee.apply(null,[this.statusArea,_5ed]);_5ee.apply(null,[this.statusContainer,_5ed]);_5ee.apply(null,[this.nameNode.domNode,_5ed]);},removePort:function(){if(this.connectionPort){this.connectionPort.destroyRecursive();this.connectionPort=null;}},remove:function(){this.inherited(arguments);if(this.badgeWidgets){for(key in this.badgeWidgets){var _5ef=this.badgeWidgets[key];dijit.registry.remove(_5ef);_5ef.destroyRecursive();}}},setUnchangable:function(){if(this.readOnlyMode===true){return;}this.inherited(arguments);this.versionFilter.set("disabled",true);this.layerNode.set("disabled",true);if(this.connectionPort){this.connectionPort.disableDragSource();}this.disableToolbar();}});});},"builder/workbench/componentsView/NodeListCollapsibleSection":function(){define(["dojo/_base/declare","builder/workbench/componentsView/ComponentPatternType","builder/workbench/componentsView/ListCollapsibleSection"],function(_5f0,_5f1,_5f2){return _5f0("builder.workbench.componentsView.NodeListCollapsibleSection",[_5f2],{initializeData:function(){this.possibleItems=[];var _5f3=dijit.byId("componentCategoryPalette");var _5f4=_5f3.getCategories();for(var _5f5 in _5f4){var _5f6=_5f4[_5f5];for(var _5f7 in _5f6.items){var item=_5f6.items[_5f7];this.possibleItems.push({name:item.name,value:item.type});}}},createRowData:function(row){var _5f8=new builder.workbench.componentsView.ComponentPatternType({appModel:this.appModel,patternTypes:this.possibleItems},row);return _5f8;}});});},"paas/widgets/FileSelectDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/FileSelectDialog.html","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/ValidationTextBox","dijit/form/Form","paas/widgets/Dialog","paas/widgets/FileInputExt","paas/common/util","dojo/request/iframe"],function(_5f9,_5fa,_5fb,_5fc,_5fd,_5fe,_5ff,_600,Form,_601,_602,_603,_604){return _5f9("paas.widgets.FileSelectDialog",[_5fa,_5fb,_5fc],{templateString:_5fd,btnTextConfirm:paas.Base.messages.SELECT,defer:null,localAction:null,remoteAction:null,selectedForm:null,uploadOnSubmit:true,scannable:false,constructor:function(){var _605=paas.Base.messages;this.dialogTitle=_605.SELECT_FILE;this.local_upload_title=_605.LOCAL_UPLOAD_TITLE;this.remote_path_title=_605.REMOTE_PATH_TITLE;this.local_upload_hint=_605.LOCAL_FILE_HINT;this.remote_path_hint=_605.REMOTE_FILE_HINT;this.url_label=_605.URL_LABEL;this.user_name_label=_605.USER_NAME_LABEL;this.password_label=_605.PASSWORD_LABEL;this.download_label=_605.DOWNLOAD_FILE;this.file_upload_warning=_605.LARGE_FILE_WARNING;},postCreate:function(){this.url.set("regExp",dojox.validate.regexp.url({"allowLocal":true,"allowNamed":true}));this.url.set("invalidMessage",paas.Base.messages.INVALID_URL);this.connect(this.fileSelectTabContainer,"selectChild",function(_606){if(_606==this.urltab){this.selectedForm=this.remoteForm;this.url.focus();}else{this.selectedForm=this.localForm;}});this.fileInput.fileExtensions=this.fileExtensions;this.theDialog.onConfirm=dojo.hitch(this,"submit");this.connect(this.theDialog,"onCancel","onCancel");this.remoteForm.onSubmit=dojo.hitch(this,function(){var data=this.remoteForm.getValues();return this.remoteFormValidate(data);});this.localForm.onSubmit=dojo.hitch(this,function(){var file=this.fileInput.get("value");return this.localFormValidate(file);});this.localForm.setAttribute("enctype","multipart/form-data");this._initializeMessageWidget();},_initializeMessageWidget:function(){this.messageWidget=this.theDialog.messageWidget;this.messageWidget.domNode.style.marginTop="20px";var _607=["/builder/property/notification","/dashboard/configApp"];this.messageWidget.set("messages",paas.Base.messages);this.messageWidget.addTopics(_607);},remoteFormValidate:function(data){return this.remoteForm.validate();},localFormValidate:function(data){return true;},submit:function(){if(!this.selectedForm.onSubmit()){return;}var data={};if(this.selectedForm==this.remoteForm){data=this.selectedForm.getValues();data.filename=this.getFileNameFromURL(data.url);data.download=data.download[0]?true:false;if(this.uploadOnSubmit===true){data.scannable=data.download&&this.scannable;this.def=_603.getDeferred("POST",this.remoteAction,dojo.toJson(data));this.def.addCallbacks(dojo.hitch(this,"onComplete"),dojo.hitch(this,function(resp,_608){if(!_608){_608={};}dojo.mixin(_608,{"filename":data.filename,"canceled":this.def.canceled});this.onError(resp,_608);}));}}else{data.filename=this.fileInput.get("value");if(this.uploadOnSubmit===true){data.scannable=this.scannable;if(_603.supportFileAPI()){this.def=this.uploadFileByXHR();}else{this.def=_604(this.localAction,{method:"POST",form:this.localForm,handleAs:"json"},true);this.def.then(dojo.hitch(this,"handleSend"),dojo.hitch(this,"handleSend"));}}}this.onUpload(data);this.hide();},uploadFileByXHR:function(){var _609=this.fileInput.fileInput;var file=_609.files[0];var data=new FormData();data.append("attachment",file);var xhr=_603.sendXHR("post",this.localAction,data,{onLoad:dojo.hitch(this,"handleSend"),onError:dojo.hitch(this,"handleSend"),onProgress:dojo.hitch(this,"onProgress"),onAbort:dojo.hitch(this,"onCancel")});return xhr;},hasError:function(resp,_60a,_60b){if(resp&&resp.fileName&&resp.file&&(resp.file_name||resp.input_file_name)){return false;}return true;},handleSend:function(resp,_60c,_60d){if(typeof (resp)=="string"){if(resp.indexOf("<textarea>")>=0){var _60e=resp.indexOf("<textarea>")+10;var end=resp.indexOf("</textarea>");resp=dojo.fromJson(resp.substring(_60e,end));}}if(this.hasError(resp,_60c,_60d)){if(!_60c){_60c={};}dojo.mixin(_60c,{"filename":this.fileInput.get("value"),"canceled":this.isCanceled()});this.onError(resp,_60c,_60d);}else{this.onComplete(resp,_60c,_60d);}},show:function(){this.reset();this.theDialog.show();},hide:function(){this.theDialog.hide();},reset:function(){this.localForm.reset();this.remoteForm.reset();var _60f=this.fileSelectTabContainer.getChildren();this.fileSelectTabContainer.selectChild(_60f[0]);},getFileNameFromURL:function(url){if(!url){return;}var _610=url.lastIndexOf("/");var _611="link-to-"+url.substring(_610+1);return _611;},onUpload:function(data){},onComplete:function(data,_612,_613){this.def=null;},onError:function(data,_614,_615){this.def=null;},onProgress:function(e){},isCanceled:function(){if(this.def){if(this.def.isCanceled){return this.def.isCanceled();}else{if(this.def.status!=null&&this.def.status!=0){return false;}else{return true;}}}else{return true;}},onCancel:function(e){if(!this.def){return;}if(this.def.abort){this.def.abort();}else{this.def.cancel();}this.def=null;}});});},"builder/service/ToolingMetaDataManagement":function(){define(["dojo/_base/lang"],function(lang){var _616=lang.getObject("builder",true);lang.getObject("service.ToolingMetaDataManagement",true,_616);var _617=_616.service.ToolingMetaDataManagement={repository:{},defaultMetadata:{position:{x:"0px",y:"0px"}},put:function(_618,_619){this.repository[_618]=_619;},get:function(_61a){if(this.repository[_61a]){return this.repository[_61a];}else{return this.defaultMetadata;}},putAll:function(_61b){for(var i=0;i<_61b.length;i++){var _61c={};if(_61b[i]){_61c.position=_61b[i].position;this.put(_61b[i].name,_61c);}}},clearAll:function(){this.repository={};},serialize:function(){var list=[];for(var _61d in this.repository){var data={};data.id=_61d;data.position=this.get(_61d).position;list.push(data);}return list;}};return _617;});},"builder/workbench/componentsView/PatternTypeListCollapsibleSection":function(){define(["dojo/_base/declare","builder/workbench/componentsView/ComponentPatternType","builder/workbench/componentsView/ListCollapsibleSection"],function(_61e,_61f,_620){return _61e("builder.workbench.componentsView.PatternTypeListCollapsibleSection",[_620],{initializeData:function(){dojo.xhrGet({url:"/resources/patternTypes?version=vr&status=avail",headers:{"Content-Type":"application/json"},sync:false,handleAs:"json",load:dojo.hitch(this,"initializePatternTypes"),error:dojo.hitch(this,"handlePatternTypesLoadError")});},handlePatternTypesLoadError:function(_621,_622){},initializePatternTypes:function(_623,_624){this.secondaryPatternTypes=[];this.secondaryPatternTypes.push({name:builder.Environment.messages.BUILDER_CLEDITOR_PTYPE_ALL,value:"*"});for(var _625 in _623){var _626=_623[_625];if(_626.shortname!=builder.Environment.diagram.patterntype){this.secondaryPatternTypes.push({name:_626.name,value:_626.shortname+"/"+_626.version});}}},createRowData:function(row){var _627=new builder.workbench.componentsView.ComponentPatternType({appModel:this.appModel,patternTypes:this.secondaryPatternTypes},row);return _627;}});});},"paas/common/MultiRackDeploymentUtil":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(_628,lang){var paas=lang.getObject("paas",true);var _629=lang.getObject("common.MultiRackDeploymentUtil",true,paas);_629=paas.common.MultiRackDeploymentUtil={isMultiRack:function(_62a){return paasUtil.getJsonObjectByPath(_62a,"virtual_system","is_local")==false;},getLocations:function(_62b){return paasUtil.getJsonObjectByPath(_62b,"virtual_system","locations");},isLocalId:function(_62c){return _62c==window.globalSetting.locationID;}};return _629;});},"builder/base/command/Command":function(){define(["dojo/_base/declare"],function(_62d){return _62d("builder.base.command.Command",null,{execute:function(){},undo:function(){},canExecute:function(){return true;}});});},"builder/service/DiagramToJson":function(){define(["dojo/_base/declare","builder/service/ToolingMetaDataManagement","paas/common/SolutionUtil","dojo/_base/array","builder/util/Util"],function(_62e,_62f,_630,_631,util){return _62e("builder.service.DiagramToJson",null,{container:null,constructor:function(_632){this.container=_632;},getModel:function(){var _633={"model":{"name":"hello","nodes":[],"links":[],"description":"hello"},"tooling":{"nodes":[],"links":[]},"layers":[{"nodes":[],"id":"layer_1","name":"layer_1"}]};this.generateAppAttrs(_633.model);this.getConnectionsModel(_633.model);this.getComponentsModel(_633.model);_633.layers=this.getLayersModel();_633.tooling=this.getToolingModel();var _634=this.getModelPolicies();if(_634.length>0){_633.model.applicationPolicies=_634;}_633.model.selectedOptions=this.getSelectedAdvancedOptions();return _633;},generateAppAttrs:function(_635){dojo.mixin(_635,this.container.serialize());},getModelPolicies:function(){var _636=[];var _637=this.container.getAttachedPolicies();dojo.forEach(_637,function(_638){_636.push(_638.id);});return _636;},getToolingModel:function(){var _639={"nodes":[],"links":[]};dojo.forEach(this.container.components,function(_63a){if(!_63a.isSubComponent()||_63a.isAppPolicy()){_639.nodes.push({id:_63a.getId(),location:_63a.getPosition(),ismini:_63a.ismini});}});return _639;},getComponentsModel:function(_63b){_63b.nodes=[];dojo.forEach(this.container.components,dojo.hitch(this,function(_63c){if(_63c.isReferenced()){return;}if(_63c.isCombinedComponent&&_63c.isCombinedComponent()){_63c.serialize(_63b.nodes,_63b.links);}else{_63b.nodes.push(_63c.serialize());}}));},getConnectionsModel:function(_63d){var _63e=[];dojo.forEach(this.container.connections,dojo.hitch(this,function(_63f){if(_63f.isReferenced()){return;}if(_63f.metadata.id==paas.common.constants.DATA_DEPENDS_LINK){return;}_63e.push(_63f.serialize());}));_63d.links=_63e;},getLayersModel:function(){var _640=[];dojo.forEach(this.container.layers,dojo.hitch(this,function(_641){_640.push(_641.serialize());}));return _640;},getSelectedAdvancedOptions:function(){if(this.container.selectedOptions){return this.container.selectedOptions;}}});});},"builder/command/RemoveBaseComponentCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/util/Util","builder/command/ChangePropertyCommand","builder/vsys/util/VSysUtil"],function(_642,_643,Util,_644,_645){return _642("builder.command.RemoveBaseComponentCommand",[_643],{constructor:function(_646){this.model=_646;this.modelId=_646.id;this.type=_646.metadata.id;this.properties=_646.properties;this.groups=_646.groups;this.visible=_646.isVisible();if(_646.layer){this.layerId=_646.layer.id;}},execute:function(){var self=this;var _647=builder.Environment.diagram.getComponentById(this.modelId);if(this.attachComponentId){var _648=builder.Environment.diagram.getComponentById(this.attachComponentId);}else{var _648=_645.findContainerComponent(_647);this.attachComponentId=_648.id;}this.compoundCmd=new builder.base.command.CompoundCommand();dojo.forEach(_647.outgoingConnections,dojo.hitch(this,function(_649){var cmd=new builder.command.RemoveConnectionCommand(_649);cmd.forcedRemove(true);this.compoundCmd.add(cmd);}));this.compoundCmd.execute();if(_647.layer){_647.layer.removeComponent(_647);}_647.remove();if(_647&&_647.metadata){dojo.forEach(_647.metadata.attributes,function(attr){if(self.properties[attr.id]&&Util.stringContainContent(self.properties[attr.id],"${pattern")){dojo.publish("onPatternAttributeReferenceChanged");}});}dojo.publish("onDiagramChanged",null);_648.rePaintComponent();_648.checkValidation&&_648.checkValidation();},undo:function(){var args={id:this.modelId,type:this.type,properties:this.properties,groups:this.groups,loadFromModel:true};var _64a=builder.Environment.diagram.addComponentByType(args);var _64b=builder.Environment.diagram.getLayerById(this.layerId);_64b.addComponent(_64a);this.compoundCmd.undo();dojo.publish("onDiagramChanged",null);},canExecute:function(){if(this.model.isReferenced()){dojo.publish("/builder/editor/notification",[["info","REFER_COMPONENT_NOT_REMOVED"]]);return false;}return true;}});});},"builder/workbench/property/FileSelectWidget":function(){define(["dojo/_base/declare","builder/workbench/property/FileSelectWidgetBase","builder/service/AppBindingService"],function(_64c,_64d,_64e){return _64c("builder.workbench.property.FileSelectWidget",[_64d],{uploadURL:null,scannable:false,uploadOnSubmit:true,cancelUpload:function(){this.dialog&&this.dialog.onCancel();},_connectEvents:function(){this.connect(this.dialog,"onUpload",function(data){this.showOverlay();var _64f=data.filename;this._scannable=data.scannable;builder.util.FileUploadManager.incUploadingCount(this._tranformFilePath(_64f));});this.connect(this.dialog,"onComplete",function(resp,_650,_651){this.hideOverlay();var _652=resp.input_file_name||resp.file_name;if(_652){builder.util.FileUploadManager.decUploadingCount(encodeURIComponent(_652));}this.set("value",resp.file);this.onChange();dojo.publish("/builder/property/notification",[["info","APPMODEL_TOOLING_UPLOAD_SUCCESS",resp.fileName]]);dojo.publish("onDiagramChanged",null);if(builder&&builder.Environment&&builder.Environment.modelService){builder.Environment.modelService.autoSave();}if(this._scannable!==false){_64e.loadAppBinding(this.model,this.metadata.id);}});this.connect(this.cancelNode,"onclick",function(){this.dialog.onCancel();this.progressNode.innerHTML="";this.overlay.style.width="180px";});this.connect(this.dialog,"onError",function(resp,_653,_654){var data=dojo.fromJson(resp.responseText);var _655=_653.filename;this.hideOverlay();builder.util.FileUploadManager.decUploadingCount(this._tranformFilePath(_655));if(_653.canceled){}else{if(data.errorMessage&&data.errorMessage!=""){var msg=dojo.string.substitute(paas.Base.messages.APPMODEL_TOOLING_UPLOAD_FAIL,[_655])+"<br>";msg+=dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLON,[paas.Base.messages.ERROR_MESSAGE])+data.errorMessage;dojo.publish("/builder/property/notification",[["error",msg]]);}else{dojo.publish("/builder/property/notification",[["error","APPMODEL_TOOLING_UPLOAD_FAIL",_655]]);}}});this.connect(this.dialog,"onProgress",function(e){if(e.lengthComputable){var done=e.position||e.loaded;var _656=e.totalSize||e.total;var _657=Math.floor((done*1000/_656)/10)+"%";this.progressNode.innerHTML=_657;this.overlay.style.width=Math.floor(done/_656*180)+"px";}else{this.overlay.innerHTML="&nbsp;";}});}});});},"builder/vsys/command/ChangeRoutingPolicyPropertyCommand":function(){define(["dojo/_base/declare","builder/command/ChangePropertyCommand","dojo/topic"],function(_658,_659,_65a){return _658("builder.vsys.command.ChangeRoutingPolicyPropertyCommand",[_659],{execute:function(){_65a.publish("routingPolicyConfiguration/repaintWidget",this.modelId,this.newValue);this.inherited(arguments);},undo:function(){_65a.publish("routingPolicyConfiguration/repaintWidget",this.modelId,this.oldValue);this.inherited(arguments);}});});},"builder/workbench/orderView/OrderFrame":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/OrderFrame.html","dijit/InlineEditBox","builder/workbench/editor/ComponentFrame","dojo/dom-geometry","builder/workbench/orderView/OrderFramePort","builder/base/dnd/DropTarget","dojo/_base/lang","dojo/on","builder/workbench/orderView/AddOrderConnectionCommand","dojo/topic","builder/workbench/orderView/OrderConstants","builder/base/dnd/Moveable","dojo/dom-style","builder/workbench/orderView/SwapComponentsOrderCommand","builder/workbench/orderView/OrderUtil","dojo/dom-attr"],function(_65b,_65c,_65d,_65e,_65f,_660,_661,_662,_663,_664,lang,on,_665,_666,_667,_668,_669,_66a,_66b,_66c){return _65b("builder.workbench.orderView.OrderFrame",[_65c,_65d,_65e,_661],{templateString:_65f,component:null,eventHandles:null,flowInConnections:null,flowOutConnections:null,frameWidth:_667.FRAME_WIDTH,frameHeight:_667.FRAME_HEIGHT,frameSpace:_667.FRAME_SPACE,x:null,y:null,lastFrameInRow:false,orderRow:null,previous:null,next:null,indexInRow:null,dndActionFlag:null,constructor:function(){this.flowInConnections=[];this.flowOutConnections=[];},postCreate:function(){this.eventHandles=[];var data=this.component.metadata;this.imgNode.src=builder.util.FileUtil.getComponentIconPath(data.thumbnail);this.setName(this.component.id);this.nameNode.set("disabled",true);if(this.component.readOnly===true){return;}this.createPort();this.appendConnectionPort();this.registerEvents();this._setDndTarget();this._setFigureMovable();this.dndActionFlag=false;},setXPosition:function(x){this.x=x;_669.set(this.orderFrameNode,"left",x+"px");_666.publish("onSurfaceWidthChanged",this);},setPosition:function(x,y,_66d){this.x=x;this.y=y;var self=this;require(["dojo/dom-style"],function(_66e){_66e.set(self.orderFrameNode,{position:"absolute",left:x+"px",top:y+"px"});});_666.publish("onSurfaceWidthChanged",this);if(_66d>0){this._setPositionCallBack();this._resetRowWidth(_66d);}if(_66d<0){this._checkFlowInConnections();this._invokeFramesInFlowOutConnections();this._resetRowWidth(_66d);}},_setPositionCallBack:function(){this._checkResizeSurface();this._repaintFlowInConnections();this._checkFlowOutConnections();},_checkResizeSurface:function(){},_repaintFlowInConnections:function(){for(var i=0;i<this.flowInConnections.length;i++){this.flowInConnections[i].repaint();}},_checkFlowOutConnections:function(){for(var i=0;i<this.flowOutConnections.length;i++){var _66f=this.flowOutConnections[i].toComponent.orderFrame;if(this.x<_66f.x){this.flowOutConnections[i].repaint();continue;}else{var _670=this.x+this.frameWidth+this.frameSpace-_66f.x;_66f.setPosition(_66f.x+_670,_66f.y,_670);}}},_checkFlowInConnections:function(){if(this.flowInConnections.length===0){return;}var _671=this.flowInConnections[0];var _672=_671.fromComponent.orderFrame;for(var i=1;i<this.flowInConnections.length;i++){var _673=this.flowInConnections[i];var _674=_673.fromComponent.orderFrame;if(_674.x>_672.x){_671=_673;_672=_674;}}var _675=_672.x+_672.frameWidth+_672.frameSpace;var _676=_675-this.x;this.setPosition(_675,this.y,_676);this._repaintFlowInConnections();},_invokeFramesInFlowOutConnections:function(){for(var i=0;i<this.flowOutConnections.length;i++){this.flowOutConnections[i].toComponent.orderFrame._checkFlowInConnections();}},_resetRowWidth:function(_677){if(this.lastFrameInRow){this.orderRow.reSetRowWidth(_677);}},onHover:function(){if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","");dojo.style(this.portContainer,"top",this.getPortYPosition()+"px");}},onUnHover:function(evt){if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","none");}},registerEvents:function(){var _678=on(this.domNode,"mouseenter",lang.hitch(this,this.onHover));this.eventHandles.push(_678);var _679=on(this.domNode,"mouseleave",lang.hitch(this,this.onUnHover));this.eventHandles.push(_679);},getPortYPosition:function(){var rect=builder.util.Util.coords(this.orderFrameNode);if(rect.h>8){rect.h=rect.h-8;}return rect.h/2;},caculatePositionInSurface:function(){var _67a=_662.position(builder.Environment.orderView.orderContainerNode,false);var _67b=_662.position(this.orderFrameNode,false);var _67c=_67b.x-_67a.x;var _67d=_67b.y-_67a.y;this.leftPositionInSurface={x:_67c,y:_67d+_67b.h/2};this.rightPositionInSurface={x:_67c+_67b.w,y:_67d+_67b.h/2};this.orderViewPosition=_67a;},createPort:function(){this.connectionPort=new _663({component:this.component,frame:this});},_setDndTarget:function(){this.dndDropTarget=new _664(this.domNode,["Port"],lang.hitch(this,"dropHandler"));this.eventHandles.push(dojo.connect(this.dndDropTarget,"onDragOver",this,"onDragOver"));this.eventHandles.push(dojo.connect(this.dndDropTarget,"onDragOut",this,"onDragOut"));this.eventHandles.push(dojo.connect(this.dndDropTarget,"onDropEnd",this,"onDropEnd"));},dropHandler:function(_67e,_67f,_680,_681){var _682=_67e.portWidget;var _683=_682.component;var _684=this.component;if(_66b.canBeDropdown(_683.orderFrame,_684.orderFrame)){var cmd=new _665(_683,_684);builder.Environment.orderViewCommandStack.executeCommand(cmd);}},onDragOver:function(){this.domNode.style.border="#FFAA55 dashed 1px";},onDragOut:function(){this.domNode.style.border="";},onDropEnd:function(){this.domNode.style.border="";},addFlowInConnection:function(_685){this.flowInConnections.push(_685);},addFlowOutConnection:function(_686){this.flowOutConnections.push(_686);},removeFlowInConnection:function(_687){if(this.flowInConnections.length===0){return;}var _688=-1;for(var i=0;i<this.flowInConnections.length;i++){if(this.flowInConnections[i].id==_687.id){_688=i;break;}}if(_688===-1){return;}this.flowInConnections.splice(_688,1);},removeFlowOutConnection:function(_689){if(this.flowOutConnections.length===0){return;}var _68a=-1;for(var i=0;i<this.flowOutConnections.length;i++){if(this.flowOutConnections[i].id==_689.id){_68a=i;break;}}if(_68a===-1){return;}this.flowOutConnections.splice(_68a,1);},_setFigureMovable:function(){if(!_66b.canBeOrdering(this.component)){return;}this.figureMoveable=new _668(this.domNode,{skip:true});this.figureMoveable.onFirstMove=lang.hitch(this,this.onFirstMove);this.figureMoveable.onMoved=lang.hitch(this,this.onMoved);this.figureMoveable.onMoveStop=lang.hitch(this,this.onMoveStop);var _68b=_66c.get(this.domNode,"class");_66c.set(this.domNode,"class",_68b+" dojoMoveItem");},onFirstMove:function(){var _68c=this.orderRow.placeholderFrame;var top=_669.get(this.domNode,"top");var left=_669.get(this.domNode,"left");this.previousLeft=left;this.previousTop=top;_669.set(_68c,"display","inline");_669.set(_68c,"top",top+"px");_669.set(_68c,"left",left+"px");this.dndActionFlag=true;},onMoved:function(){var _68d=this.findSwitchingFrame();if(_68d>=0){var _68e=this.orderRow.placeholderFrame;var top=_669.get(_68e,"top");var left=_669.get(_68e,"left");var _68f=this.orderRow.orderFrames[_68d];var _690=_669.get(_68f.domNode,"top");var _691=_669.get(_68f.domNode,"left");_68f.setPositionForDnD(top,left);_669.set(_68e,{top:_690+"px",left:_691+"px"});}},onMoveStop:function(){if(!this.dndActionFlag){return;}var _692=this.orderRow.placeholderFrame;_669.set(_692,"display","none");var top=_669.get(_692,"top");var left=_669.get(_692,"left");_669.set(this.domNode,{top:top+"px",left:left+"px"});this.x=left;this.y=top;this.orderRow.updateFramesOrder();if(this.checkOrderChangeInRow()){var cmd=new _66a(this.orderRow);builder.Environment.orderViewCommandStack.executeCommand(cmd);}this.dndActionFlag=false;},findSwitchingFrame:function(){var top=_669.get(this.domNode,"top");var left=_669.get(this.domNode,"left");var _693=this.orderRow.orderFrames;for(var i=1;i<_693.length;i++){var top1=_669.get(_693[i].domNode,"top");var _694=_669.get(_693[i].domNode,"left");if(((left>_694&&left-_694<_667.FRAME_WIDTH/2)||(left<_694&&_694-left<_667.FRAME_WIDTH/2))&&(top>top1?top-top1<_667.FRAME_HEIGHT:top1-top<_667.FRAME_HEIGHT)){if(this.canDrop(this,_693[i])){return i;}}}return -1;},canDrop:function(_695,_696){if(_695.indexInRow<_696.indexInRow){var _697=_696.component;for(var i=_695.indexInRow;i<_696.indexInRow;i++){var _698=this.orderRow.orderFrames[i].component;if(_66b.hasDataDependency(_698,_697)){return false;}}}else{var _697=_695.component;for(var i=_696.indexInRow;i<_695.indexInRow;i++){var _698=this.orderRow.orderFrames[i].component;if(_66b.hasDataDependency(_698,_697)){return false;}}}return true;},setPositionForDnD:function(top,left){this.previousTop=_669.get(this.domNode,"top");this.previousLeft=_669.get(this.domNode,"left");_669.set(this.domNode,{top:top+"px",left:left+"px"});this.x=left;this.y=top;},checkOrderChangeInRow:function(){var _699=this.orderRow.orderFrames;for(var i=0;i<_699.length;i++){var left=_669.get(_699[i].domNode,"left");if(!_699[i].previousLeft){continue;}if(_699[i].previousLeft!=left){return true;}}return false;},removeOldFlowInConnections:function(){var _69a=[];var _69b=[];for(var i=0;i<this.flowInConnections.length;i++){if(this.flowInConnections[i].type!=_667.FLOW_CONNECTION){_69a.push(this.flowInConnections[i]);}else{_69b.push(this.flowInConnections[i]);}}this.flowInConnections=_69a;this.connectionsToBeDestroy=_69b;},removeOldFlowOutConnections:function(){var _69c=[];for(var i=0;i<this.flowOutConnections.length;i++){if(this.flowOutConnections[i].type!=_667.FLOW_CONNECTION){_69c.push(this.flowOutConnections[i]);}}this.flowOutConnections=_69c;},destroyUselessFlowConnections:function(){if(!this.connectionsToBeDestroy){return;}for(var i=0;i<this.connectionsToBeDestroy.length;i++){this.connectionsToBeDestroy[i].remove();}},destroy:function(){this.inherited(arguments);var self=this;require(["dojo/_base/array"],function(_69d){_69d.forEach(self.eventHandles,function(_69e){_69e.remove();});});}});});},"builder/workbench/property/AddReferenceDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/AddReferenceDialog.html","dijit/form/FilteringSelect","paas/widgets/Dialog","builder/util/ValidationUtil","dojo/store/Memory","dojo/_base/lang","dijit/registry"],function(_69f,_6a0,_6a1,_6a2,_6a3,_6a4,_6a5,_6a6,_6a7,lang,_6a8){return _69f("builder.workbench.property.AddReferenceDialog",[_6a0,_6a1,_6a2],{templateString:_6a3,constructor:function(){this.add_reference_dialog_title=paas.Base.messages.BUILDER_ADD_REFERENCE;this.subTitle="<hr/>",this.refAttribute=paas.Base.messages.BUILDER_ADD_ATTRIBUTE;this.refComponent=paas.Base.messages.BUILDER_ADD_COMPONENT;this.refOutputAttr=paas.Base.messages.BUILDER_ADD_OP_ATTRIBUTE;this.refAttrValue=paas.Base.messages.BUILDER_ADD_OUTPUT_VALUE;this.patternParam=paas.Base.messages.PATTERN_PATTERN_PARAM;this.componentParam=paas.Base.messages.PATTERN_COMPONENT_PARAM;this.noPatternParam=paas.Base.messages.PATTERN_NO_PARAM;this.addButton=paas.Base.messages.PATTERN_ADDBUTTON;},postCreate:function(){this.inherited(arguments);this.connect(this.componentFiltering,"onChange",this.createOutputStore);this.valueTextBox.validator=lang.hitch(this,this.validateTextBox);this.dialog.onConfirm=lang.hitch(this,this.onConfirm);if(this.fromComponent&&this.fromComponent.id&&this.refLabel){this.refTitle.innerHTML="<strong>"+this.fromComponent.id+"-"+this.refLabel+"</strong>";}},onConfirm:function(){this.valueIsValid=this.valueTextBox.validate();if(!this.valueIsValid){this.valueTextBox.focus();this.valueTextBox.displayMessage(this.valueTextBox.errorMsg);return;}this.dialog.beforeConfirm();this.dialog.hide();},validateTextBox:function(_6a9,_6aa){var _6ab=_6a6.validateDataDependsOnValue(this.fromComponent,_6a9);if(!_6ab.valid){this.valueTextBox._set("errorMsg",_6ab.message);}return _6ab.valid;},show:function(_6ac,_6ad){this.reset(_6ad);this.createComponentStore();this.createPatternStore();this.dialog.show();},createComponentStore:function(){var _6ae=dojo.filter(builder.Environment.diagram.components,function(_6af){return (_6af.metadata&&_6af.metadata.outputs!=null&&_6af.metadata.outputs.length>0);});var _6b0=new _6a7({data:_6ae});this.componentFiltering.set("store",_6b0);},createPatternStore:function(){if(builder.Environment.diagram.patternAttrMetadata&&builder.Environment.diagram.patternAttrMetadata.length>=1){var _6b1=new _6a7({data:builder.Environment.diagram.patternAttrMetadata});this.patternFiltering.set("store",_6b1);dojo.style(this.patternAttrDisplay,"display","");dojo.style(this.addReferenceDisplayForPattern,"display","");dojo.style(this.noDisplay,"display","none");}else{dojo.style(this.patternAttrDisplay,"display","none");dojo.style(this.addReferenceDisplayForPattern,"display","none");dojo.style(this.noDisplay,"display","");}},createOutputStore:function(){var _6b2=this.componentFiltering.get("item");if(_6b2!=null){var _6b3=new _6a7({data:_6b2.metadata.outputs});this.attributeFiltering.set("store",_6b3);}},hide:function(){this.dialog.hide();},reset:function(_6b4){this.componentFiltering.reset();this.attributeFiltering.reset();this.valueTextBox.set("value",_6b4);},addPatternReference:function(){var _6b5=this.valueTextBox.get("value");var _6b6=this.patternFiltering.get("value");_6b5+="${pattern"+"."+_6b6+"}";this.valueTextBox.set("value",_6b5);},addComponentReference:function(){var _6b7=this.valueTextBox.get("value");var _6b8=this.componentFiltering.get("value");var _6b9=this.attributeFiltering.get("value");_6b7+="${"+_6b8+"."+_6b9+"}";this.valueTextBox.set("value",_6b7);},addReference:function(){var _6ba=this.valueTextBox.get("value");if(this.patternAttrRadio1&&this.patternAttrRadio1.get("checked")==true){var _6bb=this.patternFiltering.get("value");_6ba+="${pattern"+"."+_6bb+"}";}else{var _6bc=this.componentFiltering.get("value");var _6bd=this.attributeFiltering.get("value");_6ba+="${"+_6bc+"."+_6bd+"}";}this.valueTextBox.set("value",_6ba);},getReferenceValue:function(){return this.valueTextBox.get("value");},toggleReferenceRadio:function(){var self=this;if(this.patternAttrRadio1&&this.patternAttrRadio1.get("checked")==true){this.componentAttrDisplay.style.display="none";this.patternAttrDisplay.style.display="block";}else{this.componentAttrDisplay.style.display="block";this.patternAttrDisplay.style.display="none";}}});});},"builder/workbench/editor/HelpSmallGroup":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/HelpSmallGroup.html","dijit/Tooltip","dojox/html/entities","paas/common/util","builder/util/Util"],function(_6be,_6bf,_6c0,_6c1,_6c2,_6c3,_6c4,util,Util){return _6be("builder.workbench.editor.HelpSmallGroup",[_6bf,_6c0,_6c1],{widgetsInTemplate:true,name:"",description:"",attributes:null,attributeMap:null,expanded:false,templateString:_6c2,constructor:function(){this.collapseTitle=paas.Base.messages.DEPLOY_DETAIL_VIEW_COLLAPSE_BUTTON_TITLE;this.expansionTitle=paas.Base.messages.EXPANSION_HINT;this.desc=builder.Environment.messages.widgets_componentview_desc;this.requiredhint=builder.Environment.messages.CANVAS_HELP_POLICY_REQUIREDHINT;},postCreate:function(){this.inherited(arguments);this._createSmallGroupItem(this.name,this.description,this.attributes,this.attributeMap,this.itemsContainer);this.titleNode.innerHTML=this.name||"";this.itemdescription.innerHTML=this.description||"";if(this.expanded){this.expandTable();}else{this.collapseTable();}},_createSmallGroupItem:function(_6c5,_6c6,_6c7,_6c8,_6c9){var _6ca=dojo.create("div",null,_6c9);dojo.forEach(_6c7,function(_6cb){var _6cc=dojo.create("div",null,_6ca);var _6cd=dojo.create("span",null,_6cc);dojo.addClass(_6cd,"boldFont");var item=this.attributeMap[_6cb];var _6ce=dojo.string.substitute(builder.Environment.messages.LABEL_WITHCOLON,[item.label]);var _6cf=(item.required)?("<span class='requireShow'>"+this.requiredhint+"</span>"):"";_6cf+=_6ce+"&nbsp;";_6cd.innerHTML=_6cf;var _6d0=dojo.create("span",null,_6cc);_6d0.innerHTML=item.description;},this);},expandTable:function(){this.itemsContainer.style.display="";this.descContainer.style.display="";this.expanded=true;dojo.addClass(this.expansionNode,"wca-image-section-collapse-icon");dojo.removeClass(this.expansionNode,"wca-image-section-expand-icon");this.expansionNode.title=this.collapseTitle;},collapseTable:function(){this.itemsContainer.style.display="none";this.descContainer.style.display="none";this.expanded=false;dojo.removeClass(this.expansionNode,"wca-image-section-collapse-icon");dojo.addClass(this.expansionNode,"wca-image-section-expand-icon");this.expansionNode.title=this.expansionTitle;},changeExpanded:function(){if(this.expanded){this.collapseTable();}else{this.expandTable();}}});});},"builder/base/command/CompoundCommand":function(){define(["dojo/_base/declare","builder/base/command/Command"],function(_6d1,_6d2){return _6d1("builder.base.command.CompoundCommand",_6d2,{commands:null,executedCommands:null,constructor:function(){this.commands=[];this.executedCommands=[];},add:function(_6d3){this.commands.push(_6d3);},addAndExecute:function(_6d4){this.commands.push(_6d4);this.executedCommands.push(_6d4);return _6d4.execute();},execute:function(){dojo.forEach(this.commands,function(_6d5){if(dojo.indexOf(this.executedCommands,_6d5)==-1){_6d5.execute();}},this);},undo:function(){for(var i=this.commands.length-1;i>=0;i--){this.commands[i].undo();}this.executedCommands=[];}});});},"builder/workbench/componentsView/ComponentItem":function(){define(["dojo/_base/declare","builder/workbench/property/PropertyWidget","builder/workbench/property/InlineEditContainer"],function(_6d6,_6d7){return _6d6("builder.workbench.componentsView.ComponentItem",[_6d7],{lineMode:"one-line",labelWidth:"100px",postCreate:function(){this.inherited(arguments);if(this.properties==null){this.properties=new Array();}dojo.style(this.nameArea,"width",this.labelWidth);dojo.addClass(this.nameArea,"listViewLineSpace");dojo.addClass(this.valueArea,"listViewLineSpace");},_createValueWidget:function(type,_6d8){var args=this._createValidationArgs(this.metadata);args["class"]="propertyView_value";if(type==="array"){if(this.metadata["options"]){this.valueWidget=new paas.widgets.MultiSelectExt({"class":"propertyView_value",items:this.metadata["options"]},this.valueNode);dojo.addClass(this.domNode,"claro");}}else{if(type==="boolean"){this.valueWidget=new dijit.form.CheckBox({"class":"propertyView_value"},this.valueNode);}else{if(type==="string"){if(this.metadata["options"]!=null){if(this.metadata.displayType=="radio"){var name="list"+this.model.id+this.metadata.id;this.valueWidget=new builder.workbench.property.RadioGroup({"class":"propertyView_value",data:this.metadata["options"],"name":name},this.valueNode);dojo.addClass(this.domNode,"claro");}else{var _6d9=this._createStore(this.metadata["options"]);args["store"]=_6d9;this.valueWidget=new builder.workbench.property.InlineEditContainer({editor:"dijit.form.FilteringSelect",metadata:this.metadata,editorParams:args,autoSave:true},this.valueNode);}}else{if(this.metadata.displayType==="multi-string"){this.valueWidget=new builder.workbench.property.InlineEditContainer({editor:"dijit.form.SimpleTextarea",metadata:this.metadata,editorParams:args,autoSave:true},this.valueNode);}else{if(this.metadata.displayType==="password"){this.inherited(arguments);}else{this.valueWidget=new builder.workbench.property.InlineEditContainer({editor:"dijit.form.ValidationTextBox",metadata:this.metadata,editorParams:args,autoSave:true},this.valueNode);}}}}else{if(type==="number"&&this.metadata.displayType!=="percentage"){args["_formatter"]=function(_6da){return String(_6da);};if(args.regExp){args.regExpGen=function(){return args.regExp;};}this.valueWidget=new builder.workbench.property.InlineEditContainer({editor:"dijit.form.NumberTextBox",metadata:this.metadata,editorParams:args,autoSave:true},this.valueNode);}else{if(type==="file"){var url=null;if((typeof appId!="undefined")&&appId){url=paas.common.constants.APPLICATION_REST_URL+appId+"/artifacts?temp";}if(this.propertiesEnv&&this.propertiesEnv.uploadFileUrl){url=this.propertiesEnv.uploadFileUrl;}var _6db=true;if(this.propertiesEnv&&this.propertiesEnv.scannable==false){_6db=false;}this.valueWidget=new builder.workbench.property.FileUploadWidget({"class":"propertyView_value","style":{"width":"276px"},uploadURL:url,scannable:_6db,fileExtensions:this.metadata["extensions"],uploadRetryMax:10,model:this.model,metadata:this.metadata,envModel:this.propertiesEnv?this.propertiesEnv.envModel:null},this.valueNode);this.valueWidget.fileUpload.sentFile=_6d8;}else{this.inherited(arguments);}}}}}dojo.style(this.valueArea,"width","200px");},onPropertyChange:function(){}});});},"builder/workbench/orderView/OrderContainer":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/OrderContainer.html","builder/workbench/orderView/OrderFrame","builder/workbench/orderView/OrderRow","dojox/gfx","dojo/_base/lang","dojo/topic","builder/workbench/orderView/AddOrderConnectionCommand","builder/workbench/orderView/OrderConstants","dijit/registry","builder/workbench/orderView/AddDependencyConnectionCommand","dojo/_base/event","builder/workbench/orderView/SwapComponentsOrderCommand","builder/workbench/orderView/OrderUtil","builder/util/Util","builder/vsys/util/VSysUtil","builder/workbench/editor/Link"],function(_6dc,_6dd,_6de,_6df,_6e0,_6e1,_6e2,gfx,lang,_6e3,_6e4,_6e5,_6e6,_6e7,_6e8,_6e9,_6ea,util,_6eb,Link){return _6dc("builder.workbench.orderView.OrderContainer",[_6dd,_6de,_6df],{templateString:_6e0,diagram:null,metadataService:null,surface:null,componentRelations:null,orderRows:null,dependencyConnections:null,selectedModel:null,APPMODEL_ORDERING_INSTRUCTION:builder.Environment.messages.APPMODEL_ORDERING_INSTRUCTION,APPMODEL_ORDERING_FIXED_ORDERING:builder.Environment.messages.APPMODEL_ORDERING_FIXED_ORDERING,APPMODEL_ORDERING_CHANGABLE_ORDERING:builder.Environment.messages.APPMODEL_ORDERING_CHANGABLE_ORDERING,constructor:function(){this.componentTypes={image:"IMAGE",part:"PART",script_package:"SCRIPT_PACKAGE"};this.dependencyConnections=[];this.dataDependsOnCmds=[];},postCreate:function(){this.populateRelationsData();this.createOrderRows();this.createSurface();this.resetContainerAndSurface();_6e6.byId("orderingMessageWidget").addTopic("/ordering/notice");},resetContainerAndSurface:function(){if(!this.orderRows||this.orderRows.length===0){return;}var _6ec=this.orderRows[this.orderRows.length-1];var _6ed=parseInt(_6ec.domNode.style.top.replace("px",""))+_6e5.ROW_HEIGHT_WITH_ALL;this.orderContainerNode.height=_6ed+"px";var _6ee=this.surface.getDimensions();this.surface.setDimensions(_6ee.width,_6ed);},addDependencyConnection:function(_6ef){for(var i=0;i<this.dependencyConnections.length;i++){if(this.dependencyConnections[i].id==_6ef.id){return;}}this.dependencyConnections.push(_6ef);},deleteDependencyConnection:function(_6f0){var _6f1=-1;for(var i=0;i<this.dependencyConnections.length;i++){if(this.dependencyConnections[i].id==_6f0.id){_6f1=i;break;}}this.dependencyConnections.splice(_6f1,1);},clearDependencyConnections:function(){this.dependencyConnections.splice(0,this.dependencyConnections.length);},createOrderRows:function(){this.orderRows=[];var self=this;require(["dojo/_base/array"],function(_6f2){_6f2.forEach(self.componentRelations,function(_6f3,_6f4){var _6f5=self.createOneRow(_6f4,_6f3);var x="0px";var y=(_6e5.AREA_TOPSHIFT+_6f4*_6e5.ROW_HEIGHT_WITH_ALL)+"px";_6f5.setPosition(x,y);self.orderContainerNode.appendChild(_6f5.domNode);self.orderRows.push(_6f5);});});},paintOrderFlow:function(){for(var i=0;i<this.orderRows.length;i++){this.orderRows[i].paintFlowConnections();}this.paintDataDependencyConnections();this.paintOrderDependencyConnections();},canAddDependencyConnection:function(_6f6,_6f7){if(_6f6==_6f7||_6f6.orderRow==_6f7.orderRow){return false;}var _6f8=builder.Environment.orderView.dependencyConnections;for(var i=0;i<_6f8.length;i++){var _6f9=_6f8[i].fromComponent.orderFrame;var _6fa=_6f8[i].toComponent.orderFrame;if(_6f6.orderRow==_6f9.orderRow&&_6f7.orderRow==_6fa.orderRow){if(_6f6.indexInRow<=_6f9.indexInRow&&_6f7.indexInRow>=_6fa.indexInRow){return false;}}}return true;},paintOrderDependencyConnections:function(){var _6fb=builder.Environment.diagram.components;for(var i=0;i<_6fb.length;i++){if(_6fb[i].startsAfter){for(var j=0;j<_6fb[i].startsAfter.length;j++){if(_6fb[i].startsAfter[j].type==_6e5.STARTSAFTER_TYPE_ORDERING){var _6fc=builder.Environment.diagram.getComponentById(_6fb[i].startsAfter[j].id);if(this.canAddDependencyConnection(_6fc.orderFrame,_6fb[i].orderFrame)){var cmd=new _6e4(_6fc,_6fb[i]);builder.Environment.orderViewCommandStack.executeCommand(cmd);}}}}}},paintDataDependencyConnections:function(){var _6fd=builder.Environment.diagram.components;for(var i=0;i<_6fd.length;i++){var _6fe=_6fd[i].properties;for(var prop in _6fe){var _6ff=_6eb.getDataDependsOnComponentIDs(_6fe[prop]);if(_6ff&&_6ff instanceof Array&&_6ff.length>0){for(var j=0;j<_6ff.length;j++){var _700=_6ff[j];var _701=builder.Environment.diagram.getComponentById(_700);var _702=_6fd[i].getDataDependsOnConnByTarget(_701);if(_702&&_702.implyOrder){if(_701&&_701.orderFrame&&_6fd[i].orderFrame&&this.canAddDependencyConnection(_701.orderFrame,_6fd[i].orderFrame)){var cmd=new _6e7(_701,_6fd[i]);cmd.execute();this.dataDependsOnCmds.push(cmd);}}}}}}},getComponentRootType:function(id){var _703=this.getMetadataService().getComponentMetadata(id);if(_703["extends"]&&_703["extends"] instanceof Array){return arguments.callee.call(this,_703["extends"][0]);}return _703.id;},getMetadataService:function(){if(this.metadataService){return this.metadataService;}this.metadataService=builder.util.Util.getMetadataService();return this.metadataService;},populateRelationsData:function(){this.componentRelations=_6ea.getDefaultOrderData();},createOneRow:function(_704,_705){var _706=new _6e2({rowNum:_704,componentRelation:_705,surface:this.surface});return _706;},createSurface:function(){var _707=builder.Environment.orderViewContainer.style.width;var _708=builder.Environment.orderViewContainer.style.height;this.surface=gfx.createSurface(this.orderContainerNode,_707,_708);_6e3.subscribe("onSurfaceWidthChanged",lang.hitch(this,function(_709){var _70a=this.surface.getDimensions();var _70b=_6e5.ROW_MARGIN,_70c=_6e5.ROW_BORDER,_70d=_6e5.ROW_PADDING,_70e=_6e5.FRAME_WIDTH,_70f=_6e5.FRAME_BORDER,_710=_6e5.FRAME_PADDING;var _711=parseInt(_709.domNode.style.left.replace("px",""));var left=_70b+_70c+_70d+_711+_70e+(_70f+_710)*2;if(left>_70a.width){this.surface.setDimensions(left,_70a.height);}}));},createCategorySurface:function(){this.categorySurface=gfx.createSurface(this.orderingLineCategory,_6e5.CATEGORY_WIDTH,_6e5.CATEGORY_HEIGHT);},paintCategoryLinks:function(){if(!this.categorySurface){this.createCategorySurface();}this.categoryFixedLink=new Link();this.categoryFixedLink.surface=this.categorySurface;this.categoryFixedLink.setStyle({color:"#808080"});this.categoryFixedLink.paint({x:20,y:20},{x:80,y:20},false,1);this.categoryCustomizedLink=new Link();this.categoryCustomizedLink.surface=this.categorySurface;this.categoryCustomizedLink.setStyle({color:"#a52a2a"});this.categoryCustomizedLink.paint({x:20,y:50},{x:80,y:50},false,1);},resizeSurface:function(_712,_713){this.surface.setDimensions(_712+"px",_713+"px");},compareTwoString:function(_714,_715){return (_714.indexOf(_715)>-1)&&(_715.indexOf(_714)>-1);},paintFlowLinks:function(){require(["dojo/_base/array"],lang.hitch(this,function(_716){_716.forEach(this.orderRows,function(_717){_717.paintFlowLink();});}));},selectModel:function(_718,evt){if(evt){_6e8.stop(evt);}if(this.selectedModel===_718){return;}if(this.selectedModel&&this.selectedModel!=_718){this.selectedModel.onUnselect(evt);}_718.onSelected(evt);this.selectedModel=_718;},onSelected:function(){},onUnselect:function(){},onOrderContainerClick:function(evt){this.selectModel(this);},repaintOrderingView:function(type){this.populateRelationsData();for(var i=0;i<this.orderRows.length;i++){this.orderRows[i].updateFramesOrder();}for(var i=0;i<this.orderRows.length;i++){this.orderRows[i].resetFrames();}for(var i=0;i<this.orderRows.length;i++){this.orderRows[i].destroyFlowConnections();}for(var i=0;i<this.orderRows.length;i++){this.orderRows[i].paintFlowConnections();}this.repaintAllDependecnyConnections(type);},repaintAllDependecnyConnections:function(type){for(var i=0;i<this.dataDependsOnCmds.length;i++){this.dataDependsOnCmds[i].reexecute();}var _719=builder.Environment.orderViewCommandStack.getStack();var _71a=builder.Environment.orderViewCommandStack.getCurrent();if(type=="execute"){if(_71a>1){for(var i=0;i<_71a-1;i++){if(!(_719[i] instanceof _6e9)){_719[i].reexecute();}}}}else{if(type=="undo"){if(_71a>0){for(var i=0;i<_71a;i++){if(!(_719[i] instanceof _6e9)){_719[i].reexecute();}}}}}for(var i=0;i<this.orderRows.length;i++){this.orderRows[i].updateRowWidthAfterDnD();}},destroy:function(){this.inherited(arguments);var self=this;require(["dojo/_base/array"],function(_71b){_71b.forEach(self.orderRows,function(_71c){_71c.destroyRecursive();});});this.categoryFixedLink.remove();this.categoryCustomizedLink.remove();}});});},"paas/widgets/BackupEnabledNotification":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","builder/workbench/MessageBoxWidget","paas/common/util"],function(_71d,_71e,_71f,_720,_721,_722){return _71d([_71e,_71f,_720],{templateString:"<div style=\"position:absolute; top: -6px; left: 38em; width: 48em; display: none; z-index: 1000;\"><div dojoattachpoint=\"messageBox\" dojotype=\"builder/workbench/MessageBoxWidget\"></div></div>",postCreate:function(){if(window.globalSetting.isBackupRoleEnabled){var _723=paas.Base.messages.BACKUPROLEENABLED;this.messageBox.infoWithoutFade(_723);if(this.messageBox.msgPaneText){this.messageBox.msgPaneText.title=_723;}dojo.style(this.domNode,"display","");}else{dojo.style(this.domNode,"display","none");}}});});},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(lang,_724,_725){var _726=lang.getObject("validate.regexp",true,_725);_726=_725.validate.regexp={ipAddress:function(_727){_727=(typeof _727=="object")?_727:{};if(typeof _727.allowDottedDecimal!="boolean"){_727.allowDottedDecimal=true;}if(typeof _727.allowDottedHex!="boolean"){_727.allowDottedHex=true;}if(typeof _727.allowDottedOctal!="boolean"){_727.allowDottedOctal=true;}if(typeof _727.allowDecimal!="boolean"){_727.allowDecimal=true;}if(typeof _727.allowHex!="boolean"){_727.allowHex=true;}if(typeof _727.allowIPv6!="boolean"){_727.allowIPv6=true;}if(typeof _727.allowHybrid!="boolean"){_727.allowHybrid=true;}var _728="((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var _729="(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]";var _72a="(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]";var _72b="(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|"+"4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])";var _72c="0[xX]0*[\\da-fA-F]{1,8}";var _72d="([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}";var _72e="([\\da-fA-F]{1,4}\\:){6}"+"((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var a=[];if(_727.allowDottedDecimal){a.push(_728);}if(_727.allowDottedHex){a.push(_729);}if(_727.allowDottedOctal){a.push(_72a);}if(_727.allowDecimal){a.push(_72b);}if(_727.allowHex){a.push(_72c);}if(_727.allowIPv6){a.push(_72d);}if(_727.allowHybrid){a.push(_72e);}var _72f="";if(a.length>0){_72f="("+a.join("|")+")";}return _72f;},host:function(_730){_730=(typeof _730=="object")?_730:{};if(typeof _730.allowIP!="boolean"){_730.allowIP=true;}if(typeof _730.allowLocal!="boolean"){_730.allowLocal=false;}if(typeof _730.allowPort!="boolean"){_730.allowPort=true;}if(typeof _730.allowNamed!="boolean"){_730.allowNamed=false;}var _731="(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)";var _732="(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)";var _733=_730.allowPort?"(\\:\\d+)?":"";var _734="((?:"+_731+"\\.)+"+_732+"\\.?)";if(_730.allowIP){_734+="|"+_726.ipAddress(_730);}if(_730.allowLocal){_734+="|localhost";}if(_730.allowNamed){_734+="|^[^-][a-zA-Z0-9_-]*";}return "("+_734+")"+_733;},url:function(_735){_735=(typeof _735=="object")?_735:{};if(!("scheme" in _735)){_735.scheme=[true,false];}var _736=_724.buildGroupRE(_735.scheme,function(q){if(q){return "(https?|ftps?)\\://";}return "";});var _737="(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?";return _736+_726.host(_735)+_737;},emailAddress:function(_738){_738=(typeof _738=="object")?_738:{};if(typeof _738.allowCruft!="boolean"){_738.allowCruft=false;}_738.allowPort=false;var _739="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+";var _73a=_739+"@"+_726.host(_738);if(_738.allowCruft){_73a="<?(mailto\\:)?"+_73a+">?";}return _73a;},emailAddressList:function(_73b){_73b=(typeof _73b=="object")?_73b:{};if(typeof _73b.listSeparator!="string"){_73b.listSeparator="\\s;,";}var _73c=_726.emailAddress(_73b);var _73d="("+_73c+"\\s*["+_73b.listSeparator+"]\\s*)*"+_73c+"\\s*["+_73b.listSeparator+"]?\\s*";return _73d;},numberFormat:function(_73e){_73e=(typeof _73e=="object")?_73e:{};if(typeof _73e.format=="undefined"){_73e.format="###-###-####";}var _73f=function(_740){return _724.escapeString(_740,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d");};return _724.buildGroupRE(_73e.format,_73f);},ca:{postalCode:function(){return "([A-Z][0-9][A-Z] [0-9][A-Z][0-9])";},province:function(){return "(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)";}},us:{state:function(_741){_741=(typeof _741=="object")?_741:{};if(typeof _741.allowTerritories!="boolean"){_741.allowTerritories=true;}if(typeof _741.allowMilitary!="boolean"){_741.allowMilitary=true;}var _742="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|"+"NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";var _743="AS|FM|GU|MH|MP|PW|PR|VI";var _744="AA|AE|AP";if(_741.allowTerritories){_742+="|"+_743;}if(_741.allowMilitary){_742+="|"+_744;}return "("+_742+")";}}};return _726;});},"builder/service/LayoutService":function(){define(["dojo/_base/declare"],function(_745){return _745("builder.service.LayoutService",null,{_type:"horizontal",_yStart:60,_yEnd:200,_xStep:250,_yStep:90,minHeight:10,unitHeight:120,startX:10,figureHeight:58,_layeredNodes:null,_nodesPosition:null,_digraph:null,constructor:function(_746){this._digraph=_746;this._layeredNodes=[];this._nodesPosition=[];},generateNodesOfLevel0:function(){if(!this._digraph){return;}this._layeredNodes[0]=[];for(var i in this._digraph){if(this._digraph[i].incoming.length===0&&this._digraph[i].type!="swimlane"){this._layeredNodes[0].push(this._digraph[i].nodeName);}}},generateNodesOfNextLayer:function(){var _747=false;var _748=[];var _749=this._layeredNodes[this._layeredNodes.length-1];for(var i in _749){var _74a=this.getOutgoing(_749[i]);for(var j in _74a){if(!this.inArray(_74a[j],_748)){_748.push(_74a[j]);}}}if(_748.length!=0){this._layeredNodes.push(_748);_747=true;}return _747;},inArray:function(_74b,arr){for(var k in arr){if(arr[k]===_74b){return true;}}return false;},getOutgoing:function(_74c){for(var i in this._digraph){if(this._digraph[i].nodeName===_74c){return this._digraph[i].outgoing;}}},generateLayeredNodes:function(){this.generateNodesOfLevel0();while(1){if(!this.generateNodesOfNextLayer()){break;}}},layoutLanes:function(){var _74d=this.buildEmptyLaneWithSize();for(var i=0;i<this._layeredNodes.length;i++){var _74e=this.buildEmptyLaneWithSize();var _74f=this._layeredNodes[i];_74e=this.buildLaneWithSizeInLayer(_74e,_74f);_74d=this.updateLaneWithSize(_74d,_74e);}this.lanesWithSize=_74d;for(var i=0;i<_74d.length-1;i++){if(_74d[i].size%2==0){_74d[i].size++;}_74d[i].lane.figureWidget.domNode.style.height=this.minHeight+_74d[i].size*this.unitHeight+"px";}},buildLaneWithSizeInLayer:function(_750,_751){for(var m=0;m<_751.length;m++){var node=_751[m];if(!node.lane){_750[_750.length-1].size++;continue;}for(var n=0;n<_750.length-1;n++){if(node.lane.activityId==_750[n].lane.activityId){_750[n].size++;}}}return _750;},updateLaneWithSize:function(_752,_753){for(var i=0;i<_752.length;i++){if(_752[i].size<_753[i].size){_752[i].size=_753[i].size;}}return _752;},buildEmptyLaneWithSize:function(){var _754=[];var _755=[];for(var i=0;i<_754.length;i++){var item={lane:_754[i],size:0};_755.push(item);}_755.push({lane:null,size:0});return _755;},generateLayeredNodesWithLane:function(){this.generateLayeredNodes();var _756=[];for(var i=0;i<this._layeredNodes.length;i++){for(var j=0;j<this._layeredNodes[i].length;j++){var _757=this.getMySwimlane(this._layeredNodes[i][j],_756);this._layeredNodes[i][j]={nodeId:this._layeredNodes[i][j],lane:_757};}}},getMySwimlane:function(_758,_759){for(var m=0;m<_759.length;m++){var lane=_759[m].lane;var _75a=_759[m].nodes;for(var n=0;n<_75a.length;n++){if(_75a[n].activityId==_758){return lane;}}}return null;},getLaneLayerdNodes:function(lane,_75b){var _75c=[];for(var i=0;i<_75b.length;i++){var _75d=[];for(var j=0;j<_75b[i].length;j++){if((lane==null)&&(_75b[i][j].lane==null)){_75d.push(_75b[i][j]);}else{if((lane!=null)&&_75b[i][j].lane&&(_75b[i][j].lane.activityId==lane.activityId)){_75d.push(_75b[i][j]);}}}_75c.push(_75d);}return _75c;},layoutOneLaneNodes:function(lane,_75e){for(var i in _75e){var up=1;var down=1;var x=this.startX+this._xStep*i;var pos=dojo.coords(lane.figureFrame.domNode,true);var _75f=pos.t+pos.h/2-this.figureHeight/2;var _760=_75e[i];var _761=_760.length%2!=0?true:false;if(_761){up--;}for(var j in _760){var _762={x:x,y:0};if(j%2==0){_762.y=_75f+(up++)*this._yStep;}else{_762.y=_75f-(down++)*this._yStep;}this._nodesPosition.push({name:_760[j].nodeId,location:_762});}}},layoutNoneLaneNodes:function(_763){var _764=0;var _765=[];if(_765.length>0){var pos=dojo.coords(_765[_765.length-1].figureFrame.domNode,true);_764=pos.t+pos.h;}if(_764<this._yStart){_764=this._yStart;}var _766=this.lanesWithSize;var _767=this.lanesWithSize[this.lanesWithSize.length-1].size/2;var _768=_764+this.minHeight+_767*this.unitHeight;for(var i in _763){var x=this.startX+this._xStep*i;var _769=_763[i];for(var j in _769){var _76a={x:x,y:0};if(j==0){_76a.y=_764+this.minHeight;}if(j>0){var _76b=builder.Environment.diagram.getComponentById(_769[j-1].nodeId);var _76c=dojo.style(_76b.componentFrame.domNode,"height");_76a.y=this._nodesPosition[this._nodesPosition.length-1].location.y+_76c+20;}this._nodesPosition.push({name:_769[j].nodeId,location:_76a});}}},generatePrettyPosition:function(){this.generateLayeredNodesWithLane();this.layoutLanes();var _76d=[];for(var i=0;i<_76d.length;i++){var _76e=this.getLaneLayerdNodes(_76d[i],this._layeredNodes);this.layoutOneLaneNodes(_76d[i],_76e);_76d[i].drawLines();}var _76f=this.getLaneLayerdNodes(null,this._layeredNodes);this.layoutNoneLaneNodes(_76f);return this._nodesPosition;}});});},"builder/vsys/workbench/editor/RoutingPolicyItemWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/RoutingPolicyItemWidget.html","dojo/dom-style","dojo/topic","dojo/on","dojo/_base/array","dojo/dom-construct","dojo/_base/lang","dojo/topic"],function(_770,_771,_772,_773,_774,_775,_776,on,_777,_778,lang,_776){return _770("builder.vsys.workbench.editor.RoutingPolicyItemWidget",[_771,_772,_773],{templateString:_774,handles:null,propertyWidget:null,endPointTextBoxInvalidMsg:paas.Base.messages.ROUTING_POLICY_ENDPOINT_INVALID_MSG,ENDPOINT_CONFIGURATION:paas.Base.messages.ROUTING_POLICY_ENDPOINT_CONFIGURATION,ENDPOINT:dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLON,[paas.Base.messages.ROUTING_POLICY_ENDPOINT]),PORT:dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLON,[paas.Base.messages.ROUTING_POLICY_PORT]),ENABLE_HTTPS:dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLON,[paas.Base.messages.ROUTING_POLICY_ENABLE_HTTPS]),HTTPS_PORT:dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLON,[paas.Base.messages.ROUTING_POLICY_HTTPS_PORT]),HTTPS_Certification_Path:dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLON,[paas.Base.messages.ROUTING_POLICY_CERTIFICATION_FILE_PATH]),postCreate:function(){this.inherited(arguments);this.handles=[];this.handles.push(on(this.removeButton,"click",lang.hitch(this,this.removeItem)));if(this.subscribeEvents){this.subscribeChangeEvent();}this.config={endpoint:"http://virtualhost/context_root",port:9080,httpsEnabled:false,https_port:9443},this.endPointTextBox.set("regExp",this.getRPUrlRegExp());},subscribeChangeEvent:function(){this.handles.push(on(this.endPointTextBox,"change",lang.hitch(this,this.onPointTextBoxChange)));this.handles.push(on(this.portTextBox,"change",lang.hitch(this,this.onPortTextBoxChange)));this.handles.push(on(this.httpsCheckBox,"change",lang.hitch(this,this.onCheckBoxChange)));this.handles.push(on(this.httpsPortTextBox,"change",lang.hitch(this,this.onHttpsPortTextBoxChange)));},unsubscribeChangeEvent:function(){_777.forEach(this.handles,function(_779){_779.remove();});},removeItem:function(){_776.publish("routingPolicyConfiguration/removeItem",this);},onPointTextBoxChange:function(){if(this.endPointTextBox.isValid()){this.onPropertyChange("endpoint",this.endPointTextBox.get("value"));}else{_776.publish("/builder/property/notification",["info","APPMODEL_TOOLIGN_ATTRIBUTE_INVALID",this.ENDPOINT,this.endPointTextBox.get("value"),this.config.endpoint]);this.setPropertyValue(this.config);}},onPortTextBoxChange:function(){if(this.portTextBox.isValid()){if(!this.httpsCheckBox.get("checked")||(this.portTextBox.get("value")!=this.httpsPortTextBox.get("value"))){this.onPropertyChange("port",this.portTextBox.get("value"));return;}}_776.publish("/builder/property/notification",["info","APPMODEL_TOOLIGN_ATTRIBUTE_INVALID",this.PORT,this.portTextBox.get("value"),this.config.port]);this.setPropertyValue(this.config);},onCheckBoxChange:function(_77a){if(_77a){_775.set(this.httpsPortRow,"display","");}else{_775.set(this.httpsPortRow,"display","none");}this.onPropertyChange("httpsEnabled",this.httpsCheckBox.get("checked"));},onHttpsPortTextBoxChange:function(){if(this.httpsPortTextBox.isValid()){if(!this.httpsCheckBox.get("checked")||(this.portTextBox.get("value")!=this.httpsPortTextBox.get("value"))){this.onPropertyChange("https_port",this.httpsPortTextBox.get("value"));return;}}_776.publish("/builder/property/notification",["info","APPMODEL_TOOLIGN_ATTRIBUTE_INVALID",this.HTTPS_PORT,this.httpsPortTextBox.get("value"),this.config.https_port]);this.setPropertyValue(this.config);},onPropertyChange:function(id,_77b){if(!id){return;}var _77c=this.propertyWidget.getPropertyByItem(this);if(_77c[id]==_77b){return;}_776.publish("routingPolicyConfiguration/propertyChange",this.propertyWidget);},disableRemoveButton:function(){_778.destroy(this.removeButtonRow);},setPropertyValue:function(_77d){if(_77d==null){return;}if(this.endPointTextBox.get("value")!=(_77d.endpoint||"")){this.endPointTextBox.set("value",_77d.endpoint||"");}if(!_77d.port){_77d.port=9080;}if(this.portTextBox.get("value")!=_77d.port){this.portTextBox.set("value",_77d.port);}if(this.httpsCheckBox.get("checked")!=(_77d.httpsEnabled||false)){this.httpsCheckBox.set("checked",_77d.httpsEnabled||false);}if(_77d.httpsEnabled){_775.set(this.httpsPortRow,"display","");if(!_77d.https_port){_77d.https_port=9443;}if(this.httpsPortTextBox.get("value")!=_77d.https_port){this.httpsPortTextBox.set("value",_77d.https_port);}}this.config=_77d;},getPropertyValue:function(){var _77e={};if(this.endPointTextBox.get("value")){_77e.endpoint=this.endPointTextBox.get("value");}if(this.portTextBox.get("value")){_77e.port=this.portTextBox.get("value");}if(this.httpsCheckBox.get("checked")){_77e.httpsEnabled=this.httpsCheckBox.get("checked");if(this.httpsPortTextBox.get("value")){_77e.https_port=this.httpsPortTextBox.get("value");}}return _77e;},isInputValid:function(){if(this.endPointTextBox.isValid()&&this.portTextBox.isValid()){if(this.httpsCheckBox.get("checked")){if(this.httpsPortTextBox.isValid()){return true;}}else{return true;}}return false;},destroy:function(){_777.forEach(this.handles,function(_77f){_77f.remove();});this.inherited(arguments);},getRPUrlRegExp:function(){var _780="[a-zA-Z._-]+";var _781="(https?|ftps?)\\://";var _782="(("+paasUtil.getIPRegExp("ipv4")+"|"+paasUtil.getIPRegExp("ipv6")+"|"+_780+")"+"|\\["+paasUtil.getIPRegExp("ipv6")+"\\]"+")";var _783="(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?";return _781+_782+_783;}});});},"builder/workbench/componentsView/PropertyListCollapsibleSection":function(){define(["dojo/_base/declare","builder/workbench/componentsView/ComponentProperty","builder/workbench/componentsView/ListCollapsibleSection"],function(_784,_785,_786){return _784("builder.workbench.componentsView.PropertyListCollapsibleSection",[_786],{createRowData:function(row){var _787=new builder.workbench.componentsView.ComponentProperty({appModel:this.appModel},row);return _787;}});});},"builder/vsys/command/DisableChangeOnDDConnCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","dojo/topic"],function(_788,_789,_78a){return _788("builder.vsys.command.DisableChangeOnDDConnCommand",[_789],{constructor:function(_78b,_78c){this.sourceId=_78b;this.targetId=_78c;},execute:function(){_78a.publish("/DataDependsOnConnection/fixedConnection",this.sourceId,this.targetId,true);},undo:function(){_78a.publish("/DataDependsOnConnection/fixedConnection",this.sourceId,this.targetId,false);}});});},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(lang){var dhe=lang.getObject("dojox.html.entities",true);var _78d=function(str,map){var _78e,_78f;if(map._encCache&&map._encCache.regexp&&map._encCache.mapper&&map.length==map._encCache.length){_78e=map._encCache.mapper;_78f=map._encCache.regexp;}else{_78e={};_78f=["["];var i;for(i=0;i<map.length;i++){_78e[map[i][0]]="&"+map[i][1]+";";_78f.push(map[i][0]);}_78f.push("]");_78f=new RegExp(_78f.join(""),"g");map._encCache={mapper:_78e,regexp:_78f,length:map.length};}str=str.replace(_78f,function(c){return _78e[c];});return str;};var _790=function(str,map){var _791,_792;if(map._decCache&&map._decCache.regexp&&map._decCache.mapper&&map.length==map._decCache.length){_791=map._decCache.mapper;_792=map._decCache.regexp;}else{_791={};_792=["("];var i;for(i=0;i<map.length;i++){var e="&"+map[i][1]+";";if(i){_792.push("|");}_791[e]=map[i][0];_792.push(e);}_792.push(")");_792=new RegExp(_792.join(""),"g");map._decCache={mapper:_791,regexp:_792,length:map.length};}str=str.replace(_792,function(c){return _791[c];});return str;};dhe.html=[["&","amp"],["\"","quot"],["<","lt"],[">","gt"],[" ","nbsp"]];dhe.latin=[["¡","iexcl"],["¢","cent"],["£","pound"],["€","euro"],["¤","curren"],["¥","yen"],["¦","brvbar"],["§","sect"],["¨","uml"],["©","copy"],["ª","ordf"],["«","laquo"],["¬","not"],["­","shy"],["®","reg"],["¯","macr"],["°","deg"],["±","plusmn"],["²","sup2"],["³","sup3"],["´","acute"],["µ","micro"],["¶","para"],["·","middot"],["¸","cedil"],["¹","sup1"],["º","ordm"],["»","raquo"],["¼","frac14"],["½","frac12"],["¾","frac34"],["¿","iquest"],["À","Agrave"],["Á","Aacute"],["Â","Acirc"],["Ã","Atilde"],["Ä","Auml"],["Å","Aring"],["Æ","AElig"],["Ç","Ccedil"],["È","Egrave"],["É","Eacute"],["Ê","Ecirc"],["Ë","Euml"],["Ì","Igrave"],["Í","Iacute"],["Î","Icirc"],["Ï","Iuml"],["Ð","ETH"],["Ñ","Ntilde"],["Ò","Ograve"],["Ó","Oacute"],["Ô","Ocirc"],["Õ","Otilde"],["Ö","Ouml"],["×","times"],["Ø","Oslash"],["Ù","Ugrave"],["Ú","Uacute"],["Û","Ucirc"],["Ü","Uuml"],["Ý","Yacute"],["Þ","THORN"],["ß","szlig"],["à","agrave"],["á","aacute"],["â","acirc"],["ã","atilde"],["ä","auml"],["å","aring"],["æ","aelig"],["ç","ccedil"],["è","egrave"],["é","eacute"],["ê","ecirc"],["ë","euml"],["ì","igrave"],["í","iacute"],["î","icirc"],["ï","iuml"],["ð","eth"],["ñ","ntilde"],["ò","ograve"],["ó","oacute"],["ô","ocirc"],["õ","otilde"],["ö","ouml"],["÷","divide"],["ø","oslash"],["ù","ugrave"],["ú","uacute"],["û","ucirc"],["ü","uuml"],["ý","yacute"],["þ","thorn"],["ÿ","yuml"],["ƒ","fnof"],["Α","Alpha"],["Β","Beta"],["Γ","Gamma"],["Δ","Delta"],["Ε","Epsilon"],["Ζ","Zeta"],["Η","Eta"],["Θ","Theta"],["Ι","Iota"],["Κ","Kappa"],["Λ","Lambda"],["Μ","Mu"],["Ν","Nu"],["Ξ","Xi"],["Ο","Omicron"],["Π","Pi"],["Ρ","Rho"],["Σ","Sigma"],["Τ","Tau"],["Υ","Upsilon"],["Φ","Phi"],["Χ","Chi"],["Ψ","Psi"],["Ω","Omega"],["α","alpha"],["β","beta"],["γ","gamma"],["δ","delta"],["ε","epsilon"],["ζ","zeta"],["η","eta"],["θ","theta"],["ι","iota"],["κ","kappa"],["λ","lambda"],["μ","mu"],["ν","nu"],["ξ","xi"],["ο","omicron"],["π","pi"],["ρ","rho"],["ς","sigmaf"],["σ","sigma"],["τ","tau"],["υ","upsilon"],["φ","phi"],["χ","chi"],["ψ","psi"],["ω","omega"],["ϑ","thetasym"],["ϒ","upsih"],["ϖ","piv"],["•","bull"],["…","hellip"],["′","prime"],["″","Prime"],["‾","oline"],["⁄","frasl"],["℘","weierp"],["ℑ","image"],["ℜ","real"],["™","trade"],["ℵ","alefsym"],["←","larr"],["↑","uarr"],["→","rarr"],["↓","darr"],["↔","harr"],["↵","crarr"],["⇐","lArr"],["⇑","uArr"],["⇒","rArr"],["⇓","dArr"],["⇔","hArr"],["∀","forall"],["∂","part"],["∃","exist"],["∅","empty"],["∇","nabla"],["∈","isin"],["∉","notin"],["∋","ni"],["∏","prod"],["∑","sum"],["−","minus"],["∗","lowast"],["√","radic"],["∝","prop"],["∞","infin"],["∠","ang"],["∧","and"],["∨","or"],["∩","cap"],["∪","cup"],["∫","int"],["∴","there4"],["∼","sim"],["≅","cong"],["≈","asymp"],["≠","ne"],["≡","equiv"],["≤","le"],["≥","ge"],["⊂","sub"],["⊃","sup"],["⊄","nsub"],["⊆","sube"],["⊇","supe"],["⊕","oplus"],["⊗","otimes"],["⊥","perp"],["⋅","sdot"],["⌈","lceil"],["⌉","rceil"],["⌊","lfloor"],["⌋","rfloor"],["〈","lang"],["〉","rang"],["◊","loz"],["♠","spades"],["♣","clubs"],["♥","hearts"],["♦","diams"],["Œ","OElig"],["œ","oelig"],["Š","Scaron"],["š","scaron"],["Ÿ","Yuml"],["ˆ","circ"],["˜","tilde"],[" ","ensp"],[" ","emsp"],[" ","thinsp"],["‌","zwnj"],["‍","zwj"],["‎","lrm"],["‏","rlm"],["–","ndash"],["—","mdash"],["‘","lsquo"],["’","rsquo"],["‚","sbquo"],["“","ldquo"],["”","rdquo"],["„","bdquo"],["†","dagger"],["‡","Dagger"],["‰","permil"],["‹","lsaquo"],["›","rsaquo"]];dhe.encode=function(str,m){if(str){if(!m){str=_78d(str,dhe.html);str=_78d(str,dhe.latin);}else{str=_78d(str,m);}}return str;};dhe.decode=function(str,m){if(str){if(!m){str=_790(str,dhe.html);str=_790(str,dhe.latin);}else{str=_790(str,m);}}return str;};return dhe;});},"builder/base/dnd/DragManager":function(){define(["dojo/_base/declare","builder/base/dnd/common","builder/base/dnd/Avatar"],function(_793,_794,_795){_793("builder.base.dnd.DragManager",null,{disabled:false,nestedTargets:false,mouseDownTimer:null,dsCounter:0,dpCounter:0,dsPrefix:"dojoDragSource",dpPrefix:"dojoDropTarget",dropTargetDimensions:[],previousDropTarget:null,_dragTriggered:false,selectedSources:[],dragObjects:[],dragSources:[],dropTargets:[],dropObject:{},lastDragTarget:null,currentDropTarget:null,currentDragSource:null,currentX:null,currentY:null,lastX:null,lastY:null,mouseDownX:null,mouseDownY:null,threshold:7,dropAcceptable:false,mouseOverEvent:null,OFFSET_X:16,OFFSET_Y:16,cancelEvent:function(e){e.stopPropagation();e.preventDefault();},registerDragSource:function(ds){if(ds["domNode"]){var dp=this.dsPrefix;var _796=dp+"Idx_"+(this.dsCounter++);ds.dragSourceId=_796;this.dragSources[_796]=ds;ds.domNode.setAttribute(dp,_796);}},unregisterDragSource:function(ds){if(ds["domNode"]){var dp=this.dsPrefix;var _797=ds.dragSourceId;delete ds.dragSourceId;delete this.dragSources[_797];ds.domNode.setAttribute(dp,null);}},registerDropTarget:function(dt){if(dt["domNode"]){this.dropTargets.push(dt);var dp=this.dpPrefix;var _798=dp+"Idx_"+(this.dpCounter++);dt.dropTargetId=_798;dt.domNode.setAttribute(dp,_798);this.dropObject[_798]=dt;}},unregisterDropTarget:function(dt){delete this.dropObject[dt.dropTargetId];for(var i=0;i<this.dropTargets;i++){if(this.dropTargets[i]===dt){this.dropTargets.splice(i,1);}}},getDragSource:function(e){var tn=e.target;if(tn===dojo.body()){return null;}var ta=builder.base.dnd.getAttribute(tn,this.dsPrefix);while((!ta)&&(tn)){tn=tn.parentNode;if((!tn)||(tn===dojo.body())){return null;}ta=builder.base.dnd.getAttribute(tn,this.dsPrefix);}return this.dragSources[ta];},getDropTarget:function(e){var tn=e.target;if(tn===dojo.body()){return;}var ta=builder.base.dnd.getAttribute(tn,this.dpPrefix);while((!ta)&&(tn)){tn=tn.parentNode;if((!tn)||(tn===dojo.body())){return;}ta=builder.base.dnd.getAttribute(tn,this.dpPrefix);}return this.dropObject[ta];},onKeyDown:function(e){},onMouseDown:function(e){if(builder.util.Util.isTablet()){var _799="touchmove";}else{var _799="onmousemove";if(this.disabled){return;}if(dojo.isIE){if(e.button!=1){return;}}else{if(e.which!=1){return;}}}var _79a=e.target;if(_79a.nodeType==3){_79a=_79a.parentNode;}if(dojo.dnd.isFormElement(e)){return;}this.currentDragSource=this.getDragSource(e);if(!this.currentDragSource){return;}this.currentDragSource.onSelected();this.mouseDownX=e.pageX;this.mouseDownY=e.pageY;e.preventDefault();this.mouseOverEvent=dojo.connect(document,_799,this,"onMouseMove");if(dojo.isIE){this.cancelSelectEvent=[dojo.connect(document,"ondragstart",dojo,"stopEvent"),dojo.connect(document,"onselectstart",dojo,"stopEvent")];}},onMouseUp:function(e,_79b){if(!this.currentDragSource){return;}this.mouseDownX=null;this.mouseDownY=null;this._dragTriggered=false;if(this.currentDropTarget){this.currentDropTarget.onDropStart();if(this.dropAcceptable){this.currentDropTarget.onDrop(e);}else{this.currentDropTarget.onDragOut(e);}}if(this.currentDragSource){this.currentDragSource.onDragEnd(e);}if(this.currentDropTarget){this.currentDropTarget.onDropEnd();}dojo.disconnect(this.mouseOverEvent);if(dojo.isIE){dojo.disconnect(this.cancelSelectEvent.pop());dojo.disconnect(this.cancelSelectEvent.pop());}if(this.avatar){this.avatar.destroy();this.avatar=null;}this.currentDragSource=null;this.currentDropTarget=null;},onMouseMove:function(e){if((dojo.isIE)&&(e.button!=1)){this.currentDropTarget=null;this.onMouseUp(e,true);return;}if(!this.currentDragSource){return;}if((this.currentDragSource)&&(!this.avatar)){if(this.currentDragSource.avatarRequired){this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);}this.currentDragSource.onDragStart(e);this.cacheTargetLocations();}var _79c={};var _79d=this.currentDragSource.offsetX?this.currentDragSource.offsetX:this.OFFSET_X;var _79e=this.currentDragSource.offsetY?this.currentDragSource.offsetY:this.OFFSET_Y;if(this.avatar){dojo.marginBox(this.avatar.node,{l:e.pageX+_79d,t:e.pageY+_79e});}this.currentDragSource.onDragMove(e);var _79f=this.findBestTarget(e);if(_79f==null){if(this.currentDropTarget){this.currentDropTarget.onDragOut(e);this.currentDropTarget=null;}this.dropAcceptable=false;return;}if(this.currentDragSource.type=="Port"){var _7a0=this.currentDragSource.component;if(_79f.domNode==_7a0.domNode){return;}}if(this.currentDropTarget!==_79f){if(this.currentDropTarget){this.currentDropTarget.onDragOut(e);}this.currentDropTarget=_79f;this.dropAcceptable=this.currentDropTarget.accepts(this.currentDragSource);if(this.dropAcceptable){this.currentDropTarget.onDragOver(this.currentDragSource,e);}}else{if(this.dropAcceptable){this.currentDropTarget.onDragMove(e,this.currentDragSource);}}},makeAvatar:function(){return new _795();},findBestTarget:function(e){var _7a1=this;var _7a2=new Object();_7a2.target=null;_7a2.points=null;dojo.every(this.dropTargetDimensions,function(_7a3){if(!_7a1.isInsideBox(e,_7a3)){return true;}_7a2.target=_7a3[2];_7a2.points=_7a3;return true;});return _7a2.target;},cacheTargetLocations:function(){this.dropTargetDimensions=[];dojo.forEach(this.dropTargets,function(_7a4){try{var tn=_7a4.domNode;if(!tn||!_7a4.accepts(this.currentDragSource)){return;}var abs=dojo.coords(tn,true);var bb=dojo.marginBox(tn);this.dropTargetDimensions.push([[abs.x,abs.y],[abs.x+bb.w,abs.y+bb.h],_7a4]);}catch(e){}},this);},isInsideBox:function(e,_7a5){if((e.pageX>_7a5[0][0])&&(e.pageX<_7a5[1][0])&&(e.pageY>_7a5[0][1])&&(e.pageY<_7a5[1][1])){return true;}return false;},onMouseOver:function(e){},onMouseOut:function(e){},onScroll:function(){for(var i=0;i<this.dragObjects.length;i++){if(this.dragObjects[i].updateDragOffset){this.dragObjects[i].updateDragOffset();}}if(this.dragObjects.length){this.cacheTargetLocations();}}});builder.base.dnd.dragManager=new builder.base.dnd.DragManager();(function(){var d=document;var dm=builder.base.dnd.dragManager;var _7a6=(builder.util.Util.isTablet())?"touchstart":"onmousedown";var _7a7=(builder.util.Util.isTablet())?"touchend":"onmouseup";dojo.connect(d,"onkeydown",dm,"onKeyDown");dojo.connect(d,"onmouseover",dm,"onMouseOver");dojo.connect(d,"onmouseout",dm,"onMouseOut");dojo.connect(d,_7a6,dm,"onMouseDown");dojo.connect(d,_7a7,dm,"onMouseUp");dojo.connect(window,"onscroll",dm,"onScroll");})();return builder.base.dnd.dragManager;});},"builder/workbench/editor/ToolbarItem":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin"],function(_7a8,_7a9,_7aa,_7ab){return _7a8("builder.workbench.editor.ToolbarItem",[_7a9,_7aa,_7ab],{templateString:"<div><a href='javascript:void(0)'><img dojoAttachPoint='imageNode' alt=''/></a></div>",eventConnection:null,isReadOnly:false,imageUrl:null,hoverImageUrl:null,postCreate:function(){this.eventConnection=dojo.connect(this.domNode,"onclick",null,this.eventHandler);if(this.imageNode){this.imageNode.src=this.imageUrl;this.imageNode.title=this.title;if(!this.hoverImageUrl){return;}dojo.connect(this.imageNode,"onmouseover",this,function(){(this.imageNode.src=this.hoverImageUrl);});dojo.connect(this.imageNode,"onmouseout",this,function(){this.imageNode.src=this.imageUrl;});}},setUnchangable:function(){dojo.disconnect(this.eventConnection);}});});},"builder/workbench/property/ValueWidgetFactory":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/form/CheckBox","dijit/form/FilteringSelect","builder/workbench/property/FileUploadWidget","dijit/form/NumberTextBox","dijit/form/ValidationTextBox","paas/widgets/DateTimeTextBoxExt","dojo/store/Memory","dijit/form/SimpleTextarea","builder/workbench/property/Slider","builder/workbench/property/RangeSliderExt","builder/workbench/property/RadioGroup","paas/widgets/MultiSelectExt","paas/widgets/GenerateDynamicObjectWidget","paas/widgets/MultiSelectIgnoreIPExt","paas/widgets/SimpleTextareaExt","builder/workbench/property/FileSelectWidget","builder/workbench/property/PasswordWidget","paas/widgets/ValidationSimpleTextAreaExt","builder/workbench/property/SliderWithOptions","builder/util/CapabilityUtil","paas/widgets/IFixWidget","paas/widgets/FixpackWidget","builder/workbench/property/RangeSliderWithOptions","paas/widgets/ValidationTextBoxWithLookup","builder/util/PropertiesEnvUtil"],function(_7ac,lang,_7ad,_7ae,_7af,_7b0,_7b1,_7b2,_7b3,_7b4,_7b5,_7b6,_7b7,_7b8,_7b9,_7ba,_7bb,_7bc,_7bd,_7be,_7bf,_7c0,_7c1,_7c2,_7c3,_7c4,_7c5){var _7c6=lang.getObject("builder",true);var _7c7=lang.getObject("workbench.property.ValueWidgetFactory",true,_7c6);_7c7=_7c6.workbench.property.ValueWidgetFactory={widgetsMapWithOutOption:{"string":{"default":{widgetType:_7b1},"password":{widgetType:_7bd},"multi-string":{widgetType:_7be},"ipaddress":{widgetType:_7b1,initArgs:function(args){args.regExp=paasUtil.getIPRegExp();}},"host":{widgetType:_7b1,initArgs:function(args){args.regExp=paasUtil.ipHostRegExp();}},"lookup":{widgetType:_7c4,initArgs:function(args,_7c8,_7c9,_7ca,_7cb,_7cc){args.lookupDialogType=_7c8.lookupDialogType;}}},"number":{"default":{widgetType:_7b0,initArgs:function(args,_7cd){args._formatter=function(_7ce){return String(_7ce);};}},"percentage":{widgetType:_7b5,initArgs:function(args,_7cf){args.maximum=_7cf.max;args.minimum=_7cf.min;args.incremental=_7cf.incremental;args.pattern="#%";}},"slider":{widgetType:_7b5,initArgs:function(args,_7d0){args.maximum=_7d0.max;args.minimum=_7d0.min;args.incremental=_7d0.incremental;}},"time":{widgetType:_7b2}},"object":{"default":{widgetType:_7b9,initArgs:function(args,_7d1,_7d2,_7d3,_7d4){if(_7d2){args["propId"]=_7d2;}if(_7d3&&_7d3.id){args["modelId"]=_7d3.id;}args.value=_7d4;}}},"array":{"default":{widgetType:_7bb}},"boolean":{"default":{widgetType:_7ad}},"file":{"default":{widgetType:_7af,initArgs:function(args,_7d5,_7d6,_7d7,_7d8,_7d9){if((typeof appId!="undefined")&&appId){args.uploadURL=paas.common.constants.APPLICATION_REST_URL+appId+"/artifacts?temp";}if(_7d9&&_7d9.uploadFileUrl){args.uploadURL=_7d9.uploadFileUrl;}args.scannable=_7d9&&_7d9.scannable!=null?_7d9.scannable:true;args.fileExtensions=_7d5["extensions"]?_7d5["extensions"]:null;args.model=_7d7;args.metadata=_7d5;args.envModel=_7d9?_7d9.envModel:null;delete args.name;}}},"range":{"default":{widgetType:_7b6,initArgs:function(args,_7da){args.maximum=_7da.max;args.minimum=_7da.min;args.incremental=_7da.incremental;args.constraints={pattern:"#"};}},"number":{widgetType:_7b6,initArgs:function(args,_7db){args.maximum=_7db.max;args.minimum=_7db.min;args.incremental=_7db.incremental;args.constraints={pattern:"#"};}},"percentage":{widgetType:_7b6,initArgs:function(args,_7dc){args.maximum=_7dc.max;args.minimum=_7dc.min;args.incremental=_7dc.incremental;args.constraints={pattern:"#%"};}}}},widgetsMapWithOption:{"string":{"default":{widgetType:_7ae,initArgs:function(args,_7dd,_7de,_7df){_7c7.createFilteringStore(args,_7dd);}},"radio":{widgetType:_7b7,initArgs:function(args,_7e0,_7e1,_7e2){_7c7.createRadioArgs(args,_7e0,_7e1,_7e2);}},"password":{widgetType:_7b1,initArgs:function(args,_7e3){args.type=_7e3.options?(_7e3.options.type||"password"):"password";}}},"number":{"default":{widgetType:_7ae,initArgs:function(args,_7e4,_7e5,_7e6){_7c7.createFilteringStore(args,_7e4);}},"radio":{widgetType:_7b7,initArgs:function(args,_7e7,_7e8,_7e9){_7c7.createRadioArgs(args,_7e7,_7e8,_7e9);}},"slider":{widgetType:_7bf,initArgs:function(args,_7ea){args.options=_7ea.options;}}},"array":{"default":{widgetType:_7b8,initArgs:function(args,_7eb,_7ec,_7ed,_7ee,_7ef){var _7f0=dojo.isString(_7eb.options)?_7c5.transform(_7eb["options"],_7ef):_7eb.options;args.items=_7f0;}},"fixes":{widgetType:_7c1,initArgs:function(args,_7f1,_7f2,_7f3,_7f4,_7f5){if(_7f5){args["pluginName"]=_7f5.pluginName;args["deploymentId"]=_7f5.deploymentId;args["roleType"]=_7f5.roleType;}args.items=_7f1["options"];args.value=_7f4;args.modelId=_7f3.id;args.propId=_7f2;}},"fixpacks":{widgetType:_7c2,initArgs:function(args,_7f6,_7f7,_7f8,_7f9,_7fa){if(_7fa){args["pluginName"]=_7fa.pluginName;args["deploymentId"]=_7fa.deploymentId;args["roleType"]=_7fa.roleType;}args.items=_7f6["options"];args.value=_7f9;args.modelId=_7f8.id;args.propId=_7f7;}}},"object":{"default":{widgetType:_7b9,initArgs:function(args,_7fb,_7fc,_7fd,_7fe){if(_7fc){args["propId"]=_7fc;}if(_7fd&&_7fd.id){args["modelId"]=_7fd.id;}args.value=_7fe;}},"fixpacks":{widgetType:_7c2,initArgs:function(args,_7ff,_800,_801,_802,_803){if(_803){args["pluginName"]=_803.pluginName;args["deploymentId"]=_803.deploymentId;args["roleType"]=_803.roleType;}args.items=_7ff["options"];args.value=_802;args.modelId=_801.id;args.propId=_800;}}},"range":{"default":{widgetType:_7c3,initArgs:function(args,_804){args.options=_804.options;}}}},createValueWidget:function(_805,_806,_807,_808,_809){var args=this._createCommonArgs(_806,_805);var _80a=null;var type=_806.type||"string";var _80b=_806.id;var _80c=_806.displayType||"default";var _80d=_806.options?true:false;var _80e=this._getWidgetTypeAndArgs(type,_80c,_80d,_809);if(_80e==null){console.error("displayType "+_80c+" in type "+type+" is not supported for UI render, use default displayType");_80e=this._getWidgetTypeAndArgs(type,"default",_80d,_809);}if(_80e==null){console.error("type "+type+" is not supported for UI render, use string as default type");_80e=this._getWidgetTypeAndArgs("string","default",_80d,_809);}if(_80e!=null){if(_80e.initArgs){if(_807&&_807.finalCapabilities){args["finalCapabilities"]=_807.finalCapabilities;}_80e.initArgs(args,_806,_80b,_805,_808,_807);}_80a=new _80e.widgetType(args,this.valueNode);if(_80a instanceof _7ae&&dojo.isString(_806.options)){var _80f=_7c5.transform(_806.options,_807);var def=paasUtil.getDeferred("get",_80f,null,false);def.addCallback(function(resp){var _810=resp.items&&resp.items[0]?resp.items[0].value:null;_808=_808!=null?_808:_810;var _811=_7c7._createStore(resp);_80a.set("store",_811);_80a.set("value",_808);}).addErrback(function(err){_80a.set("value",null);});}return _80a;}else{return null;}},_getWidgetTypeAndArgs:function(type,_812,_813,_814){if(!_813){if(_814){this.widgetsMapWithOutOption.file["default"].widgetType=_7bc;}return this.widgetsMapWithOutOption[type][_812];}else{return this.widgetsMapWithOption[type][_812];}},createRadioArgs:function(args,_815,_816,_817){args.data=[];var _818=[];if(args.finalCapabilities&&args.finalCapabilities.supportIMP==true){if(args.finalCapabilities.autoScaling&&dojo.indexOf(args.finalCapabilities.autoScaling,"horizontal")!=-1){for(var i=0;i<args.finalCapabilities.autoScaling.length;i++){if(args.finalCapabilities.autoScaling[i]=="horizontal"){args.finalCapabilities.autoScaling[i]="~horizontal";}}}}if(_815.options){dojo.forEach(_815.options,function(_819){if(_819.requires&&args.finalCapabilities&&JSON.stringify(args.finalCapabilities)&&!(JSON.stringify(args.finalCapabilities).length==4||JSON.stringify(args.finalCapabilities).length==2)){var caps=args.finalCapabilities;if(_7c0.matches(caps,_819.requires)==null){args.data.push(_819);}}else{args.data.push(_819);}});}var name=_817.id+_815.id;if(_815.deps_key){name=name+_815.deps_key;}args.name=name;},createFilteringStore:function(args,_81a){var _81b=dojo.isString(_81a.options)?[]:_81a.options;args.store=_7c7._createStore(_81b);},_createCommonArgs:function(_81c,_81d){var args={};args["class"]="propertyView_value";args.name=_81d.id+"."+_81c.id;if(_81c.valueWidgetStyle){args.style=_81c.valueWidgetStyle;}this._createValidationArgs(_81c,args);this._createMessageArgs(_81c,args);return args;},_createValidationArgs:function(data,args){args.constraints={};if(data.min!=null){args.constraints.min=data.min;}if(data.max!=null){args.constraints.max=data.max;}if(data.displayType==="ipaddress"){args.regExp=paasUtil.getIPRegExp();}else{if(data.displayType==="host"){args.regExp=paasUtil.ipHostRegExp();}else{if(data.regExp&&this._isRegexValid(data.regExp)){args.regExp=data.regExp;}}}args.required=data.required;},_createMessageArgs:function(data,args){if(data.invalidMessage){args.invalidMessage=data.invalidMessage;args.rangeMessage=data.invalidMessage;}else{if(data.min&&data.max){var _81e=dojo.string.substitute(_7c6.Environment.messages.PROPERTY_WIDGET_INVALID_RANGE,[data.min,data.max]);args.invalidMessage=_81e;args.rangeMessage=_81e;}}if(data.promptMessage){args.promptMessage=data.promptMessage;}},_isRegexValid:function(_81f){var _820=true;try{var _821=new RegExp(_81f);}catch(e){_820=false;}return _820;},_createStore:function(_822){var data=_822;if(dojo.isArray(_822)){data={identifier:"id",items:[]};for(var i=0;i<_822.length;i++){var item={id:_822[i].value&&_822[i].value.toString(),name:_822[i].name};data.items.push(item);}}return new _7b3({data:data});}};return _7c7;});},"builder/workbench/componentsView/CollapsibleSection":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/CollapsibleSection.html"],function(_823,_824,_825,_826,_827){return _823("builder.workbench.componentsView.CollapsibleSection",[_824,_825,_826],{templateString:_827,widgetsInTemplate:true,name:"",expanded:true,postCreate:function(){this.setIcon();this.label.innerHTML=this.name+":";dojo.connect(this.stateIcon,"onclick",dojo.hitch(this,"toggleState"));},toggleState:function(){this.expanded=!this.expanded;this.setIcon();this.containerNode.style.display=this.expanded?"block":"none";},setIcon:function(){this.stateIcon.src=this.expanded?"/images/dashboard/collapse-icon-minus.gif":"/images/dashboard/collapse-icon-plus.gif";}});});},"builder/workbench/linksView/ComponentPatternType":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentPatternType.html"],function(_828,_829,_82a,_82b,_82c){return _828("builder.workbench.linksView.ComponentPatternType",[_829,_82a,_82b],{templateString:_82c,widgetsInTemplate:true,appModel:null,patternTypes:null,postCreate:function(){var _82d=this.nameColumn.insertRow(0);this.typeItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"type",label:builder.Environment.messages.BUILDER_CLEDITOR_TYPE,type:"string",displayType:"list",options:this.patternTypes},properties:{type:""},labelWidth:"60px",model:this.appModel},_82d);},getPatternType:function(){var _82e={};_82e.type=this.typeItem.getPropertyValue();return _82e;}});});},"builder/workbench/orderView/OrderConstants":function(){define(["dojo/_base/lang"],function(lang){var _82f=lang.getObject("builder",true);var _830=lang.getObject("workbench.orderView.OrderConstants",true,_82f);_830={FRAME_WIDTH:160,FRAME_HEIGHT:42,FRAME_PADDING:2,FRAME_BORDER:1,FRAME_SPACE:50,FRAME_TOPSHIFT:10,AREA_TOPSHIFT:140,ROW_HEIGHT_WITH_ALL:130,ROW_MARGIN:50,ROW_BORDER:1,ROW_PADDING:10,STARTSAFTER_TYPE_DATADEPENDENCY:"DataDependency",STARTSAFTER_TYPE_ORDERING:"Ordering",CATEGORY_WIDTH:150,CATEGORY_HEIGHT:120,COMPONENT_TYPES:{IMAGE:"IMAGE",PART:"PART",SCRIPT_PACKAGE:"SCRIPT_PACKAGE"},FLOW_CONNECTION:"Flow_Connection",INSTANCE_CREATION_OR_MANUAL:"instance_creation_or_manual",INSTANCE_CREATION:"instance_creation"};return _830;});},"builder/workbench/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ConfirmDialog.html"],function(_831,_832,_833,_834,_835){return _831("builder.workbench.ConfirmDialog",[_832,_833,_834],{templateString:_835,executionScope:null,executionMethod:null,cancelMethod:null,executionArgs:null,confirmMsg:null,widgets_confirmdialog_yes:null,widgets_confirmdialog_no:null,widgets_confirmdialog_title:null,action:null,constructor:function(){this.widgets_confirmdialog_yes=builder.Environment.messages.BUILDER_EDITOR_CONFIRMDIALOG_OK;this.widgets_confirmdialog_no=builder.Environment.messages.BUILDER_EDITOR_CONFIRMDIALOG_CANCEL;this.widgets_confirmdialog_title=builder.Environment.messages.BUILDER_EDITOR_CONFIRMDIALOG_TITLE;},postCreate:function(){var self=this;var _836=this.executionMethod;var _837=this.executionArgs||[];dojo.connect(this.confirmBtn,"onClick",this.executionScope,function(){self.hide();_836.apply(this,_837);});dojo.connect(this.cancelBtn,"onClick",this,this.hide);},show:function(){this.confirmDialog.show();},hide:function(){this.confirmDialog.hide();this.confirmDialog.destroy();}});});},"builder/workbench/editor/FloatingPane":function(){define(["dojo/_base/declare","dojox/layout/FloatingPane"],function(_838,_839){dojo.declare("builder.workbench.editor.FloatingPane",[_839],{resize:function(dim){if(dim==null){return;}this.inherited(arguments);}});});},"builder/workbench/orderView/PaintUtil":function(){define(["dojo/_base/lang"],function(lang){var _83a=lang.getObject("builder",true);var _83b=lang.getObject("workbench.orderView.PaintUtil",true,_83a);_83b=_83a.workbench.orderView.PaintUtil={halfSpace:22,downShift:45,upShift:70,arrowLen:10,arrowHeight:5,arrowGap:5,getDependencyLinkPath:function(p1,p2){var mode=(p1.y>p2.y)?1:2;var _83c=this._createLinePathMode(p1,p2,mode);var _83d=this._createArrowPath(p2,mode);return {linePathD:_83c,arrowPathD:_83d};},_createLinePathMode:function(p1,p2,mode){var y1=(mode===1?(p1.y-5):(p1.y+5));var y2=(mode===1?(p2.y+5):(p2.y-5));var p1={x:p1.x,y:y1};var p2={x:p2.x,y:y2};var p3={x:p1.x+this.halfSpace,y:p1.y};var p4={x:p2.x-this.halfSpace,y:p2.y};if(p3.x===p4.x){var _83e="M"+p1.x+" "+p1.y+" L"+p3.x+" "+p3.y+" L"+p4.x+" "+p4.y+" L"+p2.x+" "+p2.y;return _83e;}var p5={x:p3.x,y:p3.y-(mode===1?this.upShift:(0-this.downShift))};var p6={x:p4.x,y:p5.y};var _83e="M"+p1.x+" "+p1.y+" L"+p3.x+" "+p3.y+" L"+p5.x+" "+p5.y+" L"+p6.x+" "+p6.y+" L"+p4.x+" "+p4.y+" L"+p2.x+" "+p2.y;return _83e;},_createArrowPath:function(p2,mode){var y2=(mode===1?(p2.y+5):(p2.y-5));var p2={x:p2.x,y:y2};var p1={x:p2.x-this.arrowGap,y:p2.y};var p3={x:p2.x-this.arrowLen,y:p2.y-this.arrowHeight};var p4={x:p2.x-this.arrowLen,y:p2.y+this.arrowHeight};var _83f="M"+p1.x+" "+p1.y+" L"+p3.x+" "+p3.y+" L"+p2.x+" "+p2.y+" L"+p4.x+" "+p4.y+" L"+p1.x+" "+p1.y+" L"+p2.x+" "+p2.y;return _83f;}};return _83b;});},"builder/util/constants":function(){define(["dojo/_base/lang"],function(lang){var paas=lang.getObject("paas",true);var _840=lang.getObject("util.constants",true,builder);_840=builder.util.constants={DATA_DEPENDS_LINK:"DataDependsOnLink",HOSTED_ON_LINK:"HostedOnLink",POLICY_LINK:"policyLink",PART:"PART",ADDON:"ADDON",POLICY:"POLICY",IMAGE:"IMAGE",PREREQUISITE:"PREREQUISITE",PARTS_CATEGORY:"parts",IMAGES_CATEGORY:"images",SCRIPT_PACKAGE:"SCRIPT_PACKAGE"};return builder.util.constants;});},"builder/vsys/workbench/editor/VSysDiagram":function(){define(["dojo/_base/declare","dojo/text!./templates/VSysDiagram.html","builder/workbench/editor/Diagram","builder/vsys/util/VSysComponentFactory","dojo/on","dojo/_base/lang","paas/common/util","builder/service/DiagramToJson","dojo/json","builder/vsys/workbench/editor/AdvancedOptionsDialog","dojo/dom-style","dojo/topic"],function(_841,_842,_843,_844,on,lang,_845,_846,JSON,_847,_848,_849){return _841("builder.vsys.workbench.editor.VSysDiagram",[_843],{templateString:_842,constructor:function(){this.ADVANCED_OPTIONS_LABEL=builder.Environment.messages.APPMODEL_VSYSNEXT_ADVANCED_OPTIONS_LABEL;this.ADVANCED_OPTIONS_HINT=builder.Environment.messages.APPMODEL_VSYSNEXT_ADVANCED_OPTIONS_HINT;},postCreate:function(){this.inherited(arguments);this.own(on(this.advancedOptionsBtn,"click",lang.hitch(this,this.showAdvancedOptionsDialog)));this.own(_849.subscribe("/HVImages/AdvancedOptions",lang.hitch(this,this.updateAdvancedOptions)));this.own(_849.subscribe("/HVImages/AdvancedOptions/DataDirty",lang.hitch(this,function(_84a){this.optionDataDirty=_84a;})));},createComponent:function(_84b,_84c){_844.create(_84b,null,_84c);},showAdvancedOptionsDialog:function(){var _84d="/resources/vSysMetadata/configurations";var _84e=new _846(this).getModel();if(!this.advancedOptions||this.optionDataDirty){_845.getDeferred("put",_84d,JSON.stringify(_84e)).addCallback(function(resp){var _84f=new _847(resp);_84f.show();});}else{var _850=new _847(this.advancedOptions);_850.show();}},updateAdvancedOptions:function(_851){this.advancedOptions=_851;if(_851.length===0){_848.set(this.advancedOptionsBtn.domNode,"display","none");}else{_848.set(this.advancedOptionsBtn.domNode,"display","");}},setReadOnlyMode:function(){this.inherited(arguments);this.advancedOptionsBtn.set("disabled",true);}});});},"builder/base/command/CommandProcessor":function(){define(["dojo/_base/lang"],function(lang){var _852=lang.getObject("builder");var _853=lang.getObject("base.command.CommandProcessor",true,_852);_853=_852.base.command.CommandProcessor=function(){this._stack=new Array();this._top=0;this._current=0;this.push=function(cmd){this._stack[this._current]=cmd;this._top=this._current+1;for(var i=this._top;i<this._stack.length;i++){this._stack[i]=null;}};this.pop=function(cmd){if(this._top==0){return;}this._stack[--this._top]=null;this._current=this._top;};this.clear=function(cmd){this._top=0;this._current=0;for(var i=0;i<this._stack.length;i++){this._stack[i]=null;}};this.execute_it=function(){if(!this._stack[this._current]){return;}var cmd=this._stack[this._current++];cmd.execute();if(this._current==1){this.dirtied();}};this.executeCommand=function(cmd){if(cmd.canExecute()){this.push(cmd);this.execute_it();}};this.undo=function(){if(this._current==0){window.status="No further undo information";window.setTimeout("window.status='';",5000);return;}var cmd=this._stack[--this._current];cmd.undo();if(this._current==0){this.undirtied();}};this.redo=function(){this.execute_it();};this.dirtied=function(){};this.undirtied=function(){};this.canUndo=function(){if(this._current==0){return false;}else{return true;}};this.canRedo=function(){if(!this._stack[this._current]){return false;}else{return true;}};this.getRedoCommand=function(){return this._stack[this._current];};this.getUndoCommand=function(){return this._stack[this._current-1];};this.getStack=function(){return this._stack;};this.getCurrent=function(){return this._current;};};return _853;});},"builder/workbench/layer/LayerPaletteItem":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/LayerPaletteItem.html","dijit/form/CheckBox","dijit/InlineEditBox","builder/command/ChangeLayerNameCommand"],function(_854,_855,_856,_857,_858,_859,_85a,_85b){return _854("builder.workbench.layer.LayerPaletteItem",[_855,_856,_857],{templateString:_858,layer:null,layerPalette:null,layer_enable:true,constructor:function(){this.editTitle=builder.Environment.messages.BUILDER_LAYER_PALETTE_ITEM_EDIT_TITLE;this.enableTitle=builder.Environment.messages.BUILDER_LAYER_PALETTE_ITEM_ENABLE_TITLE;this.toggleTitle=builder.Environment.messages.BUILDER_LAYER_PALETTE_ITEM_TOGGLE_TITLE;},postCreate:function(){var name=this.layer.id;this.layerPalette=builder.Environment.layerPalette;this.container=builder.Environment.diagram;this.textEditNode.set("value",name,false);dojo.connect(this.layerNode,"onclick",this,"onSelect");dojo.connect(this.statusNode,"onclick",this,"onStatusCheckClick");},onStatusCheckClick:function(e){dojo.stopEvent(e);if(this.layer_enable){this.layer_enable=false;this._disable();}else{this.layer_enable=true;this._enable();}},onSelect:function(){var _85c=this.layerPalette.selectedItem;if(_85c&&_85c.domNode){_85c.domNode.className="layerItem";}this.layerPalette.selectedItem=this;this.domNode.className="layerItem selectedLayerItem";if(!this.layer_enable){this.layer_enable=true;this._enable();}this.container.currentLayer=this.layer;},getLayerName:function(){return this.textEditNode.get("value");},setLayerName:function(_85d){this.textEditNode.set("value",_85d);},onTitleChange:function(){var _85e=this.getLayerName();var _85f=builder.util.ValidationUtil.validateUnique(this.container.layers,this.layer,_85e);if(_85f.isValid===false){dojo.publish("/builder/editor/notification",[["info",_85f.messager]]);this.setLayerName(this.layer.id);return;}var cmd=new builder.command.ChangeLayerNameCommand(this.layer,_85e);builder.Environment.commandStack.executeCommand(cmd);},_enable:function(){this.layer.enable();this.statusNode.className="layerStatus layerEnable";this.statusNode.title=builder.Environment.messages.APPMODEL_TOOLING_STATUS_NODE_ENABLE;},_disable:function(){this.layer.disable();this.statusNode.className="layerStatus layerDisable";this.statusNode.title=builder.Environment.messages.APPMODEL_TOOLING_STATUS_NODE_DISABLE;},setReadOnlyMode:function(){this.setUnchangable();},setUnchangable:function(){this.textEditNode.set("disabled",true);},setStatus:function(_860){this.layer_enable=_860;_860?this._enable():this._disable();}});});},"builder/workbench/componentsView/ComponentCategoryPaletteFolder":function(){define(["dojo/_base/declare","builder/workbench/palette/CategoryPaletteFolder","builder/workbench/componentsView/ComponentCategoryPaletteItem"],function(_861,_862,_863){return _861("builder.workbench.componentsView.ComponentCategoryPaletteFolder",[_862],{selectedItem:null,addItem:function(data){var self=this;var opt={icon:builder.util.FileUtil.getComponentIconPath(data.thumbnail),data:data,open:self.open};var _864=new builder.workbench.componentsView.ComponentCategoryPaletteItem(opt);dojo.connect(_864,"onClick",dojo.hitch(this,"handleItemSelected",_864));this.containerMenu.addChild(_864);var _865=new dijit.MenuSeparator();var _866=dojo.query("td",_865.domNode)[1];if(dojo.isIE===7){_866&&(_866.colSpan="4");}else{_866&&_866.setAttribute("colspan",4);}this.containerMenu.addChild(_865);this.items.push([_864,_865]);},handleItemSelected:function(item){this.root.handleItemSelected(item);this.selectedItem=item;},clearSelected:function(item){if((this.selectedItem!=null)&&(this.selectedItem.data.name!=item.data.name)){this.selectedItem.setSelected(false);this.selectedItem=null;}},destroy:function(){dojo.forEach(this.items,function(item){item[0].destroy();item[1].destroy();});this.inherited(arguments);}});});},"builder/workbench/property/ExclusiveGroups":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(_867,_868,_869){return _867("builder.workbench.property.ExclusiveGroups",[_868,_869],{templateString:"<div dojoAttachPoint=\"groupsContainer\"></div>",groups:null,containerPane:null,postCreate:function(){this.groups=[];},addGroup:function(_86a){this.groupsContainer.appendChild(_86a.domNode);this.groups.push(_86a);_86a.containerWidget=this;_86a.setPropsEnable(_86a.enable);this.connect(_86a.groupRadio,"onClick","selectGroup");this.connect(_86a.groupRadio,"onKeyUp","selectGroup");},_setDisabledAttr:function(_86b){dojo.forEach(this.groups,function(_86c){_86c.groupRadio.set("disabled",_86b);});this.disabled=_86b;},selectGroup:function(){var _86d,_86e;dojo.forEach(this.groups,function(_86f){if(_86f.groupRadio.checked){_86d=_86f.groupId;}if(_86f.enable){_86e=_86f.groupId;}},this);if(_86d!=_86e){var cmd=new builder.command.ChangeGroupCommand(this.model.id,this.model,_86e,_86d);if(builder&&builder.Environment&&builder.Environment.commandStack){builder.Environment.commandStack.executeCommand(cmd);}else{cmd.canExecute()&&cmd.execute();}}},disableOtherGroup:function(_870){dojo.forEach(this.groups,function(_871){if(!_870||_871.groupId!=_870.groupId){_871.setPropsEnable(false);}});},uninitialize:function(){for(var i in this.groups){var _872=this.groups[i];_872.domNode&&_872.destroyRecursive();}this.containerPane.destroyRecursive();}});});},"builder/workbench/editor/ConnectionFrame":function(){define(["dojo/_base/declare","dijit/_WidgetBase","builder/workbench/editor/InlineAnnotation","builder/workbench/editor/Link","builder/util/PaintUtil","builder/util/Util","builder/util/array","builder/util/FileUtil","builder/workbench/editor/ModelToolbar","builder/command/RemoveConnectionCommand","builder/workbench/editor/ToolbarItem","builder/util/CssUtil"],function(_873,_874,_875,Link,_876,Util,_877,_878,_879,_87a,_87b,_87c){return _873("builder.workbench.editor.ConnectionFrame",[_874],{connection:null,statusContainer:null,link:null,annotation:null,helpWidget:null,lineToolbar:null,eventHandles:null,inportPos:null,outportPos:null,tooltipLabel:null,constructor:function(args){},postCreate:function(){this.createStatusContainer();this.annotation=new builder.workbench.editor.InlineAnnotation({annotationContent:this.connection.annotationContent});this._appendToDiagram(this.annotation.domNode);this.paint();this.registerEvents();},_appendToDiagram:function(_87d){this.connection.diagram.diagramNode.appendChild(_87d);},removeWidget:function(){if(this.helpWidget&&this.helpWidget.domNode){this.helpWidget.remove();}if(this.annotation){this.annotation.destroyRecursive();}this.removeToolbar();if(this.statusContainer){this.statusContainer.parentNode.removeChild(this.statusContainer);}if(this.link){this.link.remove();}},registerEvents:function(){if(!this.eventHandles){this.eventHandles=[];this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseover",this,"showTooltip"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseout",this,"hideTooltip"));this.eventHandles.push(dojo.connect(this.statusContainer,"onclick",this,function(evt){this.connection.diagram.selectModel(this.connection,evt);}));this.eventHandles.push(dojo.connect(this.link,"onclick",this,this.onClick));}},onClick:function(evt){this.connection.diagram.selectModel(this.connection,evt);},unregisterEvents:function(){dojo.forEach(this.eventHandles,dojo.disconnect);this.eventHandles=null;},createStatusContainer:function(){this.statusContainer=document.createElement("div");this.statusContainer.className="firgureFrame_status_none";this._appendToDiagram(this.statusContainer);},locateStatusContainer:function(){if(this.statusContainer==null){this.createStatusContainer();}var x=(this.inportPos.x+this.outportPos.x)/2;var y=(this.inportPos.y+this.outportPos.y)/2;var _87e=this.statusContainer.style.height;this.statusContainer.style.left=x+"px";this.statusContainer.style.top=y-_87e/2+"px";},setStatus:function(_87f,_880){if(!_87f){this.statusContainer.className="firgureFrame_status_none";this.status=false;}else{this.statusContainer.className="firgureFrame_status wca-image-warning-icon";this.status=true;this.locateStatusContainer();var _881="";for(var i=0;i<_880.length;i++){_881+=_880[i]+"<br>";}this.tooltipLabel=_881;}},showTooltip:function(){dijit.showTooltip(this.tooltipLabel,this.statusContainer);},hideTooltip:function(){dijit.hideTooltip(this.statusContainer);},removeToolbar:function(){if(this.lineToolbar){this.lineToolbar.destroyRecursive();this.lineToolbar=null;}},showToolbar:function(evt){if(evt){dojo.stopEvent(evt);}if(!this.lineToolbar){this.createLineToolbar();if((this.connection.readOnly)||(this.connection.isReferenced())){this.lineToolbar.setUnchangable();}}this.setLineToolbarPosition(evt);},setLineToolbarPosition:function(evt){var _882={x:0,y:0};if(evt){_882=builder.util.Util.getCursorPosition(evt);var _883=dojo.position(this.connection.diagram.diagramNode);this.lineToolbar.domNode.style.left=_882.x-_883.x+5+"px";this.lineToolbar.domNode.style.top=_882.y-_883.y-20+"px";}else{var left=(this.inportPos.x+this.outportPos.x)/2;var top=(this.inportPos.y+this.outportPos.y)/2-20;this.lineToolbar.domNode.style.left=left+"px";this.lineToolbar.domNode.style.top=top+"px";}},createLineToolbar:function(){this.lineToolbar=new builder.workbench.editor.ModelToolbar({onDelete:dojo.hitch(this,this.onDelete)});var _884={title:builder.Environment.messages.APPMODEL_TOOLING_CONNECTION_CUT_TITLE,imageUrl:"/tooling/images/close_normal.png",hoverImageUrl:"/tooling/images/close_normal_hover.png",eventHandler:dojo.hitch(this,this.onDelete)};var _885=new builder.workbench.editor.ToolbarItem(_884);var _886={title:builder.Environment.messages.APPMODEL_TOOLING_CONNECTION_ANNOTATION_TITLE,imageUrl:"/tooling/images/annotationline_normal.png",hoverImageUrl:"/tooling/images/annotationline_hover.png",eventHandler:dojo.hitch(this,this.onEdit)};var _887=new builder.workbench.editor.ToolbarItem(_886);var _888={title:builder.Environment.messages.APPMODEL_TOOLING_CONNECTION_HELP_TITLE,eventHandler:dojo.hitch(this,this.onHelp),imageUrl:"/images/icon/help.png",isReadOnly:true};var _889=new builder.workbench.editor.ToolbarItem(_888);dojo.addClass(_889.domNode,"figureFrame_help");this.lineToolbar.addItem(_885);this.lineToolbar.addItem(_887);this.lineToolbar.addItem(_889);this._appendToDiagram(this.lineToolbar.domNode);},onDelete:function(evt){dojo.stopEvent(evt);var cmd=new builder.command.RemoveConnectionCommand(this.connection);builder.Environment.commandStack.executeCommand(cmd);},showDeleteDialog:function(){var _88a=new paas.widgets.MappingDeleteDialog();_88a.showDialog(this.connection);},onEdit:function(evt){dojo.stopEvent(evt);this.annotation.paint(this.outportPos,this.inportPos);this.annotation.annotation.edit();},onHelp:function(evt){dojo.stopEvent(evt);var _88b=this.connection.metadata.helpFile;if(_88b&&(_88b!="")){_88b=builder.util.FileUtil.getComponentIconPath(_88b);}var _88c=builder.util.Util.coords(this.connection.fromComponent.componentFrame.domNode);if(!this.helpWidget||!this.helpWidget.domNode){this.helpWidget=new builder.workbench.editor.Help({metadata:this.connection.metadata,position:{left:_88c.x,top:_88c.y}});dojo.body().appendChild(this.helpWidget.domNode);this.helpWidget.setLocation(_88c.x,_88c.y);}else{this.helpWidget.setLocation(_88c.x,_88c.y);}this.helpWidget.focus();},_createLink:function(){var link=new builder.workbench.editor.Link(this.connection.diagram);return link;},paint:function(_88d){if(!this.link){this.link=this._createLink();}var _88e=this.getPositionObj(this.connection.fromComponent,this.connection.toComponent,this.connection);this.inportPos=_88e.inportPos;this.outportPos=_88e.outportPos;var _88f=builder.util.CssUtil.getLinkStyleByComponentType(this.connection.fromComponent.metadata.type);this.link.setStyle(_88f);this.link.paint(this.outportPos,this.inportPos,this.connection.selected,this.connection.mode);var _890=true;if((this.connection.fromComponent.layer&&!this.connection.fromComponent.layer.enabled)||(this.connection.toComponent.layer&&!this.connection.toComponent.layer.enabled)){_890=false;}this.setStrokeOpacity(_890);this.annotation.paint(this.outportPos,this.inportPos);if(!this.connection.selected){this.removeToolbar();}if(this.connection.selected){this.showToolbar(_88d);}this.locateStatusContainer();},getPositionObj:function(){return _876.getPosition(this.connection.fromComponent,this.connection.toComponent,this.connection);},setStrokeOpacity:function(_891){var _892=_891?1:0.2;if(dojo.isIE){this.link.pathShape.rawNode.stroke.opacity=_892;this.link.arrowPathShape.rawNode.stroke.opacity=_892;}else{this.link.pathShape.rawNode.setAttribute("stroke-opacity",_892);this.link.arrowPathShape.rawNode.setAttribute("stroke-opacity",_892);}},onSelect:function(evt){if(evt){dojo.stopEvent(evt);}this.removeToolbar();this.showToolbar(evt);this.lineToolbar.focusNode.focus();this.paint(evt);},onUnselect:function(){this.removeToolbar();this.paint();},disable:function(){this.setStrokeOpacity();if(this.status){this.statusContainer.className="firgureFrame_status_disablelayer";}this.annotation.disable();this.unregisterEvents();if(this.connection.selected){this.connection.diagram.selectModel(this.connection.diagram);}},enable:function(){this.setStrokeOpacity(true);if(this.status){this.statusContainer.className="firgureFrame_status wca-image-warning-icon";}if(!(this.connection.isReferenced())&&(!(this.connection.readOnly))){this.annotation.enable();}this.registerEvents();},setReferenced:function(){if(this.lineToolbar){this.lineToolbar.setUnchangable();}if(this.annotation){this.annotation.disable();this.annotation.annotation.attr("disabled",true);}},setReadOnlyMode:function(){if(this.lineToolbar){this.lineToolbar.setUnchangable();}if(this.annotation){this.annotation.disable();}}});});},"builder/workbench/listView/ListItem":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ListItem.html","builder/workbench/listView/ListItemAttr","builder/workbench/property/PropertiesWidget"],function(_893,_894,_895,_896,_897,_898,_899){return _893("builder.workbench.listView.ListItem",[_899],{templateString:_897,isExpanded:false,isLocked:false,exclusiveGroupPrefix:"list_",supportRemoteFile:true,groupSelectorWidth:"350px",constructor:function(){this.help_btn_title=builder.Environment.messages.LISTVIEW_HELP_BTN_TITLE;this.image_alt=builder.Environment.messages.IMAGE_ALT;this.attention_normal=paas.Base.messages.Status_Warning;},postCreate:function(){this.inherited(arguments);this.changeDisplay();this.handler=[];this.handler.push(dojo.connect(this.validIconNode,"onmouseover",this,"showTooltip"));this.handler.push(dojo.connect(this.validIconNode,"onmouseout",this,"hideTooltip"));if(this.model.isReferenced&&this.model.isReferenced()){this.setUnchangable();}if(this.titleArea){}this.showLockStatus();this.subscribes.push(dojo.subscribe("/builder/refreshLockStatus",this,function(args){if(args[0]===this.model.id){this.showLockStatus();}}));this.subscribes.push(dojo.subscribe("onApplicationTypeChange",this,function(args){if(args[0]===this.model.id){this.isTemplate=args[1];this.showLockStatus(true);}}));},checkValidation:function(){var _89a=builder.util.ValidationUtil.getValidationResult(this.model);this.setStatus(_89a.result,_89a.description);},setStatus:function(_89b,_89c){if(!_89b){this.validIconNode.className="property_valid_status";}else{this.validIconNode.className="property_invalid_status";var _89d="";for(var i=0;i<_89c.length;i++){_89d+=_89c[i]+"<br>";}this.tooltipLabel=_89d;}},changeDisplay:function(evt){if(evt){dojo.stopEvent(evt);}var self=this;if(this.isExpanded){dojo.style(this.tc,"display","none");this.isExpanded=false;if(this.toggleImageNode){this.toggleImageNode.src="/images/dashboard/collapse-icon-plus.gif";}}else{dojo.style(this.tc,"display","");this.isExpanded=true;if(this.toggleImageNode){this.toggleImageNode.src="/images/dashboard/collapse-icon-minus.gif";}}},createPropertiesWidget:function(){this._createPropsWidgetWithGroup("builder.workbench.listView.ListItemAttr");},customiseTitlePaneStyle:function(_89e){var _89f={borderWidth:"1px",borderColor:"#EFEFEF"};var _8a0={backgroundColor:"#FAFAFA",borderColor:"#EFEFEF"};dojo.style(_89e.domNode,"paddingTop","10px");dojo.style(_89e.hideNode,_89f);dojo.style(_89e.titleBarNode,_8a0);if(!dojo.isIE){}},_createPropsWidgetWithoutGroup:function(){var data=this.metadata;var _8a1=this.createNameWidget();var _8a2=document.createElement("table");var _8a3=document.createElement("tbody");_8a2.appendChild(_8a3);for(var i in data){var _8a4=new _898({metadata:data[i],properties:this.properties,model:this.model,isLockVisible:this.isLockVisible,isTemplate:this.isTemplate});_8a3.appendChild(_8a4.domNode);this.propsMap[data[i].name]=_8a4;}this.tc.appendChild(_8a2);},showTooltip:function(){dijit.showTooltip(this.tooltipLabel,this.validIconNode);},hideTooltip:function(){dijit.hideTooltip(this.validIconNode);},onHelp:function(evt){dojo.stopEvent(evt);if(!this.helpWidget||!this.helpWidget.domNode){this.helpWidget=new builder.workbench.editor.Help({metadata:this.model.metadata,position:{left:200,top:50}});dojo.body().appendChild(this.helpWidget.domNode);this.helpWidget.setLocation(200,50);}else{this.helpWidget.setLocation(200,50);}this.helpWidget.focus();},uninitialize:function(){this.inherited(arguments);dojo.forEach(this.subscribes,dojo.unsubscribe);dojo.forEach(this.handler,dojo.disconnect);},onPropertyChange:function(args){if(args[0]===this.model.id){this.updatePropertyWidget(args[1],args[2]);this.checkValidation();if(this.listView){this.listView.renderAllMissingProps();}}},showLockStatus:function(_8a5){if(!this.lockNode){return;}if(!this.metadata||this.metadata.length==0){this.lockNode&&dojo.style(this.lockNode,"display","none");return;}if(_8a5){this.updateChildLockStatus();}var _8a6=this.isLockVisible&&this.isTemplate;if(_8a6){dojo.style(this.lockNode,"display","block");}else{dojo.style(this.lockNode,"display","none");return;}this.isLocked=this.checkLockStatus();if(this.isLocked){this.lockNode.title=builder.Environment.messages.LOCK_PROPERTY_TITLE;this.lockImgNode.className="wca-image-lock-icon";}else{this.lockNode.title=builder.Environment.messages.UNLOCK_PROPERTY_TITLE;this.lockImgNode.className="wca-image-unlocked-icon";}},updateChildLockStatus:function(){dojo.forEach(this.metadata,function(meta){var _8a7=this.propsMap[meta.id];if(!_8a7){return;}_8a7.set("isTemplate",this.isTemplate);_8a7.showLockStatus&&_8a7.showLockStatus();},this);},checkLockStatus:function(){var _8a8=true;for(var i=0;i<this.metadata.length;i++){if(this.propsMap[this.metadata[i].id].isLocked===false){_8a8=false;break;}}return _8a8;},onLockChange:function(evt){evt&&dojo.stopEvent(evt);this.isLocked=!this.isLocked;for(var key in this.propsMap){if("name"===key){continue;}this.propsMap[key].setLocked&&this.propsMap[key].setLocked(this.isLocked,false);}this.showLockStatus();}});});},"paas/widgets/EditCompDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/EditCompDialog.html","dojox/widget/Wizard","dojo/data/ItemFileReadStore","builder/util/Util","paas/widgets/ComponentEditor","builder/workbench/MessageBoxWidget","dojox/widget/WizardPane"],function(_8a9,_8aa,_8ab,_8ac,_8ad,_8ae,_8af,Util,_8b0,_8b1){return _8a9("paas.widgets.EditCompDialog",[_8aa,_8ab,_8ac],{templateString:_8ad,btnTextConfirm:paas.Base.messages.UPDATE,isNew:false,model:null,componentId:null,isEditing:true,constructor:function(){this.widget_editCompDialog_title=paas.Base.messages.WIDGET_EDIT_COMP_DIALOG_TITLE;},postCreate:function(){this.inherited(arguments);this.editPropertyPane.isFirstChild=true;this.editPropertyPane.isLastChild=true;this.setWizardBtnStyle();if(!this.messageWidget.messages){var _8b2;if(builder.Environment&&builder.Environment.messages){_8b2=builder.Environment.messages;}else{_8b2=paas.Base.messages;}this.messageWidget.setMessages(_8b2);}this.messageWidget.addSubEvent(dojo.subscribe("/builder/property/notification",this,function(args){this.messageWidget.handleMessage(args);}));},resizeDialog:function(){this.editPropertyPane.resize({w:570,h:240});this.creationDialog._position();},setWizardBtnStyle:function(){this.creationWizard.doneButton.focusNode.className="btn-save";this.creationWizard.nextButton.focusNode.className="btn-next";this.creationWizard.previousButton.focusNode.className="btn-previous";this.creationWizard.cancelButton.focusNode.className="btn-cancel";},createComponentWithFile:function(){var _8b3=dijit._prevFocus;if(_8b3&&_8b3.blur){_8b3.blur();}setTimeout(dojo.hitch(this,this._postData),1000);},_postData:function(){var self=this;var _8b4=this.propertiesWidget.validate();if(!_8b4.result){var _8b5="";dojo.forEach(_8b4.invalidProps,function(_8b6){_8b5+=_8b6+"<br>";});this.messageWidget.errorWithoutFade(_8b5);return;}var url="/resources/components/";if(this.componentId){url+="?componentsId="+this.componentId;}var _8b7={};_8b7.type=this.model.metadata.id;_8b7.id=this.model.id;_8b7.attributes=this.model.properties;if(this.model.groups){_8b7.groups=this.model.groups;}else{if(this.model.properties.groups){_8b7.groups=this.model.properties.groups;}}if(this.model.patterntype&&this.model.version){_8b7.patterntype=this.model.patterntype;_8b7.version=this.model.version;}var _8b8=dojo.toJson(_8b7);this.propertiesWidget.initForm();var _8b9=null;if(builder.Environment&&builder.Environment.diagram){_8b9=builder.Environment.diagram.appId;}var _8ba={"jsonData":_8b8,"metadata":this.serializeMetadata(self.propertiesWidget.metadata)};if(_8b9){_8ba.appId=_8b9;}var args={url:url,form:this.propertiesWidget.form,handleAs:"json",handle:function(resp,args){if(!self.componentId){var item={};item.component_id=resp.component_id;item.name=_8b7.id;item.type=_8b7.type;dojo.publish("/maestro/newPreconfigComponent",[item]);}if(resp.component_id){window.location.hash=resp.component_id;}var _8bb=(self.isEditing===true)?"COMPONENT_EDITED":"COMPONENT_CREATED";dojo.publish("/component/message",[["info",_8bb,_8b7.id]]);self.postCreateComponent();},content:_8ba,method:"POST"};dojo.io.iframe.send(args);dojo.publish("/component/message",[["infoWithoutFade","COMPONENT_SAVING",_8b7.id]]);self.hide();},onBeforeSend:function(){return {"type":this.model.id,"id":this.model.id};},postCreateComponent:function(){if(this.propertiesWidget){this.propertiesWidget.destroyForm();}},createProperties:function(_8bc,_8bd){if(this.propertiesWidget){this.propertiesWidget.destroyRecursive();}this.propertiesWidget=new paas.widgets.ComponentEditor({"model":_8bc,"propLineMode":"one-line","propertiesEnv":{uploadFileUrl:null},"disabled":_8bd});dojo.connect(this.propertiesWidget,"onResize",this,"resizeDialog");this.propEditor.appendChild(this.propertiesWidget.domNode);this.resizeDialog();},show:function(_8be,_8bf,_8c0){if(this.propertiesWidget){this.propertiesWidget.destroyRecursive();this.propertiesWidget=null;}if(_8be){this.model=_8be;}this.componentId=_8bf;this.creationDialog.show();this.createProperties(this.model,_8c0);var _8c1=dojo.query(".dialog-form-table",this.creationDialog.domNode);if(_8c1.length>1){dojo.forEach(_8c1,function(_8c2,_8c3){dojo.removeClass(_8c2,"dialog-form-table");if(_8c3==0){dojo.query("td",_8c2)[0].style.padding="0";dojo.query(".TD",_8c2)[0].style.width=dojo.isIE?"236px":"216px";}else{_8c2.style.borderSpacing="10px";}},this);}this.resizeDialog();},hide:function(){if(this.propertiesWidget){this.propertiesWidget.destroyRecursive();this.propertiesWidget=null;}this.creationDialog.hide();},destroy:function(){this.creationWizard.destroy();this.inherited(arguments);},serializeMetadata:function(_8c4){var _8c5={};dojo.forEach(_8c4,function(item){_8c5[item.id]=item.type;});return dojo.toJson(_8c5);},setTitle:function(_8c6){this.creationDialog.set("title",_8c6);}});});},"builder/workbench/property/PropertyView":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin"],function(_8c7,_8c8,_8c9,_8ca){return _8c7("builder.workbench.property.PropertyView",[_8c8,_8c9,_8ca],{templateString:"<div style=\"overflow:auto;\" class='propertyView'></div>",prePropsWidget:null,propsList:null,readOnly:false,postCreate:function(){this.propsList=[];},show:function(_8cb){this._newShow(_8cb);},_oldShow:function(){if(curPropsWidget==null||curPropsWidget==this.prePropsWidget){return;}if(this.prePropsWidget!=null){this.prePropsWidget.hide();}if(!builder.util.array.contains(this.propsList,curPropsWidget)){this.propsList.push(curPropsWidget);this.domNode.appendChild(curPropsWidget.domNode);}this.prePropsWidget=curPropsWidget;if(this.readOnly){this.prePropsWidget.setUnchangable();}curPropsWidget.show();},_newShow:function(_8cc){if(_8cc==null){return;}this._hidePrePropsWidget();this._appendPropsWidget(_8cc);this.prePropsWidget=_8cc;this._showPropsWidget(_8cc);if(this.readOnly){if(dojo.isArray(_8cc)){this._operateOnArray(_8cc,"setUnchangable");}else{this.prePropsWidget.domNode&&this.prePropsWidget.setUnchangable();}}},_hidePrePropsWidget:function(){if(this.prePropsWidget!=null){if(dojo.isArray(this.prePropsWidget)){this._operateOnArray(this.prePropsWidget,"hide");}else{this.prePropsWidget.domNode&&this.prePropsWidget.hide();}}},_appendPropsWidget:function(_8cd){if(dojo.isArray(_8cd)){var self=this;dojo.forEach(_8cd,function(obj){self.addChildWidget(obj);});}else{this.addChildWidget(_8cd);}},_showPropsWidget:function(_8ce){if(dojo.isArray(_8ce)){this._operateOnArray(_8ce,"show");}else{_8ce.show();}},_operateOnArray:function(_8cf,func,_8d0){if(!_8d0){_8d0=[];}dojo.forEach(_8cf,function(obj){obj.domNode&&obj[func]&&obj[func].apply(obj,_8d0);});},addChildWidget:function(_8d1){if(!builder.util.array.contains(this.propsList,_8d1)){this.propsList.push(_8d1);this.domNode.appendChild(_8d1.domNode);}},hide:function(){if(this.prePropsWidget!=null){this.prePropsWidget.hide();this.prePropsWidget=null;}},setReadOnlyMode:function(){this.readOnly=true;}});});},"paas/common/SolutionUtil":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array"],function(_8d2,lang,_8d3){var paas=lang.getObject("paas",true);var _8d4=lang.getObject("common.SolutionUtil",true,paas);function _8d5(_8d6,_8d7){if(!_8d6||!_8d7){return false;}return _8d3.indexOf(_8d6,_8d7)>=0;};_8d4=paas.common.SolutionUtil={patternTypeUrl:"/resources/patternTypes/",versionQueryString:"?version=",VERSION_VRMF:"vrmf",VERSION_VR:"vr",availPatternTypeUrl:"/resources/patternTypes/?version=vr&status=avail",filter:function(_8d8){if(!_8d8||!dojo.isArray(_8d8)){return;}var _8d9=[];var _8da=["dbaas","foundation","vsys"];_8d3.forEach(_8d8,function(_8db){var _8dc=_8db["shortname"];if(!_8dc){return;}if(_8d5(_8da,_8dc)){return;}var flag=("builder" in _8db)?_8db["builder"]:true;if(flag===true){_8d9.push(_8db);}});return _8d9;},getDefaultImage:function(){if(this.defaultImages==null){var url="/resources/workloadSettings";this.defaultImages=_8d4.createXhrArgs(url);}return this.defaultImages;},filterServiceOnly:function(_8dd){if(!_8dd||!dojo.isArray(_8dd)){return;}var _8de=[];var _8df=["foundation"];var _8e0="shortname";_8d3.forEach(_8dd,function(_8e1){if(!_8e1[_8e0]){return;}if(_8d5(_8df,_8e1[_8e0])){_8de.push(_8e1);}});return _8de;},allOption:{name:paas.Base.messages.LCASLOGVIEWER_ALL,shortname:"all",version:""},addAllInList:function(_8e2){if(!_8e2||_8e2.length===0){return [];}_8e2.push(_8d4.allOption);return _8e2;},createXhrArgs:function(url){var _8e3,_8e4;var _8e5={sync:true,url:url,handleAs:"json",encoding:"utf-8",load:function(resp){_8e3=resp;},error:function(resp){if(resp&&resp.responseText){_8e4=dojo.fromJson(resp.responseText).errorMessage;}}};dojo.xhrGet(_8e5);return _8e3;},getPatternTypes:function(){var url=_8d4.patternTypeUrl;return _8d4.createXhrArgs(url);},getPlugins:function(_8e6,_8e7,_8e8){var url=_8d4.patternTypeUrl+_8e6+"/"+_8e7+"/plugins?status=avail&simple";if(_8e8){url+="&exclude=foundation/*";}return _8d4.createXhrArgs(url);},getVersionFormatDigits:function(_8e9){if(_8e9===null||typeof (_8e9)!=="string"){return 0;}return _8e9.split(".").length;},isPatternTypeAvailable:function(_8ea){var url=_8d4.availPatternTypeUrl;var _8eb=_8d4.createXhrArgs(url);for(var i=0;i<_8eb.length;i++){if(_8eb[i].shortname==_8ea){return true;}}return false;},isToscaEnabledPatternType:function(_8ec){if(_8ec.indexOf("tosca.")===0){return true;}return false;}};return _8d4;});},"builder/workbench/Container":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/Container.html","builder/util/LayoutUtil","builder/workbench/BorderContainerExt","builder/workbench/editor/EditorTabContainer","builder/vsys/workbench/palette/VSysCategoryPalette"],function(_8ed,_8ee,_8ef,_8f0,_8f1,_8f2){return _8ed("builder.workbench.Container",[_8ee,_8ef,_8f0],{templateString:_8f1,constructor:function(){this.userNameLabel=builder.Environment.messages.USER_NAME_LABEL;this.productTitle=window.globalSetting.productTitle;this.userId=window.userId;this.categoryPaletteWidgetName=_8f2.getCategoryPaletteWidgetName();}});});},"builder/workbench/componentsView/Component":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/Component.html","dojo/on","dojo/dom-style","dijit/registry","dojo/_base/lang","dojo/dom-class","dijit/Dialog","dijit/form/Button","builder/workbench/componentsView/ComponentItem","builder/workbench/componentsView/CollapsibleSection","builder/workbench/componentsView/ArtifactListCollapsibleSection","builder/workbench/componentsView/OperationListCollapsibleSection","builder/workbench/componentsView/PatternTypeListCollapsibleSection","builder/workbench/componentsView/PropertyListCollapsibleSection","builder/workbench/componentsView/PropertyMappingListCollapsibleSection","builder/workbench/property/PropertyWidget","dojo/request/iframe","paas/common/SolutionUtil"],function(_8f3,_8f4,_8f5,_8f6,_8f7,on,_8f8,_8f9,lang,_8fa,_8fb,_8fc,_8fd,_8fe,_8ff,_900,_901,_902,_903,_904,_905,_906){return _8f3("builder.workbench.componentsView.Component",[_8f4,_8f5,_8f6],{templateString:_8f7,widgetsInTemplate:true,appModel:null,rowCount:0,baseDir:"/opt/ibm/rainmaker/purescale.app/private/expanded/ibm/maestro.appmodel.tooling-4.1.0.0/public/tooling/builder/workbench/componentsView/components/",autosaveURL:"/tooling/builder/workbench/componentsView/uploader.groovy",files:[],primaryPatternType:null,primaryPatternTypeShortname:null,primaryPatternTypeVersion:null,constructor:function(){this.hintIcon=builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_ICON;this.hintThumbnail=builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_THUMBNAIL;this.hintAssocPtypes=builder.Environment.messages.BUILDER_CLEDITOR_ASSOC_PTYPES;this.hintArtifacts=builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTS;this.hintProperties=builder.Environment.messages.BUILDER_CLEDITOR_PROPERTIES;this.hintLifecycleOps=builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_LIFECYCLE_OPS;this.hintChefPropertyMapping=builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_LIFECYCLE_CHEF_PROPERTYMAPPING;this.hintCustomOps=builder.Environment.messages.BUILDER_CLEDITOR_CUSTOM_OPS;this.hintBtnOk=builder.Environment.messages.BUILDER_CLEDITOR_BTN_OK;this.hintBtnCancel=builder.Environment.messages.BUILDER_CLEDITOR_BTN_CANCEL;this.hintAdvancedSettings=builder.Environment.messages.BUILDER_CLEDITOR_ADV_SETTINGS;this.hintAdvancedSettingsDots=builder.Environment.messages.BUILDER_CLEDITOR_ADV_SETTINGS_DOTS;},postCreate:function(){this.artifactsSection.setAppModel(this.appModel);this.propertiesSection.setAppModel(this.appModel);this.customOperationsSection.setAppModel(this.appModel);this.lifecycleOperationsSection.appModel=this.appModel;this.nameItems=new Array();this.lifecycleOperationItems=new Array();this.addRow(this.nameTable,this.nameItems,{id:"name",label:builder.Environment.messages.BUILDER_CLEDITOR_NAME,type:"string",regExp:"^[a-zA-Z0-9]+$",required:true},{name:""});this.addRow(this.nameTable,this.nameItems,{id:"description",label:builder.Environment.messages.BUILDER_CLEDITOR_DESCRIPTION,type:"string",required:false},{description:""});this.iconChangeHandler=dojo.connect(this.iconFileInput,"onchange",dojo.hitch(this,"uploadFile","iconContainer","iconFileInput"));this.thumbnailChangeHandler=dojo.connect(this.thumbnailFileInput,"onchange",dojo.hitch(this,"uploadFile","thumbnailContainer","thumbnailFileInput"));this.iconContainer.style.backgroundImage="url('"+this.iconDefaultPath+"')";this.thumbnailContainer.style.backgroundImage="url('"+this.thumbnailDefaultPath+"')";this.addRow(this.lifecycleOperationsTable,this.lifecycleOperationItems,{id:"chefScriptRadio",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_IMPLEMENTATIONTYPE,type:"string",displayType:"radio",sampleValue:"script",options:[{"value":"script","name":builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_IMPLEMENTATIONTYPESCRIPT},{"value":"chef","name":builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_IMPLEMENTATIONTYPECHEF}],required:true});var _907=this.lifecycleOperationItems[0];dojo.connect(_907,"onPropertyChange",this.onChangeImplementationtype);this.addRow(this.lifecycleOperationsTable,this.lifecycleOperationItems,{id:"create",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_CREATE,type:"file",required:false},{create:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});this.addRow(this.lifecycleOperationsTable,this.lifecycleOperationItems,{id:"configure",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_CONFIGURE,type:"file",required:false},{configure:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});this.addRow(this.lifecycleOperationsTable,this.lifecycleOperationItems,{id:"start",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_START,type:"file",required:false},{start:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});this.addRow(this.lifecycleOperationsTable,this.lifecycleOperationItems,{id:"stop",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_STOP,type:"file",required:false},{stop:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});this.addRow(this.lifecycleOperationsTable,this.lifecycleOperationItems,{id:"delete",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_DELETE,type:"file",required:false},{"delete":""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});dojo.xhrGet({url:"/resources/patternTypes?version=vr&status=avail",headers:{"Content-Type":"application/json"},sync:false,handleAs:"json",load:dojo.hitch(this,"initialize"),error:dojo.hitch(this,"handlePatternTypesLoadError")});},onChangeImplementationtype:function(type){var _908=this.getPropertyValue();var _909=this.getParent().getParent();for(var i=_909.lifecycleOperationItems.length-1;i!=0;i--){_909.lifecycleOperationItems[i].destroy();_909.lifecycleOperationItems.pop();}if(_909.propertyMappingTable.firstElementChild!=null&&_909.propertyMappingTable.firstElementChild.hasChildNodes()){_909.propertyMappingTable.firstElementChild.firstElementChild.remove();}if(_908=="chef"){_909.addRow(_909.lifecycleOperationsTable,_909.lifecycleOperationItems,{id:"chefCookbook",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_COOKBOOK,type:"file",required:true},{cookbook:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});_909.addRow(_909.lifecycleOperationsTable,_909.lifecycleOperationItems,{id:"chefRole",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_CHEFROLE,type:"file",required:true},{role:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});var _90a=_909.propertyMappingTable.insertRow(0);this.propertyMappingItem=new builder.workbench.componentsView.PropertyMappingListCollapsibleSection({label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_LIFECYCLE_CHEF_PROPERTYMAPPING,style:"clear: both; padding-top: 20px;",model:this.getParent().appModel},_90a);_909.lifecycleOperationItems.push(this.propertyMappingItem);}else{_909.addRow(_909.lifecycleOperationsTable,_909.lifecycleOperationItems,{id:"create",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_CREATE,type:"file",required:false},{create:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});_909.addRow(_909.lifecycleOperationsTable,_909.lifecycleOperationItems,{id:"configure",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_CONFIGURE,type:"file",required:false},{configure:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});_909.addRow(_909.lifecycleOperationsTable,_909.lifecycleOperationItems,{id:"start",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_START,type:"file",required:false},{start:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});_909.addRow(_909.lifecycleOperationsTable,_909.lifecycleOperationItems,{id:"stop",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_STOP,type:"file",required:false},{stop:""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});_909.addRow(_909.lifecycleOperationsTable,_909.lifecycleOperationItems,{id:"delete",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_OP_DELETE,type:"file",required:false},{"delete":""},{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"});}},handlePatternTypesLoadError:function(_90b,_90c){},initialize:function(_90d,_90e){var _90f=builder.Environment.diagram;this.primaryPatternType=_90f.patterntype;this.primaryPatternTypeShortname=_90f.patterntype;var _910=new Array();for(var _911 in _90d){var _912=_90d[_911];if(_912.shortname==this.primaryPatternType){this.primaryPatternType=this.primaryPatternType+"/"+_912.version;this.primaryPatternTypeVersion=_912.version;}}},addRow:function(_913,_914,_915,_916,_917){var row=_913.insertRow(_914.length);var item=new builder.workbench.componentsView.ComponentItem({metadata:_915,properties:_916,propertiesEnv:_917,labelWidth:"90px",model:this.appModel},row);_914.push(item);return item;},addPropertyMapping:function(_918,_919,_91a,_91b,_91c){var row=_918.insertRow(_919.length);var item=new builder.workbench.componentsView.ComponentPropertyMapping({metadata:_91a,properties:_91b,propertiesEnv:_91c,labelWidth:"90px",model:this.appModel},row);_919.push(item);return item;},showAdvancedSettings:function(){this.advancedSettingsDialog.show();},cancelAdvancedSettings:function(){this.advancedSettingsDialog.hide();},saveAdvancedSettings:function(){this.advancedSettingsDialog.hide();},save:function(){var node={};node.baseDir=this.baseDir;node.patternType=this.primaryPatternType;node.secondaryPatternTypes=new Array();node.components=new Array();var _91d={};if(this.nameItems&&(this.nameItems.length==2)){var name=this.nameItems[0].getPropertyValue();var _91e=this.nameItems[1].getPropertyValue();_91d.name=name;if(_91e!=""){_91d.description=_91e;}}var _91f=this.files["iconFileInput"];if(_91f!=null){_91d.icon=_91f;}var _920=this.files["thumbnailFileInput"];if(_920!=null){_91d.thumbnail=_920;}_91d.properties=new Array();var _921=this.propertiesSection.getItems();for(var _922 in _921){var _923=_921[_922];var _924=_923.getProperty();_91d.properties.push(_924);}_91d.interfaces=new Array();var _925={};_925.name="lifecycle";_925.operations=new Array();var _926=this.lifecycleOperationItems[0];var _927=_926.getPropertyValue();if(_927=="chef"){var _928={};_925.operations.push(_928);_928.name="configure";var _929=this.lifecycleOperationItems[1];var _92a=_929.getPropertyValue();var _92b=this.lifecycleOperationItems[2];var _92c=_92b.getPropertyValue();var _92d=null;var _92e=new Array();if(this.lifecycleOperationItems.length==4){_92d=this.lifecycleOperationItems[3];}else{_92d=dijit.byId("builder_workbench_componentsView_PropertyMappingListCollapsibleSection_0");}dojo.forEach(_92d.items,function(item){var _92f=item.cookbookAttributeItem.getPropertyValue();var _930=item.propertyItem.getPropertyValue();propertyMappingItems={};propertyMappingItems.cookbook_attribute=_92f;propertyMappingItems.property=_930;propertyMappingItems.mode="input";_92e.push(propertyMappingItems);});_925.operations.name="configure";chefImplementation={};chefImplementation.cookbook=_92a;chefImplementation.role=_92c;chefImplementation.property_mappings=_92e;_928.chef_implementation=chefImplementation;}else{var _931=this.lifecycleOperationItems[1];var _932=_931.getPropertyValue();var _933={};_933.name="install";_933.implementation=_932;_925.operations.push(_933);_931=this.lifecycleOperationItems[2];_932=_931.getPropertyValue();var _934={};_934.name="configure";_934.implementation=_932;_925.operations.push(_934);_931=this.lifecycleOperationItems[3];_932=_931.getPropertyValue();var _935={};_935.name="start";_935.implementation=_932;_925.operations.push(_935);_931=this.lifecycleOperationItems[4];_932=_931.getPropertyValue();var _936={};_936.name="stop";_936.implementation=_932;_925.operations.push(_936);_931=this.lifecycleOperationItems[5];_932=_931.getPropertyValue();var _937={};_937.name="delete";_937.implementation=_932;_925.operations.push(_937);}_91d.interfaces.push(_925);var _938=null;var _939=this.customOperationsSection.getItems();for(var _922 in _939){var _93a=_939[_922];var _93b=_93a.getOperation();var _93c={};_93c.name=_93b.name;_93c.implementation=_93b.implementation;if(_938==null){_938={};_938.name="custom";_938.operations=new Array();}_938.operations.push(_93c);}if(_938!=null){_91d.interfaces.push(_938);}_91d.artifacts=new Array();var _93d=this.artifactsSection.getItems();for(var _922 in _93d){var _93e=_93d[_922];var _93f=_93e.getArtifact();_91d.artifacts.push(_93f);}node.components.push(_91d);dojo.publish("/builder/componenteditor/notification",[["infoWithoutFade","BUILDER_CLEDITOR_MSG_COMPONENT_SAVING",this.nameItems[0].getPropertyValue()]]);dojo.xhrPost({url:"/resources/componentTypes",headers:{"Content-Type":"application/json"},encoding:"utf-8",postData:dojo.toJson(node),handleAs:"json",load:dojo.hitch(this,"handleSave"),error:dojo.hitch(this,"handleSaveError")});},handleSave:function(_940){var _941=dijit.byId("componentCategoryPalette");builder.Environment.diagram.plugins=paas.common.SolutionUtil.getPlugins(this.primaryPatternTypeShortname,this.primaryPatternTypeVersion);builder.Environment.modelService.loadPalette(builder.Environment.diagram.plugins);dojo.publish("/builder/componenteditor/notification",[["info","BUILDER_CLEDITOR_MSG_COMPONENT_SAVED",this.nameItems[0].getPropertyValue()]]);},handleSaveError:function(_942){dojo.publish("/builder/componenteditor/notification",[["error","BUILDER_CLEDITOR_MSG_COMPONENT_SAVE_ERROR",this.nameItems[0].getPropertyValue()]]);},uploadFile:function(_943,_944){this.createUploadForm();var data={};data["inputID"]=_944;this.uploadForm.appendChild(this[_944]);var form=this.uploadForm;var self=this;var _945=_905(self.autosaveURL,{form:form,handleAs:"json",method:"POST",data:{"data":dojo.toJson(data),"postType":"uploading"}},true);_945.then(function(_946){self.uploadComplete(_943,_944,_946);},function(err){self.uploadFailed(_943,_944,err);});dojo.body().removeChild(this.uploadForm);if(_944=="iconFileInput"){dojo.disconnect(this.iconChangeHandler);this.iconFileInput=document.createElement("input");this.iconFileInput.setAttribute("type","file");this.iconFileInput.setAttribute("name","iconFileInput");var _947={height:"64px",width:"64px",border:"1px dashed rgb(150, 150, 150)",overflow:"hidden",opacity:0,filter:"alpha(opacity: 0)"};_8f8.set(this.iconFileInput,_947);this.iconContainer.appendChild(this.iconFileInput);this.iconChangeHandler=dojo.connect(this.iconFileInput,"onchange",dojo.hitch(this,"uploadFile","iconContainer","iconFileInput"));}else{if(_944=="thumbnailFileInput"){dojo.disconnect(this.thumbnailChangeHandler);this.thumbnailFileInput=document.createElement("input");this.thumbnailFileInput.setAttribute("type","file");this.thumbnailFileInput.setAttribute("name","thumbnailFileInput");var _948={height:"48px",width:"48px",border:"1px dashed rgb(150, 150, 150)",overflow:"hidden",opacity:0,filter:"alpha(opacity: 0)"};_8f8.set(this.thumbnailFileInput,_948);this.thumbnailContainer.appendChild(this.thumbnailFileInput);this.thumbnailChangeHandler=dojo.connect(this.thumbnailFileInput,"onchange",dojo.hitch(this,"uploadFile","thumbnailContainer","thumbnailFileInput"));}}},uploadComplete:function(_949,_94a,_94b){var json=_94b;this[_949].style.backgroundRepeat="no-repeat";this[_949].style.backgroundSize="cover";this[_949].style.backgroundImage="url('"+json.fileURI+"')";this.files[_94a]=_94a+"/"+json.file;},uploadFailed:function(_94c,_94d,_94e){},createUploadForm:function(){if(dojo.isIE){this.uploadForm=document.createElement("<form enctype=\"multipart/form-data\" method=\"post\">");this.uploadForm.encoding="multipart/form-data";}else{this.uploadForm=document.createElement("form");this.uploadForm.setAttribute("enctype","multipart/form-data");this.uploadForm.setAttribute("method","POST");}dojo.body().appendChild(this.uploadForm);},uploadProgress:function(_94f,_950,_951){if(_951.lengthComputable){var _952=Math.round(_951.loaded*100/_951.total);}},uploadCanceled:function(_953,_954,_955){},destroy:function(){dojo.forEach(this.nameItems,function(item){item.destroyRecursive();});this.artifactsSection.destroy();this.propertiesSection.destroy();dojo.forEach(this.lifecycleOperationItems,function(item){item.destroyRecursive();});this.customOperationsSection.destroy();this.inherited(arguments);}});});},"builder/workbench/palette/CategoryPaletteItem":function(){define(["dojo/_base/declare","builder/base/dnd/DragSource","dijit/PopupMenuItem","dojo/text!./templates/CategoryPaletteItem.html"],function(_956,_957,_958,_959){return _956("builder.workbench.palette.CategoryPaletteItem",[_958],{templateString:_959,data:null,isExcluded:false,iconClass:"paletteItemIcon",primaryNameDiv:null,supplementDiv:null,subEnabled:true,dndSourceList:null,pendingReqs:{},postCreate:function(){this.ms=builder.util.Util.getMetadataService();this.dndSourceList=[];this.inherited(arguments);this.domNode.title=this.data.description||this.data.name;var _95a=dojo.create("div",{className:"wca-image-delete-icon-small",alt:builder.Environment.messages.REMOVE_DEPRECATED,style:{display:"none"}},this.containerNode);if(this.data.deprecated==true){dojo.style(_95a,"vertical-align","top");dojo.style(_95a,"float","right");_95a.title=builder.Environment.messages.REMOVE_DEPRECATED;dojo.style(_95a,"display","");dojo.connect(_95a,"onclick",dojo.hitch(this,function(){var self=this;this.destroyRecursive();delete this.data;}));}var _95b=builder.util.Util.splitName(this.data.name);if(_95b.shortName){this.primaryNameDiv=document.createElement("div");this.primaryNameDiv.innerHTML=_95b.shortName;this.containerNode.appendChild(this.primaryNameDiv);}if(_95b.longName){this.supplementDiv=document.createElement("div");this.supplementDiv.innerHTML=_95b.longName;dojo.addClass(this.supplementDiv,"supplement");this.containerNode.appendChild(this.supplementDiv);}if(this.data.version){var _95c=dojo.create("div",{innerHTML:this.data.version,className:"supplement"});this.containerNode.appendChild(_95c);}if(this.icon){this.iconNode.src=this.icon;this.iconNode.alt="";}this.iconContainerNode=this.iconNode.parentNode;var _95d=new _957(this.domNode,this.data.subComponent?"SubComponent":"Component");_95d.params=this.data;this.dndSourceList.push(_95d);this.subMenu=new dijit.Menu({"aria-label":"reusable components table"});this.set("popup",this.subMenu);this._createSubItems();var self=this;this.addNewItemSub=dojo.subscribe("/maestro/newPreconfigComponent",function(item){if(item.type===self.data.type){self.addSubItem(item);}});var td=dojo.create("td",{"class":"pluginStatusCell"});var _95e=dojo.create("div",{className:"wca-image-warning-icon",alt:builder.Environment.messages.IMAGE_ALT,style:{display:"none"}},td);_95e.alt=builder.Environment.messages.IMAGE_ALT;if(this.data.enabled===false){dojo.style(_95e,"display","");_95e.title=builder.Environment.messages.COMPONENT_DISABLED;}if(this.data.deprecated==true){dojo.style(_95e,"display","");dojo.style(_95e,"float","right");dojo.style(_95e,"vartical-align","bottom");_95e.title=builder.Environment.messages.COMPONENT_DEPRECATED;}dojo.place(td,this.containerNode,"after");},_createSubItems:function(){if(!this.subEnabled||!this.data.components||(dojo.isArray(this.data.components)&&this.data.components.length==0)){this.arrowWrapper&&dojo.style(this.arrowWrapper,"display","none");return;}var self=this;dojo.forEach(this.data.components,function(item){self.addSubItem(item);});},addSubItem:function(item){if(this.arrowWrapper.style.display=="none"||this.arrowWrapper.style.visibility=="hidden"){this.arrowWrapper.style.display="";this.arrowWrapper.style.visibility="";}var self=this;var _95f=new dijit.MenuItem({label:item.name});var _960=new _957(_95f.domNode,item.subComponent?"SubComponent":"Component");_960.params=item;item.isPreconfig=true;self.dndSourceList.push(_960);self.subMenu.addChild(_95f);self.subMenu.addChild(new dijit.MenuSeparator());var _961=dojo.query("img",_95f.arrowWrapper)[0];if(_961){_961.src="/images/cloud/progress-indicator-small.gif";_961.alt=builder.Environment.messages.APPMODEL_TOOLING_LOADING_APPLICATION_MESSAGE;dojo.style(_961,{width:"16px",height:"16px"});}else{var _962=dojo.query("span",_95f.arrowWrapper)[0];if(_962){dojo.style(_962,"background-image","url('/images/cloud/progress-indicator-small.gif')");}}var _963=builder.Environment.diagram;var cs=builder.service.PatternTypeService.getComponentService(_963.patterntype,_963.version);dojo.connect(_95f.domNode,"onmouseenter",this,function(){var _964=item["component_id"];if(this.pendingReqs[_964]){return;}var _965=cs.loadComponent(_964,true);if(_965&&_965.addCallback){var self=this;this.pendingReqs[_964]=true;_965.addCallback(function(resp){self._showTooltip(resp,item,_95f);if(resp.groups){_960.params.groups=resp.groups;}dojo.style(_95f.arrowWrapper,"visibility","hidden");delete self.pendingReqs[_964];});_965.addErrback(function(resp){delete self.pendingReqs[_964];dojo.style(_95f.arrowWrapper,"visibility","hidden");});dojo.style(_95f.arrowWrapper,"visibility","visible");}else{this._showTooltip(_965,item,_95f);}});dojo.connect(_95f.domNode,"onmouseleave",this,function(){dijit.hideTooltip(_95f.domNode);});},_showTooltip:function(resp,item,_966){if(resp&&resp.attributes){item.attributes=resp.attributes;if(resp.groups){item.groups=resp.groups;}dijit.showTooltip(this.createTooltipContent(item),_966.domNode);}},createTooltipContent:function(item){var _967="<table><tbody>";var end="</tbody></table>";var _968="";var _969=builder.Environment.messages.COMPONENT_TAB_SEARCH_HINT;var _96a=builder.Environment.messages.COMP_TYPE;_968+=this._createTooltipLable(_969,item.name);_968+=this._createTooltipLable(_96a,item.type);for(var key in item.attributes){var _96b=this._getAttributeLabel(item.type,key);if(!_96b){continue;}if(!(item.attributes[key])){continue;}_968+=this._createTooltipLable(_96b,item.attributes[key]);}var _96c=_967+_968+end;return _96c;},_getAttributeLabel:function(type,_96d){var _96e=this.ms.getComponentMetadata(type).attributes;for(var i=0;i<_96e.length;i++){if(_96e[i].name==_96d){return (_96e[i].label||_96d);}}},_createTooltipLable:function(name,_96f){return "<tr><td><div class=\"boldFont\">"+dojo.string.substitute(builder.Environment.messages.LABEL_WITHCOLON,[name])+"&nbsp;</div></td><td>"+_96f+"</td></tr>";},display:function(){this.domNode.style.display="";},hidden:function(){this.domNode.style.display="none";},isMatchKeyword:function(_970){return this.data.name.toLowerCase().indexOf(_970.toLowerCase())>-1;},setDisplayStatus:function(_971){if(_971=="normal"){dojo.removeClass(this.containerNode,"paletteItemTextFlat");this.iconContainerNode.appendChild(this.iconNode);}else{this.containerNode.insertBefore(this.iconNode,this.containerNode.firstChild);dojo.addClass(this.containerNode,"paletteItemTextFlat");}},_onHover:function(){var item=this.getParent().selectedChild;if(item){dojo.removeClass(item.domNode,"dijitMenuItemSelected");this.getParent().selectedChild=null;}this.inherited(arguments);},_setSelected:function(_972){this.inherited(arguments);if(_972){this.getParent().selectedChild=this;}},uninitialize:function(){dojo.unsubscribe(this.addNewItemSub);}});});},"builder/workbench/property/PropertiesWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/PropertiesWidget.html","builder/workbench/property/PropertyWidget","builder/workbench/editor/Help","dijit/TitlePane","builder/workbench/property/TitlePaneWithDisable","builder/workbench/property/ExclusiveGroups","builder/workbench/property/ExclusiveGroup","builder/workbench/property/DropdownGroups","builder/workbench/property/GroupOptionWidget","builder/util/CapabilityUtil","builder/vsys/util/VSysUtil","dojo/on","dojo/_base/lang","dojo/fx","dojo/dom-class","dojo/dom-construct","dojo/dom-style","builder/util/ReferenceValueUtil"],function(_973,_974,_975,_976,_977,_978,Help,_979,_97a,_97b,_97c,_97d,_97e,_97f,_980,on,lang,fx,_981,_982,_983,_984){return _973("builder.workbench.property.PropertiesWidget",[_974,_975,_976],{templateString:_977,model:null,metadata:null,groupsMetadata:null,properties:null,groupsStatus:null,propsMap:null,groupsMap:null,subscribes:null,propertiesEnv:null,open:true,helpTitle:"",isLockVisible:false,exclusiveGroupPrefix:"",isTemplate:false,supportRemoteFile:false,DEFAULT_PROPERTY_WIDGET_NAME:"builder.workbench.property.PropertyWidget",lineMode:null,groupSelectorWidth:null,attributesTableClass:"",topAttributeDetail:false,finalCapabilities:null,toggleable:false,showDeployable:false,showBuilder:true,showPlacement:false,constructor:function(){if(builder.Environment){this.helpTitle=builder.Environment.messages.PROPERTY_VIEW_COMPONENT_HELP_TITLE;this.lockAll=builder.Environment.messages.LOCKALLATTRS;}},postCreate:function(){if(this.toggleable&&this.titleNode){_983.set(this.titleNode,"cursor","pointer");_981.add(this.rootNode,"dijitTitlePane");_981.add(this.titleNode,"dijitTitlePaneTitle");_983.set(this.titleNode,"paddingLeft","0");var td=_982.create("td",{style:{"width":"10px"}},this.titleTr,"first");_982.create("span",{className:"dijitInline dijitArrowNode",role:"presentation"},td);this.own(on(this.titleNode,"click",lang.hitch(this,function(){if(!this.contentNode){return;}if(this.open===true){_981.remove(this.titleNode,"dijitTitlePaneTitleOpen");_981.add(this.titleNode,"dijitTitlePaneTitleClosed");fx.wipeOut({node:this.contentNode}).play();}else{_981.add(this.titleNode,"dijitTitlePaneTitleOpen");_981.remove(this.titleNode,"dijitTitlePaneTitleClosed");fx.wipeIn({node:this.contentNode}).play();}this.open=!this.open;})));}this.groupWidgets=[];this.propsMap={};this.categroyGroups={};this.categoriesMetadata=[];this.finalCapabilities=[];this.metadata=this.model.propertyMetadata||this.model.metadata.attributes;this.groupsMetadata=[];this.categoriesMap={};if(this.model.metadata&&this.model.metadata.pluginName){if(!this.propertiesEnv){this.propertiesEnv={pluginName:this.model.metadata.pluginName};}else{this.propertiesEnv.pluginName=this.model.metadata.pluginName;}}if(this.model.metadata&&this.model.metadata.categories){dojo.forEach(this.model.metadata.categories,function(_985){this.categoriesMap[_985.category]=_985;},this);}if(this.model.metadata&&this.model.metadata.groups){this.groupsMap={};this.groupsMetadata=this.model.metadata.groups;this.groupsStatus=this.model.groups||{};if(this.model.metadata.categories){this.categoriesMetadata=this.model.metadata.categories;}}this.properties=this.model.properties||{};this.computeFinalCapabilities();this.createTitleWidget();this.createPropertiesWidget();this.subscribes=[];this.subscribes.push(dojo.subscribe("onPropertyChanged",this,"onPropertyChange"));this.subscribes.push(dojo.subscribe("onGroupChanged",this,"onGroupChanged"));this.subscribes.push(dojo.subscribe("/builder/property/widgetRemove",this,function(args){var _986=this.propsMap[args[0]];if(_986){delete _986;}}));dojo.connect(this.helpBtn,"onmouseover",this,function(){this.helpImgNode&&(this.helpImgNode.src="/tooling/images/help_hover.png");});dojo.connect(this.helpBtn,"onmouseout",this,function(){this.helpImgNode&&(this.helpImgNode.src="/tooling/images/help_normal.png");});if(this.titleImageNode){this.titleImageNode.alt=builder.Environment.messages.IMAGE_ALT;}if(this.model.metadata&&this.lockUnlockAllDiv&&_980.isSubComponent(this.model.metadata)&&this.lockUnlockAllDiv){dojo.style(this.lockUnlockAllDiv,"display","");if(this.checkAllAttributesAreLocked()==true&&this.lockUnlockAll){this.lockUnlockAll.innerHTML=builder.Environment.messages.UNLOCKALLATTRS;this.lockUnlockAll.title=builder.Environment.messages.UNLOCKALLATTRS;}else{this.lockUnlockAll.innerHTML=builder.Environment.messages.LOCKALLATTRS;this.lockUnlockAll.title=builder.Environment.messages.LOCKALLATTRS;}}if(this.model.metadata&&_980.isImage(this.model.metadata)&&this.lockUnlockParentAllDiv){dojo.style(this.lockUnlockParentAllDiv,"display","");if(this.checkAllAttributesAreLocked()==true&&this.lockUnlockParentAll){this.lockUnlockParentAll.innerHTML=builder.Environment.messages.UNLOCKALLATTRS;this.lockUnlockParentAll.title=builder.Environment.messages.UNLOCKALLATTRS;}else{this.lockUnlockParentAll.innerHTML=builder.Environment.messages.LOCKALLATTRS;this.lockUnlockParentAll.title=builder.Environment.messages.LOCKALLATTRS;}}},onGroupChanged:function(args){if(args[1]&&args[0]===this.model.id&&this.groupsStatus[args[1]]!=args[2]){this.groupsStatus[args[1]]=args[2];dojo.publish("onGroupStatusChange",[[this.model.id,args[1],args[2],args[3]]]);this.model.checkValidation&&this.model.checkValidation();}},createTitleWidget:function(){throw new Error("Unimplemented interface: builder.workbench.property.PropertiesWidget.createTitleWidget");},createNameWidget:function(){throw new Error("Unimplemented interface: builder.workbench.property.PropertiesWidget.createNameWidget");},createPropertiesWidget:function(){this._createPropsWidgetWithGroup(this.DEFAULT_PROPERTY_WIDGET_NAME);},_createPropsWidgetWithGroup:function(_987){if(this.topAttributeDetail){}else{var _988=this.createNameWidget();if(_988&&_988.domNode){this.propsMap["name"]=_988;}}if(!this.metadata){return;}this._createAttributeWidgets(_987);this._renderAttributesByGroup(this.groupsMetadata,this.categoriesMap);},_render:function(_989,_98a,_98b,_98c,_98d){if(_989&&_989.length>0){var _98e="";if(_98d==this.tc){_98e=this.attributesTableClass?this.attributesTableClass+" propertyContent":"propertyContent";if(dojo.isIE){this.tc.style.width="552px";}}var _98f=dojo.create("table",{className:_98e,"role":"presentation"});var _990=dojo.create("tbody",null,_98f);dojo.forEach(_989,function(_991){if(this.propsMap[_991]){_990.appendChild(this.propsMap[_991].domNode);}},this);if(dojo.isIE===7||(dojo.isIE>=8&&document.documentMode===7)){var div=dojo.create("div",{className:this.attributesTableClass},_98d);dojo.place(_98f,div);}else{_98d.appendChild(_98f);}}var _992={};for(var _993 in _98c){var open=true;for(var i=0;i<this.categoriesMetadata.length;i++){if(this.categoriesMetadata[i].category==_993){if(this.categoriesMetadata[i].collapse===true){open=false;break;}}}var _994=new _979({"content":_98c[_993].domNode,title:_993,"open":open});_994.titleBarNode.appendChild(_98c[_993].groupsSelector.domNode);this.connect(_98c[_993].groupsSelector,"onClick",function(e){dojo.stopEvent(e);_994.set("open",true);});_98c[_993].containerPane=_994;this.customiseTitlePaneStyle(_994,_98d,true);_992[_993]=_994;}dojo.forEach(_98b,function(_995){if(_995.category){var _996=_992[_995.category];if(_996&&!_996.rendered){_98d.appendChild(_996.domNode);_992[_995.category].rendered=true;}}else{var _997=_98a[_995.id];if(_997){this.customiseTitlePaneStyle(_997,_98d);_98d.appendChild(_997.domNode);}}},this);},_createGroupArgs:function(_998){var _999=dojo.create("table");_999.setAttribute("role","presentation");var _99a=dojo.create("tbody",null,_999);var _99b=_998.attributes||[];var _99c=[];var _99d=_998.id;var _99e=false;if(this.groupsStatus&&this.groupsStatus[_99d]){_99e=this.groupsStatus[_99d];}var _99f=this.model.readOnly;for(var j=0;j<_99b.length;j++){var _9a0=this.propsMap[_99b[j]];if(!_9a0){continue;}_9a0&&_99a.appendChild(_9a0.domNode);builder.util.array.remove(this.attributesNotInGroup,_99b[j]);_99c.push(_9a0);}var _9a1={"metadata":_998,"content":_999,"title":_998.label,"propertiesWidgets":_99c,"groupId":_99d,"model":this.model,"enable":_99e,"readOnly":_99f,"init":true};return _9a1;},_renderAttributesByGroup:function(_9a2,_9a3,_9a4){if(!this.propsMap){return;}var _9a5=_9a2||[];var _9a6={};var _9a7={};var _9a8={};for(var i=0;i<_9a5.length;i++){if(!this._isRenderableGroup(_9a5[i])){this.groupsStatus[_9a5[i].id]=false;this._removeAllPropertiesOfGroup(_9a5[i]);continue;}var _9a9=this._createGroupArgs(_9a5[i]);var _9aa=null;if(_9a5[i].category){dojo.mixin(_9a9,{"category":_9a5[i].category,"prefix":this.exclusiveGroupPrefix});if(_9a3[_9a5[i].category]&&_9a3[_9a5[i].category].displayType=="radio"){_9aa=new _97c(_9a9);if(!_9a6[_9a5[i].category]){_9a6[_9a5[i].category]=new _97b({model:this.model});}}else{_9aa=new _97e(_9a9);_9aa.name=this.model.id+"."+_9a5[i].id;if(!_9a6[_9a5[i].category]){_9a6[_9a5[i].category]=new _97d({model:this.model});if(this.groupSelectorWidth){_9a6[_9a5[i].category].groupsSelector.domNode.style.width=this.groupSelectorWidth;}}}_9a6[_9a5[i].category].addGroup(_9aa);_9a9.enable&&_9aa.toggleGroupLockStatus&&_9aa.toggleGroupLockStatus();}else{dojo.mixin(_9a9,{open:_9a5[i].collapse?false:true});_9a9.required=_9a5[i].required;_9aa=new _97a(_9a9);_9a7[_9a5[i].id]=_9aa;}if(_9a5[i].groups&&_9a5[i].groups.length>0){this._renderAttributesByGroup(_9a5[i].groups,_9a3,_9aa);}_9aa.init=false;}var _9ab=this.tc;if(_9a4){for(var i in _9a7){_9a4.addGroup(_9a7[i]);}for(var i in _9a6){_9a4.addCategory(_9a6[i]);}_9ab=_9a4.containerNode;var _9ac=_9a4.metadata.attributes;}else{this.groupsMap=_9a7;this.categroieWidgetssMap=_9a6;var _9ac=this.attributesNotInGroup;}try{this._render(_9ac,_9a7,_9a2,_9a6,_9ab);}catch(e){}},_createAttributeWidgets:function(_9ad){var data=this.metadata;this.attributesNotInGroup=[];for(var i=0;i<data.length;i++){if(!this.showDeployable&&this.showBuilder&&(data[i].deployable==true&&data[i].builder==false)||this.showDeployable&&!this.showBuilder&&!data[i].deployable){delete this.properties[data[i].id];continue;}if(data[i].deprecated==true&&this.model.properties[data[i].id]==undefined){delete this.properties[data[i].id];continue;}if(!this.showPlacement&&data[i].placement==true){delete this.properties[data[i].id];continue;}if(this.showPlacement&&!data[i].placement){delete this.properties[data[i].id];continue;}if(builder.Environment.diagram){var _9ae=null;var _9af=builder.Environment.diagram.getComponentById(this.model.id);if(_9af&&dojo.isFunction(this.model.getAttachComponent)){_9ae=_9af.getAttachComponent();}if(data[i].requires!=undefined&&(_9ae.id!=builder.Environment.diagram.id)){if(_97f.matches(this.finalCapabilities,data[i].requires)!=null){delete this.properties[data[i].id];continue;}}}else{if(this.finalCapabilities&&data[i].requires!=undefined){if(this.model&&dojo.isFunction(this.model.getAttachComponent)&&this.model.getAttachComponent()){if(_97f.matches(this.finalCapabilities,data[i].requires)!=null){delete this.properties[data[i].id];continue;}}}}var args={metadata:data[i],properties:this.properties,model:this.model,isLockVisible:this.isLockVisible,isTemplate:this.isTemplate,supportRemoteFile:this.supportRemoteFile,propertiesEnv:this.propertiesEnv};if(this.lineMode){args.lineMode=this.lineMode;}var _9b0=_9ad;if(data[i].widgetType){try{if(data[i].externalWidget&&data[i].widgetType.indexOf(".")>-1){var _9b1=data[i].widgetType.substring(0,data[i].widgetType.lastIndexOf("."));var _9b2="/resources/customui/"+this.model.metadata.pluginName+"/extensions/public/"+_9b1.split(".").join("/");dojo.registerModulePath(_9b1,_9b2);}dojo["require"](data[i].widgetType);_9b0=data[i].widgetType;}catch(e){dojo.publish("/builder/editor/notification",[["warning","Widget type ${0} for property ${1} is unable to be loaded",data[i].widgetType,data[i].id]]);}}try{var _9b3=new dojo.getObject(_9b0)(args);this.propsMap[data[i].id]=_9b3;}catch(e){}this.attributesNotInGroup.push(data[i].id);}},computeFinalCapabilities:function(){var self=this;var _9b4=null;var _9b5=null;try{if(this.model&&this.model.metadata){if(this.model.metadata.type!="policy"){if(dojo.isFunction(this.model.getAttachedPolicies)){_9b4=this.model.getAttachedPolicies();_9b5=this.model;}}else{if(dojo.isFunction(this.model.getAttachComponent)&&this.model.getAttachComponent()&&dojo.isFunction(this.model.getAttachedPolicies)){_9b4=this.model.getAttachComponent().getAttachedPolicies();_9b5=this.model.getAttachComponent();}}if(_9b5&&_9b5.metadata&&_9b5.metadata.capabilities){this.finalCapabilities=_9b5.metadata.capabilities.provides;if(this.finalCapabilities!=null&&this.finalCapabilities!=undefined){this.finalCapabilities=dojo.clone(this.finalCapabilities);dojo.forEach(_9b4,function(_9b6){if(_9b6.metadata&&_9b6.metadata.type!="policy"&&_9b6.metadata.capabilities){self.finalCapabilities=_97f.merge(self.finalCapabilities,_9b6.metadata.capabilities.provides);}});}}}if(this.finalCapabilities!=null&&this.finalCapabilities!=undefined){if(!this.propertiesEnv){this.propertiesEnv={finalCapabilities:this.finalCapabilities};}else{this.propertiesEnv.finalCapabilities=this.finalCapabilities;}}}catch(ex){}},matchCapabilities:function(_9b7){for(key in _9b7){if(this.finalCapabilities[key]==undefined){return false;}var _9b8=this.computeIntersection(this.finalCapabilities[key],this.ensureArray(_9b7[key]));if(_9b8.length==0){return false;}}return true;},ensureArray:function(val){if(dojo.isArray(val)){return val;}if(dojo.isObject(val)){return [];}var temp=[];temp.push(val);return temp;},computeIntersection:function(_9b9,_9ba){return _9b9.filter(function(n){if(_9ba.indexOf(n)==-1){return false;}return true;});},isTopAttributeDetail:function(_9bb){if(_9bb.topAttributeDetail==true){return true;}dojo.forEach(this.groupsMetadata,function(_9bc){dojo.forEach(_9bc.attributes,function(_9bd){if(_9bd==_9bb.id){return (_9bc.topAttributeDetail==true);}});});return false;},hide:function(){if(this.domNode){this.domNode.style.display="none";}},show:function(){if(this.domNode){this.domNode.style.display="";}},setLocation:function(left,top){dojo.style(this.domNode,{left:left+"px",top:top+"px"});},update:function(){for(var _9be in this.properties){this.updatePropertyWidget(_9be,this.properties[_9be]);}},updatePropertyWidget:function(_9bf,_9c0){var _9c1=this.propsMap[_9bf];if(_9c1&&_9c1.isDeleted){_9c1.destroyRecursive();delete this.model.properties[_9bf];delete _9c1;return;}if(!_9c1||(_9c1.valueWidget&&_9c1.valueWidget.get("disabled"))){return;}if(_9c1.isEmpty&&_9c1.isEmpty(_9c0)){delete this.model.properties[_9bf];}else{this.model.properties[_9bf]=_9c0;}_9c1.setPropertyValue(_9c0);if(_984.isReferenceValue(_9c0)){_9c1.postAddReference&&_9c1.postAddReference();}else{_9c1.lockDisabled=false;}},stopFileUploading:function(){for(var key in this.propsMap){var _9c2=this.propsMap[key];if(_9c2.valueWidget&&_9c2.valueWidget.cancelUpload){_9c2.valueWidget.cancelUpload();}}},setChangeable:function(){var _9c3=null;for(var key in this.propsMap){_9c3=this.propsMap[key];if(_9c3&&_9c3.setChangeable){_9c3.setChangeable();}}for(var key in this.groupsMap){this.groupsMap[key].set("disabled",false);}for(var key in this.categroieWidgetssMap){this.categroieWidgetssMap[key].set("disabled",false);}},setUnchangable:function(){var _9c4=null;for(var key in this.propsMap){_9c4=this.propsMap[key];if(_9c4&&_9c4.setUnchangable){this.propsMap[key].setUnchangable();}}for(var key in this.groupsMap){this.groupsMap[key].set("disabled",true);}for(var key in this.categroieWidgetssMap){this.categroieWidgetssMap[key].set("disabled",true);}},set:function(name,_9c5){if(name==="disabled"){_9c5?this.setUnchangable():this.setChangeable();return;}if(name==="open"){this.open=_9c5;for(var i in this.groupsMap){if(this.groupsMap[i].set){this.groupsMap[i].set("open",_9c5);}}return;}this.inherited(arguments);},get:function(name){if(name==="open"){return this.open;}return this.inherited(arguments);},onHelp:function(evt){dojo.stopEvent(evt);var _9c6={w:750,h:400};var _9c7={left:(document.documentElement.clientWidth-_9c6.w)/2,top:(document.documentElement.clientHeight-_9c6.h)/2};if(!this.helpWidget||!this.helpWidget.domNode){this.helpWidget=new Help({metadata:this.model.metadata,dimension:_9c6,position:_9c7});dojo.body().appendChild(this.helpWidget.domNode);this.helpWidget.setLocation(_9c7.left,_9c7.top);}else{this.helpWidget.setLocation(_9c7.left,_9c7.top);}this.helpWidget.focus();},uninitialize:function(){dojo.forEach(this.subscribes,dojo.unsubscribe);for(var key in this.propsMap){var _9c8=this.propsMap[key];_9c8.domNode&&_9c8.destroyRecursive();}for(var key in this.groupsMap){var _9c8=this.groupsMap[key];_9c8.domNode&&_9c8.destroyRecursive();}for(var key in this.categroieWidgetssMap){var _9c8=this.categroieWidgetssMap[key];_9c8.domNode&&_9c8.destroyRecursive();}},onPropertyChange:function(args){if(args[0]===this.model.id){this.updatePropertyWidget(args[1],args[2]);this.model.checkValidation&&this.model.checkValidation();}},customiseTitlePaneStyle:function(_9c9,_9ca,_9cb){dojo.style(_9c9.hideNode,"borderWidth","0px");dojo.style(_9c9.containerNode,"paddingRight","2px");if(_9ca!=this.tc){dojo.style(_9c9.containerNode,"paddingLeft","2px");}dojo.style(_9c9.domNode,"paddingTop","5px");},_removeAllPropertiesOfGroup:function(_9cc){this.groupsStatus[_9cc.id]=false;dojo.forEach(_9cc.attributes,function(attr){if(this.propsMap[attr]){this.propsMap[attr].destroyRecursive();delete this.propsMap[attr];delete this.properties[attr];}},this);dojo.forEach(_9cc.groups,function(g){this._removeAllPropertiesOfGroup(g);},this);},_isRenderableGroup:function(_9cd){var _9ce=false;if(builder.Environment.diagram){var _9cf=null;var _9d0=builder.Environment.diagram.getComponentById(this.model.id);if(_9d0&&dojo.isFunction(_9d0.getAttachComponent)){_9cf=_9d0.getAttachComponent();}if(_9cd.requires!=undefined&&(_9cf.id!=builder.Environment.diagram.id)){if(_97f.matches(this.finalCapabilities,_9cd.requires)!=null){return false;}}}else{if(this.finalCapabilities&&_9cd.requires!=undefined){if(this.model&&dojo.isFunction(this.model.getAttachComponent)&&this.model.getAttachComponent()){if(_97f.matches(this.finalCapabilities,_9cd.requires)!=null){return false;}}}}if(this.showDeployable&&!this.showBuilder&&!this.groupsStatus[_9cd.id]){return false;}if(this.showBuilder&&((!_9cd.attributes||_9cd.attributes.length==0)&&(!_9cd.groups||_9cd.groups.length==0))){return true;}if(_9cd.attributes&&_9cd.attributes.length>0){var _9d1=_9cd.attributes;for(var i=0;i<_9d1.length;i++){if(this.propsMap[_9d1[i]]){return true;}}}if(_9cd.groups&&_9cd.groups.length>0){var _9d2=_9cd.groups;for(var i=0;i<_9d2.length;i++){if(this._isRenderableGroup(_9d2[i])){return true;}}}return false;},checkAllAttributesAreLocked:function(){var self=this;for(var key in this.properties){if(this.model.locked&&builder.util.array.contains(this.model.locked,key)){}else{return false;}}return true;},checkAllAttributesAreUnLocked:function(){var self=this;for(var key in this.properties){if(self.model.locked&&!builder.util.array.contains(self.model.locked,key)){}else{return false;}}return true;},lockUnlockAllAttributes:function(){var self=this;if(self.checkAllAttributesAreLocked()==true){var _9d3=this.model.metadata.attributes;dojo.forEach(_9d3,function(attr){var _9d4=self.properties[attr.id];if(!_984.isReferenceValue(_9d4)){dojo.publish("/builder/lockChange",[[self.model.id,false,attr.id]]);dojo.publish("/builder/refreshLockStatus",[[self.model.id]]);}});if(self.lockUnlockAll){self.lockUnlockAll.innerHTML=builder.Environment.messages.LOCKALLATTRS;self.lockUnlockAll.title=builder.Environment.messages.LOCKALLATTRS;}if(self.lockUnlockParentAll){self.lockUnlockParentAll.innerHTML=builder.Environment.messages.LOCKALLATTRS;self.lockUnlockParentAll.title=builder.Environment.messages.LOCKALLATTRS;}}else{dojo.forEach(this.model.metadata.attributes,function(attr){dojo.publish("/builder/lockChange",[[self.model.id,true,attr.id]]);dojo.publish("/builder/refreshLockStatus",[[self.model.id]]);});if(self.lockUnlockAll){self.lockUnlockAll.innerHTML=builder.Environment.messages.UNLOCKALLATTRS;self.lockUnlockAll.title=builder.Environment.messages.UNLOCKALLATTRS;}if(self.lockUnlockParentAll){self.lockUnlockParentAll.innerHTML=builder.Environment.messages.UNLOCKALLATTRS;self.lockUnlockParentAll.title=builder.Environment.messages.UNLOCKALLATTRS;}}},setPropertyDefaultValue:function(_9d5){var _9d6="";for(var i=0;i<this.metadata.length;i++){if(_9d5===this.metadata[i].id){_9d6=this.metadata[i].sampleValue||_9d6;break;}}this.propsMap[_9d5].setPropertyValue(_9d6);this.model.properties[_9d5]=_9d6;}});});},"paas/common/constants":function(){define(["dojo/_base/lang"],function(lang){var paas=lang.getObject("paas",true);var _9d7=lang.getObject("common.constants",true,paas);_9d7=paas.common.constants={TabPublic:["overview","support"],TabAllUser:["overview","dashboard","applications","components","profile","support"],TabAdmin:["overview","dashboard","applications","components","controlPanel","profile","support"],IaaSKeyFlag:true,MINSCREENWIDTH:1000,MINSCREENHEIGHT:700,DEPLOYMENTS:"virtualApplications",APPLICATIONS:"applicationPatterns",APPLICATION_REST_URL:"/resources/applicationPatterns/",DEPLOYMENT_REST_URL:"/resources/virtualApplications/",VSYS_PATTERN_REST_URL:"/resources/virtualSystemPatterns/",VSYS_INSTANCE_REST_URL:"/resources/virtualSystemInstances/",VAPP_PATTERN_REST_URL:"/resources/virtualApplicationPatterns/",VAPP_INSTANCE_REST_URL:"/resources/virtualApplicationInstances/",SHAREDSERVICE_REST_URL:"/resources/sharedServices/",SHAREDSERVICE_INSTANCE_REST_URL:"/resources/sharedServiceInstances/",PATTERNTYPE_REST_URL:"/resources/patternTypes/",WORKLOADSTANDARD_REST_URL:"/resources/databaseWorkloads/",COMPONENT_REST_URL:"/resources/components/",FIXPACKS_REST_URL:"/resources/db2Fixes/",PSINSTANCE_REST_URL:"/resources/purescaleInstances/",REGION_URL:"/resources/locations?location=subdomain&details",DOMAIN_URL:"/resources/locations?location=domain&groupBy=subdomain&details",CLOUDS_URL:"/resources/clouds/",VIRTUAL_IMAGES_URL:"/resources/templates/",IMAGE_MAPPINGS_URL:"/resources/templateMappings/",ROWSPERPAGE_IN_GRID:2000,dbaasPatternTypeShortName:"dbaas",shareServicePatternTypeShortName:"foundation",PatternAttrMainWidgetID:"PatternAttrMainWidgetID",ROLES:{SUPER_USER:1,CLOUD_USER:2,CLOUD_ADMIN_WRITER:3,APPLIANCE_ADMIN:4,APPLIANCE_ADMIN_WRITER:4,CATALOG_CREATOR:5,PATTERN_CREATOR:6,ILMT_USER:7,CLOUD_ADMIN_READER:8,APPLIANCE_ADMIN_READER:9,PROFILE_CREATOR:10,REPORT_READER:11,AGENT:12,AUDIT_READER:13,AUDIT_WRITER:14,HARDWARE_ADMIN_WRITER:15,SECURITY_ADMIN_WRITER:16,SECURITY_ADMIN_READER:17,IBM_CE:18,SHARED_SERVICE:19,ROLE_ADMIN:20,HARDWARE_ADMIN_READER:21,CLOUDGROUP_ADMIN_WRITER:22,CLOUDGROUP_ADMIN_READER:23,USER_ADMIN_READER:24,TOOLS_ADMIN_WRITER:25,TOOLS_ADMIN_READER:26,DB2_PS_INSTANCE_CREATOR:27,DB_CONFIG_MGMT_READER:28,DB_CONFIG_MGMT_WRITER:29,DR_ADMIN_WRITER:30,DR_ADMIN_READER:31,CLOUD_GROUP_MANAGER:32,HARDWARE_MANAGER:33},UI_ELEMENTS:{SMALL_LOADING:"<span class:\"wca-image-cloud-progress-indicator-small-icon\" style:\"display:inline-block\"></span>"},DEFAULT_TIMEOUT:5000,SCRIPT_EXECUTION_MODE:{VS_CREATION_MODE:0,VS_DELETION_MODE:1,VS_USER_DEFINED_MODE:2,VS_CREATION_AND_USER_DEFINED_MODE:3},IFIX_DEPLOYMENT_MAINT_URL:"/resources/ifixes/",IFIX_DEPLOYMENT_REST_URL:"/resources/ifixes/",IFIX_APP_REST_URL:"/resources/applicationPatterns/",DATA_DEPENDS_LINK:"DataDependsOnLink",HOSTED_ON_LINK:"HostedOnLink",PREREQUISITE_LINK:"PrerequisiteLink",POLICY_LINK:"policyLink",ADDON:"ADDON",POLICY:"POLICY",IMAGE:"IMAGE",SCRIPT_PACKAGE:"SCRIPT_PACKAGE",PART:"PART",IMAGE:"IMAGE"};window.constants=_9d7;return paas.common.constants;});},"builder/vsys/workbench/palette/VSysCategoryPalette":function(){define(["dojo/_base/declare","dojo/_base/array","builder/workbench/palette/CategoryPalette","builder/workbench/palette/CategoryPaletteFolder","builder/vsys/util/VSysUtil","builder/service/PatternTypeService","dojo/_base/lang","builder/util/constants"],function(_9d8,_9d9,_9da,_9db,_9dc,_9dd,lang,_9de){return _9d8("builder.vsys.workbench.palette.VSysCategoryPalette",[_9da],{defaultFilterName:"concreteFilter",draggable:true,defaultCategory:_9de.PARTS_CATEGORY,constructor:function(){},postCreate:function(){this.inherited(arguments);},load:function(_9df){var _9e0=builder.Environment.diagram;this.ps=_9dd.getPaletteService(_9df,_9e0.patterntype,_9e0.version);var _9e1=this.ps.getCategories();var ms=_9dd.getMetadataService(_9df,_9e0.patterntype,_9e0.version);this.componentsMeta=ms.getComponents();_9e1.then(dojo.hitch(this,function(_9e2){this.categories=_9e2;this.filterAndDisplayFolders();}));},getReusableComponents:function(){return [];},abstractFilter:function(_9e3){dojo.forEach(_9e3,function(_9e4){dojo.forEach(_9e4.items,function(item){if(item["abstract"]==true){item.display=false;}});});},_addConcreteChild:function(_9e5,_9e6,_9e7){if(typeof (_9e6)=="string"){_9e6=[_9e6];}for(var i=0;i<_9e5.length;i++){for(var j=0;j<_9e5[i].items.length;j++){if(dojo.indexOf(_9e6,_9e5[i].items[j].type)>-1){_9e5[i].items[j].concreteChildren=_9e5[i].items[j].concreteChildren||[];_9e5[i].items[j].concreteChildren.push(_9e7);return;}}}},_isTopLevelComponent:function(id){return dojo.indexOf([_9de.IMAGE,_9de.PART,_9de.SCRIPT_PACKAGE],id)>-1;},_mixin:function(_9e8,_9e9){this.inherited(arguments);dojo.forEach(_9e8,function(_9ea){dojo.forEach(_9ea.items,function(item){if(item["abstract"]!==true&&item["extends"]!=null){this._addConcreteChild(_9e8,item["extends"],item);}},this);},this);},concreteFilter:function(_9eb){dojo.forEach(_9eb,function(_9ec){var _9ed={};dojo.forEach(_9ec.items,function(item){if(item["abstract"]===true){if(_9ed[item.type]===undefined){_9ed[item.type]={};_9ed[item.type]["items"]=[];_9ed[item.type]["fromAbstract"]=true;lang.mixin(_9ed[item.type],item);}_9ed[item.type]["abstract"]=true;}else{if(item["extends"]){var keys=item["extends"];dojo.forEach(keys,function(key){item.version=_9dc.getVersionFromMetadata(this.componentsMeta[item.type]);var _9ee=key;if(this._isTopLevelComponent(key)){_9ee=item.type;}if(_9ed[_9ee]===undefined){_9ed[_9ee]={};lang.mixin(_9ed[_9ee],item);var _9ef=builder.util.Util.splitName(item.name);_9ed[_9ee]["name"]=_9ef.shortName||item.name;_9ef=builder.util.Util.splitName(item.description);_9ed[_9ee]["description"]=_9ef.shortName||item.description;_9ed[_9ee]["abstract"]=false;_9ed[_9ee]["items"]=[];}else{if(_9ed[_9ee]["fromAbstract"]===true&&(_9ec.id===_9de.IMAGES_CATEGORY||_9ec.id===_9de.PARTS_CATEGORY)){_9ed[_9ee]["fromAbstract"]=false;var _9ef=builder.util.Util.splitName(item.name);_9ed[_9ee]["name"]=_9ef.shortName||item.name;_9ef=builder.util.Util.splitName(item.description);_9ed[_9ee]["description"]=_9ef.shortName||item.description;}}_9ed[_9ee]["items"].push(item);},this);}else{if(!_9ed[item.type]){_9ed[item.type]={};lang.mixin(_9ed[item.type],item);_9ed[item.type]["abstract"]=false;_9ed[item.type]["items"]=[];}_9ed[item.type]["items"].push(item);}}if(item["viewable"]===false){item.display="none";}},this);_9ec.items=[];_9ec.categories=[];for(var _9f0 in _9ed){var obj=_9ed[_9f0];if(obj["abstract"]===false||obj.items.length==1){dojo.forEach(obj.items,function(item){delete item.version;_9ec.items.push(item);});}else{if((obj.items)&&(obj.items.length!==0)){_9ec.items.push(obj);}}}},this);}});});},"builder/workbench/editor/InlineAnnotation":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/InlineAnnotation.html","dijit/InlineEditBox","dijit/form/ValidationTextBox"],function(_9f1,_9f2,_9f3,_9f4,_9f5,_9f6,_9f7){return _9f1("builder.workbench.editor.InlineAnnotation",[_9f2,_9f3,_9f4],{templateString:_9f5,widgetsInTemplate:true,annotationContent:null,postCreate:function(){this.annotation.set("value",this.annotationContent||"");},getAnnotationValue:function(){return this.annotation.get("value");},paint:function(p1,p2){var x=(p1.x+p2.x)/2;var y=(p1.y+p2.y)/2;if(this.domNode){this.domNode.style.left=x+"px";this.domNode.style.top=y+"px";}},onChange:function(){var _9f8=this.annotation.get("value");this.annotationContent=_9f8;},disable:function(){this.annotation.set("disabled",true);dojo.addClass(this.annotation.domNode,"disabledLayer");},enable:function(){this.annotation.set("disabled",false);dojo.removeClass(this.annotation.domNode,"disabledLayer");if(dojo.isIE){dojo.style(this.annotation.domNode,{"filter":"alpha(opacity=100)"});}}});});},"builder/vsys/command/VSysRemovePolicyCommand":function(){define(["dojo/_base/declare","builder/command/RemovePolicyCommand","dojo/_base/array","builder/command/RemoveConnectionCommand","builder/vsys/util/VSysUtil","paas/common/constants","builder/util/Util","builder/command/ChangePropertyCommand","builder/vsys/command/VSysRemoveCommandMixin","dojo/_base/lang","builder/vsys/command/OrderCommandMixin","builder/vsys/util/VSysUtil"],function(_9f9,_9fa,_9fb,_9fc,_9fd,_9fe,Util,_9ff,_a00,lang,_a01,_a02){return _9f9("builder.vsys.command.VSysRemovePolicyCommand",[_9fa,_a00,_a01],{execute:function(){var self=this;var _a03=builder.Environment.diagram.getComponentById(this.modelId);if(this.attachComponentId){var _a04=builder.Environment.diagram.getComponentById(this.attachComponentId);}else{var _a04=_9fd.findContainerComponent(_a03);if(_a04){this.attachComponentId=_a04.id;}}this.moveUpSteps=this._getMoveUpSteps(_a03,_a04);this.compoundCmd=new builder.base.command.CompoundCommand();dojo.forEach(_a03.outgoingConnections,dojo.hitch(this,function(_a05){var cmd=new builder.command.RemoveConnectionCommand(_a05);cmd.forcedRemove(true);this.compoundCmd.add(cmd);}));this._removeIncomingConnections(_a03.incomingConnections,this.compoundCmd);this.compoundCmd.execute();if(_a04&&_a04.componentFrame){_a04.componentFrame.removePolicy(_a03);}if(_a03.layer){_a03.layer.removeComponent(_a03);}_a03.remove();this._updatePatternLevelAttributeReference(_a03);this.updateStartsAfter(this.modelId);dojo.publish("onDiagramChanged",null);if(_a04){_a04.rePaintComponent();_a04.checkValidation&&_a04.checkValidation();}this._checkContainerFrame();},_removeIncomingConnections:function(_a06,_a07){_9fb.forEach(_a06,lang.hitch(this,function(conn){if(conn.type===_9fe.HOSTED_ON_LINK){var _a08=new _9fc(conn);_a07.add(_a08);}else{if(conn.type===_9fe.DATA_DEPENDS_LINK){this._removeIncomingConnection(conn,_a07);}}}));},_getMoveUpSteps:function(_a09,_a0a){var _a0b=0;var _a0c=0;var _a0d=false;var _a0e=builder.Environment.diagram.connections;_9fb.forEach(_a0e,function(conn){if(conn.type===_9fe.HOSTED_ON_LINK&&conn.target===_a0a&&_a02.isLinkableSubComponent(conn.source.metadata)){_a0c++;if(!_a0d){_a0b++;if(conn.source===_a09){_a0d=true;}}}});return _a0c-_a0b;},_moveToPreviousPosition:function(_a0f){var _a10=builder.Environment.diagram.getComponentById(this.modelId);while(_a0f-->0){_a10.componentFrame.moveUp();}},undo:function(){this.inherited(arguments);this._moveToPreviousPosition(this.moveUpSteps);this.restoreStartsAfter();this._checkContainerFrame();},_checkContainerFrame:function(){if(this.attachComponentId){var _a11=builder.Environment.diagram.getComponentById(this.attachComponentId);if(_a11!=null){_a11.componentFrame&&_a11.componentFrame.checkSeparatorLine();}}}});});},"paas/widgets/SimpleTextareaExt":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/SimpleTextarea","dojo/text!./templates/SimpleTextareaExt.html","dojo/_base/array"],function(_a12,_a13,_a14,_a15,_a16,_a17,_a18){return _a12("paas.widgets.SimpleTextareaExt",[_a13,_a14,_a15],{templateString:_a17,value:null,SPLITTER:",",postCreate:function(){dojo.connect(this.inputValueNode.domNode,"onchange",this,"onChange");},onChange:function(){},get:function(name){if(name==="value"){var _a19=this.inputValueNode.get("value");if(_a19.length==0){return [];}return _a19.split(this.SPLITTER);}else{return this.inherited(arguments);}},set:function(name,_a1a){if(name=="value"){this.value=_a1a;var _a1b="";_a18.forEach(this.value,dojo.hitch(this,function(_a1c){_a1b+=_a1c+this.SPLITTER;}));if(_a1b.length>0){_a1b=_a1b.substring(0,_a1b.length-1);}this.inputValueNode.set("value",_a1b);}else{if(name=="disabled"){this.inputValueNode.set("disabled",_a1a);}else{this.inherited(arguments);}}},isValid:function(){return true;}});});},"builder/workbench/orderView/OrderRow":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/OrderRow.html","builder/workbench/orderView/OrderFrame","dojo/topic","dojo/dom-style","dojo/_base/lang","dojo/topic","builder/workbench/orderView/FlowConnection","builder/workbench/orderView/DependencyConnection","builder/workbench/orderView/OrderConstants","dojo/query","dojo/NodeList-traverse","dojo/dom-attr","dijit/registry","builder/workbench/orderView/OrderUtil"],function(_a1d,_a1e,_a1f,_a20,_a21,_a22,_a23,_a24,lang,_a23,_a25,_a26,_a27,_a28,_a29,_a2a,_a2b,_a2c){return _a1d("builder.workbench.orderView.OrderRow",[_a1e,_a1f,_a20],{templateString:_a21,rowNum:null,componentRelation:null,orderFrames:null,frameSpace:_a27.FRAME_SPACE,frameWidth:_a27.FRAME_WIDTH,surface:null,rowWidth:null,constructor:function(){this.orderFrames=[];},postCreate:function(){this.createOrderRow();this.setRowWidth();},createOrderRow:function(){var _a2d=_a27.FRAME_TOPSHIFT;this.imageTitleNode.innerHTML=this.componentRelation.image.id;var _a2e=this.componentRelation.subComponents;for(var i=0;i<_a2e.length;i++){var _a2f=new _a22({component:_a2e[i],orderRow:this,indexInRow:i});var _a30=this.calculateXShift(i,_a2f);_a2f.setPosition(_a30,_a2d);_a2e[i].orderFrame=_a2f;if(i==_a2e.length-1){_a2f.lastFrameInRow=true;}this.orderFramesNode.appendChild(_a2f.domNode);this.orderFrames.push(_a2f);}},paintFlowConnections:function(){for(var j=0;j<this.orderFrames.length-1;j++){var args={source:this.orderFrames[j].component,target:this.orderFrames[j+1].component};if(_a2c.hasDataDependency(args.source,args.target)){args.fixed=true;}var _a31=new _a25(args);_a31.paint();}},setRowWidth:function(){var _a32=this.orderFrames.length*(this.frameSpace+this.frameWidth)+this.frameSpace;this.rowWidth=_a32;var self=this;require(["dojo/dom-style"],function(_a33){_a33.set(self.orderFramesNode,"width",_a32+"px");});},reSetRowWidth:function(_a34){var _a35=this.rowWidth+_a34;this.rowWidth=_a35;_a24.set(this.orderFramesNode,"width",_a35+"px");},updateRowWidthAfterDnD:function(){var _a36=this.orderFrames[this.orderFrames.length-1].x+this.frameWidth+this.frameSpace;this.rowWidth=_a36;_a24.set(this.orderFramesNode,"width",_a36+"px");},calculateXShift:function(_a37){var _a38=_a37*(this.frameWidth+this.frameSpace)+this.frameSpace;return _a38;},setPosition:function(x,y){var self=this;require(["dojo/dom-style"],function(_a39){_a39.set(self.orderRowNode,{position:"absolute",left:x,top:y});});},updateFramesOrder:function(){this.orderFrames.sort(function sortFunction(_a3a,_a3b){var _a3c=_a24.get(_a3a.domNode,"left");var _a3d=_a24.get(_a3b.domNode,"left");return _a3c-_a3d;});for(var i=0;i<this.orderFrames.length;i++){this.orderFrames[i].indexInRow=i;}},resetFrames:function(){for(var i=0;i<this.orderFrames.length;i++){var left=this.calculateXShift(i);this.orderFrames[i].setXPosition(left);if(i===this.orderFrames.length-1){this.orderFrames[i].lastFrameInRow=true;}else{this.orderFrames[i].lastFrameInRow=false;}this.orderFrames[i].removeOldFlowInConnections();this.orderFrames[i].removeOldFlowOutConnections();}},containComponent:function(_a3e){for(var i=0;i<this.orderFrames.length;i++){if(this.orderFrames[i].component===_a3e){return true;}}return false;},destroyFlowConnections:function(){for(var i=0;i<this.orderFrames.length;i++){this.orderFrames[i].destroyUselessFlowConnections();}},destroy:function(){this.inherited(arguments);var self=this;require(["dojo/_base/array"],function(_a3f){_a3f.forEach(self.orderFrames,function(_a40){_a40.destroyRecursive();});});}});});},"builder/workbench/property/BaseGroup":function(){define(["dojo/_base/declare","dijit/_WidgetBase","builder/command/EnableGroupCommand"],function(_a41,_a42,_a43){return _a41("builder.workbench.property.BaseGroup",[_a42],{enable:true,readOnly:false,metadata:null,content:null,title:null,groupId:null,model:null,propertiesWidgets:null,groupWidgets:null,categoryWidgets:null,init:true,constructor:function(){this.groupWidgets=[];this.categoryWidgets=[];this.subscriber=dojo.subscribe("onGroupStatusChange",this,dojo.hitch(this,function(args){if(this.model.id==args[0]&&this.groupId==args[1]){this.setPropsEnable(args[2],args[3]);}}));},addGroup:function(_a44){this.groupWidgets.push(_a44);},addCategory:function(_a45){this.categoryWidgets.push(_a45);},getChangeGroupCommand:function(){return new _a43(this.model.id,this.groupId,this.enable,!this.enable);},changeChangeable:function(e){if(this.readOnly||this.disabled){return;}if(e){dojo.stopEvent(e);}var cmd=this.getChangeGroupCommand();if(builder&&builder.Environment&&builder.Environment.commandStack){builder.Environment.commandStack.executeCommand(cmd);}else{cmd.canExecute()&&cmd.execute();}},set:function(name,_a46){if(name=="disabled"){this.readOnly=_a46;this.disabled=_a46;dojo.forEach(this.groupWidgets,function(_a47){_a47.set("disabled",_a46);});dojo.forEach(this.categoryWidgets,function(_a48){_a48.set("disabled",_a46);});}else{return this.inherited(arguments);}},setPropsEnable:function(_a49,_a4a){this.enable=_a49;this.changeProps(_a49,_a4a);if(_a49){this.showGroup();}else{this.hideGroup();}dojo.forEach(this.groupWidgets,function(_a4b){var _a4c=_a49;if(this.init){_a4c=_a4b.enable;}else{if(_a49){var _a4d=_a4b.metadata;if(_a4a&&_a4a.groups&&_a4a.groups[_a4d.id]!=null){if(_a4d.required){_a4c=true;}else{_a4c=_a4a.groups[_a4d.id];}}else{if(_a4d.require||_a4d.defaultValue!=false){_a4c=true;}else{_a4c=false;}}}}_a4b.setPropsEnable(_a4c,_a4a);},this);dojo.forEach(this.categoryWidgets,function(_a4e){if(_a49){var _a4f=_a49;dojo.forEach(_a4e.groups,function(_a50){if(this.init){_a4f=_a50.enable;}else{if(_a4a&&_a4a.groups&&_a4a.groups[_a50.metadata.id]!=null){_a4f=_a4a.groups[_a50.metadata.id];}else{_a4f=_a50.metadata.defaultValue||false;}}_a50.setPropsEnable(_a4f,_a4a);});}else{_a4e.disableOtherGroup();}},this);dojo.publish("onGroupChanged",[[this.model.id,this.groupId,_a49,_a4a]]);},changeProps:function(_a51,_a52){this.enable=_a51;if(_a51){var _a53=_a52&&(_a52.attributes||_a52.properties);dojo.forEach(this.propertiesWidgets,function(_a54){_a54.valueWidget.set("disabled",false);var _a55=_a54.propertyId;if(_a53==null||_a53[_a55]==null){var _a56=[_a54.metadata];var _a57={};builder.util.Util.setDefaultProperties(_a56,_a57);value=_a57[_a55];}else{value=_a53[_a55];}_a54.setChangeable();dojo.publish("onPropertyChanged",[[_a54.model.id,_a54.propertyId,value]]);});}else{dojo.forEach(this.propertiesWidgets,function(_a58){_a58.valueWidget.set("disabled",true);try{_a58.valueWidget.set("value",null);}catch(e){_a58.valueWidget.set("value","");}delete _a58.properties[_a58.propertyId];});}},uninitialize:function(){if(this.subscriber){dojo.unsubscribe(this.subscriber);}for(var i in this.propertiesWidgets){var _a59=this.propertiesWidgets[i];_a59.domNode&&_a59.destroyRecursive();}for(var i in this.categoryWidgets){var _a59=this.categoryWidgets[i];_a59.domNode&&_a59.destroyRecursive();}for(var i in this.groupWidgets){var _a59=this.groupWidgets[i];_a59.domNode&&_a59.destroyRecursive();}},hideGroup:function(){},showGroup:function(){},toggleGroupLockStatus:function(){var _a5a=dojo.some(this.propertiesWidgets||[],function(_a5b){return _a5b.isLocked==true;});dojo.forEach(this.groupWidgets,function(_a5c){_a5a=_a5a||_a5c.toggleGroupLockStatus();},this);dojo.forEach(this.categoryWidgets,function(_a5d){for(var i=0;i<_a5d.groups.length;i++){_a5a=_a5a||group.toggleGroupLockStatus();if(_a5a){break;}}});this.lockGroup(_a5a);return _a5a;},lockGroup:function(_a5e){}});});},"builder/workbench/editor/Connection":function(){define(["dojo/_base/declare","builder/workbench/property/ConnectionPropertiesWidget","builder/workbench/editor/ConnectionFrame","builder/workbench/editor/ConnectionThumbnailFrame","builder/workbench/editor/PropertiesContainer","builder/workbench/property/PropertiesEditable","builder/util/Util","builder/util/array","paas/common/constants"],function(_a5f,_a60,_a61,_a62,_a63,_a64,Util,_a65,_a66){return _a5f("builder.workbench.editor.Connection",[_a63,_a64],{fromComponent:null,toComponent:null,container:null,selected:null,metadata:null,annotationContent:null,readOnly:false,locked:null,subscribes:null,childConnection:false,constructor:function(args){dojo.mixin(this,args);this.properties=args.properties||{};if(JSON.stringify(this.properties)=="{}"){var _a67=new Object();for(var _a68 in args.metadata.properties){var _a69=args.metadata.properties[_a68];_a67[_a69.name]=_a69.value;}if(JSON.stringify(_a67)!="{}"){this.properties=_a67;}}this.groups=this.groups||{};this.propertyMetadata=this.metadata.attributes||[];this.fromComponent=args.source;this.toComponent=args.target;this.fromComponent.addOutgoingConnection(this);this.toComponent.addIncomingConnection(this);this.childConnection=args.childConnection;this.annotationContent=args.annotation||"";if(this.loadFromModel===true){}else{builder.util.Util.setDefaultProperties(this.propertyMetadata,this.properties);this.groups=builder.util.Util.setDefaultGroupsStatus(this.metadata.groups,this.groups,this.properties);}this.subscribes=[];this.subscribes.push(dojo.subscribe("/builder/lockChange",this,"onLockChange"));this.subscribes.push(dojo.subscribe("onLoadingReferences",this,function(id){if(id==this.fromComponent.id||id==this.toComponent.id){this.updateMetadata();this.changePropertyWidgets();}}));this.subscribes.push(dojo.subscribe("onReferencesChanged",this,function(id,_a6a,_a6b){if(id==this.fromComponent.id||id==this.toComponent.id){this.updateMetadata();var _a6c=(_a6a===this.getId())?[_a6b]:undefined;this.changePropertyWidgets(_a6c);}}));},updateMetadata:function(){builder.service.AppBindingService.updateMetadata(this);},getConnectionId:function(){return this.id;},paint:function(){this.connectionFrame&&this.connectionFrame.paint();},isSubComponentLink:function(){var _a6d=["policyLink",_a66.HOSTED_ON_LINK];var _a6e=this.metadata&&(this.metadata.type=="policyLink"||builder.util.array.contains(_a6d,this.metadata.id));return _a6e;},isVisible:function(){return !this.isSubComponentLink();},isInited:false,showWidget:function(){if(this.isInited===true){return;}if(this.isVisible()){this._createConnectionView();if(this.isReferenced()){this.setReferenced();}this.checkValidation();}this.isInited=true;},_createConnectionView:function(){this.connectionFrame=new _a61({connection:this});},createPropertiesWidget:function(){this.propertiesWidget=new _a60({model:this,"isTemplate":this.diagram.isTemplate()});if(this.isReferenced()){this.propertiesWidget.setUnchangable();}return this.propertiesWidget;},_removeWidget:function(){if(this.isSubComponentLink()){return;}if(this.diagram.selectedModel==this){this.diagram.selectModel(this.diagram);}this.connectionFrame&&this.connectionFrame.removeWidget();},remove:function(){this.fromComponent.delOutgoingConnection(this);this.toComponent.delIncomingConnection(this);this.diagram.removeConnection(this);this._removeWidget();if(this.propertiesWidget){this.propertiesWidget.destroyRecursive();}dojo.forEach(this.subscribes,dojo.unsubscribe);},checkValidation:function(){if(this.isSubComponentLink()){return;}var _a6f=builder.util.ValidationUtil.getValidationResult(this);this.connectionFrame.setStatus(_a6f.result,_a6f.description);},getId:function(){return this.id;},getType:function(){return this.metadata.id;},getAnnotationContent:function(){if(this.connectionFrame&&this.connectionFrame.annotation){return this.connectionFrame.annotation.getAnnotationValue();}return null;},getSourceComponent:function(){return this.fromComponent;},getTargetComponent:function(){return this.toComponent;},onUnselect:function(){this.selected=false;this.connectionFrame&&this.connectionFrame.onUnselect();},onSelected:function(evt){if(evt){dojo.stopEvent(evt);}this.selected=true;this.connectionFrame&&this.connectionFrame.onSelect(evt);this.showPropertiesWidget();},disable:function(){if(this.isSubComponentLink()){return;}this.connectionFrame&&this.connectionFrame.disable();if(this.diagram.selectedModel===this){this.diagram.selectModel(this.diagram);}},enable:function(){if(this.isSubComponentLink()){return;}this.connectionFrame&&this.connectionFrame.enable();},isReferenced:function(){return this.getSourceComponent().isReferenced()&&this.getTargetComponent().isReferenced()&&(this.getSourceComponent().layer==this.getTargetComponent().layer);},setReferenced:function(){this.connectionFrame&&this.connectionFrame.setReferenced();this.propertiesWidget&&this.propertiesWidget.setUnchangable();},setReadOnlyMode:function(){this.readOnly=true;this.connectionFrame&&this.connectionFrame.setReadOnlyMode();},onLockChange:function(args){if(args[0]!=this.id){return;}if(args[1]===true){this.locked=this.locked||[];builder.util.array.add(this.locked,args[2]);}else{builder.util.array.remove(this.locked,args[2]);}},changePropertyWidgets:function(_a70){if(this.propertiesWidget){this.propertiesWidget.changePropertyWidgets(_a70);}},toStandFrame:function(){this.connectionFrame&&this.connectionFrame.removeWidget();this.connectionFrame=new _a61({connection:this});},serialize:function(){var _a71={source:this.getSourceComponent().getId(),target:this.getTargetComponent().getId(),attributes:this.getProperties(),type:this.getType(),id:this.getId()};if(this.getGroups()){_a71.groups=this.getGroups();}if(this.locked&&this.locked.length>0){_a71.locked=this.locked;}var _a72=this.getAnnotationContent();if(_a72){_a71.annotation=_a72;}return _a71;}});});},"builder/workbench/componentsView/ArtifactListCollapsibleSection":function(){define(["dojo/_base/declare","builder/workbench/componentsView/ComponentArtifact","builder/workbench/componentsView/ListCollapsibleSection"],function(_a73,_a74,_a75){return _a73("builder.workbench.componentsView.ArtifactListCollapsibleSection",[_a75],{createRowData:function(row){var _a76=new builder.workbench.componentsView.ComponentArtifact({appModel:this.appModel},row);return _a76;}});});},"builder/vsys/command/VSysRemoveCommandMixin":function(){define(["dojo/_base/declare","builder/vsys/util/VSysUtil","builder/command/ChangePropertyCommand","builder/util/Util","dojo/string"],function(_a77,_a78,_a79,Util,_a7a){return _a77("builder.vsys.command.VSysRemoveCommandMixin",null,{_removeIncomingConnection:function(conn,_a7b){var _a7c=conn.source.properties;for(var key in _a7c){if(_a7c.hasOwnProperty(key)){if(_a78.isDataDependsOnValue(_a7c[key])&&_a7c[key].indexOf(conn.target.id)){var _a7d=new RegExp("\\$\\{"+conn.target.id+"\\.[^}]+\\}","g");var _a7e=_a7c[key].replace(_a7d,"");if(_a7a.trim(_a7e).length===0){_a7e=this._getAttrDefaultValue(conn.source,key);}if(!conn.source.propertiesWidget){conn.source.createPropertiesWidget();}var _a7f=new _a79(conn.source,key,_a7c[key],_a7e);_a7b.add(_a7f);}}}},_getAttrDefaultValue:function(_a80,_a81){var _a82=_a80.metadata.attributes;for(var i=0;i<_a82.length;i++){if(_a82[i].id===_a81){return _a82[i].sampleValue||"";}}return "";},_updatePatternLevelAttributeReference:function(_a83){if(_a83&&_a83.metadata){dojo.forEach(_a83.metadata.attributes,function(attr){if(_a83.properties[attr.id]&&Util.stringContainContent(_a83.properties[attr.id],"${pattern")){dojo.publish("onPatternAttributeReferenceChanged");}});}}});});},"builder/util/PositionUtil":function(){define(["dojo/_base/lang"],function(lang){var _a84=lang.getObject("builder",true);var _a85=lang.getObject("util.PositionUtil",true,_a84);_a85=_a84.util.PositionUtil={getPixel:function(v){return parseInt(v.substring(0,v.indexOf("p")));},getLeftPosition:function(_a86,conn){var _a87=_a86.componentFrame.getOuterBox();var _a88=_a86.componentFrame.getInnerBox();var _a89=this.getConnections(_a86,"left",conn);var len=(_a88.h*(1-2*0.1)*(_a89.connIndex+1))/(_a89.conns.length+1);len+=_a88.h*0.1;var _a8a=_a88.x-_a87.x;var _a8b=_a88.y-_a87.y;return {x:_a87.l+_a8a,y:_a87.t+_a8b+len,h:len};},getRightPosition:function(_a8c,conn){var _a8d=_a8c.componentFrame.getOuterBox();var _a8e=_a8c.componentFrame.getInnerBox();var _a8f=this.getConnections(_a8c,"right",conn);var len=(_a8e.h*(1-2*0.1)*(_a8f.connIndex+1))/(_a8f.conns.length+1);len+=_a8e.h*0.1;var _a90=_a8e.x-_a8d.x;var _a91=_a8e.y-_a8d.y;return {x:_a8d.l+_a90+_a8e.w,y:_a8d.t+_a91+len,h:len};},getTopPosition:function(_a92,conn){var _a93=_a92.componentFrame.getOuterBox();var _a94=_a92.componentFrame.getInnerBox();var _a95=this.getConnections(_a92,"top",conn);var len=(_a94.w*(1-2*0.1)*(_a95.connIndex+1))/(_a95.conns.length+1);len+=_a94.w*0.1;var _a96=_a94.x-_a93.x;var _a97=_a94.y-_a93.y;return {x:_a93.l+_a96+len,y:_a93.t+_a97};},getBottomPosition:function(_a98,conn){var _a99=_a98.componentFrame.getOuterBox();var _a9a=_a98.componentFrame.getInnerBox();var _a9b=this.getConnections(_a98,"bottom",conn);var len=(_a9a.w*(1-2*0.1)*(_a9b.connIndex+1))/(_a9b.conns.length+1);len+=_a9a.w*0.1;var _a9c=_a9a.x-_a99.x;var _a9d=_a9a.y-_a99.y;return {x:_a99.l+_a9c+len,y:_a99.t+_a9d+_a9a.h};},getConnections:function(_a9e,pos,conn){var _a9f=[];dojo.forEach(_a9e.incomingConnections,function(_aa0){if(_aa0.mode===undefined){_a84.util.PaintUtil.computeConnectionMode(_aa0.fromComponent,_aa0.toComponent,_aa0);}if(_aa0.mode==1&&pos=="left"){_a9f[_a9f.length]=_aa0;}else{if(_aa0.mode==2&&pos=="right"){_a9f[_a9f.length]=_aa0;}else{if(_aa0.mode==3&&pos=="bottom"){_a9f[_a9f.length]=_aa0;}else{if(_aa0.mode==4&&pos=="top"){_a9f[_a9f.length]=_aa0;}}}}});dojo.forEach(_a9e.outgoingConnections,function(_aa1){if(_aa1.mode===undefined){_a84.util.PaintUtil.computeConnectionMode(_aa1.fromComponent,_aa1.toComponent,_aa1);}if(_aa1.mode==1&&pos=="right"){_a9f[_a9f.length]=_aa1;}else{if(_aa1.mode==2&&pos=="left"){_a9f[_a9f.length]=_aa1;}else{if(_aa1.mode==3&&pos=="top"){_a9f[_a9f.length]=_aa1;}else{if(_aa1.mode==4&&pos=="bottom"){_a9f[_a9f.length]=_aa1;}}}}});var _aa2=[];var _aa3=0;if(pos=="left"||pos=="right"){for(var i=0;i<_a9f.length;i++){if(_a9e==_a9f[i].fromComponent){_aa2[i]=this.getPixel(_a9f[i].toComponent.getPosition().y);}else{_aa2[i]=this.getPixel(_a9f[i].fromComponent.getPosition().y);}}}else{if(pos=="top"||pos=="bottom"){for(var i=0;i<_a9f.length;i++){if(_a9e==_a9f[i].fromComponent){_aa2[i]=this.getPixel(_a9f[i].toComponent.getPosition().x);}else{_aa2[i]=this.getPixel(_a9f[i].fromComponent.getPosition().x);}}}}var _aa4;for(var i=0;i<_a9f.length;i++){if(conn==_a9f[i]){_aa4=_aa2[i];_aa3=i;break;}}return {"conns":_a9f,"connIndex":_aa3};}};return _a85;});},"builder/command/AddPolicyCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/command/AddConnectionCommand","builder/command/AddComponentCommand"],function(_aa5,_aa6,_aa7,_aa8){return _aa5("builder.command.AddPolicyCommand",[_aa6],{toComponent:null,policyComponent:null,connection:null,addComponentCmd:null,addConnecionCmd:null,constructor:function(_aa9,_aaa,_aab){if(typeof (_aa9)=="string"){this.params={"type":_aa9};}else{this.params=_aa9;}this.toComponentId=_aaa.id;this.addComponentCmd=new builder.command.AddComponentCommand(this.params,null,true);this.invisible=_aab;},execute:function(){this.addComponentCmd.execute();this.policyComponent=this.addComponentCmd.component;var _aac=builder.Environment.diagram.getComponentById(this.toComponentId);this.addConnecionCmd=new builder.command.AddConnectionCommand(this.policyComponent,_aac,true);this.addConnecionCmd.setChildConnection(true);if(!this.addConnecionCmd.canExecute()){return;}this.addConnecionCmd.execute();if(!this.invisible&&this.policyComponent.isVisible()){_aac.componentFrame.appendPolicy&&_aac.componentFrame.appendPolicy(this.policyComponent);builder.Environment.diagram.selectModel(this.policyComponent);}this.connection=this.addConnecionCmd.connection;_aac.rePaintComponent();_aac.checkValidation&&_aac.checkValidation();return this.policyComponent;},undo:function(){if(this.connection){this.addConnecionCmd.undo();}if(this.policyComponent){this.addComponentCmd.undo();}var _aad=builder.Environment.diagram;_aad&&_aad.selectModel(_aad);var _aae=builder.Environment.diagram.getComponentById(this.toComponentId);_aae.rePaintComponent();_aae.checkValidation&&_aae.checkValidation();},canExecute:function(){if(this.addComponentCmd.canExecute()){return true;}return false;}});});},"builder/workbench/property/RangeSliderWithOptions":function(){define(["dojo/_base/declare","builder/workbench/property/RangeSliderExt","dojox/form/RangeSlider","builder/workbench/property/HorizontalRuleWithOptions"],function(_aaf,_ab0,_ab1,_ab2){var _ab3=_aaf("builder.workbench.property.HorizontalRangeSliderWithOption",[dojox.form.HorizontalRangeSlider],{options:null,postMixInProperties:function(){this.inherited(arguments);this.minimum=this.options[0].value;this.maximum=this.options[this.options.length-1].value;},_getBumpValue:function(_ab4,_ab5){var idx=_ab5?1:0;if(this._isReversed()){idx=1-idx;}var _ab6=this.value[idx];var _ab7=0;for(var i=0;i<this.options.length;i++){if(this.options[i].value==_ab6){_ab7=i;break;}}if(_ab4>0){var _ab8=_ab7<this.options.length-1?_ab7+1:this.options.length-1;}else{var _ab8=_ab7==0?0:_ab7-1;}var _ab9=dojo.clone(this.value);_ab9[idx]=this.options[_ab8].value;return _ab9;},_getValueByPixelValue:function(_aba,_abb){_aba=_aba<0?0:_abb<_aba?_abb:_aba;var _abc=_abb/(this.maximum-this.minimum);var _abd=Math.round(_aba/_abc)+this.minimum;var _abe=this.minimum;if(_abd>=this.maximum){_abe=this.maximum;}else{if(_abd<=this.minimum){_abe=this.minimum;}else{for(var i=0;i<this.options.length;i++){if(this.options[i].value>_abd){_abe=Math.abs(_abd-this.options[i].value)<Math.abs(_abd-this.options[i-1].value)?this.options[i].value:this.options[i-1].value;break;}}}}return _abe;}});return _aaf("builder.workbench.property.RangeSliderWithOptions",[_ab0],{options:null,postMixInProperties:function(){this.inherited(arguments);this.minimum=this.options[0].value;this.maximum=this.options[this.options.length-1].value;},postCreate:function(){this.minvalue=this.minimum;this.maxvalue=this.minimum;if(!this.value){this.value=[this.minimum,this.minimum];}this.slider=new _ab3({name:"rangeSlider",intermediateChanges:true,style:"height:20px; margin-top:-5px;",options:this.options},this.rangeSliderContainer);this.connect(this.slider,"onChange","onSliderChange");this.connect(this.slider,"onBlur","onChange");var _abf={numericMargin:0,container:"topDecoration",style:"height:1.2em;font-size:75%;",options:this.options};this.topHorizontalRuleLable=new _ab2(_abf,this.ruleLableContainer);this.slider.topDecoration.appendChild(this.topHorizontalRuleLable.domNode);this.topHorizontalRuleLable.domNode.style.marginTop="2px";this.set("value",this.value);},getShowValue:function(_ac0){var _ac1=this.options[0].name;for(var i=0;i<this.options.length;i++){if(_ac0==this.options[i].value){_ac1=this.options[i].name;break;}}return _ac1;},onSliderChange:function(){this.minvalue=dojo.number.format(this.valueFormat(arguments[0][0]),{places:0,pattern:this.constraints.pattern});this.maxvalue=dojo.number.format(this.valueFormat(arguments[0][1]),{places:0,pattern:this.constraints.pattern});if(this.minvalue){this.sliderInputMin.innerHTML=this.getShowValue(arguments[0][0]);}if(this.maxvalue){this.sliderInputMax.innerHTML=this.getShowValue(arguments[0][1]);}this.value=[arguments[0][0],arguments[0][1]];},set:function(_ac2,_ac3){if(_ac2==="value"){if(!_ac3){_ac3=[this.minimum,this.maximum];}var temp=dojo.clone(_ac3);this.slider.set("value",temp);this.minvalue=dojo.number.format(this.valueFormat(parseInt(arguments[0][0])),{places:0,pattern:this.constraints.pattern});this.maxvalue=dojo.number.format(this.valueFormat(parseInt(arguments[0][1])),{places:0,pattern:this.constraints.pattern});if(this.minvalue){this.sliderInputMin.innerHTML=this.getShowValue(arguments[0][0]);}if(this.maxvalue){this.sliderInputMax.innerHTML=this.getShowValue(arguments[0][1]);}}else{return this.inherited(arguments);}}});});},"builder/vsys/util/VSysCommandFactory":function(){define(["dojo/_base/declare","dojo/_base/lang","builder/util/DefaultCommandFactory","builder/vsys/command/VSysAddPolicyCommand","builder/vsys/command/VSysRemovePolicyCommand","builder/vsys/command/VSysChangeComponentNameCommand"],function(_ac4,lang,_ac5,_ac6,_ac7,_ac8){return _ac4("builder.vsys.util.VSysCommandFactory",[_ac5],{constructor:function(){this.commandMaps.AddPolicyCommand="builder.vsys.command.VSysAddPolicyCommand";this.commandMaps.RemovePolicyCommand="builder.vsys.command.VSysRemovePolicyCommand";this.commandMaps.ChangeComponentNameCommand="builder.vsys.command.VSysChangeComponentNameCommand";}});});},"builder/service/PatternTypeService":function(){define(["dojo/_base/lang","paas/common/SolutionUtil","builder/service/MetadataServiceExt","builder/service/PaletteServiceExt","builder/service/ComponentServiceExt"],function(lang,_ac9,_aca,_acb,_acc){var _acd=lang.getObject("builder",true);lang.getObject("service.PatternTypeService",true,_acd);var _ace=_acd.service.PatternTypeService={metaServices:[],paletteServices:[],componentServices:[],isArrayEqual:function(a,b){if(!dojo.isArray(a)||!dojo.isArray(b)||(a.length!=b.length)){return false;}var _acf=true;var map={};dojo.forEach(a,function(_ad0){map[_ad0]=true;});for(var i=0;i<b.length;i++){if(!map[b[i]]){_acf=false;break;}}return _acf;},getMetadataServiceBySolution:function(_ad1,_ad2){var _ad3=_ac9;var _ad4=_ad3.getPlugins(_ad1,_ad2);return this.getMetadataService(_ad4,_ad1,_ad2);},getMetadataServiceByModel:function(_ad5){if(_ad5.locked==true){return this.getMetadataService(_ad5.plugins,_ad5.patterntype,_ad5.version);}else{return this.getMetadataServiceBySolution(_ad5.patterntype,_ad5.version);}},getMetadataService:function(_ad6,_ad7,_ad8){if(!_ad6){_ad6=[];}for(var i=0;i<this.metaServices.length;i++){if(this.isArrayEqual(this.metaServices[i].plugins,_ad6)){return this.metaServices[i];}}var _ad9=new _acd.service.MetadataServiceExt(_ad6,_ad7,_ad8);this.metaServices.push(_ad9);return _ad9;},getPaletteService:function(_ada,_adb,_adc){for(var i=0;i<this.paletteServices.length;i++){if(this.isArrayEqual(this.paletteServices[i].plugins,_ada)){return this.paletteServices[i];}}var pal=new _acd.service.PaletteServiceExt(_ada,_adb,_adc);this.paletteServices.push(pal);return pal;},getComponentService:function(_add,_ade){var cs;for(var i=0;i<this.componentServices.length;i++){cs=this.componentServices[i];if(cs.patterntype===_add&&cs.version===_ade){return cs;}}cs=new _acd.service.ComponentServiceExt(_add,_ade);this.componentServices.push(cs);return cs;}};return _ace;});},"builder/workbench/property/TitlePaneWithDisable":function(){define(["dojo/_base/declare","dojo/text!./templates/TitlePane.html","dijit/TitlePane","builder/workbench/property/BaseGroup"],function(_adf,_ae0,_ae1,_ae2){var _ae3=_adf("builder.workbench.property.TitlePaneWithDisable",[_ae1,_ae2],{templateString:_ae0,required:false,postCreate:function(){if(this.required){this.checkboxContainer.style.display="none";}else{this.checkboxContainer.style.display="";}this.inherited(arguments);this.setPropsEnable(this.enable,this.model);},showGroup:function(){dojo.removeClass(this.checkboxContainer,"groupDisable");dojo.addClass(this.checkboxContainer,"groupEnable");this.checkboxContainer.title="enabled";},hideGroup:function(){dojo.removeClass(this.checkboxContainer,"groupEnable");dojo.addClass(this.checkboxContainer,"groupDisable");this.checkboxContainer.title="disabled";},lockGroup:function(_ae4){if(!_ae4){this.checkboxContainer.style.display="";}else{this.checkboxContainer.style.display="none";}}});_adf("builder.workbench.property.InnerGroupPane",[_ae3],{postCreate:function(){this.inherited(arguments);this.checkboxContainer.style.display="none";this.arrowNode.style.width="16px";this.arrowNode.style.height="16px";dojo.removeClass(this.arrowNode,"dijitArrowNode");this.domNode.style.paddingTop="8px";this.domNode.style.paddingLeft="8px";},_setCss:function(){if(this.open){this.arrowNode.src="/images/collapse.gif";}else{this.arrowNode.src="/images/expand.gif";}}});return _ae3;});},"paas/widgets/ScalingPolicyBadgeWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ScalingPolicyBadgeWidget.html","paas/common/util","dojo/dom-construct"],function(_ae5,_ae6,_ae7,_ae8,_ae9,util,_aea){return _ae5("paas.widgets.ScalingPolicyBadgeWidget",[_ae6,_ae7,_ae8],{templateString:_ae9,widgetsInTemplate:true,policy:null,componentID:null,constructor:function(){},postCreate:function(){this.inherited(arguments);this.setCompOuterDisplay();this.subscribes=[];this.subscribes.push(dojo.subscribe("onPropertyChanged",this,"onPropertyChange"));},setCompOuterDisplay:function(){var _aeb=this.policy.properties.scaleInstanceRange;dojo.style(this.vsysOuterDisplayNode,"display","block");if(dojo.isString(_aeb)){}else{if(dojo.isArray(_aeb)){var _aec=_aeb[0]+"-"+_aeb[_aeb.length-1];if(_aeb[0]===_aeb[_aeb.length-1]){_aec=_aeb[0];}_aeb=_aec;}else{if(this.policy.properties.intialInstanceNumber){_aeb=this.policy.properties.intialInstanceNumber;}else{dojo.style(this.vsysOuterDisplayNode,"display","none");}}}this.vsysOuterDisplayNode.innerHTML=_aeb;},showPolicyWidget:function(){this.policy.showPropertiesWidget();},onPropertyChange:function(_aed){var self=this;if(self.policy&&_aed&&dojo.isArray(_aed)&&self.policy.id==_aed[0]){if(dojo.indexOf(_aed,"scaleInstanceRange")!=-1){var _aee=_aed[_aed.length-1];if(_aee){var _aef=_aee[0]+"-"+_aee[_aee.length-1];if(_aee[0]===_aee[_aee.length-1]){_aef=_aee[0];}self.vsysOuterDisplayNode.innerHTML=_aef;dojo.style(this.vsysOuterDisplayNode,"display","block");dojo.publish("onPropertyChanged",[[this.policy.id,"initialInstances",_aee[0]]]);}}else{if(this.policy.properties&&!this.policy.properties.scaleInstanceRange){dojo.style(this.vsysOuterDisplayNode,"display","none");if(this.vsysOuterDisplayNode){_aea.destroy(this.vsysOuterDisplayNode);}}}}},refreshBadgeWidget:function(){var self=this;self.setCompOuterDisplay();},uninitialize:function(){dojo.forEach(this.subscribes,dojo.unsubscribe);}});});},"builder/workbench/property/GroupOptionWidget":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","builder/workbench/property/BaseExclusiveGroup"],function(_af0,_af1,_af2,_af3){return _af0("builder.workbench.property.GroupOptionWidget",[_af3,_af1,_af2],{templateString:"<div dojoAttachPoint=\"propsContainer, containerNode\" class=\"propertyContent\"></div>",category:null,content:null,title:null,containerWidget:null,postCreate:function(){this.propsContainer.appendChild(this.content);dojo.forEach(this.propertiesWidgets,function(_af4){_af4.groupWidget=this;},this);this.domNode.title="";},showGroup:function(){dojo.style(this.domNode,"display","");},hideGroup:function(){dojo.style(this.domNode,"display","none");},setPropsEnable:function(_af5){this.inherited(arguments);if(_af5){this.containerWidget.groupsSelector.set("value",this.title);}},lockGroup:function(_af6){if(!this.containerWidget){return;}this.containerWidget.set("disabled",_af6);}});});},"builder/workbench/property/InlineEditContainer":function(){define(["dojo/_base/declare","dijit/InlineEditBox","paas/common/util"],function(_af7,_af8,util){return _af7("builder.workbench.property.InlineEditContainer",[_af8],{noValueIndicator:"&nbsp;",metadata:null,postMixInProperties:function(){this.inherited(arguments);dojo.addClass(this.displayNode,"listViewInlineEditBoxBorder");},_setValueAttr:function(_af9){if(this.metadata["options"]){var obj=paasUtil.find(this.metadata["options"],function(o){return o.value==_af9;});if(obj){_af9=obj.name;}}_af9=_af9?_af9.toString():"";return this.inherited(arguments);},_getValueAttr:function(){if(this.metadata.type==="number"&&this.metadata.options==null){return Number(this.value);}else{if(this.metadata["options"]){var _afa=this.value;var obj=paasUtil.find(this.metadata["options"],function(o){return _afa==o.name;});return String(obj&&obj.value)||"";}}return this.value;},isValid:function(){if(this.wrapperWidget&&this.wrapperWidget.editWidget.isValid){return this.wrapperWidget.editWidget.isValid();}return true;}});});},"paas/widgets/FileInputAuto":function(){define(["dojo/_base/declare","dojo/text!./templates/FileInputAuto.html","dojox/form/FileInputAuto","paas/widgets/_FileContentSelectDialog","builder/util/FileUploadManager","paas/widgets/MetaDataDrivenInput","dojo/request/iframe","dojo/dom-style","dojo/_base/fx","dojo/_base/sniff","dojo/dom-class","dojo/dom-geometry","dojo/on","dojo/topic"],function(_afb,_afc,_afd,_afe,_aff,_b00,_b01,_b02,fx,has,_b03,_b04,on,_b05){return _afb("paas.widgets.FileInputAuto",[_afd,_b00],{templateString:_afc,sentFile:"",label:"",deleteText:"",blurDelay:0,supportContentLink:false,canDelete:true,isDisplayCancel:false,isDisplayConfirm:false,fileExtensions:null,invalidMessage:null,msgMethod:null,msgObject:null,uploadRetryTimes:0,uploadRetryMax:0,submitIntervalMilliSec:5000,topic:"/upload/fileInputAuto",constructor:function(){this.label=builder.Environment.messages.BROWSE;this.deleteText=builder.Environment.messages.DELETE;this.uploadMessage="";this.cancelText=paas.Base.messages.CANCEL;this.parameters={};},postMixInProperties:function(){this.inherited(arguments);this.initExtensionData();},postCreate:function(){this.resizeRealInput();this.inputNode.id="fileInputAutoFakeInput-"+this.id;this.setStyles();this.own(on(this.cancelNode,"click",this.resetFileValue));if(this.supportContentLink){this.fakeNodeHolder.style.zIndex=5;this.own(on(this.titleNode,"click",this.showDialog));}this.recordFileExt=dojo.clone(this.fileExtensions);},startup:function(){this.inherited(arguments);this._blurListener=this.connect(this.fileInput,this.triggerEvent,"_onBlur");this._focusListener=this.connect(this.fileInput,"onfocus","_onFocus");this._listener=this.connect(this.fileInput,"onchange","_matchValue");this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");},setStyles:function(){dojo.style(this.cancelNode,"display","none");this.overlay.style.width="180px";this.progressBar.style.display="none";this.showDeleteNode();},initExtensionData:function(){if(!this.model){return;}this.initMetaData();if(this.metadata&&this.metadata.fileExtensions){this.fileExtensions=this.metadata.fileExtensions;}},resizeRealInput:function(){var _b06=_b04.getContentBox(this.fakeNodeHolder);if(_b06.w!==0){var _b07=_b06.w;if(has("ie")){_b07=_b07-15;}_b02.set(this.fileInput,"width",_b07+"px");}else{var _b07="230px";if(has("ie")){_b07="250px";}this.fileInput.style.width=_b07;}this.fileInput.size=25;},resetFileValue:function(){this.set("value",this.sentFile);},showDeleteNode:function(){if(!this.canDelete){dojo.style(this.deleteNode,"display","none");return;}if(this.inputNode.value&&this.inputNode.value!="undefined"&&this.inputNode.value!=""){dojo.style(this.deleteNode,"display","");}else{dojo.style(this.deleteNode,"display","none");}this.inputNode.setAttribute("aria-label","file name");},validateFileType:function(){if(!this.fileExtensions||this.fileExtensions===""){return true;}var _b08=this.fileInput.value;var _b09=false;for(var i=0;i<this.fileExtensions.length;i++){if(this.fileExtensions[i]){if(this.fileExtensions[i]!=""){var _b0a=_b08.length-this.fileExtensions[i].length;var _b0b=_b08.length;try{if(this.fileExtensions[i]==_b08.substring(_b0a,_b0b)&&_b08.charAt(_b0a-1)=="."){_b09=true;break;}}catch(e){}}else{_b09=true;break;}}}return _b09;},_onFocus:function(){},_onBlur:function(){if(this._sent||!this.fileInput.value){return;}var _b0c=this.fileInput.value.lastIndexOf("\\");var _b0d=this.fileInput.value.substring(_b0c+1);if(!this.validateFileType()){var _b0e=dojo.map(this.fileExtensions,function(_b0f){return "."+_b0f;});_b05.publish("/builder/property/notification",["info","widgets_fileinputauto_invalidExtension",_b0e.join(" or ")]);_b05.publish("/builder/property/notification/invalidfile",["error","widgets_fileinputauto_invalidExtension_errorMessage",_b0d]);this.fileInput.value="";this.reset();return;}if(this._blurTimer){clearTimeout(this._blurTimer);}if(!this._sent){this._blurTimer=setTimeout(dojo.hitch(this,"_sendFile"),this.blurDelay);if(this.fileInput.value){this.fileInput.style.zIndex="0";this.focusNode.disabled="true";this.deleteNode.style.display="none";}}},_matchValue:function(_b10){if(this.fileInput.value){var _b11=this.fileInput.value.lastIndexOf("\\");this.inputNode.value=this.fileInput.value.substring(_b11+1);}else{this.inputNode.value=this.fileInput.value;}if(this.inputNode.value&&this.isDisplayCancel){this.cancelNode.style.visibility="visible";this.cancelNode.style.display="";dojo.fadeIn({node:this.cancelNode,duration:275}).play();}if(_b10.keyCode==dojo.keys.ESCAPE){this.resetFileValue();}},validateDuplicateArtifacts:function(_b12){return true;},_sendFile:function(e){if(this._sent||this._sending||!this.fileInput.value){return;}var _b13=this._tranformFilePath(this.fileInput.value);if(!this.validateDuplicateArtifacts(this.fileInput.value)){return;}var self=this;if(this.isDisplayConfirm==true){if(!this.confirmButton){this.confirmButton=dojo.create("div",{tabindex:-1,className:"dijitInline dijitButton fileInputButton",style:{"paddingTop":"1px"},innerHTML:"<span class='dijitButtonNode'>"+paas.Base.messages.OK+"</span>",onclick:function(e){self._sendFileAction(e);self.confirmButton.style.display="none";}},this.fakeNodeHolder);this.connect(this.cancelNode,"onclick",function(){this.confirmButton.style.display="none";});}else{this.confirmButton.style.display="";this.confirmButton.focus();}return;}else{this._sendFileAction(e);}},_sendFileAction:function(e){if(this._sent||this._sending||!this.fileInput.value){return;}this._sending=true;dojo.style(this.fakeNodeHolder,"display","none");dojo.style(this.overlay,{opacity:0,display:"block"});dojo.style(this.fileInput,"display","none");this.setMessage(this.uploadMessage);dojo.fadeIn({node:this.overlay,duration:this.duration}).play();if(paasUtil.supportFileAPI()){var file=this.fileInput.files[0];if(file){var _b14=file.size/1024/1024;if(_b14>=2048){_b05.publish(this.topic,["error","VS_IMPORT_LARGER_FILE"]);this.reset();return;}}var data=new FormData();data.append(this.name,file);this._dtd=paasUtil.sendXHR("post",this.buildURL(),data,{onLoad:dojo.hitch(this,"_handleSend"),onError:dojo.hitch(this,"_handleSend"),onProgress:dojo.hitch(this,"onProgress")});}else{var _b15;if(has("ie")<9||(has("ie")&&has("quirks"))){_b15=document.createElement("<form enctype=\"multipart/form-data\" method=\"post\">");_b15.encoding="multipart/form-data";}else{_b15=document.createElement("form");_b15.setAttribute("enctype","multipart/form-data");}_b15.appendChild(this.fileInput);dojo.body().appendChild(_b15);this._dtd=_b01(this.buildURL(),{form:_b15,handleAs:"json",method:"POST"},true);this._dtd.then(dojo.hitch(this,"_handleSend"),dojo.hitch(this,"_handleSend"));}this._setUploadingStyles();var _b16=this._tranformFilePath(this.fileInput.value);},isCanceled:function(){if(this._dtd){if(this._dtd.isCanceled){return this._dtd.isCanceled();}else{if(this._dtd.status!=null&&this._dtd.status!=0){return false;}else{return true;}}}else{return true;}},_handleSend:function(data,_b17){this.overlay.removeChild(this.overlay.firstChild);this._sent=true;this._sending=false;_b02.set(this.overlay,{opacity:0,border:"none",background:"none"});this.overlay.style.backgroundImage="none";this.overlay.style.width="180px";this.fileInput.style.display="none";this.fakeNodeHolder.style.display="none";fx.fadeIn({node:this.overlay,duration:this.duration}).play(250);this.disconnect(this._blurListener);this.disconnect(this._focusListener);if(_b17&&_b17.args&&_b17.args.form){dojo.body().removeChild(_b17.args.form);}if(typeof (data)=="string"){if(data.indexOf("<textarea>")>=0){var _b18=data.indexOf("<textarea>")+10;var end=data.indexOf("</textarea>");data=dojo.fromJson(data.substring(_b18,end));}}this.onComplete(data,_b17,this);if(!this.isCanceled()){this.sentFile=this.inputNode.value;}this.reset();},_setUploadingStyles:function(){dojo.style(this.stopNode,"display","");dojo.style(this.progressBar,"display","");},onProgress:function(e){if(e.lengthComputable){var done=e.position||e.loaded;var _b19=e.totalSize||e.total;if(done>_b19){done=_b19;}var _b1a=Math.floor((done*1000/_b19)/10)+"%";this.progressNode.innerHTML=_b1a;this.overlay.style.width=Math.floor(done/_b19*180)+"px";}else{this.overlay.innerHTML="&nbsp;";}},stopUploading:function(){if(this._sending&&this._dtd){if(this._dtd.abort){this._dtd.abort();}else{var _b1b=_b01._frame;if(_b1b&&_b1b.contentWindow){var _b1c=_b1b.contentWindow;if(_b1c.stop){_b1c.stop();}else{_b1c.document.execCommand("Stop");}}this._dtd.cancel();}}else{if(this._blurTimer){clearTimeout(this._blurTimer);}}this.reset();},_tranformFilePath:function(_b1d){return "artifacts/"+this.getFileName(_b1d);},buildURL:function(){var _b1e="";for(var key in this.parameters){var _b1f=this.parameters[key];if(_b1f){if(_b1e.length!==0){_b1e+="&";}_b1e+=escape(key)+"="+escape(_b1f);}}if(_b1e.length==0){_b1e=this.url;}else{_b1e=this.url+"?"+_b1e;}return _b1e;},getFileName:function(_b20){var _b21="";if(dojo.isIE||dojo.isChrome||dojo.isSafari){var _b22=_b20.lastIndexOf("\\")+1;_b21=_b20.slice(_b22);}else{_b21=_b20;}return encodeURIComponent(_b21);},setMessage:function(_b23){if(this.overlay.firstChild){this.overlay.removeChild(this.overlay.firstChild);}this.overlay.appendChild(document.createTextNode(_b23));},reset:function(){if(this._blurTimer){clearTimeout(this._blurTimer);}this.disconnect(this._blurListener);this.disconnect(this._focusListener);this.overlay.style.display="none";this.fakeNodeHolder.style.display="";this.disconnect(this._listener);this.disconnect(this._keyListener);if(this.fileInput){var _b24=this.fileInput.parentNode;if(_b24){_b24.removeChild(this.fileInput);}}fx.fadeOut({node:this.cancelNode,duration:275}).play();this.fileInput=document.createElement("input");this.fileInput.setAttribute("type","file");this.fileInput.setAttribute("id",this.id);this.fileInput.setAttribute("name",this.name);_b03.add(this.fileInput,"dijitFileInputReal");this.domNode.appendChild(this.fileInput);this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");this._listener=this.connect(this.fileInput,"onchange","_matchValue");this.inputNode.value="";this._sent=false;this._sending=false;this._blurListener=this.connect(this.fileInput,this.triggerEvent,"_onBlur");this._focusListener=this.connect(this.fileInput,"onfocus","_onFocus");this.overlay.innerHTML="";this.overlay.appendChild(document.createTextNode(""));this.resizeRealInput();this.fileInput.style.zIndex="2";this.focusNode.disabled="false";this.overlay.style.backgroundImage="";if(this.confirmButton){this.confirmButton.style.display="none";}this.progressNode.innerHTML="";dojo.style(this.cancelNode,"display","none");dojo.style(this.stopNode,"display","none");dojo.style(this.progressBar,"display","none");this._dtd=null;this.resetFileValue();this.showDeleteNode();},deleteFile:function(){this.set("value","");this.sentFile="";this.reset();},set:function(name,_b25){if(name==="disabled"){this.deleteNode.disabled=_b25;this.titleNode.disabled=_b25;this.cancelNode.disabled=_b25;this.fileInput.disabled=_b25;this.inputNode.disabled=_b25;return;}else{if(name==="value"){this.sentFile=_b25;}}var ret=this.inherited(arguments);if(name==="value"){if(_b25){this.inputNode.value=decodeURI(_b25);}else{this.inputNode.value="";}}return ret;},showDialog:function(){if(!this.dialog){this.dialog=new _afe();this.connect(this,"reset",function(){this.fileInput.size=1;this.dialog.fileInputNode.appendChild(this.fileInput);this.dialogChangeListener=this.connect(this.fileInput,"onchange",function(){this.dialog.hide();});this.dialogKeyListener=this.connect(this.fileInput,"onkeyup",function(){this.dialog.hide();});});this.connect(this.dialog.contentLinkCheckbox,"onChange",function(){if(this.dialog.contentLinkCheckbox.checked){this.fileExtensions=null;if(this.url.indexOf("?")>-1){this.url=this.url+"&isContentLink";}else{this.url=this.url+"?isContentLink";}}else{this.fileExtensions=this.recordFileExt;var _b26=this.url.indexOf("isContentLink");this.url=this.url.substring(0,_b26-1);}});}this.reset();this.dialog.show();}});});},"paas/widgets/GenerateDynamicObjectWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/GenerateDynamicObjectWidget.html","paas/common/util","builder/command/ChangePropertyCommand","dojo/_base/lang","dojo/dom-construct","dojo/aspect"],function(_b27,_b28,_b29,_b2a,_b2b,util,_b2c,lang,_b2d,_b2e){return _b27("paas.widgets.GenerateDynamicObjectWidget",[_b28,_b29,_b2a],{templateString:_b2b,widgetsInTemplate:true,defaultShowNum:5,value:null,modelId:null,propId:null,showMore:true,constructor:function(){this.addVariable=builder.Environment.messages.PROPERTY_VIEW_ADD_VAR;this.addButtonTitle=builder.Environment.messages.PROPERTY_VIEW_ADD_VAR_DEFAULT_ADD;this.nameHint=builder.Environment.messages.PROPERTY_VIEW_ADD_VAR_NAME_HINT;this.valueHint=builder.Environment.messages.PROPERTY_VIEW_ADD_VAR_VALUE_HINT;},postCreate:function(){if(this.value==null||this.value==undefined||this.value==""){this.value={};}},onchange:function(){},onChange:function(){},get:function(name){if(name=="value"){return this.value;}else{return this.inherited(arguments);}},set:function(name,_b2f){var self=this;if(name=="value"){dojo.html._emptyNode(this.showPairsDiv);dojo.html._emptyNode(this.morePairs);self.displayValue(_b2f);}else{this.inherited(arguments);}},displayValue:function(_b30){this.value=_b30;for(key in this.value){this.createSinglePair(key,this.value[key]);}this.showPairsInUI();},createSinglePair:function(name,_b31){var self=this;if(_b31==null||_b31=="undefined"||_b31==""){_b31=builder.Environment.messages.PROPERTY_VIEW_ADD_VAR_DEFAULT_VAL;}var aDiv=dojo.create("div");dojo.connect(aDiv,"onChange",self,"onChange");var _b32=name+"="+_b31;var _b33=dojo.create("span",{innerHTML:_b32,title:name});dojo.addClass(_b33,"default");aDiv.appendChild(_b33);var _b34=dojo.create("span",{});var _b35=dojo.create("img",{title:paas.Base.messages.IFIX_WIDGET_REMOVE_TITLE,style:"vertical-align: top;",src:"/images/delete-icon-small.gif"});dojo.connect(_b35,"onclick",dojo.hitch(self,function(){self.removePair(name,aDiv);}));_b34.appendChild(_b35);dojo.addClass(_b34,"default");aDiv.appendChild(_b34);if(this.showPairsDiv.children.length<this.defaultShowNum){this.showPairsDiv.appendChild(aDiv);}else{this.morePairs.appendChild(aDiv);}},showPairsInUI:function(){var self=this;this.showPairsDiv.style.display="";if(this.showPairsDiv.children.length<this.defaultShowNum&&this.morePairs.children.length>0){var _b36=this.morePairs.children[0];this.morePairs.removeChild(_b36);this.showPairsDiv.appendChild(_b36);}if(this.morePairs.children.length>0){this.showNode.style.display="";if(this.showMore){this.morePairs.style.display="none";this.lessNode.innerHTML=paas.Base.messages.SHOW_MORE;}else{this.morePairs.style.display="";this.lessNode.innerHTML=paas.Base.messages.SHOW_LESS;}}else{this.morePairs.style.display="none";this.showNode.style.display="none";}},addPairToUI:function(){if(this.varNameNode.value==null||this.varNameNode.value==undefined||this.varNameNode.value==""){dojo.publish("/builder/property/notification",[["warning","PROPERTY_VIEW_ADD_VAR_NAME"]]);}else{var _b37=lang.clone(this.value);this.value[this.varNameNode.value]=this.varValueNode.value;var _b38=new _b2c({id:this.modelId},this.propId,_b37,this.value);_b2e.after(_b38,"execute",lang.hitch(this,function(){this.varNameNode.set("value","");this.varValueNode.set("value","");}));if(builder&&builder.Environment&&builder.Environment.commandStack){builder.Environment.commandStack.executeCommand(_b38);}else{_b38.canExecute()&&cmd.execute();}}},removePair:function(item,adiv){var _b39=lang.clone(this.value);delete this.value[item];var _b3a=new _b2c({id:this.modelId},this.propId,_b39,this.value);if(builder&&builder.Environment&&builder.Environment.commandStack){builder.Environment.commandStack.executeCommand(_b3a);}else{_b3a.canExecute()&&cmd.execute();}},toggleShow:function(){this.showMore=!(this.showMore);this.showPairsInUI();},isValid:function(){return true;}});});},"builder/workbench/property/PropertyWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/PropertyWidget.html","dijit/form/CheckBox","dijit/form/FilteringSelect","builder/workbench/property/FileUploadWidget","dijit/form/NumberTextBox","dijit/form/ValidationTextBox","paas/widgets/DateTimeTextBoxExt","dojo/store/Memory","builder/command/ChangePropertyCommand","builder/util/Encoder","dijit/form/SimpleTextarea","builder/workbench/property/Slider","builder/workbench/property/RangeSliderExt","builder/workbench/property/RadioGroup","paas/widgets/MultiSelectExt","paas/widgets/GenerateDynamicObjectWidget","paas/widgets/MultiSelectIgnoreIPExt","paas/widgets/SimpleTextareaExt","builder/workbench/property/FileSelectWidget","builder/workbench/property/PasswordWidget","paas/widgets/ValidationSimpleTextAreaExt","paas/common/util","builder/workbench/property/ValueWidgetFactory","dojo/dom-construct","dojo/dom-attr","dojo/dom-class","dojo/on","dojo/_base/lang","builder/util/Encoder"],function(_b3b,_b3c,_b3d,_b3e,_b3f,_b40,_b41,_b42,_b43,_b44,_b45,_b46,_b47,_b48,_b49,_b4a,_b4b,_b4c,_b4d,_b4e,_b4f,_b50,_b51,_b52,_b53,util,_b54,_b55,_b56,_b57,on,lang,_b48){return _b3b("builder.workbench.property.PropertyWidget",[_b3c,_b3d,_b3e],{templateString:_b3f,metadata:null,properties:null,model:null,lineMode:"two-line",propertiesEnv:null,isLockVisible:true,isDeleted:false,isLocked:false,isTemplate:false,supportRemoteFile:false,groupWidget:null,loading_msg:paas.Base.messages.LOADING,deprecatedHint:null,value:null,name:null,constructor:function(){this.eventHandles=[];this.image_alt=builder.Environment.messages.IMAGE_ALT;this.scanningHint=builder.Environment.messages.ARTIFACT_SCANNING;this.deprecatedHint=builder.Environment.messages.REMOVE_DEPRECATED;},postCreate:function(){if(!this.metadata){return;}if(this.metadata.type==="boolean"){_b55.place(this.valueNode,this.nameArea,"first");dojo.addClass(this.requiredMark.parentNode,"inlineDisplay");dojo.addClass(this.valueNode,"inlineDisplay");_b55.destroy(this.valueArea);_b56.set(this.nameArea,"colspan","2");}else{if(this.lineMode==="two-line"){this.nameArea.appendChild(this.valueNode);}}if(this.metadata.deprecated===true){this.nameNode.innerHTML=dojo.string.substitute(builder.Environment.messages.LABEL_WITHCOLON_DEPRECATED,[this.metadata.label]);}else{this.nameNode.innerHTML=this.metadata.label;}this.nameNode.title=this.metadata.description||"Name";this.propertyId=this.metadata.id;if(this.metadata.nameWidgetStyle){dojo.style(this.nameArea,this.metadata.nameWidgetStyle);}var _b58=this.properties!=null&&this.properties[this.propertyId];this._createValueWidget(this.metadata.type,_b58);_b58=this.properties!=null&&this.properties[this.propertyId];if(_b58||_b58===false||_b58==0){this.setPropertyValue(_b58);}this.showRequired();dojo.connect(this.valueWidget,"onChange",this,"onPropertyChange");this.isLocked=builder.util.array.contains(this.model.locked,this.metadata.id);this.subscribes=[];this.subscribes.push(dojo.subscribe("/builder/lockChange",this,function(args){if(this.model.id===args[0]&&this.metadata.id===args[2]){this.isLocked=args[1];this.showLockStatus();}}));this.subscribes.push(dojo.subscribe("onApplicationTypeChange",this,function(args){if(this.model.id===args[0]){this.isTemplate=args[1];this.showLockStatus();}}));if(this.metadata.deprecated===true){this.valueWidget.set("disabled",true);if(this.deleteNode){dojo.style(this.deleteNode,"display","");dojo.connect(this.deleteNode,"onclick",this,"removeDeprecated");}}if(this.statusNode){if(this.metadata.deprecated===true){var _b59=dojo.string.substitute(builder.Environment.messages.ATTRIBUTE_DEPRECATED,[this.metadata.id,""]);dojo.style(this.statusNode,"display","");this.statusNode.title=_b59;}}if(this.isLocked){dojo.style(this.lockNode,"display","");}if(!this.model.readOnly){this.own(on(this.lockNode,"click",lang.hitch(this,this.onLockChange)));}},removeDeprecated:function(_b5a){this.isDeleted=true;dojo.publish("onPropertyChanged",[[this.model.id,this.propertyId,undefined]]);},changeValueWidget:function(){if(!this.metadata){return;}var _b5b=this.getPropertyValue();if(_b5b==null){_b5b=this.properties!=null&&this.properties[this.propertyId];}var _b5c=this.valueWidget.domNode.parentNode;var _b5d=dojo.create("div");_b5c.replaceChild(_b5d,this.valueWidget.domNode);this.valueWidget.destroyRecursive();this.valueNode=_b5d;this._createValueWidget(this.metadata.type,_b5b);if(_b5b||_b5b===false||_b5b===0){this.setPropertyValue(_b5b);}this.showRequired();dojo.connect(this.valueWidget,"onChange",this,"onPropertyChange");},showIcons:function(){if(!this.model.readOnly){this.showLockStatus();}},hideIcons:function(){if(!this.isLocked){dojo.style(this.lockNode,"display","none");}},_createValueWidget:function(type,_b5e){if(this.metadata.displayType=="hidden"){if(this.metadata.sampleValue!=null){this.properties[this.propertyId]=this.metadata.sampleValue;}dojo.style(this.domNode,"display","none");return;}if(this.metadata.valueWidgetType!=null){try{var _b5f=this.metadata.valueWidgetType;if(this.metadata.externalWidget&&_b5f.indexOf(".")>-1){var _b60=_b5f.substring(0,_b5f.lastIndexOf("."));var _b61="/resources/customui/"+this.propertiesEnv.pluginName+"/extensions/public/"+_b60.split(".").join("/");dojo.registerModulePath(_b60,_b61);}dojo["require"](_b5f);this.valueWidget=new dojo.getObject(_b5f)(args);this.valueWidget.placeAt(this.valueNode);}catch(e){dojo.publish("/builder/editor/notification",[["warning","Widget type ${0} for property ${1} is unable to be loaded",_b5f,this.metadata.id]]);}}else{this.valueWidget=_b54.createValueWidget(this.model,this.metadata,this.propertiesEnv,_b5e,this.supportRemoteFile);if(this.metadata.type==="boolean"){_b57.remove(this.valueWidget.domNode,"propertyView_value");}this.valueWidget.placeAt(this.valueNode);}if(this.valueWidget&&this.valueWidget.focusNode&&this.valueWidget.focusNode.id){var _b62=this.valueWidget.focusNode.nodeName.toLowerCase();if(_b62=="input"||_b62=="textarea"){this.nameNode.htmlFor=this.valueWidget.focusNode.id;}}},_createStore:function(_b63){var data=null;if(dojo.isArray(_b63)){data={identifier:"id",items:[]};for(var i=0;i<_b63.length;i++){var item={id:_b63[i].value&&_b63[i].value.toString(),name:_b63[i].name};data.items.push(item);}}else{return null;}if(!this.properties[this.propertyId]&&this.properties[this.propertyId]!=false&&dojo.isArray(_b63)&&_b63[0]){this.properties[this.propertyId]=_b63[0].value;}return new _b46({data:data});},_createValidationArgs:function(data){var args={constraints:{}};if(data.regExp&&this._isRegexValid(data.regExp)){args.regExp=data.regExp;}if(data.invalidMessage){args.invalidMessage=data.invalidMessage;args.rangeMessage=data.invalidMessage;}else{if(data.min&&data.max){var _b64=dojo.string.substitute(builder.Environment.messages.PROPERTY_WIDGET_INVALID_RANGE,[data.min,data.max]);args.invalidMessage=_b64;args.rangeMessage=_b64;}}if(data.promptMessage){args.promptMessage=data.promptMessage;}if(data.min!=null||data.min!=undefined){args.constraints.min=data.min;}if(data.max){args.constraints.max=data.max;}if(data.required){args.required=data.required;}return args;},_isRegexValid:function(_b65){var _b66=true;try{var _b67=new RegExp(_b65);}catch(e){_b66=false;}return _b66;},showRequired:function(){if(this.metadata.type==="boolean"){dojo.addClass(this.requiredMark,"dijitHidden");return;}if(this.metadata.required){this.requiredMark.className="requireShow";}},setPropertyValue:function(_b68){if(!this.valueWidget){return;}if(_b68==null){_b68="";}if(this.metadata.type==="boolean"){if(_b68==""){_b68=false;}this.valueWidget.set("checked",_b68);}else{if(this.metadata.displayType==="password"){this.valueWidget.set("value",_b48.decode(_b68));}else{this.valueWidget.set("value",_b68);}}this.value=_b68;},getPropertyValue:function(){if(this.metadata.displayType=="hidden"){return this.properties[this.propertyId];}if(this.metadata.type==="boolean"){return this.valueWidget.get("checked");}var _b69=this.valueWidget.get("value");var _b6a=_b69;if(dojo.isString(_b69)){_b6a=dojo.trim(_b69);}if(_b6a!=_b69){this.valueWidget.set("value",_b6a);}if(this.metadata.displayType==="password"){_b6a=_b48.encode(_b6a);}if(this.metadata.type==="number"&&dojo.isString(_b6a)){_b6a=parseFloat(_b6a);}return _b6a;},onPropertyChange:function(){var _b6b=this.properties[this.propertyId];var _b6c=this.getPropertyValue();if(this.metadata.type==="boolean"){if(!_b6c){_b6c=false;}}if(this.isEmpty(_b6b)&&this.isEmpty(_b6c)){return;}var _b6d=this.validatePropertyChange();if(_b6d){var cmd=this.getChangePropertyCommand();if(builder&&builder.Environment&&builder.Environment.commandStack){builder.Environment.commandStack.executeCommand(cmd);}else{cmd.canExecute()&&cmd.execute();}}},isInputValid:function(){if(this.valueWidget&&this.valueWidget.isValid&&!this.valueWidget.isValid()){return false;}return true;},isInputValid:function(_b6e,_b6f){if(this.metadata.required==false&&typeof (_b6f)=="undefined"&&this.isEmpty(_b6e)){return true;}if(this.valueWidget&&this.valueWidget.isValid&&!this.valueWidget.isValid()){return false;}return true;},validatePropertyChange:function(){var _b70=this.properties[this.propertyId];var _b71=this.getPropertyValue();if(!this.isInputValid(_b71,_b70)){this.setPropertyValue(_b70);if(this.metadata.displayType=="password"){dojo.publish("/builder/property/notification",[["info","APPMODEL_TOOLIGN_ATTRIBUTE_INVALID_WITHOUT_VALUE",this.metadata.label]]);}else{dojo.publish("/builder/property/notification",[["info","APPMODEL_TOOLIGN_ATTRIBUTE_INVALID",this.metadata.label,_b71,_b70]]);}return false;}if(this._isValueEqual(_b70,_b71)){return false;}if(this.metadata.displayType=="password"&&_b71&&_b71.length>0&&_b48.decode(_b71).toLowerCase()=="password"){this.setPropertyValue(_b70);dojo.publish("/builder/property/notification",[["info","APPMODEL_TOOLIGN_ATTRIBUTE_INVALID_WITHOUT_VALUE",this.metadata.label]]);return false;}return true;},getChangePropertyCommand:function(){return new _b47(this.model,this.propertyId,this.properties[this.propertyId],this.getPropertyValue());},setChangeable:function(){this.valueWidget&&this.valueWidget.set("disabled",false);},setUnchangable:function(){this.valueWidget&&this.valueWidget.set("disabled",true);},_isValueEqual:function(v1,v2){if(this.isEmpty(v1)){v1=undefined;}if(this.isEmpty(v2)){v2=undefined;}if(v1==v2){return true;}if(dojo.isArray(v1)&&dojo.isArray(v2)&&v1.length==v2.length){for(var i=0;i<v1.length;i++){if(v1[i]!=v2[i]){return false;}}return true;}return false;},isEmpty:function(_b72){if(_b72==undefined||(dojo.isString(_b72)&&_b72=="")||(this.metadata.type=="number"&&isNaN(_b72))){return true;}return false;},focus:function(){if(this.valueWidget&&this.valueWidget.focus){this.valueWidget.focus();}},showLockStatus:function(){var self=this;if(this.metadata.displayType=="hidden"){return;}if(!this.lockNode){return;}if(this.model&&dojo.isFunction(this.model.isReferenced)&&this.model.isReferenced()){this.isLockVisible=false;}var _b73=this.isLockVisible;if(!_b73){dojo.style(this.lockNode,"display","none");return;}else{dojo.style(this.lockNode,"display","");}if(this.isLocked){this.lockNode.title=builder.Environment.messages.LOCK_PROPERTY_TITLE;this.lockImgNode.src="/tooling/images/locked_24.png";this.lockImgNode.alt=builder.Environment.messages.LOCK_PROPERTY_TITLE;if(dojo.isString(this.getPropertyValue())&&this.getPropertyValue().indexOf("${")>-1){this.lockImgNode.src="/tooling/images/locked_disabled.png";this.lockDisabled=true;}if(this.model.readOnly){this.lockNode.title=builder.Environment.messages.LOCK_PROPERTY_TITLE_READ_ONLY;this.lockImgNode.alt=builder.Environment.messages.LOCK_PROPERTY_TITLE_READ_ONLY;}}else{this.lockNode.title=builder.Environment.messages.UNLOCK_PROPERTY_TITLE;this.lockImgNode.src="/tooling/images/unlocked_24.png";this.lockImgNode.alt=builder.Environment.messages.UNLOCK_PROPERTY_TITLE;if(dojo.isString(this.getPropertyValue())&&this.getPropertyValue().indexOf("${")>-1){this.lockImgNode.src="/tooling/images/unlocked_disabled.png";this.lockDisabled=true;}if(this.model.readOnly){this.lockNode.title=builder.Environment.messages.UNLOCK_PROPERTY_TITLE_READ_ONLY;this.lockImgNode.alt=builder.Environment.messages.UNLOCK_PROPERTY_TITLE_READ_ONLY;}}},uninitialize:function(){dojo.forEach(this.subscribes,dojo.unsubscribe);if(this.valueWidget&&this.valueWidget.destroyRecursive){this.valueWidget.destroyRecursive();}},onLockChange:function(e){var _b74=false;if(e){_b74=true;}e&&dojo.stopEvent(e);if(this.lockDisabled){return;}attValue=this.properties!=null&&this.properties[this.propertyId];if(((attValue===""||attValue===null)||(attValue===undefined)||(this.metadata&&this.metadata.type=="number"&&isNaN(attValue)&&attValue.indexOf("$")==-1))&&(this.metadata.required)&&(!this.isLocked)){dojo.publish("/builder/property/notification",[["info","APPMODEL_TOOLIGN_ATTRIBUTE_LOCKED_VALUE_REQUIRED",this.metadata.label]]);}else{this.setLocked(!this.isLocked,_b74);}},setLocked:function(_b75,_b76){if(_b75===this.isLocked){return;}this.isLocked=_b75;this.showLockStatus();dojo.publish("/builder/lockChange",[[this.model.id,this.isLocked,this.propertyId]]);if(_b76===true){dojo.publish("/builder/refreshLockStatus",[[this.model.id]]);}this.groupWidget&&this.groupWidget.toggleGroupLockStatus&&this.groupWidget.toggleGroupLockStatus();},addToFileInputList:function(){},_getNameAttr:function(){return this.name;},_setNameAttr:function(name){this.name=name;},_getValueAttr:function(){return this.value;},_setValueAttr:function(_b77){this.setPropertyValue(_b77);}});});},"builder/vsys/command/ImageCommandUtil":function(){define(["dojo/_base/declare","dojo/_base/lang","paas/common/util","builder/service/DiagramToJson","dojo/json","dojo/_base/array","builder/base/command/CompoundCommand","builder/command/ChangePropertyCommand","builder/vsys/command/DisablePropertyWidgetCommand","builder/vsys/util/VSysUtil","builder/vsys/command/DisableOrderOnDDConnCommand","builder/vsys/command/DisableChangeOnDDConnCommand","builder/vsys/command/AddStartsAfterCommand","dojo/topic"],function(_b78,lang,_b79,_b7a,JSON,_b7b,_b7c,_b7d,_b7e,_b7f,_b80,_b81,_b82,_b83){return _b78("builder.vsys.command.ImageCommandUtil",null,{imageMetadataURL:"/resources/vSysMetadata/constrainsForImages",configurationURL:"/resources/vSysMetadata/configurations",afterExecute:function(){var _b84=builder.Environment.diagram;var _b85=new _b7a(_b84).getModel();if(!this.imagesMetadata||!this.validationResult){var _b86=dijit.byId("toolbarManager");_b86.setDisableAllMode();var _b87=_b79.getDeferred("put",this.imageMetadataURL,JSON.stringify(_b85));_b87.addCallback(lang.hitch(this,function(resp){_b86.setEnableAllMode();this.imagesMetadata=resp.imageParts;this.validationResult=resp.validations;this._updateImageModel(this.imagesMetadata);this._checkValidation(this.validationResult);}));_b87.addErrback(function(_b88){_b86.setEnableAllMode();});}else{this._updateImageModel(this.imagesMetadata);this._checkValidation(this.validationResult);}if(!this.advancedOptions){_b79.getDeferred("put",this.configurationURL,JSON.stringify(_b85)).addCallback(lang.hitch(this,function(resp){this.advancedOptions=resp;_b83.publish("/HVImages/AdvancedOptions",this.advancedOptions);}));}else{_b83.publish("/HVImages/AdvancedOptions",this.advancedOptions);}},beforeUndo:function(){this.oneCompoundCommand.undo();},updateHVImages:function(){var _b89=builder.Environment.diagram;var _b8a=new _b7a(_b89).getModel();if(!this.imagesMetadata_0||!this.validationResult_0){_b79.getDeferred("put",this.imageMetadataURL,JSON.stringify(_b8a)).addCallback(lang.hitch(this,function(resp){this.imagesMetadata_0=resp.imageParts;this.validationResult_0=resp.validations;this._updateImageModel(this.imagesMetadata_0);this._checkValidation(this.validationResult_0);}));}else{this._updateImageModel(this.imagesMetadata_0);this._checkValidation(this.validationResult_0);}if(!this.advancedOptions_0){_b79.getDeferred("put",this.configurationURL,JSON.stringify(_b8a)).addCallback(lang.hitch(this,function(resp){this.advancedOptions_0=resp;_b83.publish("/HVImages/AdvancedOptions",this.advancedOptions_0);}));}else{_b83.publish("/HVImages/AdvancedOptions",this.advancedOptions_0);}},_updateImageModel:function(_b8b){if(!_b8b){return;}this.oneCompoundCommand=new _b7c();var _b8c=builder.Environment.diagram;_b7b.forEach(_b8c.components,lang.hitch(this,function(_b8d){if(_b8b[_b8d.id]){var _b8e=_b8d.properties;var _b8f=_b8b[_b8d.id].attributes;var _b90={};for(var key in _b8f){var _b91=_b7f.getDataDependsOnComponentIDs(_b8f[key]);if(_b91){_b7b.forEach(_b91,function(_b92){if(!_b90[_b92]){_b90[_b92]=true;}});}var _b93=new _b7d(_b8d,key,_b8e[key],_b8f[key]);var _b94=new _b7e(_b8d,key);this.oneCompoundCommand.addAndExecute(_b93);this.oneCompoundCommand.addAndExecute(_b94);}setTimeout(lang.hitch(this,function(){this._updateDataDependencyConnections(this.oneCompoundCommand,_b8d,_b90,_b8b[_b8d.id].startsAfter);this._updateStartsAfterAttribute(this.oneCompoundCommand,_b8d,_b90,_b8b[_b8d.id].startsAfter);}),0);}}));},_updateDataDependencyConnections:function(_b95,_b96,_b97,_b98){for(var key1 in _b97){var _b99=new _b81(_b96.id,key1);_b95.addAndExecute(_b99);if(_b97.hasOwnProperty(key1)){var _b9a=false;for(var i=0;i<_b98.length;i++){if(key1==_b98[i]){_b9a=true;break;}}if(!_b9a){var _b9b=new _b80(_b96.id,key1);_b95.addAndExecute(_b9b);}}}},_updateStartsAfterAttribute:function(_b9c,_b9d,_b9e,_b9f){_b7b.forEach(_b9f,function(_ba0){if(!_b9e.hasOwnProperty(_ba0)){var _ba1=new _b82(_b9d.id,_ba0);_b9c.addAndExecute(_ba1);}});},_checkValidation:function(_ba2){if(!_ba2||_ba2.length===0){return;}var _ba3="";var _ba4="info";for(var i=0;i<_ba2.length;i++){if(_ba2[i].status_txt.toLowerCase()==="warning"){_ba4="warningWithoutFade";}if(i>0){_ba3+="</br>";}_ba3+=_ba2[i].message_txt;}_b83.publish("/builder/editor/notification",[_ba4,_ba3]);}});});},"builder/service/ComponentServiceExt":function(){define(["dojo/_base/declare","builder/util/FileUploadManager","builder/util/Util"],function(_ba5,_ba6,Util){return _ba5("builder.service.ComponentServiceExt",null,{url:"/resources/components/",artifactUrl:"/resources/artifacts/",allComponents:null,patterntype:null,version:null,constructor:function(_ba7,_ba8){this.allComponentAttributes={};this.patterntype=_ba7;this.version=_ba8;},getAllComponents:function(){if(this.allComponents){return this.allComponents;}this.allComponents=[];var self=this;var url=this.url+"?patterntype="+this.patterntype+"&"+"version="+this.version;var args={headers:{"Content-Type":"application/json"},url:url,encoding:"utf-8",handleAs:"json",sync:true,load:function(resp,args){dojo.forEach(resp,function(item){self.allComponents.push(item);});},error:function(resp,args){}};dojo.xhrGet(args);return this.allComponents;},getComponentAttribute:function(_ba9){this.loadComponent(_ba9);return this.allComponentAttributes[_ba9];},loadComponent:function(_baa,_bab){if(this.allComponentAttributes[_baa]){return this.allComponentAttributes[_baa];}var self=this;var args={headers:{"Content-Type":"application/json"},url:this.url+_baa+"?model",encoding:"utf-8",handleAs:"json",sync:_bab?false:true,load:function(resp,args){self.allComponentAttributes[_baa]=resp;},error:function(resp,args){}};return dojo.xhrGet(args);},clearAllCache:function(){this.allComponentAttributes={};},clearCacheById:function(_bac){if(!_bac){return;}this.allComponentAttributes[_bac]=null;},cloneArtifacts:function(_bad,_bae,_baf,_bb0){var self=this;var _bb1=builder.util.Util.getMetadataService().getComponentMetadata(_bae);var _bb2={};dojo.forEach(_bb1.attributes,function(_bb3){_bb2[_bb3.name]=_bb3.type;});for(var name in _baf){if(_bb2[name]=="file"){var file=_baf[name];var _bb4=builder.util.FileUploadManager.getUniqueFileName(file);this.cloneArtifact(_bad,file,_bb0,_bb4);_baf[name]=_bb4;}}},extractFileName:function(_bb5){var _bb6="artifacts";return _bb5.substring(_bb6.length+1,_bb5.length);},cloneArtifact:function(_bb7,_bb8,_bb9,_bba){var url=this.url+_bb7;url=builder.util.UrlGenerator.generateUrl(url,"sourceFile",this.extractFileName(_bb8));url=builder.util.UrlGenerator.generateUrl(url,"targetAppId",_bb9);url=builder.util.UrlGenerator.generateUrl(url,"targetFile",this.extractFileName(_bba));var args={headers:{"Content-Type":"application/json"},url:url,encoding:"utf-8",handleAs:"json",sync:true,load:function(resp,args){},error:function(resp,args){}};dojo.xhrPut(args);}});});},"builder/vsys/command/AddStartsAfterCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","dojo/topic"],function(_bbb,_bbc,_bbd){return _bbb("builder.vsys.command.AddStartsAfterCommand",[_bbc],{constructor:function(_bbe,_bbf){this.compId=_bbe;this.startsAfterCompId=_bbf;},execute:function(){var _bc0=builder.Environment.diagram.getComponentById(this.compId);_bc0.addStartsAfterByCompId(this.startsAfterCompId);},undo:function(){var _bc1=builder.Environment.diagram.getComponentById(this.compId);_bc1.removeStartsAfterByCompId(this.startsAfterCompId);}});});},"builder/vsys/util/PrerequisiteUtil":function(){define(["dojo/_base/lang","builder/util/Util","builder/vsys/util/VSysUtil","builder/util/CapabilityUtil","builder/util/constants","builder/util/ReferenceValueUtil","dojo/_base/array"],function(lang,Util,_bc2,_bc3,_bc4,_bc5,_bc6){var _bc7=lang.getObject("builder",true);var _bc8=lang.getObject("vsys.util.PrerequisiteUtil",true,_bc7);_bc8=_bc7.vsys.util.PrerequisiteUtil={_getPrereqComponentMetadata:function(_bc9){var _bca=[];var _bcb=Util.getMetadataService().getComponentMetadata(_bc9);if(_bcb==null){return null;}var _bcc=this.getPrereqComponentsByMetadata(_bcb);if(_bcc&&_bcc instanceof Array&&_bcc.length>0){for(var i=0;i<_bcc.length;i++){var _bcd=_bcc[i].type;if(_bcd==null){continue;}if(!(_bcd instanceof Array)){_bcd=[_bcd];}var _bce=[];dojo.forEach(_bcd,function(type){var _bcf=Util.getMetadataService().getComponentMetadata(type);if(_bcf==null){return;}if(Util.getMetadataService().isAbstractComponent(type)){_bce=_bce.concat(Util.getMetadataService().getChildrenComponents(type));}else{_bce.push(_bcf);}});_bca.push({"referenceID":_bcc[i].referenceID,"types":_bce,"shared":_bcc[i].shared,"type":_bcc[i].type});}}return _bca;},getPrereqComponentByReferenceId:function(_bd0,_bd1){var _bd2=this.getPrereqComponentsByMetadata(_bd0);for(var i=0;i<_bd2.length;i++){if(_bd2.referenceID=_bd1){return _bd2[i];}}return null;},getPrereqComponentsByMetadata:function(_bd3){return _bc2.getJsonObjectByPath(_bd3,"capabilities","requires","components");},_filterComponentByMiddleware:function(_bd4,_bd5){if(_bd5==null){return _bd4;}var _bd6=[];if(_bd4==null){}else{dojo.forEach(_bd4,function(_bd7){var _bd8=[];dojo.forEach(_bd7.types,function(_bd9){var _bda=_bc2.getJsonObjectByPath(_bd9,"capabilities","provides","middleware");if(this._matchMiddleware(_bda,_bd5)){_bd8.push(_bd9);}},this);var _bdb={};for(var key in _bd7){if(_bd7.hasOwnProperty(key)){_bdb[key]=_bd7[key];}}_bdb.types=_bd8;_bd6.push(_bdb);},this);}return _bd6;},_matchMiddleware:function(_bdc,_bdd){if(_bdd==null){return true;}if(_bdc==null){return false;}for(var i in _bdc){for(var j in _bdd){if(i===j&&_bc3._valueMatches(_bdc[i].version,_bdd[j].version)){return true;}}}return false;},getPrereqComponents:function(_bde){var _bdf=this._getPrereqComponentMetadata(_bde);if(_bdf==null){return null;}var _be0=_bc2.getJsonObjectByPath(Util.getMetadataService().getComponentMetadata(_bde),"capabilities","requires","middleware");_bdf=this._filterComponentByMiddleware(_bdf,_be0);_bc6.forEach(_bdf,function(_be1){var _be2=null;if(_be1.types.length<=0){return;}var _be3=_bc2.getLatestVersionComponent(_be1.types);_be1.selectedType=_be3.id;},this);return _bdf;},addVersionAttrOnStackComponent:function(){var _be4=Util.getMetadataService().getComponents();for(var _be5 in _be4){var _be6=this.getPrereqComponents(_be5);if(_be6==null||_be6.length==0){continue;}var _be7=[];_bc6.forEach(_be6,function(_be8){if(_be8.types.length<=0){return;}var _be9=_bc2.getJsonObjectByPath(_be8.types[0],"capabilities","provides","middleware");var _bea=null;for(var i in _be9){_bea=i;}var _beb=_bea+" version";var _bec={"id":this.generatePrerequisiteAttributeName(_be8.referenceID),"label":_beb,"required":true,"description":_beb,"type":"string","sampleValue":_be8.selectedType,"options":[]};_bc6.forEach(_be8.types,function(type){var _bed=_bc2.getVersionFromMetadata(type);_bec.options.push({"value":type.id,"name":_bed});});_be7.push(_bec);},this);var _bee=_be4[_be5];_bee.attributes=_bee.attributes||[];_bee.attributes=_be7.concat(_bee.attributes);_bc6.forEach(_bee.attributes,function(_bef){if(_bef.sampleValue&&_bc5.isReferenceValue(_bef.sampleValue)){_bef.referenceValue=_bef.sampleValue;_bef.sampleValue="";}});}},getReferenceIdByAttributeName:function(_bf0){if(_bf0){if(_bf0.indexOf(_bc4.PREREQUISITE)==0){return _bf0.substring((_bc4.PREREQUISITE).length+1,_bf0.length);}}return null;},generatePrerequisiteAttributeName:function(_bf1){return _bc4.PREREQUISITE+"_"+_bf1;}};return _bc8;});},"builder/workbench/orderView/AddOrderConnectionCommand":function(){define(["dojo/_base/declare","builder/workbench/orderView/AddDependencyConnectionCommand","builder/workbench/orderView/OrderConnectionCommandMixin"],function(_bf2,_bf3,_bf4){return _bf2("builder.workbench.orderView.AddOrderConnectionCommand",[_bf3,_bf4],{});});},"paas/widgets/IFixWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/Button","dijit/form/CheckBox","dijit/form/FilteringSelect","dojo/store/Memory","dojo/data/ObjectStore","dijit/Dialog","dijit/form/TextBox","dijit/form/SimpleTextarea","dijit/form/Select","builder/vsys/util/VSysUtil","builder/util/Util","dojo/_base/array","dojo/dom-style","dojo/text!./templates/IFixWidget.html"],function(_bf5,_bf6,_bf7,_bf8,_bf9,_bfa,_bfb,_bfc,_bfd,_bfe,_bff,_c00,_c01,_c02,util,_c03,_c04,_c05){return _bf5("paas.widgets.IFixWidget",[_bf6,_bf7,_bf8],{templateString:_c05,items:null,url:null,itemStore:null,invalidFixes:null,value:null,initiated:false,deploymentId:null,pluginName:null,roleId:null,roleType:null,pName:null,pVRMF:null,iFixfilteringSelect:null,defaultShowNum:100,showMore:true,propId:null,modelId:null,invalidDetermined:false,constructor:function(){},postCreate:function(){this.initOptions();this.set("value",this.value);},initOptions:function(){if(this.initiated){return;}this.loadItems();this.createFixPanel();this.initiated=true;},get:function(name){if(name==="value"){return this.value;}else{if(name=="disabled"){return false;}else{return this.inherited(arguments);}}},set:function(name,_c06){if(name=="value"){this.setValue(_c06);}else{this.inherited(arguments);}},setValue:function(_c07){var self=this;if(this.value!=null){return;}this.value=_c07;if(this.value!=null){if(!this.invalidDetermined){self.handleInvalidValue();this.invalidDetermined==true;}}if(self.items!=null){dojo.forEach(self.items,function(item){item.applied=self.fixApplied(item);if(item.applied){self.iFixfilteringSelect.store.deleteItem(item);self.iFixfilteringSelect.store.save();if(this.deploymentId==null){self.createSingleAppliedFixUI(item,true);}else{self.createSingleAppliedFixUI(item,false);}}});this.showAppliedFixesUI();}},loadItems:function(){var self=this;var _c08=[];var _c09=[];var _c0a=[];var _c0b=[];if(dojo.isArray(this.items)){return;}if(this.deploymentId==null){var _c0c=null;if(builder.Environment.diagram&&this.modelId){var _c0d=builder.Environment.diagram.getComponentById(this.modelId);if(_c0d){_c0c=_c0d.getAttachComponent();}}var _c0e=[];if(this.pluginName&&this.pluginName.indexOf("maintenance")==-1){_c0e.push(this.pluginName);}else{if(_c0c==null||_c0c.id==builder.Environment.diagram.id){_c0e=builder.Environment.diagram.plugins;if(builder.Environment.diagram.isLocked()&&!builder.Environment.diagram.isFoundationLocked()){_c0e=SolutionUtil.getPlugins(builder.Environment.diagram.patterntype,builder.Environment.diagram.version,false);}dojo.forEach(builder.Environment.diagram.components,function(comp){if(_c02.isImage(comp.metadata)){_c08.push(comp.metadata.id);}if(_c02.isPartComponent(comp.metadata)){if(comp.metadata&&comp.metadata.configurations&&comp.metadata.configurations.im){if(dojo.isArray(comp.metadata.configurations.im)){_c03.forEach(comp.metadata.configurations.im,function(item){if(item.offeringId&&item.offeringVersion){_c0a.push(item.offeringId+"_"+item.offeringVersion);}});}else{if(comp.metadata.configurations.im.offeringId&&comp.metadata.configurations.im.offeringVersion){_c0a.push(comp.metadata.configurations.im.offeringId+"_"+comp.metadata.configurations.im.offeringVersion);}}}if(comp.metadata&&comp.metadata.capabilities&&comp.metadata.capabilities.provides&&comp.metadata.capabilities.provides.middleware){for(var i=0;i<comp.metadata.capabilities.provides.middleware.length;i++){for(var key in comp.metadata.capabilities.provides.middleware){if(key){_c0b.push(key+"/"+comp.metadata.capabilities.provides.middleware[key]["version"]);}}}}}});}}if(_c0c!=null&&_c0c.metadata&&_c02.isImage(_c0c.metadata)){_c08.push(_c0c.metadata.id);var _c0f=_c02.findHostedOnSources(_c0c.incomingConnections);if(_c0f&&_c0f.length>0){dojo.forEach(_c0f,function(_c10){if(_c02.isPartComponent(_c10.metadata)){if(_c10.metadata&&_c10.metadata.configurations&&_c10.metadata.configurations.im){if(dojo.isArray(_c10.metadata.configurations.im)){_c03.forEach(_c10.metadata.configurations.im,function(item){if(item.offeringId&&item.offeringVersion){_c0a.push(item.offeringId+"_"+item.offeringVersion);}});}else{if(_c10.metadata.configurations.im.offeringId&&_c10.metadata.configurations.im.offeringVersion){_c0a.push(_c10.metadata.configurations.im.offeringId+"_"+_c10.metadata.configurations.im.offeringVersion);}}}if(_c10.metadata&&_c10.metadata.capabilities&&_c10.metadata.capabilities.provides&&_c10.metadata.capabilities.provides.middleware){for(var key in _c10.metadata.capabilities.provides.middleware){if(key){_c0b.push(key+"/"+_c10.metadata.capabilities.provides.middleware[key]["version"]);}}}if(_c10.metadata&&_c10.metadata.pluginscope){_c0e.push(_c10.metadata.pluginscope);}}});}}var _c11={"filters":{"plugins":_c0e,"images":_c08,"middlewares":{"IM":_c0a,"nonIM":_c0b}}};var args={headers:{"Content-Type":"application/json"},url:paas.common.constants.IFIX_DEPLOYMENT_REST_URL+"query",encoding:"utf-8",postData:dojo.toJson(_c11),sync:true,handleAs:"json",encoding:"utf-8",load:function(resp){self.itemStore=resp;},error:function(resp){self._showNoneItem();self.itemStore=null;}};dojo.xhrPost(args);}else{this.url=self.constructOptionsURL();if(!dojo.isString(this.url)){this.items=[];}var args={url:this.url,sync:true,handleAs:"json",encoding:"utf-8",load:function(resp){self.itemStore=resp;},error:function(resp){self._showNoneItem();self.itemStore=null;}};dojo.xhrGet(args);}this.items=[];if(this.itemStore){_c03.forEach(this.itemStore.items,function(item){var _c12={};_c12.name=item["name"];var _c13=item["id"]+item["installtype"]+_c12.name;_c12.value=_c13;_c12.id=_c13;_c12.invalidFix=false;_c12.installtype=item["installtype"];_c12.fixid=item["id"];_c12.applied=self.fixApplied(_c12);if(this.deploymentId!=null){_c12.appliedTo=item["appliedto"];_c12.applicableTo=item["applicableto"];}self.items.push(_c12);});}},constructOptionsURL:function(){var self=this;if(this.deploymentId!=null){if(this.roleType!=null&&this.roleType=="MAINTENANCE"){return paas.common.constants.IFIX_DEPLOYMENT_MAINT_URL+"?type=MAINTENANCE";}else{if(this.pluginName!=null){this.pName=self.getPluginName(this.pluginName);this.pVRMF=self.getPluginVRMF(this.pluginName);var _c14=paas.common.constants.IFIX_DEPLOYMENT_REST_URL+"?plugin="+this.pName+"&pluginVRMF="+this.pVRMF;return _c14;}}}},getPluginName:function(_c15){var _c16=_c15.indexOf("/");if(_c16==-1){return null;}else{return _c15.substring(0,_c16);}},getPluginVRMF:function(_c17){var _c18=_c17.indexOf("/");if(_c18==-1){return null;}else{return _c17.substring(_c18+1);}},fixApplied:function(item){if(this.value==null||!this.value){return false;}var self=this;var _c19=false;dojo.forEach(this.value,function(_c1a){if(self.deploymentId!=null){if(_c1a&&_c1a.vmfixes&&_c1a.vmfixes.length>0){dojo.forEach(_c1a.vmfixes,function(_c1b){if(_c1b.id==item.fixid&&_c1b.name==item.name&&_c1b.installtype==item.installtype){_c19=true;}});}}else{if(dojo.isObject(_c1a)){if(_c1a.id==item.fixid&&_c1a.name==item.name){_c19=true;}}else{if(dojo.isString(_c1a)){if(item.name==_c1a){_c19=true;}else{if(self.urlMatch(item.id,_c1a)){_c19=true;}}}}}});return _c19;},urlMatch:function(_c1c,_c1d){var self=this;if(_c1c!=null&&(_c1c.startsWith("http:")||_c1c.startsWith("https:"))&&_c1d!=null&&(_c1d.startsWith("http:")||_c1d.startsWith("https:"))){var _c1e=document.createElement("a");_c1e.href=_c1c;var _c1f=document.createElement("a");_c1f.href=_c1d;return _c1e.pathname==_c1f.pathname;}return false;},_showNoneItem:function(){this.availableFixesDiv.innerHTML=paas.Base.messages.IFIX_NONE;},createFixPanel:function(){var self=this;if(this.items==null||this.items.length==0){return;}this.availableFixesDiv.innerHTML="";this.appliedFixesDiv.innerHTML="";var _c20=new dojo.store.Memory({data:dojo.filter(self.items,function(_c21){return _c21.applied==false;})});var temp=dojo.filter(self.items,function(_c22){return _c22.applied==false;});var _c23=new dojo.data.ObjectStore({objectStore:_c20});this.iFixfilteringSelect=new dijit.form.FilteringSelect({id:this.id+"_ifixFiltering",style:{"width":"250px","border":"1px solid black"},store:new dojo.data.ObjectStore({idProperty:"ifix",objectStore:_c20}),required:false,placeHolder:paas.Base.messages.IFIX_WIDGET_SELECT,searchAttr:"name",onChange:function(val){self.addFixToApply();}});dojo.style(this.iFixfilteringSelect,"margin-right:7px;");dojo.connect(self.iFixfilteringSelect,"onChange",self.onChange);self.availableFixesDiv.appendChild(this.iFixfilteringSelect.domNode);dojo.forEach(self.items,function(item,_c24){if(item.applied==true){self.createSingleAppliedFixUI(item,this.deploymentId==null);}});if(this.deploymentId!=null){self.createTableHeader();}else{if(this.appliedFixesDiv){this.appliedFixesDiv.style.border="0";}}self.showAppliedFixesUI();},onChange:function(){},createTableHeader:function(){if(this.appliedFixesDiv){var _c25=this.appliedFixesDiv.createTHead();_c25.style.borderBottom="solid";var row=_c25.insertRow(0);var cell=row.insertCell(0);cell.innerHTML="<b>Fix name</b>";if(this.deploymentId!=null){var _c26=row.insertCell(1);_c26.innerHTML="<b>Applied to</b>";}var _c27=row.insertCell(2);_c27.innerHTML="<b>Action</b>";}},createSingleAppliedFixUI:function(item,_c28){var self=this;var aDiv=dojo.create("tr");dojo.connect(aDiv,"onChange",self,"onChange");var _c29=dojo.create("td",{innerHTML:item.name,title:item.id,"style":"width: 40px;"});dojo.addClass(_c29,"default");aDiv.appendChild(_c29);if(this.deploymentId!=null){var _c2a=dojo.create("td",{"style":"width: 40px;"});var _c2b="";dojo.addClass(_c2a,"default");if(item.appliedTo&&item.appliedTo.length>0){for(var i=0;i<item.appliedTo.length;i++){_c2b+=item.appliedTo[i]+"<br/>";}}else{if(item.applicableTo&&item.applicableTo.length>0){for(var i=0;i<item.applicableTo.length;i++){_c2b+=item.applicableTo[i]+"<br/>";}}}_c2a.innerHTML=_c2b;aDiv.appendChild(_c2a);}var _c2c=dojo.create("td",{"style":"width: 20px;"});var _c2d=dojo.create("span",{});_c2d.innerHTML="&nbsp;&nbsp;";if(_c28){var _c2e=dojo.create("img",{src:"/images/delete.gif",className:"wca-image-icon",title:paas.Base.messages.IFIX_WIDGET_REMOVE,alt:paas.Base.messages.IFIX_WIDGET_REMOVE,style:{marginLeft:"20px"}});this.connect(_c2e,"onclick",dojo.hitch(self,function(){self.removeFixToApply(item,aDiv);}));_c2c.appendChild(_c2e);}dojo.addClass(_c2c,"default");aDiv.appendChild(_c2c);if(this.appliedFixesDiv.children.length<this.defaultShowNum){this.appliedFixesDiv.appendChild(aDiv);}else{this.moreAppliedFixesDiv.appendChild(aDiv);}},showAppliedFixesUI:function(){var self=this;this.appliedFixesDiv.style.display="";if(this.moreAppliedFixesDiv.children.length>0){this.showNode.style.display="";if(this.showMore){this.moreAppliedFixesDiv.style.display="none";this.lessNode.innerHTML=paas.Base.messages.SHOW_MORE;dojo.addClass(this.lessNode,"default");}else{this.moreAppliedFixesDiv.style.display="";this.lessNode.innerHTML=paas.Base.messages.SHOW_LESS;dojo.addClass(this.lessNode,"default");}}else{this.moreAppliedFixesDiv.style.display="none";this.showNode.style.display="none";}if(this.appliedFixesDiv.children.length==0){this.showNoneDiv.style.display="";this.showNoneDiv.innerHTML=paas.Base.messages.IFIX_NONE;dojo.addClass(this.showNoneDiv,"default");}else{this.showNoneDiv.style.display="none";}},toggleShow:function(){this.showMore=!(this.showMore);this.showAppliedFixesUI();},computeValue:function(){var self=this;self.value=[];var _c2f={};dojo.forEach(this.items,function(item){if(item.applied){var fix={"id":item.fixid,"name":item.name,"installtype":item.installtype};if(!self.deploymentId){self.value.push(fix);}else{if(item.applicableTo&&item.applicableTo.length>0){var _c30=item.applicableTo;for(var i=0;i<_c30.length;i++){var _c31=_c2f[_c30[i]];if(_c31){_c31.push(fix);}else{_c31=[];_c31.push(fix);_c2f[_c30[i]]=_c31;}}}}}});if(self.deploymentId&&_c2f){for(var key in _c2f){var _c32={"vmtemplate":key,"vmfixes":_c2f[key]};self.value.push(_c32);}}},findApplied:function(_c33,_c34){return dojo.filter(_c33,function(_c35){return dojo.indexOf(_c34,_c35)!=-1;});},addFixToApply:function(_c36){var self=this;var _c37=self.iFixfilteringSelect.get("item");if(_c37!=null){this.iFixfilteringSelect.store.deleteItem(_c37);this.iFixfilteringSelect.store.save();_c37.applied=true;this.computeValue();self.createSingleAppliedFixUI(_c37,true);this.iFixfilteringSelect.reset();self.showAppliedFixesUI();dojo.publish("onPropertyChanged",[[this.modelId,this.propId,self.value]]);}},removeFixToApply:function(item,aDiv){var self=this;item.applied=false;this.computeValue();this.iFixfilteringSelect.store.newItem(item);this.iFixfilteringSelect.store.save();dojo.destroy(aDiv);if(this.appliedFixesDiv.children.length<this.defaultShowNum&&this.moreAppliedFixesDiv.children.length>0){var _c38=this.moreAppliedFixesDiv.children[0];this.moreAppliedFixesDiv.removeChild(_c38);this.appliedFixesDiv.appendChild(_c38);}dojo.publish("onPropertyChanged",[[this.modelId,this.propId,self.value]]);this.showAppliedFixesUI();this.iFixfilteringSelect.reset();},handleInvalidValue:function(){var self=this;if(this.value==null){return;}var _c39=dojo.filter(this.value,function(_c3a){return dojo.every(this.items,function(_c3b){return !((_c3a==_c3b.name)||self.urlMatch(_c3b.id,_c3a));},this);},this);dojo.forEach(_c39,function(_c3c){this.items.push({name:_c3c,id:_c3c,applied:true,invalidFix:true});},this);}});});},"builder/workbench/property/Slider":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/Slider.html","dojox/form/RangeSlider","dijit/form/HorizontalRuleLabels"],function(_c3d,_c3e,_c3f,_c40,_c41,_c42,_c43){return _c3d("builder.workbench.property.Slider",[_c3e,_c3f,_c40],{templateString:_c41,slider:null,pattern:null,discreteValues:Infinity,minimum:0,maximum:100,count:0,value:0,value_input:paas.Base.messages.SLIDER_INPUT_VALUE,topHorizontalRule:null,topHorizontalRuleLable:null,incremental:null,postCreate:function(){if(!this.maximum){this.maximum=100;}if(!this.minimum){this.minimum=0;}if(this.incremental!=null){this.discreteValues=(this.maximum-this.minimum)/this.incremental+1;}else{this.count=this.maximum-this.minimum;this.discreteValues=this.count+1;}var _c44={intermediateChanges:true,slideDuration:500,style:"height:20px; margin-top:-5px;",maximum:this.maximum,minimum:this.minimum,discreteValues:this.discreteValues};this.slider=new dijit.form.HorizontalSlider(_c44,this.sliderContainer);dojo.connect(this.slider,"onChange",dojo.hitch(this,"onSliderChange"));var _c45={count:2,numericMargin:0,constraints:{pattern:this.pattern},maximum:this.valueFormat(this.maximum),minimum:this.valueFormat(this.minimum),container:"topDecoration",style:"height:1.2em;font-size:75%;"};this.topHorizontalRuleLable=new _c43(_c45,this.ruleLableContainer);this.slider.topDecoration.appendChild(this.topHorizontalRuleLable.domNode);this.topHorizontalRuleLable.domNode.style.marginTop="2px";dojo.connect(this.slider,"onChange",this,"onSliderChange");dojo.connect(this.slider,"onBlur",this,"onChange");},onSliderChange:function(){showValue=dojo.number.format(this.valueFormat(arguments[0]),{places:0,pattern:this.pattern});this.sliderInputValue.innerHTML=showValue;this.value=arguments[0];},onChange:function(){},set:function(name,_c46){if(name==="value"){if(!_c46||_c46===""){_c46=this.minimum;}this.sliderInputValue.innerHTML=dojo.number.format(this.valueFormat(_c46),{places:0,pattern:this.pattern});this.slider.set("value",_c46);this["value"]=_c46;}else{if(name==="disabled"){this.slider.set("disabled",_c46);}else{return this.inherited(arguments);}}},valueFormat:function(_c47){var _c48=_c47;if(this.pattern=="#%"){_c48=_c47/100;}return _c48;},isValid:function(){return true;}});});},"builder/workbench/orderView/OrderConnection":function(){define(["dojo/_base/declare","builder/workbench/editor/ModelToolbar","builder/workbench/editor/ToolbarItem","dojo/_base/lang","dojo/_base/event","dojo/dom-geometry","dojo/on","builder/workbench/orderView/OrderConstants","builder/workbench/orderView/DependencyConnection","builder/workbench/orderView/DeleteOrderConnectionCommand"],function(_c49,_c4a,_c4b,lang,_c4c,_c4d,on,_c4e,_c4f,_c50){return _c49("builder.workbench.orderView.OrderConnection",[_c4f],{paint:function(){this.inherited(arguments);this.registerEvents();},getColor:function(){return "#a52a2a";},addOrderingDependency:function(){this.toComponent.addStartsAfterByCompId(this.fromComponent.id);},removeOrderingDependency:function(){this.toComponent.removeStartsAfterByCompId(this.fromComponent.id);},createLineToolbar:function(){this.lineToolbar=new _c4a({onDelete:lang.hitch(this,this.onDelete)});var _c51={title:builder.Environment.messages.APPMODEL_TOOLING_CONNECTION_CUT_TITLE,imageUrl:"/tooling/images/close_normal.png",hoverImageUrl:"/tooling/images/close_normal_hover.png",eventHandler:lang.hitch(this,this.onDelete)};var _c52=new _c4b(_c51);this.lineToolbar.addItem(_c52);builder.Environment.orderView.domNode.appendChild(this.lineToolbar.domNode);},onDelete:function(){var cmd=new _c50(this);builder.Environment.orderViewCommandStack.executeCommand(cmd);this.removeToolbar();},onSelected:function(evt){if(evt){_c4c.stop(evt);}if(this.selected){this.removeToolbar();}this.showToolbar(evt);this.selected=true;this.lineToolbar.focusNode.focus();},onUnselect:function(evt){if(evt){_c4c.stop(evt);}this.removeToolbar();this.selected=false;},removeToolbar:function(){if(this.lineToolbar){this.lineToolbar.destroyRecursive();this.lineToolbar=null;}},showToolbar:function(evt){if(evt){_c4c.stop(evt);}if(!this.lineToolbar){this.createLineToolbar();}this.setLineToolbarPosition(evt);},setLineToolbarPosition:function(evt){var _c53={x:0,y:0};if(evt){_c53=builder.util.Util.getCursorPosition(evt);var _c54=_c4d.position(builder.Environment.orderViewContainer,false);this.lineToolbar.domNode.style.left=_c53.x-_c54.x+5+"px";this.lineToolbar.domNode.style.top=_c53.y-_c54.y-15+"px";}},registerEvents:function(){if(!this.eventHandles){this.eventHandles=[];this.eventHandles.push(dojo.connect(this.link,"onclick",this,function(evt){builder.Environment.orderView.selectModel(this,evt);}));this.eventHandles.push(dojo.connect(this.link,"onunfocus",this,function(evt){}));}},destroy:function(){this.inherited(arguments);for(var i=0;i<this.eventHandles.length;i++){dojo.disconnect(this.eventHandles[i]);}}});});},"builder/workbench/property/TitlePaneExt":function(){define(["dojo/_base/declare","dojo/text!./templates/TitlePaneExt.html","dijit/TitlePane"],function(_c55,_c56,_c57){return _c55("builder.workbench.property.TitlePaneExt",[_c57],{templateString:_c56});});},"builder/base/dnd/DragSource":function(){define(["dojo/_base/declare","builder/base/dnd/DragManager"],function(_c58,_c59){return _c58("builder.base.dnd.DragSource",null,{domNode:null,type:null,offsetX:null,offsetY:null,constrainToContainer:null,avatarRequired:true,constructor:function(node,type,_c5a){node=dojo.byId(node);if(node){this.domNode=node;this.type=(type)||(this.domNode.nodeName.toLowerCase());if(_c5a){this.offsetX=_c5a.offsetX;this.offsetY=_c5a.offsetY;}this.reregister();}},type:"",onDragStart:function(evt){},onDragMove:function(evt){},onDragEnd:function(evt){},onSelected:function(evt){},onUnSelected:function(evt){},unregister:function(){builder.base.dnd.dragManager.unregisterDragSource(this);},reregister:function(){builder.base.dnd.dragManager.registerDragSource(this);}});});},"builder/tooling_build":function(){require(["dojo/_base/declare","dojo/_base/lang","builder/util/LayoutUtil","dojo/parser","dojo/date/locale","dojox/timing","dijit/layout/BorderContainer","dijit/layout/ContentPane","dijit/layout/TabContainer","builder/Environment","paas/common/constants","paas/common/util","paas/widgets/EditCompDialog","builder/workbench/Container","builder/workbench/ImportDialog","builder/workbench/MessageBoxWidget","builder/workbench/editor/Help","builder/workbench/HintWidget","builder/workbench/palette/CategoryPalette","builder/workbench/layer/LayerPalette","builder/workbench/MessageBoxWidget","builder/workbench/SaveDialog","builder/workbench/property/PropertiesWidget","builder/workbench/ToolbarManager","builder/workbench/editor/Diagram","builder/workbench/editor/Container","builder/workbench/editor/EditorTabContainer","builder/workbench/BorderContainerExt","builder/workbench/property/PropertyView","builder/service/ModelService","builder/base/command/CommandProcessor","builder/util/FileResolver","builder/util/Util","builder/util/FileUploadManager","builder/service/DiagramToJson","builder/workbench/componentsView/ComponentsView","builder/workbench/linksView/LinksView","builder/workbench/componentsView/ComponentCategoryPalette","builder/workbench/linksView/LinkCategoryPalette","builder/workbench/orderView/SwapComponentsOrderCommand","builder/vsys/workbench/editor/VSysDiagram","builder/vsys/workbench/editor/VSysComponent","builder/vsys/workbench/editor/VSysComponentFigureFrame","builder/vsys/workbench/editor/InterchangableComponentContainerFrame","builder/vsys/workbench/editor/DataDependsOnConnection","builder/vsys/workbench/editor/DataDependsOnConnectionMiniFrame","builder/vsys/workbench/editor/VSysMiniLink","builder/vsys/util/VSysMiniPaintUtil","builder/vsys/util/VSysMiniPositionUtil","builder/vsys/workbench/editor/DataDependsOnConnectionFrame","paas/widgets/MappingDeleteDialog","paas/widgets/PatternAttrMainWidget","paas/widgets/AddPatternAttrDialog","paas/widgets/PatternAttrPropertiesWidget","builder/workbench/property/PatternAttrPropertyWidget","paas/widgets/EditDeletePatternAttrDialog","builder/vsys/workbench/editor/RoutingPolicyPropertyWidget","paas/widgets/ScalingPolicyBadgeWidget","paas/vsys/VSysInterchangeableDialog","builder/Startup","paas/widgets/MaintenanceNotification","paas/widgets/BackupEnabledNotification"],function(paas){return paas;});},"builder/vsys/util/VSysValidationUtil":function(){define(["dojo/_base/lang","builder/vsys/util/VSysUtil","paas/common/constants","dojo/topic","builder/util/Util"],function(lang,_c5b,_c5c,_c5d,util){var _c5e=lang.getObject("builder",true);var _c5f=lang.getObject("vsys.util.VSysValidationUtil",true,_c5e);_c5f=_c5e.vsys.util.VSysValidationUtil={checkDataDependsOnValid:function(_c60,_c61){if(!util.patternTypeIsVSys()){return true;}var _c62=_c5b.findHostedOnTarget(_c60.outgoingConnections);var _c63=_c5b.findHostedOnTarget(_c61.outgoingConnections);if(_c62===_c63){var _c64=_c5e.Environment.diagram.connections;for(var i=0;i<_c64.length;i++){if(_c64[i].metadata.id===_c5c.HOSTED_ON_LINK){if(_c64[i].fromComponent===_c60){_c5d.publish("/builder/editor/notification",["warning","INVALID_DATA_DEPENDENCY_CONNECTION_2"]);return false;}if(_c64[i].fromComponent===_c61){return true;}}}}return true;}};return _c5f;});},"builder/workbench/listView/ListView":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ListView.html","builder/workbench/listView/ListItem","builder/workbench/listView/ComponentItem","builder/workbench/listView/ConnectionItem","builder/workbench/listView/ApplicationItem","builder/workbench/listView/MissingPropLink"],function(_c65,_c66,_c67,_c68,_c69,_c6a,_c6b,_c6c,_c6d,_c6e){return _c65("builder.workbench.listView.ListView",[_c66,_c67,_c68],{templateString:_c69,appModel:null,listItems:null,connectionItems:null,rowCount:0,missingProps:{},_compareComponentItem:function(a,b){if(a.id.toLocaleLowerCase()<b.id.toLocaleLowerCase()){return -1;}if(a.id.toLocaleLowerCase()>b.id.toLocaleLowerCase()){return 1;}return 0;},_compareConnectionItem:function(a,b){var _c6f={"source":a.node.fromComponent.id.toLocaleLowerCase(),"target":a.node.toComponent.id.toLocaleLowerCase()};var _c70={"source":b.node.fromComponent.id.toLocaleLowerCase(),"target":b.node.toComponent.id.toLocaleLowerCase()};if(_c6f.source<_c70.source){return -1;}if(_c6f.source>_c70.source){return 1;}if(_c6f.target<_c70.target){return -1;}if(_c6f.target>_c70.target){return 1;}return 0;},_sortComponentItemData:function(){var _c71=this.appModel.components;var _c72=[];var _c73=[];var self=this;dojo.forEach(_c71,function(_c74){if(_c74.metadata.type=="policy"){if(_c74.outgoingConnections.length==0){_c72.push({"id":_c74.id,"node":_c74});}}else{var item={"id":_c74.id,"node":_c74,"policies":[]};dojo.forEach(_c74.incomingConnections,function(_c75){if(_c75.metadata.type=="policyLink"){var _c76=_c75.fromComponent;item.policies.push({"id":_c76.id,"node":_c76});}});item.policies.sort(self._compareComponentItem);_c73.push(item);}});_c73.sort(self._compareComponentItem);_c72.sort(self._compareComponentItem);var _c77=[];dojo.forEach(_c73,function(_c78){_c77.push({"type":"builder.workbench.listView.ComponentItem","node":_c78.node});dojo.forEach(_c78.policies,function(_c79){_c77.push({"type":"builder.workbench.listView.ComponentItem","node":_c79.node});});});dojo.forEach(_c72,function(_c7a){_c77.push({"type":"builder.workbench.listView.ComponentItem","node":_c7a.node});});return _c77;},_sortConnectionItemData:function(){var _c7b=this.appModel.connections;var _c7c=[];dojo.forEach(_c7b,function(_c7d){if(_c7d.metadata.type!="policyLink"){_c7c.push({"type":"builder.workbench.listView.ConnectionItem","node":_c7d});}});return _c7c.sort(this._compareConnectionItem);},createListItems:function(){this.listItems=[];var self=this;this.listItems.push(this._createListItem(this.appModel,"builder.workbench.listView.ApplicationItem"));var _c7e=this._sortComponentItemData();dojo.forEach(_c7e,function(item){self.listItems.push(self._createListItem(item.node,item.type));});_c7e=this._sortConnectionItemData();this.connectionItems=[];dojo.forEach(_c7e,function(item){self.connectionItems.push(self._createListItem(item.node,item.type));});this.listItems=this.listItems.concat(this.connectionItems);},checkValidation:function(){dojo.forEach(this.listItems,function(item){item.checkValidation();});},postCreate:function(){this.appModel=builder.Environment.diagram;this.createListItems();this.checkValidation();if(this.appModel.readOnly){this.setReadOnlyMode();}this.renderAllMissingProps();},setReadOnlyMode:function(){dojo.forEach(this.listItems,function(item){item.setUnchangable();});},_createListItem:function(_c7f,_c80,_c81){var x=this.listArea.insertRow(this.rowCount);var y=x.insertCell(0);dojo.style(y,{"borderBottom":"1px solid #B8B8B8","paddingTop":"8px","paddingBottom":"8px"});var z=dojo.create("div");y.appendChild(z);var _c82=dojo.getObject(_c80);var item=new _c82({"model":_c7f,"listView":this,"isTemplate":this.appModel.isTemplate()},z);this.rowCount++;return item;},renderAllMissingProps:function(){this.missingPropList.innerHTML="";var self=this;dojo.forEach(this.listItems,function(item){var _c83=builder.util.ValidationUtil.checkAttributeValidation(item.model,true);if(_c83.result){dojo.forEach(_c83.description,function(_c84){self.addMissingProp(item,_c84);});}});},addMissingProp:function(item,_c85){var _c86=new _c6e({"item":item,"propDescription":_c85.des,"propName":_c85.propName});this.missingPropList.appendChild(_c86.domNode);},uninitialize:function(){this.inherited(arguments);dojo.forEach(this.listItems,function(item){item.destroyRecursive();});}});});},"builder/base/dnd/Moveable":function(){define(["dojo/_base/declare","dojo/dnd/Moveable"],function(_c87,_c88){return _c87("builder.base.dnd.Moveable",_c88,{onMouseDown:function(e){var _c89=builder.base.dnd.dragManager.getDragSource(e);if(_c89&&builder.base.dnd.isChild(this.handle,_c89.domNode)){return;}this.onSelected(e);if(dojo.dnd.isFormElement(e)){return;}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"));this.events.push(dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=e.pageX;this._lastY=e.pageY;}else{new this.mover(this.node,e,this);}dojo.stopEvent(e);},onSelected:function(e){}});});},"paas/widgets/ValidationTextBoxWithLookup":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","paas/widgets/MetaDataDrivenInput","dijit/form/ValidationTextBox","dojo/text!./templates/ValidationTextBoxWithLookup.html","dojo/_base/lang","dojo/dom-style"],function(_c8a,_c8b,_c8c,_c8d,_c8e,_c8f,_c90,lang,_c91){return _c8a("paas.widgets.ValidationTextBoxWithLookup",[_c8b,_c8c,_c8d],{templateString:_c90,search_alt:"",postCreate:function(){this.inherited(arguments);if(this.lookupDialogType){this.connect(this.searchLink,"onclick",dojo.hitch(this,"showLookupDialog"));}},showLookupDialog:function(){if(!this.lookupDialog){var _c92=this.lookupDialogType;dojo["require"](_c92);this.lookupDialog=new lang.getObject(_c92)({metadata:this.metadata});this.connect(this.lookupDialog,"onConfirm",lang.hitch(this,"_setValueFromLookup"));}this.lookupDialog.show();},getSelectionContext:function(){return this.selectionContext;},_setValueFromLookup:function(_c93){var _c93=this.lookupDialog.getSelectedValue();this._setValueAttr(_c93);this.selectionContext=this.lookupDialog.getSelectedContext();},_getValueAttr:function(){return this.textBoxWidget.get("value");},_setValueAttr:function(_c94){this.textBoxWidget.set("value",_c94);},onChange:function(){},triggerTextBoxChange:function(){this.onChange();},onSubmit:function(){this.set("value",this.textBoxWidget.get("value"));this.toggle();this.onChange();},set:function(name,_c95){if(name=="disabled"){this.textBoxWidget.set("disabled",_c95);}else{return this.inherited(arguments);}},isValid:function(){return this.textBoxWidget.isValid();},isEmpty:function(){return !this.textBoxWidget.get("value");},setWidth:function(_c96){_c91.set(this.textBoxWidget.domNode,"width",_c96);}});});},"builder/vsys/command/VSysChangeComponentNameCommand":function(){define(["dojo/_base/declare","builder/command/ChangeComponentNameCommand","builder/vsys/command/OrderCommandMixin"],function(_c97,_c98,_c99){return _c97("builder.vsys.command.VSysChangeComponentNameCommand",[_c98,_c99],{execute:function(){var _c9a=builder.Environment.diagram.getComponentById(this.oldName);if(!_c9a){return;}if(_c9a.propertiesWidget){_c9a.propertiesWidget.setName&&_c9a.propertiesWidget.setName(this.newName);}_c9a.setName(this.newName);_c9a.updateConnectionName();_c9a.updateDataDependsReferences(this.oldName,this.newName);this.updateStartsAfter(this.oldName,this.newName);dojo.publish("onDiagramChanged");},undo:function(){var _c9b=builder.Environment.diagram.getComponentById(this.newName);if(!_c9b){return;}if(_c9b.propertiesWidget){_c9b.propertiesWidget.setName&&_c9b.propertiesWidget.setName(this.oldName);}_c9b.setName(this.oldName);_c9b.updateConnectionName();_c9b.updateDataDependsReferences(this.newName,this.oldName);this.restoreStartsAfter();dojo.publish("onDiagramChanged");}});});},"builder/command/ChangeGroupCommand":function(){define(["dojo/_base/declare","builder/base/command/Command"],function(_c9c,_c9d){return _c9c("builder.command.ChangeGroupCommand",[_c9d],{modelId:null,oldEnabledGroup:null,newEnabledGroup:null,constructor:function(_c9e,_c9f,_ca0,_ca1){this.modelId=_c9e;this.oldEnabledGroup=_ca0;this.newEnabledGroup=_ca1;this.model={"attributes":dojo.clone(_c9f.properties),"groups":dojo.clone(_c9f.groups)};},execute:function(){dojo.publish("onDiagramChanged");dojo.publish("onGroupChanged",[[this.modelId,this.oldEnabledGroup,false,this.model]]);dojo.publish("onGroupChanged",[[this.modelId,this.newEnabledGroup,true,this.model]]);},undo:function(){dojo.publish("onDiagramChanged");dojo.publish("onGroupChanged",[[this.modelId,this.newEnabledGroup,false,this.model]]);dojo.publish("onGroupChanged",[[this.modelId,this.oldEnabledGroup,true,this.model]]);},canExecute:function(){return true;}});});},"builder/workbench/property/PasswordWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/PasswordWidget.html","dojo/on","dojo/_base/lang","dojo/dom-style"],function(_ca2,_ca3,_ca4,_ca5,_ca6,on,lang,_ca7){return _ca2("builder.workbench.property.PasswordWidget",[_ca3,_ca4,_ca5],{templateString:_ca6,constructor:function(){this.initialPlaceHolder=builder.Environment.messages.NEW_PASSWORD_HINT;this.verfiyPlaceHolder=builder.Environment.messages.VERIFY_PASSWORD_HINT;},postCreate:function(){this.verifyInput.set("disabled",true);if(this.regExp){this.initialInput.set("regExp",this.regExp);this.verifyInput.set("regExp",this.regExp);}if(this.invalidMessage){this.initialInput.set("invalidMessage",this.invalidMessage);this.verifyInput.set("invalidMessage",this.invalidMessage);}this.initialInput.textbox.onpaste=function(){return false;};this.initialInput.textbox.oncut=function(){return false;};this.initialInput.textbox.oncopy=function(){return false;};this.verifyInput.textbox.onpaste=function(){return false;};this.verifyInput.textbox.oncut=function(){return false;};this.verifyInput.textbox.oncopy=function(){return false;};on(this.initialInput.textbox,"blur",lang.hitch(this,this._checkBlur));on(this.verifyInput.textbox,"blur",lang.hitch(this,this._checkBlur));},_getValueAttr:function(){if(this.initialInput.get("value")===this.verifyInput.get("value")){return this.initialInput.get("value");}},_setValueAttr:function(_ca8){this.initialInput.set("value",_ca8);this.verifyInput.set("value",_ca8);},_onPasswordChanging:function(){if(this.initialInput.get("value")&&this.initialInput.get("value")!=null&&this.initialInput.get("value")==this.verifyInput.get("value")){return;}this.verifyInput.set("value","");if(this.initialInput.get("value")||this.initialInput.get("value")!=""){this.verifyInput.set("disabled",false);}else{this.verifyInput.set("disabled",true);}},_checkBlur:function(){var self=this;setTimeout(function(){if((document.activeElement!=self.initialInput.textbox)&&(document.activeElement!=self.verifyInput.textbox)){if(self._compareInput()!==true){dojo.publish("/builder/property/notification",[["info","INPUT_NOT_MATCH"]]);}}},10);},onChange:function(){},triggerInitialChange:function(){if(!this.initialInput.isValid()&&this.initialInput.get("value")&&this.initialInput.get("value")!=""){this.onChange();}this._triggerChange();var _ca9=this.initialInput.get("value");var _caa=this.verifyInput.get("value");if(_ca9!=_caa&&_caa!=""){this.initialInput.set("placeHolder",builder.Environment.messages.INPUT_NOT_MATCH);if(_ca9!=""){this.initialInput.set("value","");}dojo.query(".dijitPlaceHolder",this.initialInput.domNode).style("color","orange");}},triggerVerifyChange:function(){this._triggerChange();var _cab=this.initialInput.get("value");var _cac=this.verifyInput.get("value");if(_cab!=_cac&&_cab!=""){this.verifyInput.set("placeHolder",builder.Environment.messages.INPUT_NOT_MATCH);dojo.query(".dijitPlaceHolder",this.verifyInput.domNode).style("color","orange");if(_cac!=""){this.initialInput.set("value","");this.verifyInput.set("value","");this.onChange();dojo.publish("/builder/property/notification",[["info","RESET_PASSWORD"]]);}}else{this.verifyInput.set("disabled",true);}},_triggerChange:function(){if(this.initialInput.get("value")===this.verifyInput.get("value")){this.onChange();if(this.initialInput.get("placeHolder")!=null){this.initialInput.set("placeHolder","");}if(this.verifyInput.get("placeHolder")!=null){this.verifyInput.set("placeHolder",this.verfiyPlaceHolder);dojo.query(".dijitPlaceHolder",this.verifyInput.domNode).style("color","#AAAAAA");}}},onSubmit:function(){if(this._compareInput()===true){this.set("value",this.verifyInput.get("value"));this.toggle();this.onChange();}else{dojo.publish("/builder/property/notification",[["info","INPUT_NOT_MATCH"]]);}},_compareInput:function(){var _cad=this.initialInput.get("value");var _cae=this.verifyInput.get("value");if(_cad!=null&&_cae!=null&&_cad===_cae){this.verifyInput.set("disabled",true);return true;}return false;},set:function(name,_caf){if(name=="disabled"){this.initialInput.set("disabled",_caf);this.verifyInput.set("disabled",_caf);}else{return this.inherited(arguments);}},isValid:function(){return (this.initialInput.isValid()&&this.verifyInput.isValid()&&this.initialInput.get("value")===this.verifyInput.get("value"));},isEmpty:function(){return !this.initialInput.get("value");},setWidth:function(_cb0){_ca7.set(this.initialInput.domNode,"width",_cb0);_ca7.set(this.verifyInput.domNode,"width",_cb0);}});});},"builder/util/PaintUtil":function(){define(["dojo/_base/lang","builder/util/PositionUtil"],function(lang,_cb1){var _cb2=lang.getObject("builder",true);var _cb3=lang.getObject("util.PaintUtil",true,_cb2);_cb3=_cb2.util.PaintUtil={lineCornerRadius:4,arrowLen:10,arrowHeight:5,arrowGap:5,setArrowStyle:function(_cb4){this.arrowLen=_cb4.arrowLen;this.arrowHeight=_cb4.arrowHeight;this.arrowGap=_cb4.arrowGap;},computeConnectionMode:function(_cb5,_cb6,_cb7){if(this.notNeedComputeConnectionMode(_cb7)){return;}var _cb8=_cb5.getFrame().getInnerBox();var _cb9=_cb6.getFrame().getInnerBox();var len=this.arrowLen;if((_cb8.x+_cb8.w<_cb9.x-len)||((_cb8.x+_cb8.w<_cb9.x)&&(_cb9.y+_cb9.h+len>_cb8.y)&&(_cb9.y<_cb8.y+_cb8.h+len))){_cb7.mode=1;}else{if((_cb8.x-len>_cb9.x+_cb9.w)||((_cb8.x>_cb9.x+_cb9.w)&&(_cb9.y>_cb8.y-_cb9.h-len)&&(_cb9.y<_cb8.y+_cb8.h+len))){_cb7.mode=2;}else{if(_cb8.y>_cb9.y+_cb9.h+len){_cb7.mode=3;}else{_cb7.mode=4;}}}},notNeedComputeConnectionMode:function(_cba){return _cba.isSubComponentLink();},getPosition:function(_cbb,_cbc,_cbd){this.computeConnectionMode(_cbb,_cbc,_cbd);var _cbe,_cbf;switch(_cbd.mode){case 1:_cbe=_cb2.util.PositionUtil.getRightPosition(_cbb,_cbd);_cbf=_cb2.util.PositionUtil.getLeftPosition(_cbc,_cbd);break;case 2:_cbe=_cb2.util.PositionUtil.getLeftPosition(_cbb,_cbd);_cbf=_cb2.util.PositionUtil.getRightPosition(_cbc,_cbd);break;case 3:_cbe=_cb2.util.PositionUtil.getTopPosition(_cbb,_cbd);_cbf=_cb2.util.PositionUtil.getBottomPosition(_cbc,_cbd);break;case 4:_cbe=_cb2.util.PositionUtil.getBottomPosition(_cbb,_cbd);_cbf=_cb2.util.PositionUtil.getTopPosition(_cbc,_cbd);break;}return {outportPos:_cbe,inportPos:_cbf};},getPath:function(p1,p2,mode){var tmp=null;if(mode==1||mode==2){tmp=Math.abs(p2.y-p1.y)/2;}else{tmp=Math.abs(p2.x-p1.x)/2;}if(this.lineCornerRadius>tmp){this.lineCornerRadius=tmp;}var _cc0=p1;var _cc1=p2;var _cc2=this._getMiddlePoints(_cc0,_cc1,mode);var _cc3=this._getCurvePoints(_cc2,mode);var p1={x:_cc3[3].x,y:_cc3[3].y};var x0,y0;if(p1.x==p2.x){x0=p1.x;if(p1.y>p2.y){y0=p2.y+this.arrowLen;}else{y0=p2.y-this.arrowLen;}}else{var tmp1=(p1.y-p2.y)/(p1.x-p2.x);var tmp2=Math.sqrt((this.arrowLen*this.arrowLen)/(tmp1*tmp1+1));if(p1.x<p2.x){x0=p2.x-tmp2;}else{x0=p2.x+tmp2;}y0=p2.y+tmp1*(x0-p2.x);}var x4,y4;if(p1.x==p2.x){x4=p1.x;if(p1.y>p2.y){y4=p2.y+(this.arrowLen-this.arrowGap);}else{y4=p2.y-(this.arrowLen-this.arrowGap);}}else{var tmp1=(p1.y-p2.y)/(p1.x-p2.x);var tmp2=Math.sqrt(((this.arrowLen-this.arrowGap)*(this.arrowLen-this.arrowGap))/(tmp1*tmp1+1));if(p1.x<p2.x){x4=p2.x-tmp2;}else{x4=p2.x+tmp2;}y4=p2.y+tmp1*(x4-p2.x);}var x1,y1,x2,y2;if(p1.x==p2.x){x1=x0-this.arrowHeight;y1=y0;x2=x0+this.arrowHeight;y2=y0;}else{var tmp1=(p2.y-y0)/(p2.x-x0);var tmp2=Math.sqrt((this.arrowHeight*this.arrowHeight)/(tmp1*tmp1+1));y1=y0+tmp2;x1=x0-tmp1*(y1-y0);y2=y0-tmp2;x2=x0-tmp1*(y2-y0);}if(dojo.isChrome){var _cc4=0.1;if(_cc2[0].x===_cc3[1].x){_cc3[1].x+=_cc4;}if(_cc2[0].y===_cc3[1].y){_cc3[1].y+=_cc4;}if(_cc3[1].x===_cc3[2].x){_cc3[2].x-=_cc4;}if(_cc3[1].y===_cc3[2].y){_cc3[2].y-=_cc4;}if(_cc2[1].x===_cc3[3].x){_cc3[3].x+=_cc4;}if(_cc2[1].y===_cc3[3].y){_cc3[3].y+=_cc4;}}if(dojo.isIE){var _cc5=x4-_cc3[3].x;var _cc6=y4-_cc3[3].y;if(Math.abs(_cc5)<1){x4=_cc3[3].x+(_cc5<0?-1:1);}else{if(Math.abs(_cc6)<1){y4=_cc3[3].y+(_cc6<0?-1:1);}}}var _cc7="M"+_cc0.x+" "+_cc0.y+" L"+_cc3[0].x+" "+_cc3[0].y+" M"+_cc3[0].x+" "+_cc3[0].y+" S"+_cc2[0].x+" "+_cc2[0].y+" "+_cc3[1].x+" "+_cc3[1].y+" M"+_cc3[1].x+" "+_cc3[1].y+" L"+_cc3[2].x+" "+_cc3[2].y+" M"+_cc3[2].x+" "+_cc3[2].y+" S"+_cc2[1].x+" "+_cc2[1].y+" "+_cc3[3].x+" "+_cc3[3].y+" M"+_cc3[3].x+" "+_cc3[3].y+" L"+x4+" "+y4;var _cc8="M"+x4+" "+y4+" L"+x1+" "+y1+" L"+p2.x+" "+p2.y+" L"+x2+" "+y2+" L"+x4+" "+y4+" L"+p2.x+" "+p2.y;this.lineCornerRadius=4;return {linePathD:_cc7,arrowPathD:_cc8};},_getMiddlePoints:function(_cc9,end,mode){var mx=(_cc9.x+end.x)/2;var my=(_cc9.y+end.y)/2;switch(mode){case 1:case 2:return [{x:mx,y:_cc9.y},{x:mx,y:end.y}];break;case 3:case 4:return [{x:_cc9.x,y:my},{x:end.x,y:my}];break;}},_getCurvePoints:function(_cca,mode){switch(mode){case 1:if(_cca[0].y<_cca[1].y){return [{x:_cca[0].x-this.lineCornerRadius,y:_cca[0].y},{x:_cca[0].x,y:_cca[0].y+this.lineCornerRadius},{x:_cca[1].x,y:_cca[1].y-this.lineCornerRadius},{x:_cca[1].x+this.lineCornerRadius,y:_cca[1].y}];}else{return [{x:_cca[0].x-this.lineCornerRadius,y:_cca[0].y},{x:_cca[0].x,y:_cca[0].y-this.lineCornerRadius},{x:_cca[1].x,y:_cca[1].y+this.lineCornerRadius},{x:_cca[1].x+this.lineCornerRadius,y:_cca[1].y}];}break;case 2:if(_cca[0].y<_cca[1].y){return [{x:_cca[0].x+this.lineCornerRadius,y:_cca[0].y},{x:_cca[0].x,y:_cca[0].y+this.lineCornerRadius},{x:_cca[1].x,y:_cca[1].y-this.lineCornerRadius},{x:_cca[1].x-this.lineCornerRadius,y:_cca[1].y}];}else{return [{x:_cca[0].x+this.lineCornerRadius,y:_cca[0].y},{x:_cca[0].x,y:_cca[0].y-this.lineCornerRadius},{x:_cca[1].x,y:_cca[1].y+this.lineCornerRadius},{x:_cca[1].x-this.lineCornerRadius,y:_cca[1].y}];}break;case 3:if(_cca[0].x<_cca[1].x){return [{x:_cca[0].x,y:_cca[0].y+this.lineCornerRadius},{x:_cca[0].x+this.lineCornerRadius,y:_cca[0].y},{x:_cca[1].x-this.lineCornerRadius,y:_cca[1].y},{x:_cca[1].x,y:_cca[1].y-this.lineCornerRadius}];}else{return [{x:_cca[0].x,y:_cca[0].y+this.lineCornerRadius},{x:_cca[0].x-this.lineCornerRadius,y:_cca[0].y},{x:_cca[1].x+this.lineCornerRadius,y:_cca[1].y},{x:_cca[1].x,y:_cca[1].y-this.lineCornerRadius}];}break;case 4:if(_cca[0].x<_cca[1].x){return [{x:_cca[0].x,y:_cca[0].y-this.lineCornerRadius},{x:_cca[0].x+this.lineCornerRadius,y:_cca[0].y},{x:_cca[1].x-this.lineCornerRadius,y:_cca[1].y},{x:_cca[1].x,y:_cca[1].y+this.lineCornerRadius}];}else{return [{x:_cca[0].x,y:_cca[0].y-this.lineCornerRadius},{x:_cca[0].x-this.lineCornerRadius,y:_cca[0].y},{x:_cca[1].x+this.lineCornerRadius,y:_cca[1].y},{x:_cca[1].x,y:_cca[1].y+this.lineCornerRadius}];}break;}}};return _cb3;});},"builder/workbench/orderView/DependencyConnection":function(){define(["dojo/_base/declare","builder/workbench/editor/PropertiesContainer","builder/workbench/property/PropertiesEditable","builder/workbench/orderView/DependencyLink","builder/workbench/editor/ModelToolbar","builder/workbench/editor/ToolbarItem","dojo/_base/lang","dojo/_base/event","dojo/dom-geometry","dojo/on","builder/workbench/orderView/OrderConstants"],function(_ccb,_ccc,_ccd,_cce,_ccf,_cd0,lang,_cd1,_cd2,on,_cd3){return _ccb("builder.workbench.orderView.DependencyConnection",[_ccc,_ccd],{fromComponent:null,toComponent:null,link:null,id:null,selected:null,constructor:function(args){this.fromComponent=args.source;this.toComponent=args.target;this.fromComponent.orderFrame.addFlowOutConnection(this);this.toComponent.orderFrame.addFlowInConnection(this);this.id=this.fromComponent.id+"_"+this.toComponent.id;},_createLink:function(){var link=new _cce(builder.Environment.diagram);link.setSurface(builder.Environment.orderView.surface);return link;},paint:function(){if(!this.link){this.link=this._createLink();}this.fromComponent.orderFrame.caculatePositionInSurface();this.toComponent.orderFrame.caculatePositionInSurface();var _cd4=this.getColor();this.link.setStyle({color:_cd4});var p1=this.fromComponent.orderFrame.rightPositionInSurface;var p2=this.toComponent.orderFrame.leftPositionInSurface;var mode;if(p1.x<p2.x){mode=1;}else{mode=2;}this.link.paint(p1,p2,false,mode);},getColor:function(){return "#808080";},repaint:function(){if(!this.link){return;}this.link.remove();this.paint();},remove:function(){if(this.link){this.link.remove();}},hideLink:function(){if(this.link){this.link.remove();}},displayLink:function(){this.paint();},destroy:function(){this.inherited(arguments);}});});},"builder/vsys/command/DisableOrderOnDDConnCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","dojo/topic"],function(_cd5,_cd6,_cd7){return _cd5("builder.vsys.command.DisableOrderOnDDConnCommand",[_cd6],{constructor:function(_cd8,_cd9){this.sourceId=_cd8;this.targetId=_cd9;},execute:function(){_cd7.publish("/DataDependsOnConnection/implyOrder",this.sourceId,this.targetId,false);},undo:function(){_cd7.publish("/DataDependsOnConnection/implyOrder",this.sourceId,this.targetId,true);}});});},"builder/util/LayoutUtil":function(){define(["dojo/_base/lang"],function(lang){var _cda=lang.getObject("builder",true);var _cdb=lang.getObject("util.LayoutUtil",true,_cda);_cdb=_cda.util.LayoutUtil={categoryPaletteWidgetsMap:{"vsys":"builder.vsys.workbench.palette.VSysCategoryPalette","default":"builder.workbench.palette.CategoryPalette"},diagramWidgetsMap:{"vsys":{"component":"builder.vsys.workbench.editor.VSysComponent","connection":"builder.vsys.workbench.editor.DataDependsOnConnection","diagram":"builder.vsys.workbench.editor.VSysDiagram"},"default":{"component":"builder.workbench.editor.Component","connection":"builder.workbench.editor.Connection","diagram":"builder.workbench.editor.Diagram"},"tosca.foundation":{"component":"builder.tosca.workbench.editor.Component","connection":"builder.tosca.workbench.editor.Connection","diagram":"builder.tosca.workbench.editor.Diagram"}},connectionWidgetMap:{"DataDependsOnLink":"builder.vsys.workbench.editor.DataDependsOnConnection"},getCategoryPaletteWidgetName:function(){return this.categoryPaletteWidgetsMap[window.globalSetting.patternType]||this.categoryPaletteWidgetsMap["default"];},createComponentWidget:function(args){var _cdc=this._getDiagramWidgetNameByType("component");return this._createWidgetByName(_cdc,args);},createConnectionWidget:function(args){var _cdd=null;if(args.type&&this.connectionWidgetMap[args.type]){_cdd=this.connectionWidgetMap[args.type];}else{_cdd=this._getDiagramWidgetNameByType("connection");}return this._createWidgetByName(_cdd,args);},createDiagramWidget:function(args){var _cde=this._getDiagramWidgetNameByType("diagram");return this._createWidgetByName(_cde,args);},_getDiagramWidgetNameByType:function(type){var _cdf=this.diagramWidgetsMap["default"][type];var _ce0=this.diagramWidgetsMap[window.globalSetting.patternType];if(_ce0!=null){return _ce0[type]||_cdf;}return _cdf;},_createWidgetByName:function(name,args){try{dojo["require"](name);return new dojo.getObject(name)(args);}catch(e){console.error("Error occurred when creating widget: "+name);console.error(e);}return null;}};return _cdb;});},"builder/command/AddConnectionCommand":function(){define(["dojo/_base/declare","builder/workbench/editor/Connection","builder/base/command/Command","builder/workbench/editor/LinkSelection","builder/util/ValidationUtil","builder/vsys/util/VSysUtil","paas/common/util"],function(_ce1,_ce2,_ce3,_ce4,_ce5,_ce6,_ce7){return _ce1("builder.command.AddConnectionCommand",_ce3,{connection:null,connectionId:null,fromComponentId:null,toComponentId:null,fromComponent:null,toComponent:null,type:null,container:null,invisible:false,childConnection:false,constructor:function(_ce8,_ce9,_cea,type){if(_cea==true){this.invisible=true;}this.fromComponent=_ce8;this.toComponent=_ce9;this.fromComponentId=_ce8.id;this.toComponentId=_ce9.id;this.container=builder.Environment.diagram;this.type=type;},setChildConnection:function(flag){this.childConnection=flag;},execute:function(){var _ceb=this.container.getComponentById(this.fromComponentId);var _cec=this.container.getComponentById(this.toComponentId);var _ced=this.type||_ce6.getConnectionType(_ceb,_cec,this.childConnection);if(_ced!=null){var args={source:_ceb,target:_cec,type:_ced,childConnection:this.childConnection,invisible:this.invisible};}else{var args={source:_ceb,target:_cec,childConnection:this.childConnection,invisible:this.invisible};}connectionsMetadata=this.container.addConnectionByType(args);if(connectionsMetadata.length>1){var _cee=new _ce4(connectionsMetadata,this.callbackLinkTypeChoice,this);_cee.linkSelectionDialog.show();}else{this.connection=connectionsMetadata;this.connection.updateMetadata();if(!this.invisible){this.connection.showWidget();_ceb.rePaintComponent();builder.Environment.diagram.selectModel(this.connection);}this.connectionId=this.connection.id;dojo.publish("onDiagramChanged",null);dojo.publish("onReferencesChanged",[this.fromComponentId]);}},callbackLinkTypeChoice:function(_cef,_cf0){if(_cef.type!=null){var args={source:_cef.fromComponent,target:_cef.toComponent,type:_cef.type,childConnection:_cef.childConnection,invisible:_cef.invisible};}else{var args={source:_cef.fromComponent,target:_cef.toComponent,childConnection:_cef.childConnection,invisible:_cef.invisible};}connectionMetadata=dojo.clone(_cf0);var _cf1=_cef.container.getUniqueConnectionId(connectionMetadata.id);var _cf2={id:_cf1,metadata:connectionMetadata,diagram:builder.Environment.diagram};dojo.mixin(_cf2,args);var _cf0=builder.util.LayoutUtil.createConnectionWidget(_cf2);if(_cf0){_cef.container.addConnection(_cf0);}_cef.connection=_cf0;_cef.connection.updateMetadata();if(!_cef.invisible){_cef.connection.showWidget();_cef.fromComponent.rePaintComponent();builder.Environment.diagram.selectModel(_cef.connection);}_cef.connectionId=_cef.connection.id;dojo.publish("onDiagramChanged",null);dojo.publish("onReferencesChanged",[_cef.fromComponentId]);},_submitMapping:function(){},undo:function(){var _cf3=this.container.getConnectionById(this.connectionId);_cf3.remove();dojo.publish("onDiagramChanged",null);dojo.publish("onReferencesChanged",[this.fromComponentId]);},canExecute:function(){var _cf4=this.container.getComponentById(this.fromComponentId);var _cf5=this.container.getComponentById(this.toComponentId);var exe=true;exe=_ce5.supportedConnection(_cf4,_cf5);return exe;}});});},"paas/widgets/ComponentEditor":function(){define(["dojo/_base/declare","builder/workbench/property/ComponentPropertiesWidget","paas/widgets/PropertyWidget","builder/workbench/editor/Help","builder/util/Util","dijit/form/Form","dojo/dom-construct"],function(_cf6,_cf7,_cf8,Help,Util,Form,_cf9){return _cf6("paas.widgets.ComponentEditor",[_cf7],{messages:null,form:null,hasName:true,fileInputList:null,disabled:false,lineMode:"one-line",validationMessages:null,createForm:function(){if(dojo.isIE){this.form=document.createElement("<form enctype=\"multipart/form-data\" method=\"post\">");this.form.encoding="multipart/form-data";}else{this.form=document.createElement("form");this.form.setAttribute("enctype","multipart/form-data");this.form.setAttribute("method","POST");}dojo.body().appendChild(this.form);},destroyForm:function(){dojo.body().removeChild(this.form);},postCreate:function(){builder.util.Util.setDefaultProperties(this.model.metadata.attributes,this.model.properties);if(this.model.metadata.groups){this.model.groups=this.model.groups||this.model.properties.groups||{};this.groupsStatus=builder.util.Util.setDefaultGroupsStatus(this.model.metadata.groups,this.model.groups,this.model.properties);}this.createForm();this.fileInputList=[];this.validationMessages={};this.inherited(arguments);this.helpBtn.style.display="none";this.titleImageNode.style.display="none";if(this.nameWidget&&this.nameWidget.domNode){var _cfa=dojo.query("tbody",this.tc)[0];_cf9.place(this.nameWidget.domNode,_cfa,"first");}},createTitleWidget:function(){var _cfb=this.model.metadata;if(!_cfb.label||_cfb.label==""){dojo.style(this.titleNode,"display","none");return;}var _cfc=builder.util.Util.splitName(_cfb.label);var _cfd=_cfc.shortName?_cfc.shortName:"";var _cfe=_cfc.longName?_cfc.longName:"";if(_cfe){this.titleNameNode.innerHTML="<div>"+_cfd+" - "+_cfe+"</div>";}else{this.titleNameNode.innerHTML="<div>"+_cfd+"</div>";}},createPropertiesWidget:function(){this._createPropsWidgetWithGroup("paas.widgets.PropertyWidget");var self=this;if(this.disabled){this.propsMap.name.setUnchangable();}var _cff=null;dojo.forEach(this.metadata,function(_d00){_cff=self.propsMap[_d00.id];if(_cff){if(!self.disabled&&_d00.type){_cff.setChangeable();}else{_cff.setUnchangable();}if(_cff.valueWidget&&_cff.valueWidget.onResize){dojo.connect(_cff.valueWidget,"onResize",self,"onResize");}}if(_d00.invalidMessage){self.validationMessages[_d00.id]={"label":_d00.label,"invalidMessage":_d00.invalidMessage};}else{if(_d00.type=="file"&&_d00.extensions){var _d01=dojo.map(_d00.extensions,function(_d02){return "."+_d02;});var _d03=dojo.string.substitute(paas.Base.messages.widgets_fileinputauto_invalidExtension,[_d01.join(" or ")]);self.validationMessages[_d00.id]={"label":_d00.label,"invalidMessage":_d03};}}});},initForm:function(){this.fileInputList=[];dojo.forEach(this.metadata,function(_d04){this.propsMap[_d04.id].addToFileInputList(this.fileInputList);},this);dojo.forEach(this.fileInputList,function(_d05){if(_d05&&_d05.value&&_d05.value!=""){this.form.appendChild(_d05);}},this);},createNameWidget:function(){if(!this.hasName){return;}var _d06={id:"name",label:paas.Base.messages.COMPONENT_PROP_WIDGET_CREATE_NAME_LABEL,type:"string",required:"true"};var _d07={"name":this.model.id};this.nameWidget=new paas.widgets.PropertyWidget({metadata:_d06,properties:_d07,model:this.model,lineMode:this.propLineMode});this.nameWidget.onPropertyChange=dojo.hitch(this,"changeName");return this.nameWidget;},changeName:function(name){this.model.id=name;},validate:function(){var _d08=true;var _d09=[];if(this.hasName&&(!this.model.id||this.model.id=="")){var msg=dojo.string.substitute(paas.Base.messages.APPMODEL_TOOLING_NAME_REQUIRED,[paas.Base.messages.BUILDER_EDITOR_SAVEDIALOG_NAME]);return {"result":false,"invalidProps":[msg]};}for(var i in this.propsMap){var _d0a=this.propsMap[i];if(_d0a.isEmpty(_d0a.getPropertyValue())){this.properties[i]=null;continue;}if(dojo.isFunction(_d0a.valueWidget.isValid)){if(!_d0a.valueWidget.isValid()){_d08=false;_d09.push(this.validationMessages[i]);}}}return {"result":_d08,"invalidProps":_d09};}});});},"builder/workbench/property/RangeSliderExt":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/RangeSliderExt.html","dojox/form/RangeSlider","dijit/form/HorizontalRuleLabels"],function(_d0b,_d0c,_d0d,_d0e,_d0f,_d10,_d11){return _d0b("builder.workbench.property.RangeSliderExt",[_d0c,_d0d,_d0e],{templateString:_d0f,slider:null,constraints:{pattern:"#%"},discreteValues:Infinity,minimum:0,maximum:100,count:0,value:null,incremental:0,topHorizontalRule:null,topHorizontalRuleLable:null,constructor:function(){this.range_title=builder.Environment.messages.RANGE_SLIDER_TITLE;},postCreate:function(){if(!this.minimum){this.minimum=0;}if(!this.maximum){this.maximum=100;}this.count=this.maximum-this.minimum;if(this.incremental!=0&&typeof this.incremental=="number"){this.count=this.count/this.incremental;}this.minvalue=this.minimum;this.maxvalue=this.minimum;if(!this.value){this.value=[this.minimum,this.minimum];}this.slider=new dojox.form.HorizontalRangeSlider({name:"rangeSlider",intermediateChanges:true,style:"height:20px; margin-top:-5px;",maximum:this.maximum,minimum:this.minimum,discreteValues:this.count+1},this.rangeSliderContainer);this.connect(this.slider,"onChange","onSliderChange");this.connect(this.slider,"onBlur","onChange");var _d12={count:2,numericMargin:0,constraints:this.constraints,maximum:this.valueFormat(this.maximum),minimum:this.valueFormat(this.minimum),container:"topDecoration",style:"height:1.2em;font-size:75%;"};this.topHorizontalRuleLable=new _d11(_d12,this.ruleLableContainer);this.slider.topDecoration.appendChild(this.topHorizontalRuleLable.domNode);this.topHorizontalRuleLable.domNode.style.marginTop="2px";this.set("value",this.value);},onSliderChange:function(){this.minvalue=this.valueFormat(arguments[0][0]);this.maxvalue=this.valueFormat(arguments[0][1]);if(this.minvalue){this.sliderInputMin.innerHTML=dojo.number.format(this.minvalue,{places:0,pattern:this.constraints.pattern});}if(this.maxvalue){this.sliderInputMax.innerHTML=dojo.number.format(this.maxvalue,{places:0,pattern:this.constraints.pattern});}this.value=[arguments[0][0],arguments[0][1]];},valueFormat:function(_d13){var _d14=_d13;if(this.constraints.pattern=="#%"){_d14=_d13/100;}return _d14;},onChange:function(){},set:function(_d15,_d16){if(_d15==="value"){if(!_d16){_d16=[this.minimum,this.maximum];}var temp=dojo.clone(_d16);this.slider.set("value",temp);this.minvalue=this.valueFormat(parseInt(_d16[0]));this.maxvalue=this.valueFormat(parseInt(_d16[1]));if(this.minvalue){this.sliderInputMin.innerHTML=dojo.number.format(this.minvalue,{places:0,pattern:this.constraints.pattern});}if(this.maxvalue){this.sliderInputMax.innerHTML=dojo.number.format(this.maxvalue,{places:0,pattern:this.constraints.pattern});}}else{if(_d15==="disabled"){this.slider.set("disabled",_d16);}else{return this.inherited(arguments);}}},isValid:function(){if(parseInt(this.minvalue)<=parseInt(this.maxvalue)){return true;}return false;}});});},"builder/util/array":function(){define(["dojo/_base/lang","dojo/_base/array"],function(lang,_d17){var _d18=lang.getObject("builder",true);var _d19=lang.getObject("util.array",true,_d18);_d19=_d18.util.array={remove:function(_d1a,_d1b){if(!_d1a||!_d1b){return false;}var _d1c=_d17.indexOf(_d1a,_d1b);if(_d1c>=0){_d1a.splice(_d1c,1);return true;}return false;},add:function(_d1d,_d1e){if(!_d1e){return false;}if(!_d1d){_d1d=[];_d1d.push(_d1e);return true;}var _d1f=_d17.indexOf(_d1d,_d1e);if(_d1f<0){_d1d.push(_d1e);return true;}return false;},contains:function(_d20,_d21){if(!_d20||!_d21){return false;}return _d17.indexOf(_d20,_d21)>=0;},valueContains:function(_d22,_d23,_d24){if(!_d22||!_d23){return false;}for(var i=0;i<_d22.length;i++){if(_d24.apply(this,[_d22[i],_d23])){return true;}}return false;},last:function(_d25){if(!_d25||_d25.length==0){return;}return _d25[_d25.length-1];}};return _d19;});},"builder/workbench/linksView/LinkCategoryPaletteItem":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/LinkCategoryPaletteItem.html"],function(_d26,_d27,_d28,_d29,_d2a){return _d26("builder.workbench.linksView.LinkCategoryPaletteItem",[_d27,_d28,_d29],{templateString:_d2a,widgetsInTemplate:false,selected:false,link:null,postCreate:function(){this.setLink(this.link);this.mouseOverHandle=dojo.connect(this.container,"onmouseover",dojo.hitch(this,"onMouseOver"));this.mouseOutHandle=dojo.connect(this.container,"onmouseout",dojo.hitch(this,"onMouseOut"));this.onClickHandle=dojo.connect(this.container,"onclick",dojo.hitch(this,"onClick"));},onMouseOver:function(){this.container.style.backgroundColor="#DAE6F4";},onMouseOut:function(){if(this.selected){this.container.style.backgroundColor="#CCDDEE";}else{this.container.style.backgroundColor="#FFFFFF";}},onClick:function(){},setSelected:function(_d2b){this.selected=_d2b;if(this.selected){this.container.style.backgroundColor="#CCDDEE";}else{this.container.style.backgroundColor="#FFFFFF";}},isSelected:function(){return this.selected;},getLink:function(){return this.link;},setLink:function(link){this.link=link;if(this.link!=null){this.label.innerHTML=this.link.getName();}},destroy:function(){if(this.link!=null){this.link.destroy();}dojo.disconnect(this.mouseOverHandle);dojo.disconnect(this.mouseOutHandle);dojo.disconnect(this.onClickHandle);this.inherited(arguments);}});});},"builder/service/AppBindingService":function(){define(["dojo/_base/lang","builder/util/Util","builder/util/array"],function(lang,Util,_d2c){var _d2d=lang.getObject("builder",true);lang.getObject("service.AppBindingService",true,_d2d);var _d2e=_d2d.service.AppBindingService=new function(){this.url="/resources/appBindings/";this.UNIQUE_RES_REF="unique-res-ref-name";this.JNDIDATASOURCE="jndiDataSource";this.invalidArtifacts={};this.linksMetadata=null;this.appbindings={};this.handleAppBinding=function(_d2f,_d30){var _d31={};if(!_d2f){return null;}if(!_d30.scanResultKeys){return _d31;}dojo.forEach(_d2f,function(item){var _d32=item.bindingtype;if(!_d32){return;}if(!_d30.scanResultKeys[_d32]){return;}dojo.forEach(_d30.scanResultKeys[_d32],function(key){var _d33=null;var _d34=null;if(item.attributes[key]){_d33=item.attributes[key];if(item.attributes[this.UNIQUE_RES_REF]&&item.moduleName&&key!==this.JNDIDATASOURCE){_d33=item.attributes[this.UNIQUE_RES_REF];}_d34=key;}if(_d33){var _d35={"referenceValue":_d33,"referenceKey":_d34,"referenceType":_d32,"moduleName":item.moduleName};if(_d31[item.bindingtype]==null){_d31[item.bindingtype]={};}if(_d31[item.bindingtype].matches==null){_d31[item.bindingtype].matches=[];}_d31[item.bindingtype].matches.push(_d35);}},this);},this);if(!this.linksMetadata){this.linksMetadata=Util.getMetadataService().getReferences();}for(var _d36 in _d31){if(_d31[_d36].matches==null||_d31[_d36].matches.length==0){return;}var _d37=_d36.split(",");dojo.forEach(_d37,function(type){for(var i=0;i<this.linksMetadata.length;i++){if(this.linksMetadata[i].referenceType==type){if(_d31[_d36].links==null){_d31[_d36].links=[];}_d31[_d36].links.push(this.linksMetadata[i]);}}},this);}return _d31;};this.getAppBindings=function(_d38){return this.appbindings[_d38.id];};this.loadAppBinding=function(_d39){var _d3a=null;if(arguments.length>1){_d3a=_d2d.util.ValidationUtil.getScannableFile(_d39,arguments[1]);}else{_d3a=_d2d.util.ValidationUtil.getScannableFile(_d39);}if(!_d3a){return;}_d3a=decodeURI(_d3a);var _d3b="in-progress";if(this.appbindings[_d39.id]===_d3b){return;}var _d3c=dojo.clone(_d39.getProperties());var _d3d=null;if(arguments.length>1){_d3d=_d2d.util.ValidationUtil.getScannableAttributeByType(_d39.getType(),arguments[1]);}else{_d3d=_d2d.util.ValidationUtil.getScannableAttributeByType(_d39.getType());}if(!_d3d){return;}var _d3e=_d3d.id;var _d3f={"attributes":_d3c,"type":_d39.getType(),"appId":_d2d.Environment.diagram.appId,"plugins":_d2d.Environment.diagram.plugins,"ptype_name":_d2d.Environment.diagram.patterntype,"ptype_version":_d2d.Environment.diagram.version};var _d40=paasUtil.getDeferred("POST",this.url,dojo.toJson(_d3f),false);this.appbindings[_d39.id]=_d3b;_d40.addCallback(dojo.hitch(this,function(resp,args){this.appbindings[_d39.id]=this.handleAppBinding(resp,_d3d);this.removeInvalidArtifactMessage(_d39.id);if(resp){dojo.publish("/builder/editor/notification",[["info","APPMODEL_TOOLING_APP_SCAN_SUCCESS",_d3a,_d39.id]]);dojo.publish("onLoadingReferences",[_d39.id,_d3a]);dojo.publish("/builder/artifact/scanning",[false,_d39]);}}));_d40.addErrback(dojo.hitch(this,function(resp,args){dojo.publish("/builder/artifact/scanning",[false,_d39]);var _d41="";var _d42;if(resp.responseText){_d41=dojo.fromJson(resp.responseText).errorMessage;_d42=dojo.fromJson(resp.responseText).errorStatusCode;}dojo.publish("/builder/editor/notification",[["errorWithoutFade","APPMODEL_TOOLING_APP_SCAN_FAIL",_d3a,_d39.id,_d41]]);if(_d42===412){this.addInvalidArtifactMessage(_d39.id,_d3a,_d41);delete this.appbindings[_d39.id];dojo.publish("onInvalidArtifact",[_d39.id,_d3a]);}if(this.appbindings[_d39.id]===_d3b){delete this.appbindings[_d39.id];}}));dojo.publish("/builder/artifact/scanning",[true,_d39]);};this.addInvalidArtifactMessage=function(_d43,_d44,_d45){this.invalidArtifacts[_d43]=dojo.string.substitute(_d2d.Environment.messages.APPMODEL_TOOLING_APP_SCAN_INVALID,[_d44,_d45]);};this.removeInvalidArtifactMessage=function(_d46,_d47){delete this.invalidArtifacts[_d46];};this.getInvalidArtifact=function(_d48){return this.invalidArtifacts[_d48];};this.getBindingsByMatches=function(_d49){var _d4a=this.getAppBindings(_d49);if(!_d4a){return [];}var _d4b=[];for(var _d4c in _d4a){var _d4d=_d4a[_d4c];if(!_d4d.matches){continue;}for(var i=0;i<_d4d.matches.length;i++){var item={};dojo.mixin(item,_d4d.matches[i]);item.links=[];dojo.forEach(_d4d.links,function(link){if(!link.referenceKey||link.referenceKey===item.referenceKey){item.links.push(link);}});_d4b.push(item);}}return _d4b;};this.getBindingsByLinks=function(_d4e){var _d4f=this.mergeBindings(this.getAppBindings(_d4e));var _d50=[];for(var _d51 in _d4f){var _d52=_d4f[_d51];if(!_d52.links){continue;}for(var i=0;i<_d52.links.length;i++){var item={};dojo.mixin(item,_d52.links[i]);item.matches=[];dojo.forEach(_d52.matches,function(_d53){if((!item.referenceKey||_d53.referenceKey===item.referenceKey)&&(!_d53.satisfied)){item.matches.push(_d53);}});_d50.push(item);}}return _d50;};this.mergeBindings=function(_d54){if(!_d54){return [];}var _d55=dojo.clone(_d54);for(var _d56 in _d55){var _d57=_d56.split(",");if(_d57.length>1){dojo.forEach(_d57,function(_d58){_d55[_d58]=_d55[_d58]||{};_d55[_d58].matches=_d55[_d58].matches||[];if(!_d55[_d58].links){_d55[_d58].links=dojo.filter(_d55[_d56].links,function(link){return link.referenceType==_d58;});}_d55[_d58].matches=_d55[_d58].matches.concat(_d55[_d56].matches);});delete _d55[_d56];}}return _d55;};this.getBindingsByLinkType=function(_d59,_d5a){var _d5b=this.getBindingsByLinks(_d59);var _d5c=[];dojo.forEach(_d5b,function(_d5d){if(_d5d.type==_d5a){_d5c.push(_d5d);}});return _d5c;};this.updateMetadataByBindings=function(_d5e,_d5f){var _d60=_d5f.metadata.attributes;if(!_d60){return;}dojo.forEach(_d60,dojo.hitch(this,function(_d61){if(_d61.referenceType){_d61.options=null;}}));var _d62={};dojo.forEach(_d5e,function(_d63){_d62[_d63.referenceAttribute]=_d63;});dojo.forEach(_d60,dojo.hitch(this,function(_d64){var _d65=_d62[_d64.id];if(_d65){var _d66=[];if(_d65.matches){dojo.forEach(_d65.matches,function(_d67){var name=_d67.referenceValue;var _d68=name.split("#");if(_d68.length>=2){if(_d68[0]!=""){name=dojo.string.substitute(_d2d.Environment.messages.APPMODEL_TOOLING_PROPERTY_METADATA_OPTION_NAME,[_d68[1],_d68[0]]);}else{name=_d68[1];}}var _d69=(!_d67.referenceAttribute)||(_d67.referenceAttribute==_d64.id&&_d5f.getId()==_d67.connectionId);var item={"name":name,"value":_d67.referenceValue,"disabled":!_d69};var _d6a=_d2c.valueContains(_d66,item,function(a,b){return (a.value==b.value);});if(!_d6a){_d66.push(item);}});if(_d66.length>0){_d64.options=_d66;}}}}));};this.updateMetadata=function(_d6b){var _d6c=[];var file=_d2d.util.ValidationUtil.getScannableFile(_d6b.fromComponent);if(file){_d6c=_d2d.service.AppBindingService.getBindingsByLinkType(_d6b.fromComponent,_d6b.getType());}this.addSatisfiedReferences(_d6c,_d6b.fromComponent,file);var _d6d=[];file=_d2d.util.ValidationUtil.getScannableFile(_d6b.toComponent);if(file){_d6d=_d2d.service.AppBindingService.getBindingsByLinkType(_d6b.toComponent,_d6b.getType());}this.addSatisfiedReferences(_d6d,_d6b.toComponent,file);var _d6e=_d6c.concat(_d6d);_d2d.service.AppBindingService.updateMetadataByBindings(_d6e,_d6b);};this.addSatisfiedReferences=function(_d6f,_d70,_d71){var _d72=this.getBindingsByMatches(_d70,_d71);var _d73=_d2d.util.ValidationUtil.getSatisfiedReferences(_d72,_d70);if(!_d73||_d73.length==0){return;}dojo.forEach(_d6f,function(_d74){if(!_d74.matches){return;}dojo.forEach(_d74.matches,function(_d75){dojo.forEach(_d73,function(_d76){if(_d76.referenceValue===_d75.referenceValue&&_d76.referenceKey===_d75.referenceKey&&_d76.referenceType===_d75.referenceType){dojo.mixin(_d75,_d76);}});},this);},this);};this.scanDiagram=function(){var _d77=_d2d.Environment.diagram;dojo.forEach(_d77.components,function(_d78){var _d79=_d2d.util.ValidationUtil.getScannableFile(_d78);if(_d79){if(this.getAppBindings(_d78)==null&&this.getInvalidArtifact(_d78.getId())==null){this.loadAppBinding(_d78);}}},this);};};return _d2e;});},"builder/workbench/componentsView/ComponentArtifact":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentArtifact.html"],function(_d7a,_d7b,_d7c,_d7d,_d7e){return _d7a("builder.workbench.componentsView.ComponentArtifact",[_d7b,_d7c,_d7d],{templateString:_d7e,widgetsInTemplate:true,appModel:null,postCreate:function(){var _d7f=this.artifactTypeColumn.insertRow(0);this.artifactTypeItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"type",label:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE,type:"string",options:[{name:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE_FILE,value:"file"},{name:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE_ARCHIVE,value:"archive"},{name:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE_RPMLIST,value:"rpm_list"},{name:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE_RPMGROUPLIST,value:"rpmgroup_list"}],displayType:"list",required:true},properties:{artifactType:""},labelWidth:"100px",model:this.appModel},_d7f);dojo.connect(this.artifactTypeItem,"onPropertyChange",this,"onChangeArtifactType");var _d80=this.artifactColumn.insertRow(0);this.artifactItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"file",label:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE_FILE,type:"file",required:true},properties:{file:""},propertiesEnv:{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"},labelWidth:"40px",model:this.appModel},_d80);var _d81=this.deployPathColumn.insertRow(0);this.deployPathItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"deployPath",label:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACT_DEPLOYPATH,type:"string",required:true},properties:{deployPath:""},labelWidth:"90px",model:this.appModel},_d81);var _d82=this.deleteColumn.insertRow(0);var _d83=document.createElement("img");_d83.src="/tooling/images/close_normal.png";_d83.style.cursor="pointer";_d82.appendChild(_d83);this.deleteHandle=dojo.connect(_d83,"onclick",dojo.hitch(this,"deleteItem"));},deleteItem:function(){},destroy:function(){dojo.disconnect(this.deleteHandle);if(this.nameItem!=null){this.nameItem.destroyRecursive();}if(this.implementationItem!=null){this.implementationItem.destroyRecursive();}this.inherited(arguments);},onChangeArtifactType:function(type){var _d84=this.artifactColumn;switch(String(type)){case "RPM Group List":undefined;this.clearArtifactAndPathColumn();var _d84=this.artifactColumn.insertRow(0);this.artifactItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"rpmgroup_list",label:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE_RPMGROUPLIST,type:"string",displyTyp:"multi-string",required:true},properties:{rpmgroup_list:""},labelWidth:"110px",model:this.appModel},_d84);break;case "RPM List":undefined;this.clearArtifactAndPathColumn();var _d84=this.artifactColumn.insertRow(0);this.artifactItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"rpm_list",label:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE_RPMLIST,type:"string",displyTyp:"multi-string",required:true},properties:{rpm_list:""},labelWidth:"80px",model:this.appModel},_d84);break;case "File":undefined;this.clearArtifactAndPathColumn();var _d84=this.artifactColumn.insertRow(0);this.artifactItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"file",label:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE_FILE,type:"file",required:true},properties:{file:""},propertiesEnv:{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"},labelWidth:"40px",model:this.appModel},_d84);var _d85=this.deployPathColumn.insertRow(0);this.deployPathItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"deployPath",label:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACT_DEPLOYPATH,type:"string",required:true},properties:{deployPath:""},labelWidth:"90px",model:this.appModel},_d85);break;case "Archive":undefined;this.clearArtifactAndPathColumn();var _d84=this.artifactColumn.insertRow(0);this.artifactItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"archive",label:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACTTYPE_ARCHIVE,type:"file",required:true},properties:{archive:""},propertiesEnv:{uploadFileUrl:"/tooling/builder/workbench/componentsView/uploader.groovy"},labelWidth:"65px",model:this.appModel},_d84);var _d85=this.deployPathColumn.insertRow(0);this.deployPathItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"deployPath",label:builder.Environment.messages.BUILDER_CLEDITOR_ARTIFACT_DEPLOYPATH,type:"string",required:true},properties:{deployPath:""},labelWidth:"90px",model:this.appModel},_d85);break;default:undefined;}},clearArtifactAndPathColumn:function(){this.destroyArtifactColumn();this.destroDeployPathColumn();},destroyArtifactColumn:function(){try{dijit.byId(this.artifactColumn.firstChild.firstChild.id).destroy();}catch(err){}},destroDeployPathColumn:function(){try{dijit.byId(this.deployPathColumn.firstChild.firstChild.id).destroy();}catch(err){}},getArtifact:function(){var _d86={};var _d87=this.artifactItem.getPropertyValue();var _d88=this.artifactTypeItem.getPropertyValue();_d86.artifactType=_d88;if(_d88=="rpm_list"||_d88=="rpmgroup_list"){var _d89=_d87.split(",");if(_d88=="rpm_list"){_d86.rpm_list=_d89;}else{if(_d88=="rpmgroup_list"){_d86.rpmgroup_list=_d89;}}}else{if(_d88=="file"){_d86.file=this.artifactItem.getPropertyValue();_d86.deployPath=this.deployPathItem.getPropertyValue();}else{if(_d88=="archive"){_d86.archive=this.artifactItem.getPropertyValue();_d86.deployPath=this.deployPathItem.getPropertyValue();}}}return _d86;}});});},"builder/workbench/componentsView/ComponentCategoryPaletteItem":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentCategoryPaletteItem.html"],function(_d8a,_d8b,_d8c,_d8d,_d8e){return _d8a("builder.workbench.componentsView.ComponentCategoryPaletteItem",[_d8b,_d8c,_d8d],{templateString:_d8e,widgetsInTemplate:true,selected:false,icon:null,data:null,postCreate:function(){if((this.icon!=null)&&(this.icon.length>0)){this.iconImg.src=this.icon;}else{this.label.style.top="10px";this.label.style.paddingLeft="42px";}if(this.data!=null&&(this.data.name!=null)){this.label.innerHTML=this.data.name;}dojo.connect(this.container,"onmouseover",dojo.hitch(this,"onMouseOver"));dojo.connect(this.container,"onmouseout",dojo.hitch(this,"onMouseOut"));dojo.connect(this.container,"onclick",dojo.hitch(this,"onClick"));},onMouseOver:function(){this.container.style.backgroundColor="#DAE6F4";},onMouseOut:function(){if(this.selected){this.container.style.backgroundColor="#CCDDEE";}else{this.container.style.backgroundColor="#FFFFFF";}},onClick:function(){this.setSelected(true);},setSelected:function(_d8f){this.selected=_d8f;if(this.selected){this.container.style.backgroundColor="#CCDDEE";}else{this.container.style.backgroundColor="#FFFFFF";}},destroy:function(){this.inherited(arguments);}});});},"builder/workbench/MoveToLayerDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/MoveToLayerDialog.html","dijit/Menu","dijit/MenuItem","dijit/Dialog","dijit/MenuSeparator"],function(_d90,_d91,_d92,_d93,_d94,Menu,_d95,_d96,_d97){return _d90("builder.workbench.MoveToLayerDialog",[_d91,_d92,_d93],{templateString:_d94,currentLayer:null,component:null,constructor:function(){this.MOVE_TO_LAYER_TITLE=dojo.string.substitute(paas.Base.messages.RM11251,[builder.Environment.messages.MOVE_TO_LAYER_TITLE]);},postCreate:function(){this.currentLayer=this.component.layer;this.createItems();dojo.connect(this.domNode,"onmouseout",this,function(e){if(!this.rect){this.rect=builder.util.Util.coords(this.domNode);}var _d98={x:0,y:0};_d98.x=e.pageX||e.x;_d98.y=e.pageY||e.y;if(!builder.util.Util.isPointInRect(_d98,this.rect)){this.destroyRecursive();}});},createItems:function(){var _d99=builder.Environment.diagram.layers;var self=this;var _d9a=[];dojo.forEach(_d99,function(_d9b){if(_d9b.isReferenced()||_d9b==self.currentLayer){return;}_d9a.push(_d9b);});if(_d9a.length===0){this.layers.domNode.style.display="none";var div=document.createElement("div");div.innerHTML=builder.Environment.messages.NO_LAYER_MOVE_TO;dojo.addClass(div,"noLayerMsg");this.domNode.appendChild(div);return;}dojo.forEach(_d9a,function(_d9c){self.addItem(_d9c);});},addItem:function(_d9d){var _d9e;if(_d9d.enabled){_d9e="layerEnable";}else{_d9e="layerDisable";}var item=new dijit.MenuItem({label:_d9d.id,iconClass:_d9e});var self=this;item.onClick=function(){self.destroyRecursive();var cmd=new builder.command.MoveToLayerCommand(self.component,item.label);builder.Environment.commandStack.executeCommand(cmd);};var sep=new dijit.MenuSeparator();this.layers.addChild(item);this.layers.addChild(sep);},show:function(){document.body.appendChild(this.domNode);},setLocation:function(left,top){dojo.style(this.domNode,{left:left+"px",top:top+"px"});}});});},"builder/workbench/property/PropertiesEditable":function(){define(["dojo/_base/declare","builder/util/array","dojo/window"],function(_d9f,_da0,win){return _d9f("builder.workbench.property.PropertiesEditable",null,{propertiesWidget:null,loadFromModel:false,showPropertiesWidget:function(){if(this.propertiesWidget==null){this.propertiesWidget=this.createPropertiesWidget();}builder.Environment.propertyView.show(this.propertiesWidget);},createPropertiesWidget:function(){throw new Error("Unimplemented API: builder.workbench.property.PropertiesEditable.createPropertiesWidget");},updatePropertiesWidget:function(){if(this.propertiesWidget!=null){this.propertiesWidget.update();}},allPropsWidgets:null,showPolicyPropsWidget:function(_da1){if(this.allPropsWidgets==null){this.allPropsWidgets=[];}else{this.allPropsWidgets.length=0;}if(this.propertiesWidget==null){this.propertiesWidget=this.createPropertiesWidget();}this.allPropsWidgets.push(this.propertiesWidget);var _da2=this.getAttachedPolicies();var self=this;dojo.forEach(_da2,function(_da3){if(_da3.propertiesWidget==null){_da3.propertiesWidget=_da3.createPropertiesWidget();}self.allPropsWidgets.push(_da3.propertiesWidget);});builder.Environment.propertyView.show(this.allPropsWidgets);var _da4=this.propertiesWidget.domNode.parentNode;if(!_da4){return;}_da4.insertBefore(this.propertiesWidget.domNode,_da4.firstChild);this.selectChild(this.propertiesWidget);},getAttachedPolicies:function(){},selectChild:function(_da5){if(!_da0.contains(this.allPropsWidgets,_da5)){return;}dojo.forEach(this.allPropsWidgets,function(_da6){if(_da6===_da5){_da6.open===false&&_da6.set("open",true);}else{_da6.open===true&&_da6.set("open",false);}});_da5.focus&&_da5.focus();win.scrollIntoView(_da5.domNode);}});});},"builder/vsys/workbench/editor/InterchangableComponentContainerFrame":function(){define(["dojo/_base/declare","dojo/text!./templates/InterchangableComponentContainerFrame.html","builder/workbench/editor/ComponentContainerFrame","builder/vsys/workbench/editor/VSysComponentFigureFrame","builder/vsys/workbench/editor/VSysComponentFrame","builder/vsys/workbench/editor/InterchangableMixin","builder/util/Util","dijit/form/ComboBox","paas/common/constants","dojo/topic","dojo/_base/lang","builder/vsys/workbench/editor/DataDependsOnIconMixin","dojo/dom-construct","builder/vsys/util/VSysUtil","dojo/dom-style","dojo/_base/array","dojo/on","dojo/dom-class","dojo/fx","dojo/dom-attr","dijit/registry"],function(_da7,_da8,_da9,_daa,_dab,_dac,Util,_dad,_dae,_daf,lang,_db0,_db1,_db2,_db3,_db4,on,_db5,fx,_db6,_db7){return _da7("builder.vsys.workbench.editor.InterchangableComponentContainerFrame",[_da9,_dab,_dac,_db0],{templateString:_da8,inputIconWidth:6,outputIconWidth:7,inputIconLeft:-16,outputIconLeft:-15,SOFTWARES_AND_SCRIPTS:builder.Environment.messages.APPMODEL_VSYSNEXT_CATEGORY_SOFTWARES_AND_SCRIPTS,ADDONS:builder.Environment.messages.APPMODEL_VSYSNEXT_CATEGORY_ADDONS,POLICIES:builder.Environment.messages.APPMODEL_VSYSNEXT_CATEGORY_POLICIES,constructor:function(){this.inherited(arguments);this.buttons.splice(0,2,{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_ADDPOLICY_TITLE,todo:dojo.hitch(this,this.onShowPolicies),iconClass:"frameToolbarIcon addPolicyIcon"},{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_ADDADDON_TITLE,todo:dojo.hitch(this,this.onShowAddons),iconClass:"frameToolbarIcon addAddonIcon"});},postCreate:function(){this.inherited(arguments);this.initVersionFilter();_daf.subscribe("/Ordering/LinkablePolicyFrame/Orders",lang.hitch(this,this._orderLinkablePolicyFrames));this.own(this._addTitlePaneEvent(this.policiesIconNode,this.policiesContentNode),this._addTitlePaneEvent(this.addonsIconNode,this.addonsContentNode),this._addTitlePaneEvent(this.realPoliciesIconNode,this.realPoliciesContentNode));},_addTitlePaneEvent:function(_db8,_db9){return on(_db8,"click",lang.hitch(this,function(){if(_db5.contains(_db8,"dijitTitlePaneTitleOpen")){_db5.remove(_db8,"dijitTitlePaneTitleOpen");_db5.add(_db8,"dijitTitlePaneTitleClosed");fx.wipeOut({node:_db9}).play();this._displayDDConnsInContentNode(_db9,false);}else{_db5.add(_db8,"dijitTitlePaneTitleOpen");_db5.remove(_db8,"dijitTitlePaneTitleClosed");fx.wipeIn({node:_db9}).play();this._displayDDConnsInContentNode(_db9,true);}}));},_displayDDConnsInContentNode:function(_dba,_dbb){var _dbc=this._getSubComponentsInContentNode(_dba);_db4.forEach(_dbc,function(_dbd){_dbd.displayDDConnections(_dbb);});},_getSubComponentsInContentNode:function(_dbe){var _dbf=_dbe.childNodes;var _dc0=[];_db4.forEach(_dbf,function(node){var _dc1=_db6.get(node,"widgetid");var _dc2=_db7.byId(_dc1);var _dc3=_dc2.component;if(_dc3){_dc0.push(_dc3);}});return _dc0;},createTitle:function(_dc4){var _dc5=_dc4.metadata;this.frameBorderContainer.setAttribute("title",_dc5.label);this.titleImageNode.src=builder.util.FileUtil.getComponentIconPath(_dc5.image);this.titleImageNode.alt=builder.Environment.messages.IMAGE_ALT;},_orderLinkablePolicyFrames:function(_dc6){if(this.component.id!=_dc6){return;}var _dc7=this.component.diagram.connections;var _dc8=null;for(var i=0;i<_dc7.length;i++){if(_dc7[i].metadata.id===_dae.HOSTED_ON_LINK&&_dc7[i].target===this.component&&_db2.isLinkableSubComponent(_dc7[i].source.metadata)){if(_dc8){_db1.place(_dc7[i].source.componentFrame.domNode,_dc8.domNode,"after");}_dc8=_dc7[i].source.componentFrame;}}this.component.diagram.repaintDataDependencyConnections();},checkSeparatorLine:function(){var _dc9=this.component.incomingConnections;var _dca=0;var _dcb=0;var _dcc=0;_db4.forEach(_dc9,function(conn){var _dcd=conn.fromComponent.metadata;if(_db2.isLinkableSubComponent(_dcd)){_dca++;}else{if(_db2.isAddon(_dcd)){_dcb++;}else{if(_db2.isPolicy(_dcd)||_db2.isConfiguration(_dcd)){_dcc++;}}}});if(_dca>0){_db3.set(this.policiesNode,"display","block");_db3.set(this.separator,"display","block");}else{_db3.set(this.policiesNode,"display","none");_db3.set(this.separator,"display","none");}if(_dcb>0){_db3.set(this.addonsNode,"display","block");_db3.set(this.addonsSeparator,"display","block");}else{_db3.set(this.addonsNode,"display","none");_db3.set(this.addonsSeparator,"display","none");}if(_dcc>0){_db3.set(this.realPoliciesNode,"display","block");_db3.set(this.realPoliciesSeparator,"display","block");}else{_db3.set(this.realPoliciesNode,"display","none");_db3.set(this.realPoliciesSeparator,"display","none");}},createPolicyFrame:function(_dce){if(!_dce.componentFrame){if(_db2.isLinkableSubComponent(_dce.metadata)){_dce.componentFrame=new builder.workbench.editor.LinkablePolicyFrame({component:_dce,parentFrame:self});}else{_dce.componentFrame=new builder.workbench.editor.PolicyFrame({component:_dce});}}if(_db2.isLinkableSubComponent(_dce.metadata)){_dce.getFrame().setParentFrame(this);this.policiesContentNode.appendChild(_dce.componentFrame.domNode);}else{if(_db2.isAddon(_dce.metadata)){this.addonsContentNode.appendChild(_dce.componentFrame.domNode);}else{if(_db2.isPolicy(_dce.metadata)||_db2.isConfiguration(_dce.metadata)){this.realPoliciesContentNode.appendChild(_dce.componentFrame.domNode);}}}this.checkSeparatorLine();},toMiniView:function(evt){if(evt){dojo.stopEvent(evt);}this.component.ismini=true;var _dcf=new _daa({component:this.component,viewMode:"mini"});this.component.generateDelegatedConnections();this.component._moveOutPolicyNodes();this.component.changeWidgets(_dcf);this.component.checkValidation();}});});},"builder/workbench/property/PatternAttrPropertyWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/PatternAttrPropertyWidget.html","builder/workbench/property/PropertyWidget","paas/widgets/EditDeletePatternAttrDialog","dojo/string"],function(_dd0,_dd1,_dd2,_dd3,_dd4,_dd5,_dd6,_dd7){return _dd0("builder.workbench.property.PatternAttrPropertyWidget",[_dd5],{templateString:_dd4,fromEdit:false,fromDelete:false,constructor:function(){this.addReferenceAttr_alt=builder.Environment.messages.PATTEN_ATTR_EDIT;this.removeReferenceAttr_alt=builder.Environment.messages.PATTEN_ATTR_DELETE;},postCreate:function(){var self=this;this.inherited(arguments);this.isLocked=builder.util.array.contains(builder.Environment.diagram.patternAttrLocked,this.metadata.id);this.connect(this.editAttrNode,"onclick","editAppternAttr");this.connect(this.removeAttrNode,"onclick","removePatternAttr");},showIcons:function(){this.inherited(arguments);if(this.model.readOnly){return;}dojo.style(this.editAttrNode,"display","");dojo.style(this.removeAttrNode,"display","");},hideIcons:function(){this.inherited(arguments);dojo.style(this.editAttrNode,"display","none");dojo.style(this.removeAttrNode,"display","none");},uninitialized:function(){},editAppternAttr:function(){this.fromEdit=true;var _dd8=new paas.widgets.AddPatternAttrDialog({propWidget:this,fromEdit:true,mainWidget:this.model.mainWidget});_dd8.showDialog();},removePatternAttr:function(){this.fromDelete=true;var _dd9=new paas.widgets.AddPatternAttrDialog({propWidget:this,fromDelete:true,mainWidget:this.model.mainWidget});_dd9.showDialog();},getPropertyValue:function(){return this.inherited(arguments);},setPropertyValue:function(_dda){this.inherited(arguments);},isInputValid:function(_ddb,_ddc){return this.inherited(arguments);}});});},"builder/workbench/editor/LinkablePolicyFrame":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/LinkablePolicyFrame.html","builder/util/CssUtil","dijit/Toolbar","dijit/InlineEditBox","builder/util/CommandFactoryUtil","dijit/form/Select","builder/workbench/editor/ComponentFrame","builder/workbench/orderView/OrderUtil","builder/vsys/workbench/editor/InterchangableMixin","builder/vsys/workbench/editor/DataDependsOnIconMixin"],function(_ddd,_dde,_ddf,_de0,_de1,_de2,_de3,_de4,_de5,_de6,_de7,_de8,_de9,_dea){return _ddd("builder.workbench.editor.LinkablePolicyFrame",[_dde,_ddf,_de0,_de7,_de9,_dea],{widgetsInTemplate:true,templateString:_de1,component:null,parentFrame:null,buttons:null,inputIconWidth:8,outputIconWidth:8,inputIconLeft:-13,outputIconLeft:-15,constructor:function(){this.buttons=[{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_REMOVE_TITLE,todo:dojo.hitch(this,this.onDelete),iconClass:"frameToolbarIcon deleteIcon"},{title:builder.Environment.messages.APPMODEL_TOOLING_COMPONENT_HELP_TITLE,todo:dojo.hitch(this,this.onHelp),iconClass:"frameToolbarIcon helpIcon"},{title:builder.Environment.messages.APPMODEL_TOOLING_MOVE_UP,todo:dojo.hitch(this,this.moveUp),iconClass:"frameToolbarIcon moveupIcon"},{title:builder.Environment.messages.APPMODEL_TOOLING_MOVE_DOWN,todo:dojo.hitch(this,this.moveDown),iconClass:"frameToolbarIcon movedownIcon"}];this.attention_normal=paas.Base.messages.Status_Warning;},postCreate:function(){var data=this.component.metadata;this.setName(this.component.id);this.createButtonsForToolbar();this.createTitle(this.component);this.registerEvents();if(data.enabled==false){dojo.style(this.disablePolicy,"display","");}if(this.component.isReferenced()){this.layerNode.addOption(this.layerNode.createLayerOption(this.component.layer));}if(this.component.layer){this.setLayer(this.component.layer.id);}if(this.component.readOnly){this.setUnchangable();}else{if(this.component.isReferenced()){this.setReferenced();}}this._setDndTarget();this.createPort();this.appendConnectionPort();this.initVersionFilter();},createTitle:function(_deb){var _dec=_deb.metadata;var _ded=builder.util.Util.splitName(_dec.label);var _dee=_ded.shortName?_ded.shortName:"";this.contentContainer.setAttribute("title",_dee);this.imgNode.src=builder.util.FileUtil.getComponentIconPath(_dec.image);this.imgNode.alt=builder.Environment.messages.IMAGE_ALT;},setLayer:function(_def){this.layerNode.set("value",_def);},getPortYPosition:function(){var rect=builder.util.Util.coords(this.contentContainer);if(rect.h>8){rect.h=rect.h-8;}return rect.t+rect.h/2;},setName:function(name){var n=name.indexOf("(");if(n<=0){n=name.indexOf("（");}if(n>=0){name=name.substring(0,n);}this.nameNode.set("value",name||"");},createButtonsForToolbar:function(){var self=this;dojo.forEach(this.buttons,function(_df0){var _df1=new dijit.form.Button({title:_df0.title,onClick:_df0.todo,iconClass:_df0.iconClass,showLabel:false,isReadOnly:_df0.isReadOnly});self.toolbar.addChild(_df1);});},helpWidget:null,onHelp:function(evt){dojo.stopEvent(evt);var _df2=this.component.metadata;var _df3=builder.util.Util.coords(this.domNode);if(!this.helpWidget||!this.helpWidget.domNode){this.helpWidget=new builder.workbench.editor.Help({metadata:_df2,position:{left:_df3.x,top:_df3.y}});dojo.body().appendChild(this.helpWidget.domNode);this.helpWidget.setLocation(_df3.x,_df3.y);}else{this.helpWidget.setLocation(_df3.x,_df3.y);}this.helpWidget.focus();},onDelete:function(evt){if(evt){dojo.stopEvent(evt);}var cmd=_de5.getCommmandFactory().getRemovePolicyCommand(this.component);builder.Environment.commandStack.executeCommand(cmd);},onSelected:function(){dojo.style(this.toolbar.domNode,"display","block");dojo.style(this.domNode,{"borderStyle":"dashed","borderColor":"gray"});if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","");dojo.style(this.portContainer,"top",this.getPortYPosition()+"px");}this.component.showPropertiesWidget();this.focus();},onUnselect:function(){dojo.style(this.toolbar.domNode,"display","none");dojo.style(this.domNode,{"borderStyle":"solid","borderColor":"#D4D4D4"});if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","none");}this.blur();},onHover:function(evt){dojo.stopEvent(evt);if(builder.base.dnd.dragManager.currentDragSource!=null){return;}if(this.toolbar&&this.toolbar.domNode){dojo.style(this.toolbar.domNode,"display","block");}if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.parentFrame.portContainer,"display","none");dojo.style(this.connectionPort.domNode,"display","");dojo.style(this.portContainer,"top",this.getPortYPosition()+"px");}},onUnHover:function(evt){dojo.stopEvent(evt);if(this.component.diagram.selectedModel===this.component){return;}if(this.toolbar&&this.toolbar.domNode){dojo.style(this.toolbar.domNode,"display","none");}if(this.connectionPort&&this.connectionPort.domNode){dojo.style(this.connectionPort.domNode,"display","none");}},onNameFocus:function(_df4){if(!this.setTimeID){this.setTimeID=setTimeout("dojo.publish('onComponentChangeWidth')",300);}else{setTimeout("dojo.publish('onComponentChangeWidth')",120);}},remove:function(){if(this.helpWidget&&this.helpWidget.domNode){this.helpWidget.destroy();}this.destroyRecursive();},enable:function(){this.inherited(arguments);if(!this.component.isReferenced()&&!this.component.readOnly){this.layerNode.set("disabled",false);}if(!this.component.readOnly&&this.connectionPort){this.connectionPort.enableDragSource();}},disable:function(){this.inherited(arguments);dojo.style(this.toolbar.domNode,"display","none");this.layerNode.set("disabled",true);if(this.connectionPort){this.connectionPort.disableDragSource();}},setReferenced:function(){if(this.isReferenced===true){return;}this.inherited(arguments);this.layerNode.set("disabled",true);this.disableToolbar();},setUnchangable:function(){if(this.readOnlyMode===true){return;}this.inherited(arguments);this.setReferenced();this.unregisterEvents();this.versionFilter.set("disabled",true);if(this.connectionPort){this.connectionPort.disableDragSource();}},disableToolbar:function(){var _df5=this.toolbar.getChildren();if(!_df5){return;}for(var i=0;i<_df5.length;i++){if(!_df5[i].isReadOnly){this.toolbar.removeChild(_df5[i]);}}},onLayerChange:function(_df6){if(this.component.layer.id===_df6){return;}var cmd=new builder.command.MoveToLayerCommand(this.component,_df6);builder.Environment.commandStack.executeCommand(cmd);},registerEvents:function(){this.inherited(arguments);this.eventHandles.push(dojo.connect(this.domNode,"onmousedown",this,function(evt){this.component.diagram.selectModel(this.component);}));this.eventHandles.push(dojo.connect(this.domNode,"onmouseenter",this,"onHover"));this.eventHandles.push(dojo.connect(this.domNode,"onmouseleave",this,"onUnHover"));this.eventHandles.push(dojo.connect(this.nameNode,"onChange",this,"onNameChange"));this.eventHandles.push(dojo.connect(this.nameNode,"onFocus",this,"onNameFocus"));this.eventHandles.push(dojo.connect(this.layerNode,"onChange",this,"onLayerChange"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseenter",this,"showTooltip"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseleave",this,"hideTooltip"));},getOuterBox:function(){return builder.util.Util.coords(this.parentFrame.domNode);},getInnerBox:function(){return builder.util.Util.coords(this.domNode);},getPosition:function(){return {x:0+"px",y:0+"px"};},moveUp:function(){_de8.moveUp(this);},moveDown:function(){_de8.moveDown(this);},setParentFrame:function(_df7){this.parentFrame=_df7;}});});},"builder/workbench/linksView/LinkListCollapsibleSection":function(){define(["dojo/_base/declare","builder/workbench/linksView/ListCollapsibleSection","dojo/text!./templates/ListCollapsibleSection.html"],function(_df8,_df9,_dfa){return _df8("builder.workbench.linksView.LinkListCollapsibleSection",[_df9],{initializeData:function(){this.possibleItems=[];var _dfb=dijit.byId("componentCategoryPalette");var _dfc=_dfb.getCategories();for(var _dfd in _dfc){var _dfe=_dfc[_dfd];for(var _dff in _dfe.items){var item=_dfe.items[_dff];this.possibleItems.push({name:item.name,value:item.type});}}},createRowData:function(row){var _e00=new builder.workbench.linksView.ComponentPatternType({appModel:this.appModel,patternTypes:this.possibleItems},row);return _e00;}});});},"builder/workbench/listView/ListItemAttr":function(){define(["dojo/_base/declare","builder/workbench/property/PropertyWidget","builder/workbench/property/InlineEditContainer","builder/workbench/property/RadioGroup"],function(_e01,_e02,_e03,_e04){return _e01("builder.workbench.listView.ListItemAttr",[_e02],{lineMode:"one-line",postCreate:function(){this.inherited(arguments);dojo.style(this.nameArea,"width","300px");dojo.addClass(this.nameArea,"listViewLineSpace");dojo.addClass(this.valueArea,"listViewLineSpace");},_createValueWidget:function(type,_e05){var args=this._createValidationArgs(this.metadata);args["class"]="propertyView_value";if(type==="string"){if(this.metadata["options"]!=null){if(this.metadata.displayType=="radio"){var name="list"+this.model.id+this.metadata.id;this.valueWidget=new _e04({"class":"propertyView_value",data:this.metadata["options"],"name":name},this.valueNode);dojo.addClass(this.domNode,"claro");}else{var _e06=this._createStore(this.metadata["options"]);args["store"]=_e06;this.valueWidget=new _e03({editor:"dijit.form.FilteringSelect",metadata:this.metadata,editorParams:args,autoSave:true},this.valueNode);}}else{if(this.metadata.displayType==="multi-string"){this.valueWidget=new _e03({editor:"dijit.form.SimpleTextarea",metadata:this.metadata,editorParams:args,autoSave:true},this.valueNode);}else{if(this.metadata.displayType==="password"||this.metadata.displayType==="hidden"){this.inherited(arguments);}else{this.valueWidget=new _e03({editor:"dijit.form.ValidationTextBox",metadata:this.metadata,editorParams:args,autoSave:true},this.valueNode);}}}}else{if(type==="number"&&this.metadata.displayType!=="percentage"&&this.metadata.displayType!=="slider"){args["_formatter"]=function(_e07){return String(_e07);};if(args.regExp){args.regExpGen=function(){return args.regExp;};}var _e08="dijit.form.NumberTextBox";if(this.metadata.options!=null){_e08="dijit.form.FilteringSelect";args.store=this._createStore(this.metadata.options);}this.valueWidget=new _e03({editor:_e08,metadata:this.metadata,editorParams:args,autoSave:true},this.valueNode);}else{this.inherited(arguments);}}dojo.style(this.valueArea,"width","280px");},onPropertyChange:function(){this.inherited(arguments);dojo.removeClass(this.valueWidget.domNode,"missingPropBorder");}});});},"builder/vsys/workbench/editor/VSysComponent":function(){define(["dojo/_base/declare","builder/workbench/editor/Component","builder/workbench/orderView/OrderConstants","builder/vsys/workbench/editor/VSysComponentFigureFrame","builder/vsys/workbench/editor/InterchangableComponentContainerFrame","builder/workbench/editor/AppPolicyFrame","builder/util/Util","builder/util/ReferenceValueUtil","dojo/_base/array","builder/vsys/util/VSysUtil","builder/vsys/util/PrerequisiteUtil","builder/util/constants","builder/command/RemoveConnectionCommand","dojo/_base/array","builder/command/ChangePropertyCommand","builder/workbench/orderView/OrderConstants","builder/base/command/CompoundCommand","dojo/dom-attr","dojo/dom-style"],function(_e09,_e0a,_e0b,_e0c,_e0d,_e0e,Util,_e0f,_e10,_e11,_e12,_e13,_e14,_e10,_e15,_e16,_e17,_e18,_e19){return _e09("builder.vsys.workbench.editor.VSysComponent",[_e0a],{initSubscribers:function(){this.inherited(arguments);this.subscribes.push(dojo.subscribe("onComponentChangeWidth",this,function(){this.rePaintComponent();}));},initData:function(args){this.inherited(arguments);this.transformStartsAfter(args);},containsType:function(type){return _e11.containsType(this.metadata,type);},isVisible:function(){return true;},isCombinedComponent:function(){var _e1a=_e12.getPrereqComponentsByMetadata(this.metadata);return _e1a&&_e1a.length>0;},isSubComponent:function(){return _e11.isSubComponent(this.metadata);},isClosedVM:function(){if(_e11.getJsonObjectByPath(this.metadata,"capabilities","provides","closedVM")){return true;}return false;},canAddPolicy:function(){if(this.isClosedVM()){return false;}return this.inherited(arguments);},createComponentView:function(){if(this.isAppPolicy()){return new _e0e({component:this});}else{if(this.ismini==true){return new _e0c({component:this});}else{return new _e0d({component:this});}}},serialize:function(_e1b,_e1c){var node=this.inherited(arguments);var _e1d=this.getComponentStartsAfter();if(_e1d){node.startsAfter=_e1d;}if(!this.isCombinedComponent()){return node;}node=dojo.clone(node);var _e1e=this._getPrerequisiteComponents(node);for(var key in _e1e){var type=_e1e[key];var id=type.replace(/\./g,"_")+"_"+node.id;var _e1f={attributes:{},id:id,type:type};_e10.forEach(this.metadata.attributes,function(attr){if(attr.referenceValue){var _e20=_e0f.getReferenceComponent(attr.referenceValue);if(_e20==key){var _e21=_e0f.getReferenceAttribute(attr.referenceValue);if(node.attributes[attr.id]!=null){_e1f.attributes[_e21]=node.attributes[attr.id];}var _e22=attr.referenceValue.replace(_e20,id);node.attributes[attr.id]=_e22;}}});var _e23=_e12.getPrereqComponentByReferenceId(this.metadata,key);if(_e23!=null&&_e23.attributes){_e10.forEach(_e23.attributes,function(_e24){_e1f.attributes[_e24.id]=_e24.value;});}var _e25={source:node.id,target:id,type:_e13.HOSTED_ON_LINK,id:_e13.HOSTED_ON_LINK+"_"+node.id};var _e26=_e11.findContainerComponent(this).getId();var _e27={source:id,target:_e26,type:_e13.HOSTED_ON_LINK,id:_e13.HOSTED_ON_LINK+"_"+id};_e1b.push(_e1f);_e1c.push(_e25);_e1c.push(_e27);var _e28=-1;for(var i=0;i<_e1c.length;i++){if(_e1c[i].source==node.id&&_e1c[i].target==_e26){_e28=i;break;}}if(_e28!=-1){_e1c.splice(i,1);}}_e1b.push(node);},_getPrereqComponents:function(){if(this.prereqComponents==null){this.prereqComponents=_e12.getPrereqComponents(this.getType());}return this.prereqComponents;},updateAttributesOnPreprequisite:function(_e29){var _e2a=this._getPrereqComponents();if(_e2a==null){return;}var _e2b=null;for(var i=0;i<_e2a.length;i++){var _e2c=_e2a[i].types;for(var j=0;j<_e2c.length;j++){if(_e2c[j].id===_e29.getType()){_e2b=_e2a[i].referenceID;break;}}if(_e2b!=null){break;}}if(_e2b==null){return;}this.setProperty(_e12.generatePrerequisiteAttributeName(_e2b),_e29.getType());var _e2d=_e29.getId();_e10.forEach(this.propertyMetadata,function(_e2e){if(_e2e.mappingAttribute!=null){var _e2f=_e0f.getReferenceAttribute(_e2e.mappingAttribute);var _e30=_e29.getProperty(_e2f);if(_e30!=null){this.setProperty(_e2e.id,_e30);}else{this.removeProperty(_e2e.id);}}},this);},_getPrerequisiteComponents:function(node){var _e31={};for(var key in node.attributes){if(node.attributes.hasOwnProperty(key)){var _e32=_e12.getReferenceIdByAttributeName(key);if(_e32!=null){_e31[_e32]=node.attributes[key];delete node.attributes[key];}}}return _e31;},getComponentStartsAfter:function(){var _e33=[];var _e34=this.getProperties();for(var prop in _e34){var _e35=_e11.getDataDependsOnComponentIDs(_e34[prop]);if(_e35&&_e35 instanceof Array&&_e35.length>0){for(var i=0;i<_e35.length;i++){var _e36=_e35[i];var _e37=builder.Environment.diagram.getComponentById(_e36);if(_e37){var conn=this.getDataDependsOnConnByTarget(_e37);if(conn&&conn.implyOrder){if(_e10.indexOf(_e33,_e36)===-1){_e33.push(_e36);}}}}}}if(this.startsAfter&&(this.startsAfter instanceof Array)&&(this.startsAfter.length>0)){var sf=this.startsAfter;for(var i=0;i<sf.length;i++){if(_e10.indexOf(_e33,sf[i].id)===-1){_e33.push(sf[i].id);}}}var self=this;require(["builder/workbench/orderView/OrderUtil"],function(_e38){var _e39=_e38.getDefaultOrderData();for(var i=0;i<_e39.length;i++){var _e3a=_e39[i].subComponents;if(_e3a&&_e3a instanceof Array&&_e3a.length>1){var _e3b=false;for(var j=1;j<_e3a.length;j++){if(_e3a[j].id===self.id){if(_e10.indexOf(_e33,_e3a[j-1].id)===-1){_e33.push(_e3a[j-1].id);}_e3b=true;}}if(_e3b){break;}}}});if(_e33.length===0){return null;}else{return _e33;}},transformStartsAfter:function(_e3c){if(!_e3c.startsAfter){return;}this.startsAfter=[];var sf=_e3c.startsAfter;var _e3d=_e3c.attributes||{};for(var i=0;i<sf.length;i++){var flag=false;for(var prop in _e3d){if(_e11.getDataDependsOnComponentIDs(_e3d[prop])&&(_e3d[prop].indexOf(sf[i])>-1)){flag=true;break;}}if(flag){continue;}this.startsAfter.push({type:_e0b.STARTSAFTER_TYPE_ORDERING,id:sf[i]});}},generateDelegatedConnections:function(){if(!this.delegatedCompsConnsMap){this.delegatedCompsConnsMap={};}this.generateDelegatedConnsByComp(this);var _e3e=_e11.findHostedOnSources(this.incomingConnections);for(var i=0;i<_e3e.length;i++){this.generateDelegatedConnsByComp(_e3e[i]);}},generateDelegatedConnsByComp:function(comp){var _e3f=null;for(var i=0;i<comp.incomingConnections.length;i++){_e3f=comp.incomingConnections[i];if(_e3f.connectionFrame&&_e3f.connectionFrame.isMiniView||_e3f.isSubComponentLink()){continue;}var _e40=_e3f.fromComponent;var _e41=_e11.findHostedOnTarget(_e40.outgoingConnections);_e41=_e41?_e41:_e40;if(!this.delegatedCompsConnsMap[_e41.id]){this.delegatedCompsConnsMap[_e41.id]=_e3f;if(!_e41.delegatedCompsConnsMap){_e41.delegatedCompsConnsMap={};}_e41.delegatedCompsConnsMap[this.id]=_e3f;_e3f.delegated=true;}_e3f.toVSysMiniFrame();}var _e42=null;for(var j=0;j<comp.outgoingConnections.length;j++){_e42=comp.outgoingConnections[j];if(_e42.connectionFrame&&_e42.connectionFrame.isMiniView||_e42.isSubComponentLink()){continue;}var _e43=_e42.toComponent;var _e44=_e11.findHostedOnTarget(_e43.outgoingConnections);_e44=_e44?_e44:_e43;if(!this.delegatedCompsConnsMap[_e44.id]){this.delegatedCompsConnsMap[_e44.id]=_e42;if(!_e44.delegatedCompsConnsMap){_e44.delegatedCompsConnsMap={};}_e44.delegatedCompsConnsMap[this.id]=_e42;_e42.delegated=true;}_e42.toVSysMiniFrame();}},restoreDelegatedConnections:function(){for(var prop in this.delegatedCompsConnsMap){var comp=this.diagram.getComponentById(prop);if(!comp.ismini){delete this.delegatedCompsConnsMap[prop];if(comp.delegatedCompsConnsMap){delete comp.delegatedCompsConnsMap[this.id];}}}this.restoreDelegatedConnsByComp(this);var _e45=_e11.findHostedOnSources(this.incomingConnections);for(var i=0;i<_e45.length;i++){this.restoreDelegatedConnsByComp(_e45[i]);}},restoreDelegatedConnsByComp:function(comp){var _e46=null;for(var i=0;i<comp.incomingConnections.length;i++){_e46=comp.incomingConnections[i];if(_e46.isSubComponentLink()){continue;}var _e47=_e46.fromComponent;var _e48=_e11.findHostedOnTarget(_e47.outgoingConnections);_e48=_e48?_e48:_e47;if(this.delegatedCompsConnsMap[_e48.id]){continue;}if(_e46.delegated){delete _e46.delegated;}_e46.toStandFrame();}var _e49=null;for(var j=0;j<comp.outgoingConnections.length;j++){_e49=comp.outgoingConnections[j];if(_e49.isSubComponentLink()){continue;}var _e4a=_e49.toComponent;var _e4b=_e11.findHostedOnTarget(_e4a.outgoingConnections);_e4b=_e4b?_e4b:_e4a;if(this.delegatedCompsConnsMap[_e4b.id]){continue;}if(_e49.delegated){delete _e49.delegated;}_e49.toStandFrame();}},removeDataDependencyConnsWhenChangingVersion:function(_e4c,_e4d){var _e4e=this.getDiscardAttributeWhenChangingVersion(_e4c);var _e4f=[];for(var i=0;i<_e4e.length;i++){var _e50=_e11.getDataDependsOnComponentIDs(this.properties[_e4e[i]]);if(_e50&&_e50.length>0){for(var j=0;j<_e50.length;j++){for(var k=0;k<this.outgoingConnections.length;k++){if(this.outgoingConnections[k].metadata.id===_e13.DATA_DEPENDS_LINK&&this.outgoingConnections[k].toComponent.id===_e50[j]){_e4f.push(this.outgoingConnections[k]);}}}}}_e10.forEach(_e4f,function(conn){var cmd=new _e14(conn);cmd.execute();});var _e51=this.getDiscardOutputWhenChangingVersion(_e4d);for(var i=0;i<this.incomingConnections.length;i++){if(this.incomingConnections[i].metadata.id===_e13.DATA_DEPENDS_LINK){var _e52=this.incomingConnections[i].fromComponent;var _e53=_e52.properties;for(var key in _e53){for(var j=0;j<_e51.length;j++){if(Util.stringContainContent(_e53[key],this.id+"."+_e51[j].id)){_e52.setPropertyDefaultValue(key);}}}}}},getDiscardAttributeWhenChangingVersion:function(_e54){var _e55=[];for(var key in this.properties){if(!_e54.hasOwnProperty(key)){_e55.push(key);}}return _e55;},getDiscardOutputWhenChangingVersion:function(_e56){var _e57=[];var _e58=this.metadata.outputs;for(var i=0;i<_e58.length;i++){var _e59=false;for(var j=0;j<_e56.length;j++){if(_e58[i].id===_e56[j].id){_e59=true;break;}}if(!_e59){_e57.push(_e58[i]);}}return _e57;},setPropertyDefaultValue:function(_e5a){if(!this.propertiesWidget){this.createPropertiesWidget();}var _e5b=this.propertiesWidget.realPropWidget?this.propertiesWidget.realPropWidget:this.propertiesWidget;_e5b.setPropertyDefaultValue(_e5a);},addInputIcon:function(len,_e5c,mode){this.componentFrame.addInputIcon(len,_e5c,mode);},addOutputIcon:function(len,_e5d,mode){this.componentFrame.addOutputIcon(len,_e5d,mode);},updateInputIcon:function(len,_e5e,mode){this.componentFrame.updateInputIcon(len,_e5e,mode);},updateOutputIcon:function(len,_e5f,mode){this.componentFrame.updateOutputIcon(len,_e5f,mode);},removeIcon:function(_e60){this.componentFrame.removeIcon(_e60);},getSubComponentTypes:function(){var _e61=[];_e10.forEach(this.incomingConnections,function(conn){if(conn.isSubComponentLink()){_e61.push(conn.getSourceComponent().getType());}});return _e61;},getLatestAddSubComponentByType:function(_e62){for(var i=0;i<this.incomingConnections.length;i++){var conn=this.incomingConnections[i];if(conn.isSubComponentLink()&&conn.getSourceComponent().getType()===_e62){return conn.getSourceComponent();}}return null;},getDataDependsIncomingConnectionsIncludeSubComponents:function(){var _e63=[];var self=this;_e10.forEach(this.incomingConnections,function(conn){if(conn.metadata.id===_e13.DATA_DEPENDS_LINK){var _e64=_e11.findHostedOnTarget(conn.source.outgoingConnections);var _e65=_e11.findHostedOnTarget(conn.target.outgoingConnections);_e63.push({source:_e64?_e64:conn.source,target:_e65?_e65:conn.target});}else{if(conn.metadata.id===_e13.HOSTED_ON_LINK){_e63=_e63.concat(self.getDataDependsIncomingConnectionsIncludeSubComponents.call(conn.source));}}});return _e63;},getDataDependsOutgoingConnectionsIncludeSubComponents:function(){var _e66=[];var self=this;_e10.forEach(this.outgoingConnections,function(conn){if(conn.metadata.id===_e13.DATA_DEPENDS_LINK){var _e67=_e11.findHostedOnTarget(conn.source.outgoingConnections);var _e68=_e11.findHostedOnTarget(conn.target.outgoingConnections);_e66.push({source:_e67?_e67:conn.source,target:_e68?_e68:conn.target});}});_e10.forEach(this.incomingConnections,function(conn){if(conn.metadata.id===_e13.HOSTED_ON_LINK){_e66=_e66.concat(self.getDataDependsOutgoingConnectionsIncludeSubComponents.call(conn.source));}});return _e66;},getDataDependsOnConnByTarget:function(_e69){var _e6a=this.outgoingConnections;for(var i=0;i<_e6a.length;i++){if(_e6a[i].target===_e69){return _e6a[i];}}return null;},addStartsAfterByCompId:function(_e6b){if(!this.startsAfter){this.startsAfter=[];}var _e6c=this.startsAfter;for(var i=0;i<_e6c.length;i++){if(_e6c[i].id==_e6b){return;}}this.startsAfter.push({type:_e16.STARTSAFTER_TYPE_ORDERING,id:_e6b});},removeStartsAfterByCompId:function(_e6d){var _e6e=this.startsAfter;if(!_e6e){return;}var _e6f=-1;for(var i=0;i<_e6e.length;i++){if(_e6e[i].id==_e6d){_e6f=i;break;}}if(_e6f>-1){_e6e.splice(_e6f,1);}if(_e6e.length==0){delete this.startsAfter;}},updateDataDependsReferences:function(_e70,_e71){var _e72=null;if(this.incomingConnections){dojo.forEach(this.incomingConnections,function(_e73){if(_e73.type==paas.common.constants.DATA_DEPENDS_LINK){var _e74=_e73.fromComponent;dojo.forEach(_e74.metadata.attributes,function(attr){var val=_e74.properties[attr.id];if(val&&Util.stringContainContent(val,"${"+_e70+".")){var _e75=val.replace(_e70,_e71);var _e76=new _e15(_e74,attr.id,val,_e75);if(!_e72){_e72=new _e17();}_e72.add(_e76);}});}});}if(_e72){_e72.execute();}},isDataDependsOn:function(_e77){var _e78=this.outgoingConnections;for(var i=0;i<_e78.length;i++){if(_e78[i].type===_e13.DATA_DEPENDS_LINK&&_e78[i].target===_e77){return true;}}return false;},displayDDConnections:function(_e79){var _e7a=this.incomingConnections.concat(this.outgoingConnections);var self=this;_e10.forEach(_e7a,function(conn){if(conn.type===_e13.DATA_DEPENDS_LINK&&conn.connectionFrame){var _e7b=(conn.source==self)?conn.target:conn.source;var _e7c=_e7b.componentFrame;var _e7d=(_e19.get(_e7c.domNode.parentNode,"display")=="none")?false:true;var _e7e=_e7d&&_e79;conn.connectionFrame.display&&conn.connectionFrame.display(_e7e);if(_e7e){conn.connectionFrame.paint();}}});}});});},"builder/command/ChangeVersionCommand":function(){define(["dojo/_base/declare","dojo/_base/array","builder/base/command/Command","builder/util/Util","builder/vsys/util/VSysUtil"],function(_e7f,_e80,_e81,Util,_e82){return _e7f("builder.command.ChangeVersionCommand",[_e81],{newType:null,oldType:null,properties:null,componentId:null,constructor:function(_e83,_e84){this.newType=_e84;this.oldType=_e83.getType();this.componentId=_e83.getId();this.properties=dojo.clone(_e83.getProperties());},execute:function(){var _e85=Util.getMetadataService().getComponentMetadata(this.newType);var _e86=_e85.attributes;var _e87=_e85.outputs;var _e88={};_e80.forEach(_e86,function(_e89){var _e8a=_e89.id;if(this.properties[_e8a]!=null){_e88[_e8a]=this.properties[_e8a];}else{if(_e89.sampleValue!=null){_e88[_e8a]=_e89.sampleValue;}}},this);var _e8b=builder.Environment.diagram.getComponentById(this.componentId);_e8b.removeDataDependencyConnsWhenChangingVersion(_e88,_e87);this._changeComponetType(this.newType,_e88);var _e8c=_e82.findContainerComponent(_e8b);if(_e8c){var _e8d=_e8c.id;var _e8e=_e8c.getAttachedPolicies();if(_e8e){_e80.some(_e8e,function(_e8f){if(_e8f.id!==this.componentId&&_e8f.metadata.name==="MAINTENANCE"){_e8f.rebuildPropertiesWidget();_e8f.showPropertiesWidget();return true;}else{return false;}},this);_e8b.showPropertiesWidget();}}},undo:function(){this._changeComponetType(this.oldType,this.properties);},_changeComponetType:function(type,_e90){var _e91=Util.getMetadataService().getComponentMetadata(type);var _e92=builder.Environment.diagram.getComponentById(this.componentId);_e92.setMetadata(_e91);if(_e90!=null){_e92.properties=dojo.clone(_e90);}this._updateVersionComboboxValue(_e92,_e91);_e92.removePropertiesWidget();_e92.showPropertiesWidget();_e92.componentFrame.updateAddPolicyButton();dojo.publish("onDiagramChanged");},_updateVersionComboboxValue:function(_e93,_e94){_e93.componentFrame.updateComboboxValue(_e94.id);},canExecute:function(){if(this.newType==null||this.oldType==this.newType){return false;}return this.inherited(arguments);}});});},"builder/workbench/orderView/DeleteOrderConnectionCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","dojo/topic","dojo/_base/lang"],function(_e95,_e96,_e97,lang){return _e95("builder.workbench.orderView.DeleteOrderConnectionCommand",[_e96],{constructor:function(_e98){this.connection=_e98;this.fromComponent=_e98.fromComponent;this.toComponent=_e98.toComponent;this.fromComponentId=this.fromComponent.id;this.toComponentId=this.toComponent.id;this.fromOrderFrame=this.fromComponent.orderFrame;this.toOrderFrame=this.toComponent.orderFrame;this.xShift=this.calculateXShift();require(["builder/workbench/orderView/OrderConnectionCommandMixin"],lang.hitch(this,function(_e99){lang.mixin(this,new _e99());}));},calculateXShift:function(){var _e9a=this.toOrderFrame.x-this.toOrderFrame.frameSpace;var _e9b=this.toOrderFrame.flowInConnections;for(var i=0;i<_e9b.length;i++){var _e9c=_e9b[i].fromComponent.orderFrame;var _e9d=this.toOrderFrame.x-_e9c.x;if(_e9d<_e9a){_e9a=_e9d;}}return _e9a;},execute:function(){this._removeDependencyConnection();this._restoreTargetPosition();_e97.publish("onOrderingChanged");},undo:function(){this._changeTargetPosition();this._addDependencyConnection();this._disableUselessDependencyConnection();_e97.publish("onOrderingChanged");},reexecute:function(){this.connection.remove();this._restoreTargetPosition();}});});},"builder/workbench/property/RadioGroup":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/RadioGroup.html"],function(_e9e,_e9f,_ea0,_ea1,_ea2){return _e9e("builder.workbench.property.RadioGroup",[_e9f,_ea0,_ea1],{templateString:_ea2,name:null,data:null,radioContainer:null,radioButtons:null,value:null,postCreate:function(){this.radioButtons=[];this.createRadios();},createRadios:function(){var self=this;dojo.forEach(this.data,function(item){if(item){var _ea3=dojo.create("tr");_ea3.style.paddingTop="3px";self.radioContainer.appendChild(_ea3);var _ea4=dojo.create("td");_ea4.style.verticalAlign="top";_ea4.style.width="20px";_ea3.appendChild(_ea4);var _ea5=new dijit.form.RadioButton({value:item.value,name:self.name,checked:item["default"]});_ea4.appendChild(_ea5.domNode);var _ea6=dojo.create("td",{innerHTML:"<label for='"+_ea5.id+"'>"+item.name+"</label>"});self.createTooltip(_ea5.value,_ea6);_ea3.appendChild(_ea6);self.radioButtons.push(_ea5);dojo.connect(_ea5,"onChange",_ea5,function(){if(this.checked){self.onChange();}});}});},createTooltip:function(_ea7,_ea8){},set:function(name,_ea9){var self=this;if(name=="value"){if(_ea9==null){return;}dojo.forEach(this.radioButtons,function(_eaa){if(_eaa.value==_ea9){_eaa.set("checked",true);self.value=_ea9;}else{_eaa.set("checked",false);}});if(!this.isValid()&&this.radioButtons[0]){this.radioButtons[0].set("checked",true);self.value=this.radioButtons[0].value;}}else{if(name=="disabled"){dojo.forEach(this.radioButtons,function(_eab){_eab.set("disabled",_ea9);});this.inherited(arguments);}else{this.inherited(arguments);}}},onChange:function(){var self=this;dojo.forEach(this.radioButtons,function(_eac){if(_eac.checked){self.value=_eac.value;}});},isValid:function(){for(var i=0;i<this.data.length;i++){if(this.data[i].value==this.value){return true;}}return false;}});});},"paas/widgets/GridExt":function(){define(["dojo/_base/declare","dojox/grid/DataGrid","dojox/widget/Standby"],function(_ead,_eae,_eaf){return _ead("paas.widgets.GridExt",[_eae],{updateRowCount:function(_eb0){if(_eb0>0){this.inherited(arguments);}},postCreate:function(){this.inherited(arguments);this.standby=new _eaf({target:this.domNode});document.body.appendChild(this.standby.domNode);this.standby.startup();},_refresh:function(_eb1){this.loadingMessage="";this.inherited(arguments);},filter:function(_eb2,_eb3){this.loadingMessage="";this.inherited(arguments);},_onFetchError:function(size,req){if(this.standby){this.standby.hide();}if(this.showMessagebak){this.showMessage=this.showMessagebak;}this.inherited(arguments);},_onFetchBegin:function(size,req){if(this.rowCount!=size){this._by_idx=this._by_idx.slice(0,size);}if(!this.scroller){return;}if(this.standby){this.standby.hide();}if(this.showMessagebak){this.showMessage=this.showMessagebak;}this.inherited(arguments);if(size==0){this.rowCount=0;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(size);}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop);}}},_updateItem:function(_eb4,_eb5,_eb6){if(this.previous_by_idx!=null&&this.previous_by_idx.length>_eb4){var idty=this._hasIdentity?this.store.getIdentity(_eb5):dojo.toJson(this.query)+":idx:"+_eb4+":sort:"+dojo.toJson(this.getSortProps());var _eb7=this.previous_by_idx[_eb4];if(_eb7!=null&&_eb7.idty==idty){var _eb8=true;var _eb9=_eb7.item;if(dojo.some(_eb6,function(_eba){return _eb9[_eba]!=_eb5[_eba];})){_eb8=false;}if(!_eb8){this._by_idx[_eb4]=this._createItem(_eb5,_eb4);this.updateRow(_eb4);}return true;}}return false;},_preItemsHandler:function(_ebb,req){},_onFetchComplete:function(_ebc,req){this._preItemsHandler(_ebc,req);if(!this.scroller){return;}var flag=this.refreshingFlag;this.refreshingFlag=false;if(_ebc&&_ebc.length>0){var _ebd=req.start;var _ebe=_ebc.length;for(var idx=0;idx<_ebe;idx++){var item=_ebc[idx];if(flag&&this.refreshFields!=null&&this.refreshFields.length>0){var _ebf=this._updateItem(_ebd,item,this.refreshFields);if(_ebf){_ebd++;continue;}else{this._by_idx=this._by_idx.slice(0,_ebd);flag=false;}}this._addItem(item,req.start+idx,true);}var _ec0=_ebe+req.start-_ebd;if(_ec0>0){this.updateRows(_ebd,_ec0);}if(req.isRender){this.setScrollTop(0);this.postrender();}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop);}}}else{this._by_idx=[];}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;}this._pending_requests[req.start]=false;},onStyleRow:function(_ec1){if(_ec1.node.style.display=="none"){_ec1.customStyles+="display:none";return;}this.inherited(arguments);},refreshingFlag:false,refresh:function(_ec2,_ec3){if(this.refreshFields!=null&&this.refreshFields.length>0){if(_ec2){this.standby.show();}this.showMessagebak=this.showMessage;this.showMessage=function(){};this.refreshingFlag=true;if(_ec3){this.query=_ec3;}else{this.query=null;}var _ec4=this._by_idx;var self=this;this.previous_by_idx=dojo.map(this._by_idx,function(_ec5){var temp={};temp.item={};temp.idty=_ec5.idty;dojo.forEach(self.refreshFields,function(_ec6){temp.item[_ec6]=_ec5.item[_ec6];});return temp;});this._clearData();this._by_idx=_ec4;this._fetch();}else{this.filter(_ec3,true);}}});});},"paas/widgets/TemplateThumbnail":function(){define(["dojo/_base/declare","dojo/dom-style","dojox/gfx","builder/workbench/editor/Link","builder/util/FileUtil","builder/util/PaintUtil","builder/util/CssUtil","dijit/Tooltip","builder/service/PatternTypeService","dojo/_base/array","paas/common/constants","builder/vsys/util/VSysUtil","dojo/_base/lang"],function(_ec7,_ec8,gfx,Link,_ec9,_eca,_ecb,_ecc,_ecd,_ece,_ecf,_ed0,lang){return _ec7("paas.widgets.TemplateThumbnail",null,{nodes:[],links:[],nodeMetadataMap:{},linkMetadataMap:{},model:null,diagramNode:null,images:{},originalLocations:{},thumbnailLocations:{},width:250,height:200,max_x:0,max_y:0,min_x:2000,min_y:2000,minImageScale:1,minScale:0,maxScale:0.8,image_width:48,image_height:48,backimage_width:80,backimage_height:80,padding:{x:10,y:10},zIndexMax:1,scale:this.maxScale,imageScale:this.maxScale,components:[],connections:[],constructor:function(_ed1,_ed2){if(_ed1){this.diagramNode=_ed1;if(_ed1.clientWidth){this.width=_ed1.clientWidth;}if(_ed1.clientHeight){this.height=_ed1.clientHeight;}}if(_ed2){this.model=_ed2;}var ps=builder.service.PatternTypeService;this.ms=ps.getMetadataServiceByModel(this.model.model);},postCreate:function(){this.resetMinMaxValues();this.loadTemplateModel(this.model);},paintAfterMetadataLoaded:function(){this.resetMinMaxValues();this.loadTemplateModelAsync(this.model);},paint:function(){this.diagramNode.innerHTML="";this.paintComponents(this.diagramNode);var _ed3={};_ed3.surface=dojox.gfx.createSurface(this.diagramNode,this.width,this.height);this.paintConnections(_ed3);this.paintDataDependencyConnections(_ed3);},calculateImageScale:function(){return (this.scale<this.minImageScale)?this.minImageScale:this.scale;},paintComponents:function(_ed4){for(var i=0;i<this.nodes.length;i++){var _ed5=this.ms.getComponentMetadata(this.nodes[i].type);if(!_ed5){dojo.publish("/dashboard/application",[["error","LOAD_METADATA_ERROR",this.nodes[i].type]]);return;}if(_ed5.type=="policy"||(_ed5.applicableTo!=null&&_ed5.applicableTo.length>0)){continue;}var id=this.nodes[i].id;var _ed6=this.calculateThumbnailLocation(this.originalLocations[id]);this.thumbnailLocations[id]=_ed6;var _ed7=document.createElement("div");_ed7.style.left=_ed6.x+"px";_ed7.style.top=_ed6.y+"px";_ed7.style.width=this.backimage_width*this.imageScale+"px";_ed7.style.height=this.backimage_height*this.imageScale+"px";_ed7.style.position="absolute";var _ed8=builder.Environment.messages.IMAGE_ALT||"";_ed4.appendChild(_ed7);var _ed9=document.createElement("div");_ed9.style.position="absolute";_ed9.style.zIndex=++this.zIndexMax;_ed9.style.left=(this.backimage_width-this.image_width)/2*this.imageScale+"px";_ed9.style.top=(this.backimage_height-this.image_height)/2*this.imageScale+"px";_ed9.style.width=this.image_width*this.imageScale+"px";_ed9.style.height=this.image_height*this.imageScale+"px";var _eda=this.images[id]?(builder.util.FileUtil.getComponentIconPath(this.images[id])):"";var _edb={"imgSrc":_eda,"width":this.image_width*this.imageScale,"height":this.image_height*this.imageScale};var _edc="<img src='${imgSrc}' width='${width}' height='${height}' alt="+_ed8+" >";_ed9.innerHTML=dojo.string.substitute(_edc,_edb);_ed7.appendChild(_ed9);var _edd=document.createElement("div");_edd.className="firgureFrame_text";var n=id.indexOf(":");var name=(n>=0)?id.substring(n+1):id;_edd.innerHTML=name;_edd.style.width=this.backimage_width*this.imageScale+"px";_edd.style.position="absolute";_edd.style.top=(this.backimage_height+this.image_height)/2*this.imageScale+"px";_ed7.appendChild(_edd);this.components.push({"id":id,"type":this.nodes[i].type,"frame":_ed7});}this.registerEvents();},registerEvents:function(){dojo.forEach(this.components,function(_ede){dojo.connect(_ede.frame,"onmouseover",this,function(evt){dijit.showTooltip(this._getTooltipInfo(_ede),_ede.frame,["below"]);});},this);dojo.forEach(this.components,function(_edf){dojo.connect(_edf.frame,"onmouseout",function(evt){dijit.hideTooltip(_edf.frame);});});},_getTooltipInfo:function(_ee0){var _ee1=this._getSubComponentInfoString(paas.Base.messages.APPMODEL_VSYSNEXT_CATEGORY_POLICIES,this.policyMap[_ee0.id]);var _ee2="<div class='thumbnailComponentShortName'>"+_ee1+"</div>";return _ee2;},_getSubComponentInfoString:function(type,_ee3){var _ee4="";if(_ee3&&_ee3.length>0){_ece.forEach(_ee3,function(_ee5){var info="<div style='padding-left: 10px;'>- "+_ee5+"</div>";_ee4+=info;});}if(_ee4.length>0){_ee4="<span style='font-weight: bold;'>"+type+": </span>"+_ee4;}else{_ee4="<span style='font-weight: bold;'>"+type+": </span><div style='padding-left: 10px;'>"+paas.Base.messages.NONE_DISPLAY+"</div>";}return _ee4;},_paintConnection:function(_ee6,_ee7){var _ee8=this.thumbnailLocations[_ee7.source];if(!_ee8){return;}var _ee9={x:_ee8.x+(this.backimage_width-this.image_width)/2,y:_ee8.y+(this.backimage_height-this.image_height)/2,w:this.image_width*this.imageScale,h:this.image_height*this.imageScale};var _eea=this.thumbnailLocations[_ee7.target];if(!_eea){return;}var _eeb={x:_eea.x+(this.backimage_width-this.image_width)/2,y:_eea.y+(this.backimage_height-this.image_height)/2,w:this.image_width*this.imageScale,h:this.image_height*this.imageScale};var _eec=builder.util.CssUtil.getDefaultLinkStyle();_eec.width=1;_eec.dasharray="5,2";var link=new builder.workbench.editor.Link(_ee6,_eec);var _eed={"arrowLen":5,"arrowHeight":5,"arrowGap":3};builder.util.PaintUtil.setArrowStyle(_eed);var _eee=this.calculateLinkPosition(_eed.arrowLen,_ee9,_eeb);link.setStyle(this.getLinkStyle(_ee7.type));link.paint(_eee.outportPos,_eee.inportPos,false,_eee.mode,false);return link;},paintConnections:function(_eef){for(var i=0;i<this.links.length;i++){var _ef0=this.ms.getConnectionMetadataByType(this.links[i].type);if(!_ef0){dojo.publish("/dashboard",[["error","LOAD_METADATA_ERROR",this.links[i].type]]);return;}if(_ef0.type=="policyLink"||_ef0.id=="HostedOnLink"){continue;}var link=this._paintConnection(_eef,this.links[i]);this.connections.push({id:this.links[i].id,link:link,type:this.links[i].type,source:this.links[i].source,target:this.links[i].target});}},paintDataDependencyConnections:function(_ef1){this.dataDependencyLinks=[];for(var i=0;i<this.nodes.length;i++){var node=this.nodes[i];for(var attr in node.attributes){if(_ed0.isDataDependsOnValue(node.attributes[attr])){var _ef2=node.id;var _ef3=_ed0.getDataDependsOnComponentIDs(node.attributes[attr]);if(_ef3&&_ef3.length>0){for(var j=0;j<_ef3.length;j++){var _ef4=false;for(var k=0;k<this.dataDependencyLinks.length;k++){if(this.dataDependencyLinks[k].source==_ef2&&this.dataDependencyLinks[k].target==_ef3[j]){_ef4=true;break;}}if(!_ef4){this.dataDependencyLinks.push({"source":_ef2,"target":_ef3[j]});}}}}}}_ece.forEach(this.dataDependencyLinks,lang.hitch(this,function(link){this._paintConnection(_ef1,link);}));},getLinkStyle:function(type){if(!type){return {};}var _ef5=this.ms.getConnectionMetadataByType(type);var _ef6=builder.util.CssUtil.getLinkStyleByConnectonType(_ef5.type);return _ef6;},calculateLinkPosition:function(_ef7,_ef8,_ef9){var _efa={};var len=3*_ef7;if((_ef8.x+_ef8.w<_ef9.x-len)||((_ef8.x+_ef8.w<_ef9.x)&&(_ef9.y>_ef8.y-_ef9.h-len)&&(_ef9.y<_ef8.y+_ef8.h+len))){_efa.mode=1;}else{if((_ef8.x-len>_ef9.x+_ef9.w)||((_ef8.x>_ef9.x+_ef9.w)&&(_ef9.y>_ef8.y-_ef9.h-len)&&(_ef9.y<_ef8.y+_ef8.h+len))){_efa.mode=2;}else{if(_ef8.y-len>_ef9.y+_ef9.h){_efa.mode=3;}else{_efa.mode=4;}}}switch(_efa.mode){case 1:_efa.outportPos=this.getRightPosition(_ef8);_efa.inportPos=this.getLeftPosition(_ef9);break;case 2:_efa.outportPos=this.getLeftPosition(_ef8);_efa.inportPos=this.getRightPosition(_ef9);break;case 3:_efa.outportPos=this.getTopPosition(_ef8);_efa.inportPos=this.getBottomPosition(_ef9);break;case 4:_efa.outportPos=this.getBottomPosition(_ef8);_efa.inportPos=this.getTopPosition(_ef9);break;}return _efa;},getRightPosition:function(box){var _efb={};_efb.x=box.x+box.w+2;_efb.y=box.y+box.h/2;return _efb;},getLeftPosition:function(box){var _efc={};_efc.x=box.x-2;_efc.y=box.y+box.h/2;return _efc;},getBottomPosition:function(box){var _efd={};_efd.y=box.y+box.h+2;_efd.x=box.x+box.w/2;return _efd;},getTopPosition:function(box){var _efe={};_efe.y=box.y-2;_efe.x=box.x+box.w/2;return _efe;},calculateThumbnailLocation:function(_eff){var _f00={x:0,y:0};if(_eff){_f00={x:_eff.x,y:_eff.y};}_f00.x=Math.round((this.width-this.padding.x*2)/2+(_f00.x-(this.max_x-this.min_x+this.backimage_width)/2-this.min_x)*this.scale)+this.padding.x;_f00.y=Math.round((this.height-this.padding.y*2)/2+(_f00.y-(this.max_y-this.min_y+this.backimage_height)/2-this.min_y)*this.scale)+this.padding.y;return _f00;},loadTemplateModelAsync:function(_f01){this.diagramNode.innerHTML="<div style=\"padding-top: 50px;\" align=\"center\"><span class=\"wca-image-progress-indicator-large-icon\" style=\"display:inline-block\"></span></div>";var _f02=this.ms.loadMetadata(true);var self=this;if(_f02.addCallback){_f02.addCallback(function(){self.loadTemplateModel(_f01);});}else{self.loadTemplateModel(_f01);}},loadTemplateModel:function(_f03){this.loadConnection(_f03);this.loadFigurePosition(_f03.tooling);this.loadComponents(_f03);this.loadSubComponents();this.scale=this.calculateScale();this.imageScale=this.calculateImageScale();this.calculateThumbnailAreaSize();this.paint();},loadComponents:function(data){if(!data.model.nodes){return;}this.nodes=data.model.nodes;for(var i=0;i<this.nodes.length;i++){var _f04=this.nodes[i];var _f05=this.ms.getComponentMetadata(_f04.type);if(!_f05){dojo.publish("/dashboard",[["error","LOAD_METADATA_ERROR",_f04.type]]);break;}this.images[_f04.id]=_f05.image;this.nodeMetadataMap[_f04.id]=_f05;}},loadSubComponents:function(){if(!this.links){return;}this.policyMap={};var self=this;_ece.forEach(this.links,function(link){if(self.linkMetadataMap[link.id].type===_ecf.POLICY_LINK){var _f06=self.nodeMetadataMap[link.source];if(!self.policyMap[link.target]){self.policyMap[link.target]=[];}self.policyMap[link.target].push(_f06.label||_f06.displayId);}});},getBackgroundImage:function(type){var _f07=this.ms.getComponentMetadata(type);return builder.util.CssUtil.getThumbnailBakImageByType(_f07.type);},loadConnection:function(data){if(!data.model.links){return;}this.links=data.model.links;for(var i=0;i<this.links.length;i++){var _f08=this.links[i];var _f09=this.ms.getConnectionMetadataByType(_f08.type);if(!_f09){dojo.publish("/dashboard",[["error","LOAD_METADATA_ERROR",_f08.type]]);break;}this.linkMetadataMap[_f08.id]=_f09;}},loadFigurePosition:function(data){if(!data){return;}var _f0a=data.nodes;this.originalLocations={};if(_f0a){for(var i=0;i<_f0a.length;i++){var id=_f0a[i].id;var _f0b={x:0,y:0};_f0b.x=_f0a[i].location.x.substr(0,_f0a[i].location.x.indexOf("px"));_f0b.y=_f0a[i].location.y.substr(0,_f0a[i].location.y.indexOf("px"));this.originalLocations[id]=_f0b;this.updateMinMaxValues(_f0b);}}},updateMinMaxValues:function(_f0c){this.min_x=Math.min(_f0c.x,this.min_x);this.min_y=Math.min(_f0c.y,this.min_y);this.max_x=Math.max(_f0c.x,this.max_x);this.max_y=Math.max(_f0c.y,this.max_y);},resetMinMaxValues:function(){this.min_x=2000;this.min_y=2000;this.max_x=0;this.max_y=0;},calculateScale:function(){var _f0d=(this.height-this.padding.y*2)/(this.max_y-this.min_y+this.backimage_height);_f0d=(_f0d>this.maxScale)?this.maxScale:_f0d;_f0d=(_f0d<this.minScale)?this.minScale:_f0d;var _f0e=(this.width-this.padding.x*2)/(this.max_x-this.min_x+this.backimage_width);_f0e=(_f0e>this.maxScale)?this.maxScale:_f0e;_f0e=(_f0e<this.minScale)?this.minScale:_f0e;return (_f0d<_f0e)?_f0d:_f0e;},calculateThumbnailAreaSize:function(){var maxX=0;var maxY=0;var minX=2000;var minY=2000;for(var key in this.originalLocations){var _f0f=parseFloat(this.originalLocations[key].x);var _f10=parseFloat(this.originalLocations[key].y);if(_f0f>maxX){maxX=_f0f;}if(_f0f<minX){minX=_f0f;}if(_f10>maxY){maxY=_f10;}if(_f10<minY){minY=_f10;}}var _f11=Math.ceil(this.padding.x*2+(maxX-minX)*this.scale+this.backimage_width);var _f12=Math.ceil(this.padding.y*2+(maxY-minY)*this.scale+this.backimage_height);if(_f11>this.width){this.width=_f11;_ec8.set(this.diagramNode,"width",this.width+"px");}if(_f12>this.height){this.height=_f12;_ec8.set(this.diagramNode,"height",this.height+"px");}}});});},"builder/workbench/SaveDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/SaveDialog.html","dijit/Dialog","dijit/form/TextBox","dijit/form/Textarea","dijit/form/Button","dijit/form/CheckBox","paas/widgets/ValidationTextBox","paas/widgets/ValidationSimpleTextAreaExt"],function(_f13,_f14,_f15,_f16,_f17){return _f13("builder.workbench.SaveDialog",[_f14,_f15,_f16],{templateString:_f17,focusNode:null,saveBtnHandler:null,postCreate:function(){this.inherited(arguments);this.modelName.set("invalidMessage",builder.Environment.messages.CONTAINER_PROP_METADATA_NAME_INVALID_LABEL);dojo.connect(this.cancelBtn,"onClick",this,"cancel");},setDefaultValue:function(_f18){if(builder.Environment.diagram&&builder.Environment.diagram.patterntype!="vsys"){dojo.destroy(this.versionLabelTr);dojo.destroy(this.versionTr);}this.modelName.set("value",builder.Environment.diagram.getName()?builder.Environment.diagram.getName():builder.Environment.messages.APPMODEL_DEFAULT_NAME);if(builder.Environment.diagram&&builder.Environment.diagram.patterntype=="vsys"){this.modelVersion.set("value",builder.Environment.diagram.getPatternVersion()?builder.Environment.diagram.getPatternVersion():builder.Environment.messages.APPMODEL_DEFAULT_VERSION);}this.description.set("value",builder.Environment.diagram.getDescription()?builder.Environment.diagram.getDescription():"");this.saveAsTemplate.set("checked",_f18=="template");},changeFocus:function(){if(this.focusNode){this.focusNode.focus();}},cancel:function(){this.hide();},setDialogTitle:function(_f19){this.theDialog.titleNode.innerHTML=_f19;},constructor:function(){this.dialogtitle=builder.Environment.messages.BUILDER_EDITOR_SAVEDIALOG_TITLE;this.dialogname=dojo.string.substitute(builder.Environment.messages.LABEL_WITHCOLON,[builder.Environment.messages.BUILDER_EDITOR_SAVEDIALOG_NAME]);this.dialogVersion=dojo.string.substitute(builder.Environment.messages.LABEL_WITHCOLON,[builder.Environment.messages.VERSION]);this.dialogdescription=dojo.string.substitute(builder.Environment.messages.LABEL_WITHCOLON,[builder.Environment.messages.BUILDER_EDITOR_SAVEDIALOG_DESCRIPTION]);this.dialogsaveastemplate=builder.Environment.messages.BUILDER_EDITOR_SAVEDIALOG_SAVEASTEMPLATE;this.dialogok=builder.Environment.messages.BUILDER_EDITOR_SAVEDIALOG_OK;this.dialogcancel=builder.Environment.messages.BUILDER_EDITOR_SAVEDIALOG_CANCEL;},registerSaveBtn:function(_f1a){if(this.saveBtnHandler!=null){this.unregisterSaveBtn();}this.saveBtnHandler=dojo.connect(this.saveBtn,"onClick",this,_f1a);dojo.connect(this.modelName,"onKeyDown",this,function(evt){if(evt.keyCode==dojo.keys.ENTER&&this.theDialog.open){this.saveBtn.focus();}});},unregisterSaveBtn:function(){dojo.disconnect(this.saveBtnHandler);this.saveBtnHandler=null;},checkValidation:function(){if(!this.modelName.isValid()){this.modelName.focus();return false;}if(builder.Environment.diagram&&builder.Environment.diagram.patterntype=="vsys"){if(!this.modelVersion.isValid()){this.modelVersion.focus();return false;}}if(!this.description.isValid()){this.description.focus();return false;}return true;},hide:function(){this.unregisterSaveBtn();this.theDialog.hide();},saveAs:function(){if(this.checkValidation()===false){return;}var _f1b=this.modelName.value;var _f1c=this.modelVersion.value;var _f1d=this.description.value;var _f1e=this.saveAsTemplate.get("checked");if(builder.Environment.diagram.appId){if(builder.Environment.diagram.patterntype=="vsys"){builder.Environment.modelService.saveAsWithVersion(_f1b,_f1c,_f1d,_f1e);}else{builder.Environment.modelService.saveAs(_f1b,_f1d,_f1e);}}else{if(builder.Environment.diagram.patterntype=="vsys"){builder.Environment.modelService.createWithVersion(_f1b,_f1c,_f1d,_f1e);}else{builder.Environment.modelService.create(_f1b,_f1d,_f1e);}}this.hide();},save:function(){if(this.checkValidation()===false){return;}var _f1f=this.modelName.value;var _f20=this.description.value;var _f21=this.saveAsTemplate.get("checked");this.hide();if(builder.Environment.diagram.appId){builder.Environment.modelService.prepareSave(_f1f,_f20,_f21);}else{builder.Environment.modelService.create(_f1f,_f20,_f21);}},resetValue:function(_f22){this.modelName.set("value","");if(builder.Environment.diagram&&builder.Environment.diagram.patterntype=="vsys"){this.modelVersion.set("value","1.0");}this.description.set("value","");this.saveAsTemplate.set("checked",_f22=="template");},show:function(_f23,_f24){this.setDialogTitle(_f23);this.registerSaveBtn(_f24);this.theDialog.show();},showMsg:function(msg){this.msgBox.innerHTML=msg;this.msgBox.style.display="";},hideMsg:function(){this.msgBox.style.display="none";}});});},"builder/vsys/workbench/editor/RoutingPolicyPropertyWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/RoutingPolicyPropertyWidget.html","builder/vsys/workbench/editor/RoutingPolicyItemWidget","dojo/topic","dojo/_base/array","dojo/dom-construct","dojo/_base/lang","dojo/on","builder/vsys/command/ChangeRoutingPolicyPropertyCommand","builder/command/ChangePropertyCommand"],function(_f25,_f26,_f27,_f28,_f29,_f2a,_f2b,_f2c,_f2d,lang,on,_f2e,_f2f){return _f25("builder.vsys.workbench.editor.RoutingPolicyPropertyWidget",[_f26,_f27,_f28],{templateString:_f29,handles:null,items:null,model:null,metadata:null,properties:null,ADD_ENDPOINT:paas.Base.messages.ROUTING_POLICY_ADD_ENDPOINT,postCreate:function(){this.inherited(arguments);this.handles=[];this.items=[];this.handles.push(_f2b.subscribe("routingPolicyConfiguration/propertyChange",lang.hitch(this,this.updateModel)));this.handles.push(_f2b.subscribe("routingPolicyConfiguration/repaintWidget",lang.hitch(this,this.repaint)));this.handles.push(_f2b.subscribe("routingPolicyConfiguration/subscribeChangeEvent",lang.hitch(this,this.subscribeChangeEvent)));this.handles.push(_f2b.subscribe("routingPolicyConfiguration/removeItem",lang.hitch(this,this.removeItem)));this.handles.push(on(this.addButton,"click",lang.hitch(this,this.addItem)));if(!this.properties[this.metadata.id]){this.properties[this.metadata.id]=[];}if(this.properties[this.metadata.id].length===0){this.addDefaultItem();}else{this.paintConfigItems();}},addDefaultItem:function(){var item=this.addItem();item.disableRemoveButton();},addItem:function(){var item=new _f2a({propertyWidget:this,subscribeEvents:true});this.items.push(item);this.routingPolicyPropertyItems.appendChild(item.domNode);this.properties[this.metadata.id].push({endpoint:"http://virtualhost/context_root",port:9080,httpsEnabled:false});return item;},removeItem:function(item){var _f30=this.properties[this.metadata.id];var _f31=-1;for(var i=0;i<this.items.length;i++){if(item===this.items[i]){_f31=i;break;}}this.items.splice(_f31,1);_f2d.destroy(item.domNode);item.destroyRecursive();var _f32=this.getPropertyValue();var cmd=new _f2e(this.model,this.metadata.id,_f30,_f32);if(builder&&builder.Environment&&builder.Environment.commandStack){builder.Environment.commandStack.executeCommand(cmd);}else{cmd.canExecute()&&cmd.execute();}},updateModel:function(_f33){if(_f33===this){var _f34=this.properties[this.metadata.id];var _f35=this.getPropertyValue();var _f36=this.validatePropertyChange();if(_f36){var cmd=new _f2f(this.model,this.metadata.id,_f34,_f35);if(builder&&builder.Environment&&builder.Environment.commandStack){builder.Environment.commandStack.executeCommand(cmd);}else{cmd.canExecute()&&cmd.execute();}}}},getPropertyValue:function(){var _f37=[];_f2c.forEach(this.items,function(item){_f37.push(item.getPropertyValue());});return _f37;},setPropertyValue:function(_f38){for(var i=0;i<this.items.length;i++){if(!_f38[i]){this.items[i].setPropertyValue({});}else{this.items[i].setPropertyValue(_f38[i]);}}},repaint:function(_f39,_f3a){if(this.model.id!=_f39){return;}_f2c.forEach(this.items,function(item){item.destroyRecursive();_f2d.destroy(item.domNode);});this.items=[];this.paintConfigItems(_f3a);},paintConfigItems:function(_f3b){var _f3c=_f3b||this.properties[this.metadata.id];_f2c.forEach(_f3c,lang.hitch(this,function(_f3d){var item=new _f2a({propertyWidget:this});item.setPropertyValue(_f3d);this.items.push(item);this.routingPolicyPropertyItems.appendChild(item.domNode);}));_f2c.forEach(this.items,function(item){item.subscribeChangeEvent();});this.items[0].disableRemoveButton();},subscribeChangeEvent:function(_f3e){if(_f3e===this.model.id){_f2c.forEach(this.items,function(item){item.subscribeChangeEvent();});}},validatePropertyChange:function(_f3f,_f40){for(var i=0;i<this.items.length;i++){if(!this.items[i].isInputValid()){return false;}}return true;},getPropertyByItem:function(item){var _f41=-1;for(var i=0;i<this.items.length;i++){if(this.items[i]===item){_f41=i;break;}}if(_f41<0){return null;}return this.properties[this.metadata.id][_f41]||{};},destroy:function(){_f2c.forEach(this.handles,function(_f42){_f42.remove();});this.inherited(arguments);}});});},"builder/workbench/orderView/OrderController":function(){define(["builder/workbench/orderView/OrderContainer","dojo/topic"],function(_f43,_f44){var _f45={orderContainer:null,displayOrderView:function(){this.clearOrderView();this.clearOrderCommandStack();this.orderContainer=new _f43({diagram:builder.Environment.diagram});builder.Environment.orderViewContainer.appendChild(this.orderContainer.domNode);builder.Environment.orderView=this.orderContainer;this.orderContainer.paintCategoryLinks();this.orderContainer.paintOrderFlow();},clearOrderView:function(){builder.Environment.orderViewContainer.innerHTML="";if(this.orderContainer){this.orderContainer.destroyRecursive();}},clearOrderCommandStack:function(){builder.Environment.orderViewCommandStack.clear();_f44.publish("onOrderingChanged");},resetOrderView:function(){while(builder.Environment.orderViewCommandStack.canUndo()){builder.Environment.orderViewCommandStack.undo();}this.clearOrderCommandStack();}};return _f45;});},"builder/workbench/editor/Help":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/Help.html","dojox/layout/FloatingPane","builder/util/FileUtil","builder/util/Util","builder/util/array","builder/workbench/editor/HelpSmallGroup"],function(_f46,_f47,_f48,_f49,_f4a,_f4b,_f4c,Util,_f4d,_f4e){return _f46("builder.workbench.editor.Help",[_f47,_f48,_f49],{widgetsInTemplate:true,metadata:null,helpURL:null,dimension:{w:750,h:400},templateString:_f4a,constructor:function(){this.infocenterBaseURL=window.globalSetting.infocenterLink+"?topic=";this.helpDialogTitle=builder.Environment.messages.HELP_DIALOG_TITLE;this.errorHelpContent=builder.Environment.messages.ERROR_HELP_CONTENT_TEXT;this.infoCenterTitle=builder.Environment.messages.HELP_INFO_CENTER_TITLE;this.loadingHelpText=builder.Environment.messages.HELP_LOADING_TEXT;this.requiresAttr=builder.Environment.messages.CANVAS_HELP_REQUIRED_ATTRIBUTES;this.groupCategory_header=builder.Environment.messages.CANVAS_HELP_GROUP_CATEGORY_HEADER;this.optionalAttr=builder.Environment.messages.CANVAS_HELP_OPTIONAL_ATTRIBUTES;this.connetionsTitle=builder.Environment.messages.CANVAS_HELP_HEADLINE_CONNECTIONS;this.incomingTitle=builder.Environment.messages.CANVAS_HELP_INCOMING_CONNECTION_TABLE_TITLE;this.incomingName=builder.Environment.messages.CANVAS_HELP_INCOMING_CONNECTION_TABLE_NAME;this.incomingDesc=builder.Environment.messages.CANVAS_HELP_INCOMING_CONNECTION_TABLE_DESCRIPTION;this.incomingProp=builder.Environment.messages.CANVAS_HELP_INCOMING_CONNECTION_TABLE_PROPERTIES;this.outgoingTitle=builder.Environment.messages.CANVAS_HELP_OUTGOING_CONNECTION_TABLE_TITLE;this.outgoingName=builder.Environment.messages.CANVAS_HELP_OUTGOING_CONNECTION_TABLE_NAME;this.outgoingDesc=builder.Environment.messages.CANVAS_HELP_OUTGOING_CONNECTION_TABLE_DESCRIPTION;this.outgoingProp=builder.Environment.messages.CANVAS_HELP_OUTGOING_CONNECTION_TABLE_PROPERTIES;this.componentName=builder.Environment.messages.CANVAS_HELP_OUTGOING_CONNECTION_TABLE_NAME;this.componentDesc=builder.Environment.messages.CANVAS_HELP_OUTGOING_CONNECTION_TABLE_DESCRIPTION;this.applicableComponentsTitle=builder.Environment.messages.CANVAS_HELP_APPLICABLE_COMPONENTS;this.policiesTitle=builder.Environment.messages.PROPERTY_VIEW_POLICY_SECTION_NAME;this.policyName=builder.Environment.messages.CANVAS_HELP_POLICY_NAME;this.policyDesc=builder.Environment.messages.CANVAS_HELP_INCOMING_CONNECTION_TABLE_DESCRIPTION;this.policyProp=builder.Environment.messages.CANVAS_HELP_POLICY_PROPERTIES;this.descAddMessage=builder.Environment.messages.CANVAS_HELP_POLICY_DESCADDMESSAGE;this.commonProperty=builder.Environment.messages.CANVAS_HELP_POLICY_COMMONPROPERTY;this.requiredhint=builder.Environment.messages.CANVAS_HELP_POLICY_REQUIREDHINT;this.ms=builder.util.Util.getMetadataService();},postCreate:function(){this.floatingPane.startup();this.floatingPane.titleNode.style.fontSize="15px";if(this.dimension){var _f4f=this.dimension;}if(this.position){this.position.left=250;this.position.top=100;}this.floatingPane.resize(_f4f);this.floatingPane.bringToTop();var _f50=this.metadata.helpFile;if(_f50&&(_f50!="")){this.helpURL=builder.util.FileUtil.getComponentIconPath(_f50);}dojo.addClass(this.floatingPane.focusNode,"dijitDialogTitleBar");dojo.addClass(this.floatingPane.closeNode,"dijitDialogCloseIcon");this.showHelp();dojo.connect(this.floatingPane,"close",this,function(e){this.destroyRendering(false);dijit.registry.remove(this.id);this._destroyed=true;});dojo.connect(this.floatingPane.domNode,"onkeydown",this,function(e){if(e.keyCode===dojo.keys.ESCAPE){this.remove();}});dojo.connect(this.floatingPane.focusNode,"onclick",this,function(e){this.focus();});},setLocation:function(left,top){var _f51=this.floatingPane._currentState;this.floatingPane.resize(_f51);},remove:function(){this.floatingPane.close();},focus:function(){if(this.floatingPane&&this.floatingPane.domNode){this.floatingPane.focusNode.focus();}},showHelp:function(){var self=this;if(!this.metadata.label){this.errorContent.style.display="";this.helpContent.style.display="none";return;}this.contentTitle.innerHTML=this.metadata.label;this.description.innerHTML=this.metadata.description;this.descAddition.innerHTML="<span class=\"requireShow\">"+this.requiredhint+"&nbsp;</span>"+this.descAddMessage;if(this.metadata.infocenterTopic&&this.metadata.infocenterTopic!==""){this.infocenterLink.style.display="";this.infocenterLink.href=this.infocenterBaseURL+this.metadata.infocenterTopic;}if(this.helpURL&&this.helpURL!==""){self.helpContent.style.display="none";self.startContent.style.display="";this.getCustomizedInfo();}else{this.generateStandardInfo();}this._generateConnectionsTable();},_generatePoliciesTable:function(){if(this.ms.patterntype=="vsys"){this.policies.style.display="none";return;}var _f52=this.ms.getComponentPoliciesByType(this.metadata.id);if(_f52.length==0){this.policies.style.display="none";return;}this.policies.style.display="";dojo.forEach(_f52,dojo.hitch(this,function(_f53){if(!this._checkPolicyIsValid(_f53)){return;}if(builder.Environment.diagram&&builder.Environment.diagram.patterntype!="vsys"&&_f53.name&&_f53.name.indexOf("BaseScalingPolicy")!=-1){return;}this._createComponentItem(this.policiesTable,_f53.label,(_f53.description||""),_f53.attributes||[]);}));},_generateAppliableComponentsTable:function(){this.applicableComponents.style.display="";var _f54=this.metadata.applicableTo;if(_f54.length==0){this._printEmptyRow(this.applicableComponentsTable);return;}dojo.forEach(_f54,dojo.hitch(this,function(_f55){var _f56=this.ms.getComponentMetadata(_f55);if(_f56){this._createComponentItem(this.applicableComponentsTable,_f56.label,_f56.description);}}));},_generateConnectionsTable:function(){if(this.ms.patterntype=="vsys"){this.connections.style.display="none";return;}if(this.metadata.type=="policy"){this._generateAppliableComponentsTable();this.connections.style.display="none";return;}if(this.metadata.type=="component"){this._generatePoliciesTable();this._generateIncomingConnections();this._generateOngoingConnections();return;}this.connections.style.display="none";return;},_generateOngoingConnections:function(){var _f57=this.ms.getComponentOutgoingConnections(this.metadata.id);if(_f57.length==0){this._printEmptyRow(this.outgoingConnectionsTable);return;}var self=this;dojo.forEach(_f57,dojo.hitch(this,function(_f58){if(_f58.type=="policyLink"){return;}dojo.forEach(_f58.target,function(_f59){if(_f59=="*"){self._createComponentItem(self.incomingConnectionsTable,_f59,builder.Environment.messages.HELP_DIALOG_WILDCARD_DESCRIPTION,[]);}else{var _f5a=self.ms.getComponentMetadata(_f59);if(_f5a){self._createComponentItem(self.outgoingConnectionsTable,_f5a.label,_f5a.description,_f58.attributes||[]);}}});}));},_generateIncomingConnections:function(){var _f5b=this.ms.getComponentIncomingConnections(this.metadata.id);if(_f5b.length==0){this._printEmptyRow(this.incomingConnectionsTable);return;}var self=this;dojo.forEach(_f5b,dojo.hitch(this,function(_f5c){if(_f5c.type=="policyLink"){return;}dojo.forEach(_f5c.source,function(_f5d){if(_f5d=="*"){self._createComponentItem(self.incomingConnectionsTable,_f5d,builder.Environment.messages.HELP_DIALOG_WILDCARD_DESCRIPTION,[]);}else{var _f5e=self.ms.getComponentMetadata(_f5d);if(_f5e){self._createComponentItem(self.incomingConnectionsTable,_f5e.label,_f5e.description,_f5c.attributes||[]);}}});}));},getCustomizedInfo:function(){var self=this;var _f5f={url:self.helpURL,load:function(resp,args){self.startContent.style.display="none";self.helpContent.style.display="";self.standardInfo.style.display="none";self.customizedInfo.style.display="";self.customizedInfo.innerHTML=resp;},error:function(type,_f60){self.startContent.style.display="none";self.helpContent.style.display="";self.generateStandardInfo();},handle:function(type,args){if(self.customizedInfo.innerHTML==""){self.startContent.style.display="none";self.helpContent.style.display="";self.generateStandardInfo();}}};setTimeout(function(){},5000);dojo.xhrGet(_f5f);},generateGroupInfo:function(){if(this.metadata.groups==null||this.metadata.groups.length==0){return;}this.groupCategoryContainer.domNode.style.display="";var _f61={};dojo.forEach(this.metadata.groups,dojo.hitch(this,function(_f62){var _f63=_f62.category;if(_f63!=null){_f61[_f63]=_f61[_f63]||[];_f61[_f63].push(_f62);}}));dojo.forEach(this.metadata.groups,dojo.hitch(this,function(_f64){var _f65=_f64.category;if(_f65==null){this._createGroupCategory(_f64.label,[_f64]);}else{if(_f61[_f65]==null||_f61[_f65].length<1){return;}this._createGroupCategory(_f65,_f61[_f65]);_f61[_f65]=null;}}));},_createGroupCategory:function(_f66,_f67){var _f68=dojo.create("div",null,this.groupCategoryContentNode);dojo.style(_f68,"paddingLeft","20px");_f68.innerHTML="<span class=\"boldFont\">"+dojo.string.substitute(builder.Environment.messages.LABEL_WITHCOLON,[builder.Environment.messages.CANVAS_HELP_GROUP_NAME])+"&nbsp;</span><span>"+_f66+"</span>";var div=dojo.create("div",null,this.groupCategoryContentNode);dojo.forEach(_f67,function(_f69){this._createGroupItem(_f69.label,_f69.description,_f69.attributes,div);},this);dojo.create("br",null,this.groupCategoryContentNode);},generateStandardInfo:function(){this.standardInfo.style.display="";this.customizedInfo.style.display="none";var _f6a=[];var _f6b=[];this.attributeMap={};var _f6c=[];dojo.forEach(this.metadata.groups,function(_f6d){_f6c=_f6c.concat(_f6d.attributes);});dojo.forEach(this.metadata.attributes,dojo.hitch(this,function(_f6e){this.attributeMap[_f6e.id]=_f6e;if(builder.util.array.contains(_f6a,_f6e.label)){return;}if(dojo.indexOf(_f6c,_f6e.id)<0){_f6b.push(_f6e);}_f6a.push(_f6e.label);}));dojo.forEach(_f6b,function(_f6f){var _f70=dojo.create("div",null,this.commonPropertyContainer);dojo.style(_f70,"paddingLeft","20px");_f70.innerHTML="<span class=\"requireShow\">"+(_f6f.required?this.requiredhint:"")+"&nbsp;</span><span class=\"boldFont\">"+dojo.string.substitute(builder.Environment.messages.LABEL_WITHCOLON,[_f6f.label])+"&nbsp;</span><span>"+_f6f.description+"</span>";var br=dojo.doc.createElement("br");this.commonPropertyContainer.appendChild(br);},this),this.generateGroupInfo();},_createComponentItem:function(_f71,name,_f72,_f73){var tr=dojo.doc.createElement("tr");var _f74=dojo.doc.createElement("td");_f74.innerHTML=name;tr.appendChild(_f74);var _f75=dojo.doc.createElement("td");_f75.innerHTML=_f72;tr.appendChild(_f75);_f71.appendChild(tr);},_createGroupItem:function(name,_f76,_f77,_f78){var _f79=new builder.workbench.editor.HelpSmallGroup({name:name,description:_f76,attributes:_f77,attributeMap:this.attributeMap});var tr=dojo.create("tr");_f78.appendChild(tr);tr.appendChild(_f79.domNode);},_printEmptyRow:function(_f7a){var tr=dojo.doc.createElement("tr");var td=dojo.doc.createElement("td");dojo.attr(td,{colspan:3,align:"center",style:"padding: 0"});td.innerHTML=builder.Environment.messages.NONE_DISPLAY;tr.appendChild(td);_f7a.appendChild(tr);},_printEmptyAttributes:function(_f7b){var div=dojo.doc.createElement("div");div.className="item";div.innerHTML=builder.Environment.messages.NONE_DISPLAY;_f7b.appendChild(div);},_checkPolicyIsValid:function(_f7c){if(_f7c.applicationPolicy){return false;}return true;}});});},"builder/command/RemovePolicyCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/util/Util","builder/command/ChangePropertyCommand","builder/command/RemoveBaseComponentCommand","builder/vsys/util/VSysUtil"],function(_f7d,_f7e,Util,_f7f,_f80,_f81){return _f7d("builder.command.RemovePolicyCommand",[_f7e],{constructor:function(_f82){this.model=_f82;this.modelId=_f82.id;this.type=_f82.metadata.id;this.properties=_f82.properties;this.groups=_f82.groups;this.visible=_f82.isVisible();if(_f82.layer){this.layerId=_f82.layer.id;}},execute:function(){var self=this;var _f83=builder.Environment.diagram.getComponentById(this.modelId);if(this.attachComponentId){var _f84=builder.Environment.diagram.getComponentById(this.attachComponentId);}else{var _f84=_f81.findContainerComponent(_f83);if(_f84){this.attachComponentId=_f84.id;}}this.compoundCmd=new builder.base.command.CompoundCommand();dojo.forEach(_f83.outgoingConnections,dojo.hitch(this,function(_f85){var cmd=new builder.command.RemoveConnectionCommand(_f85);cmd.forcedRemove(true);this.compoundCmd.add(cmd);}));dojo.forEach(_f83.incomingConnections,dojo.hitch(this,function(_f86){var cmd=new builder.command.RemoveConnectionCommand(_f86);cmd.forcedRemove(true);this.compoundCmd.add(cmd);}));this.compoundCmd.execute();if(_f84&&_f84.componentFrame){_f84.componentFrame.removePolicy(_f83);}if(_f83.layer){_f83.layer.removeComponent(_f83);}_f83.remove();dojo.publish("onDiagramChanged",null);if(_f84){_f84.rePaintComponent();_f84.checkValidation&&_f84.checkValidation();}},undo:function(){var args={id:this.modelId,type:this.type,properties:this.properties,groups:this.groups,loadFromModel:true};var _f87=builder.Environment.diagram.addComponentByType(args);var _f88=builder.Environment.diagram.getLayerById(this.layerId);_f88.addComponent(_f87);var _f89=builder.Environment.diagram.getComponentById(this.attachComponentId);if(_f89){if(_f87.isVisible()&&this.visible){_f89.componentFrame.appendPolicy&&_f89.componentFrame.appendPolicy(_f87);_f89.rePaintComponent();}}try{this.compoundCmd.undo();}catch(ex){}_f89&&_f89.checkValidation&&_f89.checkValidation();builder.Environment.diagram.selectModel(_f87);dojo.publish("onDiagramChanged",null);},canExecute:function(){if(this.model.isReferenced()){dojo.publish("/builder/editor/notification",[["info","REFER_COMPONENT_NOT_REMOVED"]]);return false;}return true;}});});},"paas/widgets/MetaDataDrivenInput":function(){define(["dojo/_base/declare","paas/common/util","dijit/_Widget","dojo/_base/array"],function(_f8a,util,_f8b,_f8c){return _f8a("paas.widgets.MetaDataDrivenInput",[dijit._Widget],{model:null,field_id:null,metadata:null,initMetaData:function(){this.metadata=util.getFieldMetadata(this.model,this.field_id);},startup:function(){_f8c.forEach(dojo.query("label[for="+this.field_id+"]"),dojo.hitch(this,function(_f8d,_f8e){if(this.metadata){var _f8f="";if(this.metadata.label){_f8f=this.metadata.label+":";}if(this.metadata.required){_f8f+="<span style=\"color: red;\">*</span>";}_f8d.innerHTML=_f8f;}}));}});});},"builder/util/CapabilityUtil":function(){define(["dojo/_base/lang","dojo/_base/array"],function(lang,_f90){var _f91=lang.getObject("builder",true);var _f92=lang.getObject("util.CapabilityUtil",true,_f91);_f92=_f91.util.CapabilityUtil={matchExceptionList:["disk","cpu","memory","placement"],merge:function(_f93,_f94){if(!_f93&&!_f94){return null;}if(!_f93){return _f94;}if(typeof (_f93)==="object"&&typeof (_f94)==="object"){return this._mapMerge(_f93,_f94);}if(_f93 instanceof Array&&_f93.length>0){var _f95=_f93[0];for(var i=1;i<_f93.length;i++){_f95=this._mapMerge(_f95,_f93[i]);}return _f95;}return _f93;},_mapMerge:function(a,b){var _f96=dojo.clone(a);for(var item in b){if(b[item]==null){continue;}if(_f96[item]!=null){_f96[item]=this._valueMerge(_f96[item],b[item]);}else{_f96[item]=dojo.clone(b[item]);}}return _f96;},_convertToArray:function(a){if(typeof (a)==="string"){return [a];}return a;},_valueMerge:function(a,b){var a=this._convertToArray(a);var b=this._convertToArray(b);if(a instanceof Array&&b instanceof Array){return this._listMerge(a,b);}if(typeof (a)==="object"&&typeof (b)==="object"){return this._mapMerge(a,b);}if(typeof (a)==="boolean"&&typeof (b)==="boolean"){return this._booleanMerge(a,b);}console.error("The two types of value are not not supported yet. provides a: "+a+" provides b: "+b);return [a,b];},_booleanMerge:function(a,b){return a||b;},_listMerge:function(a,b){var _f97=dojo.clone(a);var dup=false;for(var i=0;i<b.length;i++){dup=false;for(var j=0;j<a.length;j++){if(b[i]==a[j]){dup=true;break;}}if(!dup){_f97.push(dojo.clone(b[i]));}}var _f98=[];dojo.forEach(_f97,function(item){if(typeof (item)==="string"&&item.indexOf("~")===0){_f98.push(item);}});dojo.forEach(_f98,function(_f99){var _f9a=_f99.substr(1,_f99.length);while(_f90.indexOf(_f97,_f9a)>-1){var _f9b=_f90.indexOf(_f97,_f9a);_f97.splice(_f9b,1);}});return _f97;},matches:function(_f9c,_f9d){if(_f9c==null){return _f9d;}if(_f9d==null){return null;}var _f9e=null;for(var item in _f9d){if(_f9d.hasOwnProperty(item)){if(_f9d[item]==null){continue;}if((_f9c[item]==null&&dojo.indexOf(this.matchExceptionList,item)==-1)||(_f9c[item]!=null&&!this._valueMatches(_f9c[item],_f9d[item],_f9c[item]))){_f9e=_f9e||{};_f9e[item]=_f9d[item];}}}return _f9e;},_valueMatches:function(a,b,_f9f){if(a==null){return false;}if(b==null){return true;}if(typeof (b)==="string"){if(typeof (a)==="string"){return this._stringMatches(a,b,_f9f);}if(a instanceof Array){return this._listMatches(a,[b]);}return false;}if(typeof (b)==="boolean"){return this._booleanMatches(a,b);}if(b instanceof Array){if(typeof (a)==="string"){a=[a];}return this._listMatches(a,b);}if(typeof (b)==="object"){return this._mapMatches(a,b);}console.error("The type is not supported yet. requires: "+b+" provides: "+a);return true;},_stringMatches:function(a,b,_fa0){var self=this;if(b.indexOf("&&")==-1){var _fa1=new RegExp(/\*/g);var _fa2=new RegExp("^"+b.replace(_fa1,"[\\w||.||\\*]*")+"$");return _fa2.test(a);}else{var _fa3=true;var _fa4=b.split("&&");for(var i=0;i<=_fa4.length;i++){_fa3=_fa3&&self._valueMatches(_fa0,_fa4[i],_fa0);}return _fa3;}},_booleanMatches:function(a,b){return b===a;},_mapMatches:function(a,b){for(var item in b){if(b.hasOwnProperty(item)){if(this._valueMatches(a[item],b[item],a)){return true;}}}return false;},_listMatches:function(a,b){return dojo.some(b,function(_fa5){return dojo.some(a,function(_fa6){return this._valueMatches(_fa6,_fa5,a);},this);},this);}};return _f92;});},"builder/command/ChangeLayoutCommand":function(){define(["dojo/_base/declare","builder/base/command/Command"],function(_fa7,_fa8){return _fa7("builder.command.ChangeLayoutCommand",[_fa8],{oldPosition:null,newPosition:null,constructor:function(_fa9,_faa){this.oldPosition=_fa9;this.newPosition=_faa;},_updatePosition:function(data){for(var i=0;i<data.length;i++){var _fab=data[i];for(var j=0;j<builder.Environment.diagram.components.length;j++){if(_fab.name==builder.Environment.diagram.components[j].id){builder.Environment.diagram.components[j].updatePosition(_fab.location);builder.Environment.diagram.components[j].rePaintComponent();}}}},execute:function(){this._updatePosition(this.newPosition);dojo.publish("onDiagramChanged",null);},undo:function(){this._updatePosition(this.oldPosition);dojo.publish("onDiagramChanged",null);}});});},"paas/widgets/PatternAttrMainWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/PatternAttrMainWidget.html","paas/widgets/AddPatternAttrDialog","paas/widgets/PatternAttrPropertiesWidget","paas/common/constants","builder/command/ChangePropertyCommand","paas/widgets/Dialog","builder/util/Util"],function(_fac,_fad,_fae,_faf,_fb0,_fb1,_fb2,_fb3,_fb4,_fb5,util){return _fac("paas.widgets.PatternAttrMainWidget",[_fad,_fae,_faf],{templateString:_fb0,widgetsInTemplate:true,model:null,subWidget:null,references:null,bulkUpdates:false,constructor:function(){this.patternHeading=builder.Environment.messages.PATTERN_ATTR_HEADING;},postCreate:function(){this.addGlobalAttrButton.set("label",builder.Environment.messages.PATTERN_ATTR_NEW_PARAM);if(this.model.readOnly){this.addGlobalAttrButton.set("disabled",true);}this.updateReferences();this.updateSubWidget();dojo.subscribe("onPatternAttributeReferenceChanged",this,"patternAttributeReferenceChanged");},showGlobalAttrWidget:function(){var _fb6=new _fb1({mainWidget:this});_fb6.showDialog();},setGlobalAttrEdit:function(){var self=this;self.globalAttrEdit.style.display="block";},patternAttributeReferenceChanged:function(){if(this.bulkUpdates){return;}this.updateReferences();this.updateSubWidget();},addMetadata:function(_fb7){var self=this;if(this.model){this.model.addPatternAttributeMetadata(_fb7);self.updateSubWidget();}},updateMetadata:function(_fb8,_fb9){var self=this;if(self.model){self.model.updatePatternAttributeMetadata(_fb8);self.updateMappings(_fb8["id"],_fb9);self.patternAttributeReferenceChanged();}},deleteMetadata:function(id){var self=this;if(this.model){this.model.deletePatternAttributeMetadata(id);self.updateMappings(id,[]);if(this.references){delete this.references[id];}if(builder.util.array.contains(builder.Environment.diagram.patternAttrLocked,id)){builder.util.array.remove(this.model.patternAttrLocked,id);var _fba="${pattern."+id+"}";dojo.forEach(builder.Environment.diagram.components,function(comp){dojo.forEach(comp.metadata.attributes,function(attr){var _fbb=comp.properties[attr.id];if(_fbb&&dojo.isString(_fbb)&&_fbb.indexOf(_fba)>-1){dojo.publish("/builder/lockChange",[[comp.id,false,args[2]]]);dojo.publish("/builder/refreshLockStatus",[[comp.id]]);}});});}self.updateSubWidget();}},updateMappings:function(id,_fbc){if(!_fbc){return;}this.bulkUpdates=true;var _fbd=[];if(this.references&&this.references[id]){_fbd=this.references[id];}for(var i=0;i<_fbc.length;i++){if(dojo.indexOf(_fbd,_fbc[i])<0){var _fbe=_fbc[i].indexOf(".");var _fbf=_fbc[i].substring(_fbe+1);var _fc0=_fbc[i].substring(0,_fbe);var comp=this.model.getComponentById(_fc0);if(comp){var _fc1=comp.properties[_fbf];var _fc2="${pattern."+id+"}";var _fc3=new _fb4(comp,_fbf,_fc1,_fc2);builder.Environment.commandStack.executeCommand(_fc3);dojo.publish("/builder/lockChange",[[_fc0,true,_fbf]]);dojo.publish("/builder/refreshLockStatus",[[_fc0]]);}}}for(var i=0;i<_fbd.length;i++){if(dojo.indexOf(_fbc,_fbd[i])<0){var _fbe=_fbd[i].indexOf(".");var _fbf=_fbd[i].substring(_fbe+1);var _fc0=_fbd[i].substring(0,_fbe);var comp=this.model.getComponentById(_fc0);if(comp){var _fc1=comp.properties[_fbf];var _fc4="${pattern."+id+"}";var _fc2=_fc1.replace(_fc4,"");var _fc3=new _fb4(comp,_fbf,_fc1,_fc2);builder.Environment.commandStack.executeCommand(_fc3);dojo.publish("/builder/lockChange",[[_fc0,false,_fbf]]);dojo.publish("/builder/refreshLockStatus",[[_fc0]]);}}}this.bulkUpdates=false;},updateSubWidget:function(){if(this.subWidget){this.subWidget.destroy();this.subWidget=null;}if(this.model.patternAttrMetadata.length>0){var _fc5={};_fc5["propertyMetadata"]=this.model.patternAttrMetadata;_fc5["properties"]=this.model.patternAttrData;_fc5["mainWidget"]=this;_fc5["id"]=this.model.id;_fc5["readOnly"]=this.model.readOnly;this.subWidget=new _fb2({"model":_fc5,"mainWidget":this});this.subWidget.set("disabled",this.model.readOnly);dojo.style(this.subWidget.titleNode,"display","none");this.attrEdit.appendChild(this.subWidget.domNode);this.attrEdit.style.display="block";}else{this.attrEdit.style.display="none";}},updateReferences:function(){var self=this;this.references={};dojo.forEach(builder.Environment.diagram.patternAttrMetadata,function(_fc6){var _fc7=[];self.references[_fc6.id]=_fc7;var _fc8="${pattern."+_fc6.id+"}";dojo.forEach(builder.Environment.diagram.components,function(comp){dojo.forEach(comp.metadata.attributes,function(attr){var _fc9=comp.properties[attr.id];if(_fc9&&dojo.isString(_fc9)&&_fc9.indexOf(_fc8)>-1){_fc7.push(comp.id+"."+attr.id);}});});});}});});},"builder/workbench/listView/ComponentItem":function(){define(["dojo/_base/declare","builder/workbench/listView/ListItem","builder/util/Util","builder/util/FileUtil","builder/workbench/listView/ListItemAttr","builder/command/ChangeComponentItemNameCommand"],function(_fca,_fcb,Util,_fcc,_fcd,_fce){return _fca("builder.workbench.listView.ComponentItem",[_fcb],{isLockVisible:true,createTitleWidget:function(){var name=this.getShorterName(this.model.id);this.titleNameNode.innerHTML="<span class=\"boldFont\">"+name+"</span>"+" - "+this.model.metadata.label;this.titleImageNode.src=_fcc.getComponentIconPath(this.model.metadata.thumbnail);},getShorterName:function(_fcf){var name=_fcf;var _fd0=dojo.indexOf(_fcf,":");if(_fd0>=0){name=this.model.id.substring(_fd0+1);}return name;},updateAfterNameChange:function(){var name=this.getShorterName(this.model.id);this.setName(name);this.createTitleWidget();this.updateConnection();this.listView.renderAllMissingProps();},updateConnection:function(){var _fd1=this.listView.connectionItems;for(var i=0;i<_fd1.length;i++){if(this.model.id===_fd1[i].model.fromComponent.id||this.model.id===_fd1[i].model.toComponent.id){_fd1[i].createTitleWidget();}}},createNameWidget:function(){var _fd2={id:"name",label:builder.Environment.messages.COMPONENT_PROP_WIDGET_CREATE_NAME_LABEL,type:"string",required:"true"};var _fd3={"name":this.getShorterName(this.model.id)};this.nameWidget=new _fcd({metadata:_fd2,properties:_fd3,model:this.model});if(dojo.isIE&&document.documentMode===7){var div=dojo.create("div",null,this.nameNode);dojo.addClass(div,"propertyContent");var _fd4=dojo.create("table",null,div);}else{var _fd4=dojo.create("table",null,this.nameNode);}var _fd5=dojo.create("tbody",null,_fd4);dojo.addClass(_fd4,"propertyContent");_fd5.appendChild(this.nameWidget.domNode);this.nameWidget.validatePropertyChange=dojo.hitch(this,"_validateNameChange");this.nameWidget.getChangePropertyCommand=dojo.hitch(this,function(){return new _fce(this.model.id,this.nameWidget.getPropertyValue(),this);});this.nameNode.style.display="";return this.nameWidget;},_validateNameChange:function(){var _fd6=this.nameWidget;var _fd7=_fd6.getPropertyValue();if(this.model.id===_fd7){return false;}if(!_fd6.isInputValid()){_fd6.setPropertyValue(this.model.id);dojo.publish("/builder/property/notification",[["info","APPMODEL_TOOLIGN_ATTRIBUTE_INVALID",builder.Environment.messages.NAME,_fd7,this.model.id]]);return false;}var _fd8=builder.util.ValidationUtil.componentNameCheck(builder.Environment.diagram.components,this.model,_fd7);if(_fd8.isValid===false){_fd6.setPropertyValue(this.model.id);dojo.publish("/builder/property/notification",[["info",_fd8.messager]]);return false;}return true;},setName:function(name){this.nameWidget.setPropertyValue(name);}});});},"builder/workbench/property/BaseExclusiveGroup":function(){define(["dojo/_base/declare","builder/workbench/property/BaseGroup"],function(_fd9,_fda){return _fd9("builder.workbench.property.BaseExclusiveGroup",[_fda],{category:null,changeChangeable:function(e){if(this.readOnly||this.disabled){return;}if(e){dojo.stopEvent(e);}}});});},"builder/workbench/editor/Component":function(){define(["dojo/_base/declare","builder/workbench/editor/Port","builder/workbench/editor/ComponentFigureFrame","builder/workbench/editor/ComponentContainerFrame","builder/util/FileUtil","builder/util/ValidationUtil","builder/command/ChangeComponentNameCommand","builder/workbench/property/PropertiesEditable","builder/workbench/editor/PropertiesContainer","builder/workbench/property/ComponentPropertiesWidget","builder/command/AddConnectionCommand","builder/util/Util","builder/util/array","builder/workbench/property/PolicyPropertiesWidget","builder/workbench/property/PolicySection","builder/workbench/editor/AppPolicyFrame","builder/service/AppBindingService","dojo/_base/array","builder/util/CapabilityUtil","builder/vsys/util/VSysUtil","builder/base/command/CompoundCommand","builder/command/ChangePropertyCommand"],function(_fdb,Port,_fdc,_fdd,_fde,_fdf,_fe0,_fe1,_fe2,_fe3,_fe4,Util,_fe5,_fe6,_fe7,_fe8,_fe9,_fea,_feb,_fec,_fed,_fee){return _fdb("builder.workbench.editor.Component",[_fe2,_fe1],{id:null,layer:null,position:{x:"0px",y:"0px"},ismini:false,propertiesWidget:null,incomingConnections:null,outgoingConnections:null,diagram:null,componentFrame:null,readOnly:false,subscribes:null,locked:null,constructor:function(_fef){this.initData(_fef);this.initSubscribers();},isVisible:function(){return true;},initSubscribers:function(){this.subscribes=[];this.subscribes.push(dojo.subscribe("onReferencesChanged",this,function(id){if(id===this.id&&builder.util.ValidationUtil.getScannableFile(this)!=null){this.checkValidation();}}));this.subscribes.push(dojo.subscribe("onInvalidArtifact",this,function(id){if(id===this.id&&builder.util.ValidationUtil.getScannableFile(this)!=null){this.checkValidation();}}));this.subscribes.push(dojo.subscribe("onLoadingReferences",this,function(id,_ff0){if(id===this.id&&builder.util.ValidationUtil.getScannableFile(this)!=null){this.checkValidation();}}));this.subscribes.push(dojo.subscribe("/builder/lockChange",this,"onLockChange"));},initData:function(args){this.id=args.componentId;this.properties=args.attributes||args.properties||{};this.metadata=args.metadata;this.diagram=args.diagram;this.groups=args.groups||{};this.loadFromModel=args.loadFromModel;if(args.locked){this.locked=args.locked;}this.incomingConnections=[];this.outgoingConnections=[];this.propertyMetadata=this.metadata.attributes||[];if(this.loadFromModel===true){}else{builder.util.Util.setDefaultProperties(this.propertyMetadata,this.properties);this.groups=builder.util.Util.setDefaultGroupsStatus(this.metadata.groups,this.groups,this.properties);}var _ff1=builder.service.ToolingMetaDataManagement.get(this.id);if(_ff1){this.position=_ff1.position;this.ismini=_ff1.ismini!==undefined&&_ff1.ismini;}},isInited:false,showWidget:function(_ff2,_ff3){if(this.isInited===true){return;}if(this.isSubComponent()&&!this.isAppPolicy()){return;}if(_ff2){this.position=_ff2;}if(_ff3!=null){this.ismini=_ff3;}this.componentFrame=this.createComponentView();if(this.isReferenced()){this.setReferenced();}this.checkValidation();this.isInited=true;},createComponentView:function(){if(this.isAppPolicy()){return new _fe8({component:this});}else{if(this.ismini==true){return new _fdc({component:this});}else{return new _fdd({component:this});}}},changeComponentView:function(){if(this.ismini===true){this.ismini=false;}else{this.ismini=true;}var _ff4=this.createComponentView();this.changeWidgets(_ff4);if(this.ismini){this._moveOutPolicyNodes();}else{this._showPolicyNodes();}this.checkValidation();},_moveOutPolicyNodes:function(){dojo.forEach(this.getAttachedPolicies(),function(_ff5){if(!_ff5.componentFrame){return;}var node=_ff5.componentFrame.domNode;dojo.style(node,"display","none");dojo.body().appendChild(node);});},_showPolicyNodes:function(){dojo.forEach(this.getAttachedPolicies(),function(_ff6){if(_ff6.componentFrame){dojo.style(_ff6.componentFrame.domNode,"display","block");}});},removePropertiesWidget:function(){this.propertiesWidget&&this.propertiesWidget.destroyRecursive();this.propertiesWidget=null;},createPropertiesWidget:function(){this.propertiesWidget=this.createNewPropertiesWidget(false);return this.propertiesWidget;},createNewPropertiesWidget:function(_ff7){var _ff8=null;if(this.isSubComponent()){_ff8=new builder.workbench.property.PolicyPropertiesWidget({model:this,"isTemplate":this.diagram.isTemplate()});}else{_ff8=new builder.workbench.property.ComponentPropertiesWidget({model:this,toggleable:true,"isTemplate":this.diagram.isTemplate(),"topAttributeDetail":_ff7});}if(this.isReferenced()){_ff8.setUnchangable();}return _ff8;},rebuildPropertiesWidget:function(){this.removePropertiesWidget();builder.util.Util.setDefaultProperties(this.propertyMetadata,this.properties);this.groups=builder.util.Util.setDefaultGroupsStatus(this.metadata.groups,this.groups,this.properties);this.createPropertiesWidget();var _ff9=this.getAttachedPolicies();var self=this;if(_ff9){dojo.forEach(_ff9,function(_ffa){if(_ffa.metadata.type=="policy"){_ffa.rebuildPropertiesWidget();}});}},setName:function(name){this.componentFrame.setName(name);this.id=name;},getAllConnections:function(){var _ffb=[];dojo.forEach(this.incomingConnections,function(_ffc){_ffb.push(_ffc);});dojo.forEach(this.outgoingConnections,function(_ffd){_ffb.push(_ffd);});return _ffb;},addIncomingConnection:function(_ffe){this.incomingConnections.push(_ffe);},delIncomingConnection:function(_fff){builder.util.array.remove(this.incomingConnections,_fff);},addOutgoingConnection:function(_1000){this.outgoingConnections.push(_1000);},delOutgoingConnection:function(_1001){builder.util.array.remove(this.outgoingConnections,_1001);},checkValidation:function(){if(this.isSubComponent()&&!this.isAppPolicy()){var comp=this.getAttachComponent();if(comp){comp.checkValidation();}return;}var _1002=builder.util.ValidationUtil.getValidationResult(this);this.handleValidationResult(_1002);},handleValidationResult:function(_1003){this.componentFrame.setStatus&&this.componentFrame.setStatus(_1003.description,_1003.level);},changeWidgets:function(_1004){this.position=this.getPosition();this.componentFrame.remove();this.componentFrame=_1004;if(_1004.domNode){dojo.style(_1004.domNode,{"left":this.position.x,"top":this.position.y});}this.rePaintComponent();this.componentFrame.onSelected();},getPosition:function(){if(this.componentFrame){return this.componentFrame.getPosition();}else{return {x:"0px",y:"0px"};}},updatePosition:function(_1005){if((_1005.x instanceof Number||typeof _1005.x=="number")||(_1005.x.indexOf("px")==-1)){_1005.x+="px";}if((_1005.y instanceof Number||typeof _1005.y=="number")||(_1005.y.indexOf("px")==-1)){_1005.y+="px";}if(this.componentFrame){this.componentFrame.setPosition(_1005);}},getId:function(){return this.id;},getType:function(){return this.metadata.id;},getDisplayId:function(){return this.metadata.displayId;},getParentType:function(){if(this.metadata["extends"]){return this.metadata["extends"][0];}},getCombinedProvides:function(){var _1006=this.getAttachedPolicies();var _1007=[];this.getMetadataProvides()&&_1007.push(this.getMetadataProvides());_fea.forEach(_1006,function(item){item.getMetadataProvides()&&_1007.push(item.getMetadataProvides());});return _feb.merge(_1007);},setMetadata:function(_1008){this.metadata=_1008;this.propertyMetadata=_1008.attributes||[];},rePaintComponent:function(){dojo.forEach(this.incomingConnections,function(_1009){if(_1009.isSubComponentLink()){_1009.fromComponent.rePaintComponent();}else{_1009.paint();}});dojo.forEach(this.outgoingConnections,function(_100a){if(_100a.isSubComponentLink()){return;}_100a.paint();});},setLayer:function(layer){this.layer=layer;if(this.componentFrame&&this.componentFrame.setLayer){this.componentFrame.setLayer(this.layer.id);}},stopFileSending:function(){if(!this.propertiesWidget){return;}this.propertiesWidget.stopFileUploading();},remove:function(){this.diagram.removeComponent(this);this.stopFileSending();if(this.diagram.selectedModel===this){this.diagram.selectModel(this.diagram);}this.removePropertiesWidget();if(this.componentFrame){this.componentFrame.remove();}dojo.forEach(this.subscribes,dojo.unsubscribe);},onUnselect:function(){if(this.componentFrame){this.componentFrame.onUnselect();}},onSelected:function(){if(this.componentFrame){this.componentFrame.onSelected();}},updateConnectionName:function(){dojo.forEach(this.incomingConnections,function(_100b){if(_100b.propertiesWidget){_100b.propertiesWidget.createNameWidget();}});dojo.forEach(this.outgoingConnections,function(_100c){if(_100c.propertiesWidget){_100c.propertiesWidget.createNameWidget();}});},enable:function(){if(this.componentFrame){this.componentFrame.enable();}if(!this.readOnly&&!this.isReferenced()){this.propertiesWidget&&this.propertiesWidget.set("disabled",false);}},disable:function(){if(this.componentFrame){this.componentFrame.disable();}this.propertiesWidget&&this.propertiesWidget.set("disabled",true);},isReferenced:function(){return this.layer&&this.layer.isReferenced();},setReadOnlyMode:function(){this.readOnly=true;if(this.componentFrame){this.componentFrame.setUnchangable();}},setReferenced:function(){if(this.componentFrame){this.componentFrame.setReferenced();}if(this.propertiesWidget){this.propertiesWidget.setUnchangable();}},showPropertiesWidget:function(){this._newShow();},_newShow:function(){if(this.isSubComponent()){var _100d=this.getAttachComponent();if(!_100d){return;}_100d.showPropertiesWidget();_100d.propertiesWidget.set("open",false);_100d.selectChild(this.propertiesWidget);}else{this.showPolicyPropsWidget();}},getMetadataProvides:function(){return _fec.getJsonObjectByPath(this.metadata,"capabilities","provides");},getMetadataRequires:function(){return _fec.getJsonObjectByPath(this.metadata,"capabilities","requires");},getAttachedPolicies:function(){var _100e=[];dojo.forEach(this.incomingConnections,function(_100f){if(_100f.isSubComponentLink()){_100e.push(_100f.fromComponent);}});return _100e;},isSubComponent:function(){return builder.util.Util.isSubComponent(this.metadata);},attachComponent:null,getAttachComponent:function(){if(!this.isSubComponent()){return null;}if(this.outgoingConnections.length===0){this.attachComponent=this.diagram;}else{this.attachComponent=this.outgoingConnections[0].toComponent;}return this.attachComponent;},isAppPolicy:function(){if(!this.isSubComponent()){return false;}if(this.outgoingConnections.length==0){return true;}return false;},uninitialize:function(){dojo.forEach(this.subscribes,dojo.unsubscribe);},getFrame:function(){return this.componentFrame;},onLockChange:function(args){if(args[0]!=this.id){return;}if(args[1]===true){this.locked=this.locked||[];builder.util.array.add(this.locked,args[2]);}else{builder.util.array.remove(this.locked,args[2]);}},_checkPolicyIsValid:function(_1010){if(_fec.isAddon(_1010)){return true;}if(this.metadata["extends"]&&this.metadata["extends"].toUpperCase&&this.metadata["extends"].toUpperCase()==="PATTERNCOMPONENT"){if(_1010.id.indexOf("patterncomponents:")!==0){return false;}}for(var i=0;i<this.incomingConnections.length;i++){if(_1010.id==this.incomingConnections[i].fromComponent.metadata.id){return false;}}return true;},canAddPolicy:function(){var _1011=builder.util.Util.getMetadataService().getComponentPoliciesByType(this.metadata.id);for(var i=0;i<_1011.length;i++){if(this._checkPolicyIsValid(_1011[i])){return true;}}return false;},highlightLinkableComponents:function(){var _1012=this.diagram&&this.diagram.components;dojo.forEach(_1012,function(_1013){if(builder.util.ValidationUtil.supportedConnection(this,_1013,false)){var _1014=_1013.getFrame();_1014&&_1014.highlight();}},this);},unHighlightLinkableComponents:function(){var _1015=this.diagram&&this.diagram.components;dojo.forEach(_1015,function(_1016){if(builder.util.ValidationUtil.supportedConnection(this,_1016,false)){var _1017=_1016.getFrame();_1017&&_1017.unHighlight();}},this);},isSelected:function(){return (this.id==this.diagram.selectedModel.id);},serialize:function(){var _1018={attributes:this.getProperties(),id:this.getId(),type:this.getType()};if(this.getGroups()){_1018.groups=this.getGroups();}if(this.locked&&this.locked.length>0){_1018.locked=this.locked;}return _1018;}});});},"builder/workbench/editor/ConnectionThumbnailFrame":function(){define(["dojo/_base/declare","builder/workbench/editor/ConnectionFrame"],function(_1019,_101a){return _1019("builder.workbench.editor.ConnectionThumbnailFrame",[_101a],{constructor:function(args){},postCreate:function(){this.createStatusContainer();this.annotation=new builder.workbench.editor.InlineAnnotation({annotationContent:this.connection.annotationContent});this.annotation.disable();this._appendToDiagram(this.annotation.domNode);this.paint();this.registerEvents();},registerEvents:function(){if(!this.eventHandles){this.eventHandles=[];this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseover",this,"showTooltip"));this.eventHandles.push(dojo.connect(this.statusContainer,"onmouseout",this,"hideTooltip"));}}});});},"builder/vsys/workbench/editor/DataDependsOnConnection":function(){define(["dojo/_base/declare","builder/workbench/editor/Connection","paas/common/constants","builder/vsys/util/VSysUtil","builder/vsys/workbench/editor/DataDependsOnConnectionMiniFrame","builder/vsys/workbench/editor/DataDependsOnConnectionFrame","paas/widgets/MappingWidget","builder/util/Util","dojo/topic","dojo/_base/lang","dojo/_base/array"],function(_101b,_101c,_101d,_101e,_101f,_1020,_1021,util,topic,lang,array){return _101b("builder.vsys.workbench.editor.DataDependsOnConnection",[_101c],{dataMappingWidget:null,constructor:function(){this.implyOrder=true;this.fixedConnection=false;this.subscribes.push(topic.subscribe("/DataDependsOnConnection/implyOrder",lang.hitch(this,this.setImplyOrder)));this.subscribes.push(topic.subscribe("/DataDependsOnConnection/fixedConnection",lang.hitch(this,this.setFixedConnection)));},setImplyOrder:function(){if(arguments&&arguments.length===3){if(this.source.id===arguments[0]&&this.target.id===arguments[1]){this.implyOrder=arguments[2];}}},setFixedConnection:function(){if(arguments&&arguments.length===3){if(this.source.id===arguments[0]&&this.target.id===arguments[1]){this.fixedConnection=arguments[2];}}},isHostedOnLink:function(){return this.metadata.id===_101d.HOSTED_ON_LINK;},isVisible:function(){return this.inherited(arguments)&&!this.isHostedOnLink();},_createConnectionView:function(){if(this.isMiniViewMode()){_101e.toDelegatedConnection(this);this.connectionFrame=new _101f({connection:this});}else{this.connectionFrame=new _1020({connection:this});}},onSelected:function(evt){if(evt){dojo.stopEvent(evt);}this.selected=true;if(!this.fixedConnection){this.connectionFrame&&this.connectionFrame.onSelect(evt);}this.showPropertiesWidget();if(this.metadata.id===_101d.DATA_DEPENDS_LINK){this.updateMappingWidget();}},updateMappingWidget:function(){if(this.dataMappingWidget==null){this.propertiesWidget.dataMappingNode.style.display="";this.dataMappingWidget=new _1021({connection:this,model:this},this.propertiesWidget.dataMappingNode);this.dataMappingWidget.showMappings(this.toComponent,this.fromComponent);}else{this.dataMappingWidget.showMappings(this.toComponent,this.fromComponent);}},toVSysMiniFrame:function(){this.connectionFrame&&this.connectionFrame.removeWidget();this.connectionFrame=new _101f({connection:this});},toStandFrame:function(){this.connectionFrame&&this.connectionFrame.removeWidget();this.connectionFrame=new _1020({connection:this});},isMiniViewMode:function(){if(this.fromComponent.ismini||this.toComponent.ismini){return true;}var _1022=_101e.findHostedOnTarget(this.fromComponent.outgoingConnections);if(_1022&&_1022.ismini){return true;}var _1023=_101e.findHostedOnTarget(this.toComponent.outgoingConnections);if(_1023&&_1023.ismini){return true;}return false;},_checkOnSameContainer:function(){var _1024=_101e.findHostedOnTarget(this.fromComponent.outgoingConnections);var _1025=_101e.findHostedOnTarget(this.toComponent.outgoingConnections);if(_1024&&_1025&&_1024===_1025){return true;}return false;},betweenPatternComponent:function(){if(((builder.workbench.editor.Component&&this.toComponent.isInstanceOf(builder.workbench.editor.Component))||(builder.workbench.editor.Component&&this.fromComponent.isInstanceOf(builder.workbench.editor.Component)))&&!(builder.vsys.workbench.editor.VSysComponent&&this.toComponent.isInstanceOf(builder.vsys.workbench.editor.VSysComponent))&&!(builder.vsys.workbench.editor.VSysComponent&&this.fromComponent.isInstanceOf(builder.vsys.workbench.editor.VSysComponent))){return true;}return false;}});});},"paas/widgets/ValidationSimpleTextAreaExt":function(){define(["dojo/_base/declare","dijit/form/SimpleTextarea","paas/widgets/MetaDataDrivenInput"],function(_1026,_1027,_1028){return _1026("paas.widgets.ValidationSimpleTextAreaExt",[_1027,_1028],{regVal:null,cols:30,rows:4,postCreate:function(){this.textbox.cols=this.cols;this.textbox.rows=this.rows;},isValid:function(){if(this.get("value")&&this.regVal){var _1029=new RegExp(this.regVal,"gi");if(this.get("value").search(_1029)==-1){return false;}}return true;}});});},"builder/service/JsonToDiagram":function(){define(["dojo/_base/declare","builder/service/ToolingMetaDataManagement","builder/workbench/layer/Layer","builder/util/Util","builder/util/constants","builder/vsys/util/PrerequisiteUtil","builder/util/array","builder/command/ChangeComponentNameCommand","builder/util/ValidationUtil","builder/service/AppBindingService","paas/common/SolutionUtil","builder/util/Util","builder/vsys/command/ImageCommandUtil","dojo/_base/array","paas/vsys/VSysInterchangeableDialog","builder/vsys/util/VSysUtil"],function(_102a,_102b,Layer,Util,_102c,_102d,_102e,_102f,_1030,_1031,_1032,util,_1033,array,_1034,_1035){return _102a("builder.service.JsonToDiagram",null,{diagram:null,componentIdMap:null,constructor:function(_1036){this.diagram=_1036;this.componentIdMap={};},load:function(data,_1037,mode,_1038){this.valid=true;if(data){this.loadToolingMetadata(data.tooling);if(!_1037&&!_1038){this.loadApplicationProperty(data.model);}this.updateMetadata();this.loadComponents(data,_1037,mode);this.loadLayers(data.layers);this.loadReferences(data.references);this.loadConnection(data.model,mode);this.loadDependencyLinks();this.paintDiagram(mode);if(!_1037){this.selectView();this.refreshListView();this.refreshSourceView();}if(util.patternTypeIsVSys()){this.removeDefaultStartsAfter();this.loadSelectedOptions(data.model);}}},updateMetadata:function(){_102d.addVersionAttrOnStackComponent();},paintDiagram:function(mode){dojo.forEach(this.diagram.components,dojo.hitch(this,function(_1039){if(_1039.isSubComponent()&&!_1039.isAppPolicy()){return;}_1039.showWidget();this.diagram.setSurfaceArea(_1039.getPosition().x,_1039.getPosition().y,_1039.componentFrame.domNode);var _103a=builder.util.ValidationUtil.getScannableFile(_1039);if(_103a){builder.service.AppBindingService.loadAppBinding(_1039);}}));builder.util.Util.locateAppPolicy(this.diagram);dojo.forEach(this.diagram.connections,dojo.hitch(this,function(_103b){if(!_103b.isVisible()){return;}_103b.showWidget();if(_103b.isReferenced()){_103b.setReferenced();}}));if(mode=="readonly"){this.diagram.setReadOnlyMode();}this.diagram.setSurface();this.diagram.onSelected();},loadToolingMetadata:function(_103c){if(!_103c){return;}var nodes=_103c.nodes;if(nodes){for(var i=0;i<nodes.length;i++){var id=nodes[i].id;var _103d={};_103d.position=nodes[i].location;_103d.ismini=nodes[i].ismini;builder.service.ToolingMetaDataManagement.put(id,_103d);}}},loadComponents:function(data,_103e,mode){var model=data.model;if((!model)||(!model.nodes)){return;}var _103f=(function(){var _1040={};if(data.references){var _1041=data.references;array.forEach(_1041,function(_1042){if(data.app_id!=_1042){_1040[_1042]=true;}});}return function(_1043,_1044){if(_1044){return true;}if(_1043.id.indexOf(":")>0){return _1040[_1043.id.substring(0,_1043.id.indexOf(":"))]||false;}return false;};})();var _1045=false;for(var i=0;i<model.nodes.length;i++){var _1046=model.nodes[i];_1046.loadFromModel=true;_1046.exportedCapabilities=model.capabilities;try{var _1047=this.diagram.addComponentByType(_1046,_103f(_1046,_103e));if(_1047==null){dojo.publish("/builder/editor/notification",[["error","LOAD_METADATA_ERROR",_1046.type]]);_1045=true;continue;}this.componentIdMap[_1046.id]=_1047.id;}catch(e){console.error("** error when load component  **");console.error(e);this.valid=false;dojo.publish("/builder/editor/notification",[["error","APPMODEL_TOOLING_LOAD_FAIL",_1046.id]]);}}if(_1045){paasUtil.getDeferred("GET","/resources/virtualSystemPatterns/"+appId+"?checkInterchangeable").addCallback(function(resp){var _1048=resp.appModelValid;if(!_1048){var _1049=resp.interchangeableResult;var _104a=new _1034({"interchangeableResult":_1049});_104a.show();}});}},loadApplicationProperty:function(model){this.parseLockOptions(model);var name=builder.Environment.messages.APPMODEL_DEFAULT_NAME;var _104b=builder.Environment.messages.APPMODEL_DEFAULT_VERSION;var _104c="";var _104d="application";if(model){name=(model.name)?(model.name):name;_104c=(model.description)?(model.description):_104c;_104b=(model.patternversion)?(model.patternversion):_104b;model["app_type"]&&(_104d=model["app_type"]);model["patterntype"]&&(this.diagram.set("patterntype",model["patterntype"]));model["version"]&&(this.diagram.set("version",model["version"]));model["attribute_metadata"]&&(this.diagram.set("patternAttrMetadata",model["attribute_metadata"]));model["attributes"]&&(this.diagram.set("patternAttrData",model["attributes"]));model["lockedAttributes"]&&(this.diagram.set("patternAttrLocked",model["lockedAttributes"]));}this.diagram.setName(name);this.diagram.setDescription(_104c);this.diagram.setPatternVersion(_104b);this.diagram.setType(_104d);},parseLockOptions:function(model){if(model.locked===true){if(model.lock_foundation===false){this.diagram.setLocked("2");}else{this.diagram.setLocked("3");}this.diagram.plugins=model.plugins;this.diagram.images=model.images;}else{this.diagram.setLocked("1");if(model.plugins&&model.plugins instanceof Array&&model.plugins.length>0){this.diagram.patternTypePlugins=_1032.getPlugins(model.patterntype,model.version);this.diagram.customizedPlugins=model.plugins;this.diagram.plugins=this.mergePlugins(this.diagram.patternTypePlugins,this.diagram.customizedPlugins);}else{this.diagram.plugins=_1032.getPlugins(model.patterntype,model.version);}}},loadConnection:function(model,mode){if((!model)||(!model.links)){return;}var _104e=[];for(var i=0;i<model.links.length;i++){var _104f=model.links[i];var _1050=this.getNewIdFromOld(_104f.source);var _1051=this.getNewIdFromOld(_104f.target);var _1052=this.diagram.getComponentById(_1050);var _1053=this.diagram.getComponentById(_1051);if(!_1052||!_1053){continue;}if(_104f.type==_102c.HOSTED_ON_LINK&&_1053.containsType(_102c.PART)){_1052.updateAttributesOnPreprequisite(_1053);var _1054=null;for(var j=0;j<model.links.length;j++){if(model.links[j].source==_1053.getId()&&model.links[j].type==_102c.HOSTED_ON_LINK){_1054=model.links[j].target;break;}}if(_1054!=null){_104e.push({"source":_1052.getId(),"target":_1054,"type":_102c.HOSTED_ON_LINK,"id":_102c.HOSTED_ON_LINK+"_"+_1052.getId()});}this.diagram.removeComponent(_1053);}}model.links=model.links.concat(_104e);for(var i=0;i<model.links.length;i++){var _104f=model.links[i];var _1050=this.getNewIdFromOld(_104f.source);var _1051=this.getNewIdFromOld(_104f.target);var _1052=this.diagram.getComponentById(_1050);var _1053=this.diagram.getComponentById(_1051);if(!_1052||!_1053){continue;}var args={source:_1052,target:_1053,properties:_104f.attributes,type:_104f.type,annotation:_104f.annotation,locked:_104f.locked,loadFromModel:true};if(_104f.groups){args.groups=_104f.groups;}var _1055=this.diagram.addConnectionByType(args);}},loadDependencyLinks:function(){var self=this;dojo.forEach(this.diagram.components,function(comp){var _1056=self.findTargetComps(comp);for(key in _1056){var args={source:comp,target:_1056[key],type:_102c.DATA_DEPENDS_LINK};var _1057=self.diagram.addConnectionByType(args);}});},findTargetComps:function(_1058){var _1059={};for(key in _1058.properties){var value=_1058.properties[key];if(dojo.isString(value)&&value.indexOf("${")>-1){dojo.forEach(this.diagram.components,function(comp){if(_1035.containsNodeId(value,comp.id)){_1059[comp.id]=comp;}});}}return _1059;},loadReferences:function(refs){if(!refs){return;}var layer=builder.util.array.last(this.diagram.layers);dojo.forEach(refs,function(ref){layer.references.push(ref);});},loadLayers:function(_105a){var self=this;dojo.forEach(_105a,function(layer){if(!dojo.isString(layer.id)){dojo.publish("/builder/editor/notification",[["warning","LAYER_ID_INVALID"]]);return;}var _105b=layer.id;if(layer.referenceID){_105b=self.diagram.getUniqueLayerId(_105b);}var _105c=new builder.workbench.layer.Layer(_105b,layer.referenceID);self.diagram.addLayer(_105c);var _105d=layer.nodes;dojo.forEach(_105d,function(_105e){var id=self.getNewIdFromOld(_105e);_105c.addComponent(self.diagram.getComponentById(id));},this);},this);if(!this.diagram.layers||this.diagram.layers.length==0){var _105f=builder.Environment.messages.BUILDER_LAYER_TITLE;var _1060=new builder.workbench.layer.Layer(_105f);this.diagram.addLayer(_1060);}this.diagram.currentLayer=this.diagram.layers[0];builder.Environment.layerPalette.load();},selectView:function(){var view=window.location.hash;if(view){view=view.substring(1);var _1061=dijit.byId(view);if(_1061){dijit.byId("toolingTabContainer").selectChild(_1061);}else{window.location.hash="editorTab";}}else{window.location.hash="editorTab";}},refreshListView:function(){if(window.location.hash==="#listArea"){dijit.byId("toolingTabContainer").getSourceListView();}},refreshSourceView:function(){if(window.location.hash==="#sourceArea"){dijit.byId("toolingTabContainer").getSourceMarkup();}},mergePlugins:function(_1062,_1063){if(!(_1063&&_1063 instanceof Array&&_1063.length>0)){return _1062;}var _1064=[];for(var i=0;i<_1062.length;i++){var _1065=_1062[i].split("/");var _1066=false;for(var j=0;j<_1063.length;j++){var _1067=_1063[j].split("/");if(_1065[0]===_1067[0]){_1064.push(_1063[j]);_1066=true;break;}}if(!_1066){_1064.push(_1062[i]);}}return _1064;},removeDefaultStartsAfter:function(){var self=this;require(["builder/workbench/orderView/OrderUtil"],function(_1068){var _1069=_1068.getDefaultOrderData();var _106a=self.diagram.components;for(var i=0;i<_106a.length;i++){var sf=_106a[i].startsAfter;if(sf&&sf.length===0){delete _106a[i].startsAfter;}if(sf&&sf.length>0){for(var j=0;j<_1069.length;j++){var _106b=_1069[j].subComponents;if(_106b.length>1){var index=-1;for(var k=0;k<sf.length;k++){index=-1;for(var m=1;m<_106b.length;m++){if(_106b[m].id===_106a[i].id&&_106b[m-1].id===sf[k].id){index=k;break;}}if(index>-1){break;}}if(index>-1){sf.splice(index,1);break;}}}if(sf.length===0){delete _106a[i].startsAfter;}}}});},mergePlugins:function(_106c,_106d){if(!(_106d&&_106d instanceof Array&&_106d.length>0)){return _106c;}var _106e=[];for(var i=0;i<_106c.length;i++){var _106f=_106c[i].split("/");var _1070=false;for(var j=0;j<_106d.length;j++){var _1071=_106d[j].split("/");if(_106f[0]===_1071[0]){_106e.push(_106d[j]);_1070=true;break;}}if(!_1070){_106e.push(_106c[i]);}}return _106e;},getNewIdFromOld:function(oldId){return this.componentIdMap[oldId]?this.componentIdMap[oldId]:oldId;},loadSelectedOptions:function(model){if(model.selectedOptions){this.diagram.selectedOptions=model.selectedOptions;}}});});},"paas/widgets/UtilizationBar":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dojo/dom-construct","dojo/dom-class","dojo/number"],function(_1072,_1073,_1074,_1075,_1076,_1077){return _1072("paas.widgets.UtilizationBar",[_1073,_1074],{templateString:"<div><nobr><span class='UtilizationBar outter' dojoAttachPoint='gattChart'></span><span class='UtilizationBar text' dojoAttachPoint='text'></span></nobr></div>",total:null,used:0,ratio:null,unit:null,unitNumerator:null,unitDenominator:null,thresholdWarning:70,thresholdCritical:90,description:null,hideThresholds:null,additionalNotes:null,isSimpleVersion:false,isDisplayPercentage:true,isReverseVersion:false,thresholdWarningMin:20,thresholdCriticalMin:10,chartHeight:16,chartWidth:80,colorInUseClass:"colorNormal",renderGraph:function(){this.usageBoxSpan=_1075.create("span",{},this.gattChart);this.usageBox=_1075.create("div",{className:"innerUsage",style:{height:this.chartHeight+"px",width:this.chartWidth*this.ratio+"px"}},this.usageBoxSpan);this.getColorInUseClass();_1076.add(this.usageBox,this.colorInUseClass);this.freeBoxSpan=_1075.create("span",{},this.gattChart);this.freeBox=_1075.create("div",{className:"innerFree colorFree",style:{height:this.chartHeight+"px",width:this.chartWidth*(1-this.ratio)+"px"}},this.freeBoxSpan);},getColorInUseClass:function(){if(this.hideThresholds===true){this.colorInUseClass="colorNormal";}else{if(this.isReverseVersion===true){if(this.ratio*100<this.thresholdCriticalMin){this.colorInUseClass="colorCritical";}else{if(this.ratio*100<this.thresholdWarningMin){this.colorInUseClass="colorWarning";}else{this.colorInUseClass="colorNormal";}}}else{if(this.ratio*100<this.thresholdWarning){this.colorInUseClass="colorNormal";}else{if(this.ratio*100<this.thresholdCritical){this.colorInUseClass="colorWarning";}else{this.colorInUseClass="colorCritical";}}}}},renderText:function(){var _1078=this.isDisplayPercentage?_1077.format(this.ratio*100,{places:0})+"%":"";var _1079,valid=(this.used!=null&&this.total!=null&&this.used!=NaN&&this.total!=NaN);if(!valid||this.isSimpleVersion==true){_1079="";}else{var _107a=_1077.format(this.used,{places:2})+(this.unitNumerator?this.unitNumerator:this.unit?this.unit:"");var _107b=_1077.format(this.total,{places:2})+(this.unitDenominator?this.unitDenominator:this.unit?this.unit:"");var _107c="",_107d="";var _107e=this.description?this.description.indexOf("/"):-1;var _107f=this.description?this.description.indexOf("|"):-1;var index=_107e>-1?_107e:_107f;if(index>-1){_107c="";_107d=dojo.string.trim(this.description.substring(0,index));}else{_107c="";_107d=this.description?this.description:paas.Base.messages.USED;}_1079=_107a+" "+_107c+" / "+_107b+" "+_107d;}if(this.isDisplayPercentage){this.text.innerHTML=_1077.format(this.ratio*100,{places:0})+"%"+(_1079?" ("+_1079+")":"");}else{this.text.innerHTML=_1079;}if(this.additionalNotes){this.text.innerHTML+="<br/><br/>"+this.additionalNotes;}},buildRendering:function(){this.inherited(arguments);if(this.used&&this.used.toFixed&&this.used!=Math.ceil(this.used)){this.used=this.used.toFixed(2);}if(this.ratio<0){this.ratio=0;}if(this.ratio>1){this.ratio=1;}this._calculateRatio();this.renderGraph();this.renderText();},_calculateRatio:function(){if(this.ratio||this.ratio===0){return;}if(!this.total||(this.total==100&&!this.unit)||(this.total==100&&!this.unitNumerator&&!this.unitDenominator)){this.ratio=this.used?(this.used/100):0;this.isSimpleVersion=true;}else{this.ratio=0;}if(this.used&&this.total&&this.used!=NaN&&this.total!=NaN&&this.total!=0){this.ratio=this.used/this.total;if(this.ratio<0){this.ratio=0;}if(this.ratio>1){this.ratio=1;}}},updateRatio:function(ratio){this.ratio=ratio;this.usageBox.style.width=this.chartWidth*this.ratio+"px";this.freeBox.style.width=this.chartWidth*(1-this.ratio)+"px";var _1080=this.colorInUseClass;this.getColorInUseClass();_1076.remove(this.usageBox,_1080);_1076.add(this.usageBox,this.colorInUseClass);}});});},"paas/common/util":function(){define(["dojo/_base/lang","dojo/date/locale","dojo/number","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/json","dojo/io-query","dojo/date/stamp","dojox/validate/regexp","paas/common/constants","dojox/html/entities","paas/widgets/UtilizationBar","dojo/Deferred","./MultiRackDeploymentUtil"],function(lang,_1081,_1082,_1083,dom,_1084,attr,_1085,style,_1086,json,_1087,stamp,_1088,_1089,_108a,_108b,_108c,_108d){var paas=lang.getObject("paas",true);var _108e=lang.getObject("common.util",true,paas);window.paasUtil=_108e=paas.common.util={removeBadCharacters:function(_108f){_108f=_108f.replace(/\<|\>|\"|\'|\%|\;|\(|\)|\&|\+|\-/g,"");return _108f;},groupPrefix:"_group_:",escapeHTML:function(_1090){_1090=_1090.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");return _1090;},loadMetaData:function(type){var meta;var file="/metadata/"+type+".json";var _1091={url:file,handleAs:"json",sync:true,load:function(data){meta=data;},error:function(error){alert(error);}};dojo.xhrGet(_1091);return meta;},getQueryObjectFromUrl:function(){if(document.location.search){return document.location.search.indexOf("?")>-1?_1087.queryToObject(document.location.search.split("?")[1]):{};}else{if(document.location.hash){return document.location.hash.indexOf("?")>-1?_1087.queryToObject(document.location.hash.split("?")[1]):{};}else{return {};}}},formatRunningStatus:function(_1092){if(_1092=="COMPLETED"){return paas.Base.messages.COMPLETED+"&nbsp;<img alt=\""+paas.Base.messages.COMPLETED+"\" title=\""+paas.Base.messages.COMPLETED+"\" style=\"vertical-align: bottom;\" src=\"/images/complete-icon.gif\" />";}else{if(_1092=="ACTIVE"){return paas.Base.messages.ACTIVE+"&nbsp;<img alt=\""+paas.Base.messages.ACTIVE+"\" title=\""+paas.Base.messages.ACTIVE+"\" style=\"vertical-align: bottom;\" src=\"/images/icon/running.gif\" />";}else{if(_1092=="PENDING"){return paas.Base.messages.PENDING+"&nbsp;<img alt=\""+paas.Base.messages.PENDING+"\" title=\""+paas.Base.messages.PENDING+"\" style=\"vertical-align: bottom;\" src=\"/images/pending.gif\" />";}else{if(_1092=="ABORT"){return paas.Base.messages.ABORT+"&nbsp;<img alt=\""+paas.Base.messages.ABORT+"\" title=\""+paas.Base.messages.ABORT+"\" style=\"vertical-align: bottom;\" src=\"/images/icon/cancel.gif\" />";}}}}return _1092;},isACLDelegator:function(){if(_1083.indexOf(window.globalSetting.rolesList,_1089.ROLES.ROLE_ADMIN)>=0&&_1083.indexOf(window.globalSetting.rolesList,_1089.ROLES.SECURITY_ADMIN_WRITER)>=0){return true;}else{return false;}},parseFileUrlIfRequired:function(value){if(!(typeof (value)=="string")){return value;}var _1093="file://";if((value.indexOf(_1093))==-1){return value;}value=value.substring(_1093.length,value.length);var _1094=value.split("/");var file=_1094[_1094.length-1];var _1095="<a href = /resources/virtualApplications/"+deploymentId+"/"+value+">"+file+"<span class='wca-image-download-icon' title='"+paas.Base.messages.INLET_DASHBOARD_LOGVIEWER_DOWNLOAD_ALT+"' style='cursor: pointer; display:inline-block;'></span>"+"</a>&nbsp;&nbsp;";return _1095;},formatReturnValue:function(_1096,_1097){var _1098=_1096;if(typeof (_1096)=="string"){_1098=json.parse(_1096);}var _1099="";if(typeof (_1098)=="string"){return _1098;}for(var _109a in _1098){if(!_1098.hasOwnProperty(_109a)){continue;}if(typeof (_1098[_109a])=="string"){if(_1098[_109a]===""){continue;}if(_1099!==""){_1099+="<br>";}var value;if(_1097===true){value=paas.Base.messages[_1098[_109a]]?paas.Base.messages[_1098[_109a]]:_1098[_109a];value+="&nbsp;<img alt=\""+value+"\" title=\""+value+"\" style=\"vertical-align: bottom;\" src=\"/images/icon/"+_1098[_109a].toLowerCase()+".gif \" />";}else{value=_108e.parseFileUrlIfRequired(_1098[_109a]);}_1099+=_109a+":  "+value;}}return _1099;},formatResultValue:function(_109b){return _108e.formatReturnValue(_109b,true);},formatDateFromISO8601:function(value){if(!value){return "";}try{var date=stamp.fromISOString(value);if(!date||date===null){date=new Date(parseInt(value));}var _109c=_108e.formatDate(date);return _109c;}catch(e){return "";}},formatPluginName:function(value){var index=value.indexOf("/");var _109d=(index>=0)?value.substring(0,index)+" "+value.substring(index+1):value;return _109d;},formatAccessRight:function(_109e){var _109f="";for(var i in _109e){if(_109e[i]&&i!="__parent"&&i!="__id"){var _10a0="View";if(userId==i&&isAdmin||_109e[i].indexOf("F")!=-1){_10a0="Full Access";}else{if(_109e[i].indexOf("W")!=-1){_10a0+="/Write";}if(_109e[i].indexOf("D")!=-1){_10a0+="/Delete";}}if(i.indexOf(_108e.groupPrefix)!=-1){i=i.substring(_108e.groupPrefix.length);}if(_109f===""){_109f=_109f+i+"("+_10a0+")";}else{_109f=_109f+", "+i+"("+_10a0+")";}}}if(_109f.indexOf(userId)==-1&&isAdmin){_109f+=", "+userId+"(Full Access)";}return _109f;},formatDateLong:function(value,_10a1){var date=new Date(parseInt(value));return _108e.formatDate(date,_10a1);},formatTemplate:function(input){return input=="template"?"Yes":"No";},getTemplateFlagData:function(inRow,_10a2){if(_10a2!==null){if(_10a2.app_type=="template"){return "template";}}return "";},formatTemplateFlag:function(input){var image="",str="";if(input=="template"){image="wca-image-template-icon";str="<div title=\""+paas.Base.messages.UTIL_FORMAT_TEMPLATE_FLAG_IMAGE_TITLE_TEMP+"\" alt=\""+paas.Base.messages.UTIL_FORMAT_TEMPLATE_FLAG_IMAGE_TITLE_TEMP+"\" style=\"border:none\" class=\""+image+"\"></div>";}else{image="wca-image-application-icon";str="<div title=\""+paas.Base.messages.UTIL_FORMAT_TEMPLATE_FLAG_IMAGE_TITLE_APP+"\" alt=\""+paas.Base.messages.UTIL_FORMAT_TEMPLATE_FLAG_IMAGE_TITLE_APP+"\" style=\"border:none\" class=\""+image+"\"></div>";}return str;},formatDate:function(date,_10a3){if(window.globalSetting.nationalCalendar==paas.Base.messages.BIDI_HIJRI){var _10a4=dojo.require("dojox.date.islamic.Date");var _10a5=dojo.require("dojox.date.islamic.locale");var _10a6=new _10a4();return _10a5.format(_10a6.fromGregorian(date),{formatLength:"medium"});}else{if(window.globalSetting.nationalCalendar==paas.Base.messages.BIDI_HEBREW){var _10a7=dojo.require("dojox.date.hebrew.Date");var _10a8=dojo.require("dojox.date.hebrew.locale");var _10a9=new _10a7();return _10a8.format(_10a9.fromGregorian(date),{formatLength:"medium"});}else{return _1081.format(date,{formatLength:_10a3?_10a3:"medium"});}}},formatDateString:function(_10aa){if(dojo.isString(_10aa)){_10aa=_108e.removeMilliseconds(_10aa);}var date=new Date(_10aa);return _108e.formatDate(date);},removeMilliseconds:function(_10ab){if(-1!=_10ab.indexOf(".")){try{var _10ac=_10ab.split(".");var _10ad=_10ac[0];var _10ae=_10ac[1].split(" ");_10ab=_10ad+" "+_10ae[1];}catch(e){_10ab=0;}}return _10ab;},excapeJSON:function(json){for(var i in json){if(typeof json[i]=="object"){excapeJSON(json[i]);}else{if(typeof json[i]=="string"){if(json[i]&&json[i]!=""){json[i]=json[i].escapeHTML();}}}}return json;},getFieldMetadata:function(model,field){if(!_108e.models){_108e.models={};}if(!_108e.models[model]){var file="/resources/models/"+model;var _10af={url:file,handleAs:"json",sync:true,load:function(data){_108e.models[model]=data;},error:function(error){}};dojo.xhrGet(_10af);}var _10b0=_108e.models[model].fields;for(var i=0;i<_10b0.length;i++){if(_10b0[i].id==field){return _10b0[i];}}},getErrorStatus:function(args){var _10b1=paas.Base.messages.UNKNOWN;if(args){_10b1=args.xhr.status;}return paas.Base.messages.ERROR+" "+paas.Base.messages.STATUS+": "+_10b1;},getMonitoringErrorMessage:function(resp,args){var _10b2=paas.Base.messages["SERVICE_UNAVAILABLE"];if(args.xhr&&args.xhr.status!=0){if(json.parse(resp.responseText)&&json.parse(resp.responseText).FFDC&&json.parse(resp.responseText).FFDC.message){_10b2=json.parse(resp.responseText).FFDC.message;}_10b2=_10b2+" <br />"+_108e.getErrorStatus(args);return _10b2;}else{if(args.xhr&&args.xhr.status==0){return "";}}return _10b2;},compareJSON:function(json1,json2){function _10b3(json){var size=0;for(var i in json){size++;}return size;};if(_10b3(json1)!==_10b3(json2)){return false;}for(key in json1){var _10b4=json1[key];var _10b5=json2[key];if(typeof _10b4!==typeof _10b5){return false;}if(typeof _10b4=="object"){if(!_108e.compareJSON(_10b4,_10b5)){return false;}}else{if(_10b4!==_10b5){return false;}}}return true;},insertHTML:function(el,_10b6){if(dojo.isIE){_10b6="<div style=\"display:none\">for IE</div>"+_10b6;_10b6=_10b6.replace(/<script([^>]*)>/gi,"<script$1 defer>");el.innerHTML=_10b6;el.removeChild(el.firstChild);}else{var _10b7=el.nextSibling;var _10b8=el.parentNode;_10b8.removeChild(el);el.innerHTML=_10b6;if(_10b7){_10b8.insertBefore(el,_10b7);}else{_10b8.appendChild(el);}}},isArray:function(arr){return Object.prototype.toString.call(arr)==="[object Array]";},isObject:function(arr){return Object.prototype.toString.call(arr)==="[object Object]";},handleButtonShowOrHide:function(_10b9){_108e.showOrHideCreateforPage("applicationPatternsPage","js_app_gridview_id",window.globalSetting.isPATTERN_CREATOR,_10b9);_108e.showOrHideCreateforDatabasePage("databasePatternsPage","js_app_gridview_id",window.globalSetting.isPATTERN_CREATOR);_108e.showOrHideCreateforPage("sharedComponenetsPage","componentGridView",window.globalSetting.isCATALOG_CREATOR,_10b9);_108e.showOrHideCreateforPage("applicationTemplatesPage","js_app_gridview_id",window.globalSetting.isCATALOG_CREATOR,_10b9);if(dom.byId("applicationTemplatesPage")&&_1086.byId("js_app_gridview_id")){if(_1086.byId("js_app_gridview_id").ButtonsGroup.getChildren()[0]){if(!window.globalSetting.isPATTERN_CREATOR){_1086.byId("js_app_gridview_id").ButtonsGroup.getChildren()[0].domNode.style.display="none";_1086.byId("js_app_gridview_id").ButtonsGroup.getChildren()[4].domNode.style.display="none";}else{_1086.byId("js_app_gridview_id").ButtonsGroup.getChildren()[0].domNode.style.display="";_1086.byId("js_app_gridview_id").ButtonsGroup.getChildren()[4].domNode.style.display="";}}}if(dom.byId("applicationPatternsPage")&&_1086.byId("js_app_gridview_id")){if(_1086.byId("js_app_gridview_id").ButtonsGroup.getChildren()[4]){if(!window.globalSetting.isPATTERN_CREATOR){_1086.byId("js_app_gridview_id").ButtonsGroup.getChildren()[4].domNode.style.display="none";}else{_1086.byId("js_app_gridview_id").ButtonsGroup.getChildren()[4].domNode.style.display="";}}}},showOrHideCreateforDatabasePage:function(_10ba,_10bb,_10bc){if(dom.byId(_10ba)&&_1086.byId(_10bb)){if(_1086.byId(_10bb).createButton){if(!_10bc){_1086.byId(_10bb).createButton.style.display="none";}else{_1086.byId(_10bb).createButton.style.display="";}}}},showOrHideCreateforPage:function(_10bd,_10be,_10bf,_10c0){if(dom.byId(_10bd)&&_1086.byId(_10be)){if(_1086.byId(_10be).createButton){if(!_10bf||_108e.isEmptyObject(_10c0)){_1086.byId(_10be).createButton.style.display="none";}else{_1086.byId(_10be).createButton.style.display="";}}if(_1086.byId(_10be).importButton){if(!_10bf||_108e.isEmptyObject(_10c0)){_1086.byId(_10be).importButton.style.display="none";}else{_1086.byId(_10be).importButton.style.display="";}}}},isEmptyObject:function(ob){for(var i in ob){if(ob.hasOwnProperty(i)){return false;}}return true;},patternTypeAvailFor:function(_10c1){var avail=false;_1083.forEach(window.globalSetting.patternTypes,function(_10c2){if(_10c2.shortname==_10c1&&_10c2.status=="avail"){avail=true;}});return avail;},statusIconMap:{online:"wca-image-status-running-icon",open:"wca-image-status-open-icon",close:"wca-image-status-resolved-icon",resolved:"wca-image-status-resolved-icon",offline:"wca-image-warning-icon",available:"wca-image-status-available-icon",attached:"wca-image-status-available-icon",unavailable:"wca-image-warning-icon",stopped:"wca-image-stop-icon",deploying:"wca-image-status-inprogress-icon",opened:"wca-image-warning-icon",closed:"wca-image-event-problem-closed-icon",powered_on:"wca-image-power-on-icon",powered_off:"wca-image-power-off-icon",powered_on_maintain:"wca-image-status-power-on-maintain-icon",powered_off_maintain:"wca-image-status-power-off-maintain-icon",powered_on_quiesced:"wca-image-status-power-on-quiesced-icon",powered_off_quiesced:"wca-image-status-power-off-quiesced-icon",powered_off_available:"wca-image-status-power-off-available-icon",powered_off_unavailable:"wca-image-status-power-off-unavailable-icon",powering_off:"wca-image-status-powering-off-icon","discovering":"wca-image-status-discovering-icon",pending:"wca-image-status-inprogress-icon",cloning:"wca-image-clone-icon",exporting:"wca-image-export-icon",on:"wca-image-led-green-icon",off:"wca-image-led-off-icon",blink:"wca-image-led-blink-icon",led_green:"wca-image-led-green-icon",led_yellow:"wca-image-led-yellow-icon",led_red:"wca-image-led-red-icon",started:"wca-image-status-running-icon",initializing:"wca-image-status-inprogress-icon",Quiesced:"wca-image-quiesce-icon",quiesced:"wca-image-quiesce-icon",quiescing:"wca-image-quiesce-icon",maintenance:"wca-image-maintain-icon",maintain:"wca-image-maintain-icon",up:"wca-image-status-running-icon",down:"wca-image-stop-icon",disabled:"wca-image-stop-icon",capture:"wca-image-capture-icon",capturing:"wca-image-capture-icon",failed:"wca-image-status-failed-icon",error:"wca-image-status-failed-icon","informational":"wca-image-status-information-icon","minor":"wca-image-status-warning-icon","unknown":"wca-image-status-unknown-icon","warning":"wca-image-status-warning-icon","fatal":"wca-image-status-failed-icon","critical":"wca-image-status-failed-icon","audit":"wca-image-status-audit-icon","alert":"wca-image-alert-icon","security":"wca-image-security-icon","major":"wca-image-status-failed-icon","resolution":"wca-image-resolution-icon","successful":"wca-image-success-icon","restart":"wca-image-status-restarting-icon","start":"wca-image-status-inprogress-icon","starting":"wca-image-status-inprogress-icon","debug":"wca-image-status-debug-icon","prepping":"wca-image-status-inprogress-icon","preparing":"wca-image-status-inprogress-icon","store":"wca-image-stored-icon","stored":"wca-image-stored-icon",executing:"wca-image-status-running-icon",completed:"wca-image-success-icon",complete:"wca-image-success-icon",ready:"wca-image-security-success-icon",readyupgrade:"wca-image-upgrade-icon",applied:"wca-image-success-icon",start:"wca-image-status-inprogress-icon",stop:"wca-image-status-inprogress-icon",stopping:"wca-image-status-inprogress-icon",deleting:"wca-image-status-inprogress-icon",callhome:"wca-image-call-home-icon",callservice:"wca-image-call-home-icon",callsupport:"wca-image-call-support-icon",rebalancing:"wca-image-rebalance-icon",rebalance:"wca-image-rebalance-icon",deploy:"wca-image-status-inprogress-icon",downloading:"wca-image-status-inprogress-icon",downloaded:"wca-image-status-running-icon",uploading:"wca-image-status-inprogress-icon",uploaded:"wca-image-status-running-icon",upload_complete:"wca-image-green-icon",license_accepted:"wca-image-certificate-accepted-icon",license_not_accepted:"wca-image-certificate-not-accepted-icon",warning:"wca-image-status-warning-icon",normal:"wca-image-success-icon",unlicensed:"wca-image-certificate-not-accepted-icon","started_jobs":"wca-image-status-job-started-icon","pending_jobs":"wca-image-status-job-pending-icon","running_critical":"wca-image-status-running-critical-icon","running_unknown":"wca-image-status-running-unknown-icon","running_warning":"wca-image-status-running-warning-icon","customerserviceable":"wca-image-status-running-customer-serviceable-icon","identity":"wca-image-status-information-icon","standby":"wca-image-status-standby-icon","opmocm available":"wca-image-status-running-icon","available warning":"wca-image-status-running-warning-icon","available critical warning":"wca-image-status-running-critical-icon","connected":"wca-image-status-connected-icon","disconnected":"wca-image-status-disconnected-icon","connecting":"wca-image-status-inprogress-icon","disconnecting":"wca-image-status-inprogress-icon","updating":"wca-image-status-updating-icon","update":"wca-image-status-updating-icon","up_to_date":"wca-image-success-icon","active":"wca-image-led-green-icon","suspended":"wca-image-pause-icon","assigned":"wca-image-status-resolved-icon","incomplete":"wca-image-pause-icon","unconfigured":"wca-image-undefined-icon","uninitialized":"wca-image-warning-icon","empty":"wca-image-stored-icon","defined":"wca-image-stored-icon","validated":"wca-image-status-resolved-icon","enabling":"wca-image-led-green-icon","dr_running_critical":"wca-image-status-running-critical-icon","failing_over":"wca-image-discover-icon","dr_prepared":"wca-image-start-icon","recovering":"wca-image-status-recover-icon","storing":"wca-image-status-inprogress-icon","stuck_online":"wca-image-warning-icon","failed_offline":"wca-image-status-failed-icon","enabled":"wca-image-status-running-icon","error_disabled":"wca-image-status-failed-icon","network_up":"wca-image-status-connected-icon","network_down":"wca-image-status-disconnected-icon","permissions_error":"wca-image-status-failed-icon","connections_error":"wca-image-status-disconnected-icon","misconfigured":"wca-image-status-failed-icon","running":"wca-image-status-running-icon","pending_delete":"wca-image-status-inprogress-icon","degraded":"wca-image-warning-icon"},statusMessageMap:{online:paas.Base.messages.ONLINE,offline:paas.Base.messages.OFFLINE,available:paas.Base.messages.PATTERNTYPE_STATUS_AVAIL,attached:paas.Base.messages.PATTERNTYPE_STATUS_AVAIL,unavailable:paas.Base.messages.PATTERNTYPE_STATUS_NOT_AVAIL,powered_on:paas.Base.messages.POWERED_ON,powered_off:paas.Base.messages.POWERED_OFF,powered_on_maintain:paas.Base.messages.POWERED_ON_MAINTAIN,powered_off_maintain:paas.Base.messages.POWERED_OFF_MAINTAIN,powered_on_quiesced:paas.Base.messages.POWERED_ON_QUIESCED,powered_off_quiesced:paas.Base.messages.POWERED_OFF_QUIESCED,powered_off_available:paas.Base.messages.POWERED_OFF_AVAILABLE,powered_off_unavailable:paas.Base.messages.POWERED_OFF_UNAVAILABLE,powering_off:paas.Base.messages.POWERING_OFF,"discovering":paas.Base.messages.DISCOVERING,pending:paas.Base.messages.PENDING,cloning:paas.Base.messages.CLONING,exporting:paas.Base.messages.EXPORTING,unlicensed:paas.Base.messages.UNLICENSED,initializing:paas.Base.messages.INITIALIZING,deleting:paas.Base.messages.DELETING,stopped:paas.Base.messages.STOPPED,stop:paas.Base.messages.STOPPING,stopping:paas.Base.messages.STOPPING,on:paas.Base.messages.ON,off:paas.Base.messages.OFF,blink:paas.Base.messages.BLINK,led_green:paas.Base.messages.GREEN,led_yellow:paas.Base.messages.YELLOW,led_red:paas.Base.messages.RED,start:paas.Base.messages.STARTING,starting:paas.Base.messages.STARTING,started:paas.Base.messages.RUNNING,quiesced:paas.Base.messages.QUIESCED,quiescing:paas.Base.messages.QUIESCING,maintenance:paas.Base.messages.MAINTAIN,maintain:paas.Base.messages.MAINTAIN,up:paas.Base.messages.ON,down:paas.Base.messages.OFF,disabled:paas.Base.messages.DISABLED,capture:paas.Base.messages.CAPTURING,capturing:paas.Base.messages.CAPTURING,failed:paas.Base.messages.FAILED,error:paas.Base.messages.ERROR,"informational":paas.Base.messages.INFORMATIONAL,"minor":paas.Base.messages.MINOR,"unknown":paas.Base.messages.UNKNOWN,"warning":paas.Base.messages.WARNING,"debug":paas.Base.messages.DEBUG,"major":paas.Base.messages.MAJOR,"fatal":paas.Base.messages.FATAL,"critical":paas.Base.messages.CRITICAL,"audit":paas.Base.messages.AUDIT,"alert":paas.Base.messages.ALERT,"security":paas.Base.messages.SECURITY,"resolution":paas.Base.messages.RESOLUTION,successful:paas.Base.messages.SUCCESS,open:paas.Base.messages.STATE_OPEN,close:paas.Base.messages.STATE_CLOSE,opened:paas.Base.messages.STATE_OPEN,closed:paas.Base.messages.STATE_CLOSE,resolved:paas.Base.messages.CLOSE,"restart":paas.Base.messages.RESTART,"debug":paas.Base.messages.DEBUG,"prepping":paas.Base.messages.PREPPING,"preparing":paas.Base.messages.PREPARING,"store":paas.Base.messages.STORE,"stored":paas.Base.messages.STORED,executing:paas.Base.messages.EXECUTING,completed:paas.Base.messages.COMPLETED_STATUS,complete:paas.Base.messages.COMPLETED,ready:paas.Base.messages.READY,readyupgrade:paas.Base.messages.READY,up_to_date:paas.Base.messages.UP_TO_DATE,decrypting:paas.Base.messages.DECRYING,expanding:paas.Base.messages.EXPANDING,registering:paas.Base.messages.REGISTERFP,verifying:paas.Base.messages.VERIFYING,"callhome":paas.Base.messages.CALLHOME,"callsupport":paas.Base.messages.CALLSUPPORT,"callservice":paas.Base.messages.CALL_SERVICE,"customerserviceable":paas.Base.messages.CUSTOMER_SERVICEABLE,rebalancing:paas.Base.messages.REBALANCING,rebalance:paas.Base.messages.REBALANCE,deploy:paas.Base.messages.DEPLOYING,downloading:paas.Base.messages.DOWNLOADING,downloaded:paas.Base.messages.DOWNLOADED,uploading:paas.Base.messages.UPLOADING,uploaded:paas.Base.messages.UPLOADED,upload_complete:paas.Base.messages.UPLOADED,start:paas.Base.messages.STARTING,stop:paas.Base.messages.STOPPING,license_accepted:paas.Base.messages.LICENSE_AGREEMENT_ACCEPTED,license_not_accepted:paas.Base.messages.LICENSE_AGREEMENT_NOT_ACCEPTED,normal:paas.Base.messages.Status_Normal,warning:paas.Base.messages.Status_Warning,"started_jobs":paas.Base.messages.STARTED,"pending_jobs":paas.Base.messages.PENDING,"running_critical":paas.Base.messages.RUNNING_BUT_CRITICAL,"running_unknown":paas.Base.messages.RUNNING_BUT_UNKNOWN,"running_warning":paas.Base.messages.RUNNING_BUT_WAITING,"customerserviceable":paas.Base.messages.CUSTOMER_SERVICEABLE,"not_applied":paas.Base.messages.NOT_APPLY,"applying":paas.Base.messages.APPLYING,"applied":paas.Base.messages.APPLIED,"identity":paas.Base.messages.IDENTITY,"standby":paas.Base.messages.STATUS_STANDBY,"opmocm available":paas.Base.messages.PATTERNTYPE_STATUS_AVAIL,"available warning":paas.Base.messages.AVAILABLE_WARNING,"available critical warning":paas.Base.messages.AVAILABLE_CRITICAL_WARNING,"yes":paas.Base.messages.YES,"no":paas.Base.messages.NO,"connected":paas.Base.messages.CONNECTED,"disconnected":paas.Base.messages.DISCONNECTED,"connecting":paas.Base.messages.CONNECTING,"disconnecting":paas.Base.messages.DISCONNECTED,"updating":paas.Base.messages.UPDATING,"update":paas.Base.messages.UPDATING,"active":paas.Base.messages.ACTIVE,"assigned":paas.Base.messages.APPLIED,"suspended":paas.Base.messages.QUIESCED,"unconfigured":paas.Base.messages.UNCONFIGURED,"uninitialized":paas.Base.messages.UNINITIALIZED,"empty":paas.Base.messages.EMPTY,"defined":paas.Base.messages.DEFINED,"validated":paas.Base.messages.VALIDATED,"enabling":paas.Base.messages.ENABLING,"dr_running_critical":paas.Base.messages.DR_RUNNING_WITH_ERRORS,"failing_over":paas.Base.messages.DR_FAILING_OVER,"dr_prepared":paas.Base.messages.DR_PREPARED_TO_FAILOVER,"recovering":paas.Base.messages.recovering,"storing":paas.Base.messages.STORING,"stuck_online":paas.Base.messages.STUCK_ONLINE,"failed_offline":paas.Base.messages.FAILED_OFFLINE,"enabled":paas.Base.messages.ENABLED,"error_disabled":paas.Base.messages.ERROR_DISABLED,"network_up":paas.Base.messages.UP,"network_down":paas.Base.messages.DOWN,"permissions_error":paas.Base.messages.PERMISSION_DENIED,"connections_error":paas.Base.messages.UNABLE_TO_CONNECT,"misconfigured":paas.Base.messages.MISCONFIGURED,"running":paas.Base.messages.RUNNING,"copying":paas.Base.messages.COPYING,"syncing":paas.Base.messages.SYNCING,"pending_delete":paas.Base.messages.PENDING_DELETE,"degraded":paas.Base.messages.DEGRADED,"reserved":paas.Base.messages.RESERVED},statusIconFormatter:function(_10c3){if(_10c3==null){return "";}if(dojo.isArray(_10c3)&&_10c3.length>0){_10c3=_10c3[0];}var _10c4=_10c3.toLowerCase();if(_10c4 in _108e.statusIconMap){var _10c5="<span title=\"${0}\" class=\"wca-image-icon ${1}\"></span>";return dojo.string.substitute(_10c5,[_108e.statusMessageMap[_10c4]||_10c4,_108e.statusIconMap[_10c4]]);}else{return _108e.statusMessageMap[_10c4]||_10c4;}},statusLabelFormatter:function(_10c6){if(_10c6==null){return "";}var _10c7=_10c6.toLowerCase();return _108e.statusMessageMap[_10c7]||_10c7;},statusIconAndLabelFormatter:function(_10c8){var _10c9=_108e.statusIconFormatter(_10c8);var _10ca=_108e.statusLabelFormatter(_10c8);if(_10c9===_10ca){_10c9="";}return _10c9+_10ca;},statusIconAndLabelFormatterWithColon:function(_10cb){var _10cc=_108e.statusIconFormatter(_10cb);var _10cd=_108e.statusLabelFormatter(_10cb);if(_10cc===_10cd){_10cc="";}return _10cc+dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLON,[_10cd]);},iconFormatter:function(title,_10ce){var _10cf="<span title=\"${0}\" class=\"wca-image-icon ${1}\"></span>";return dojo.string.substitute(_10cf,title,_10ce);},cachedResponses:{},getCachedDeferred:function(url){var _10d0=this.cachedResponses[url];if(_10d0===undefined){var self=this;var _10d1=this.getDeferred("GET",url);_10d1.then(function(resp){self.cachedResponses[url]=resp;});return _10d1;}else{var _10d2=new _108c();_10d2.resolve(_10d0);return _10d2;}},getDeferred:function(_10d3,url,data,sync,_10d4,_10d5){var _10d6={url:url,handleAs:"json",timeout:_10d4?_10d4:0,headers:{"Content-Type":_10d5?_10d5:"application/json",Accept:"application/json"},encoding:"utf-8",sync:sync?sync:false};if("post"==_10d3||"POST"==_10d3){_10d6.putData=data;return dojo.xhrPost(_10d6);}else{if("put"==_10d3||"PUT"==_10d3){_10d6.putData=data;return dojo.xhrPut(_10d6);}else{if("get"==_10d3||"GET"==_10d3){return dojo.xhrGet(_10d6);}else{if("delete"==_10d3||"DELETE"==_10d3){return dojo.xhrDelete(_10d6);}}}}},IPV4RegExp:_1088.ipAddress({allowIPv6:false,allowHybrid:false,allowHex:false,allowDecimal:false}),IPV6RegExp:"(((?:::)?(?:[0-9a-fA-F]{1,4}::?)+(?:[0-9a-fA-F]{1,4}|:|(?:\\d{1,3}\\.){3}\\d{1,3}))|(?:::\\d*))",SubnetIPV6RegExp:"(((?:::)?(?:[0-9a-fA-F]{1,4}::?)+(?:[0-9a-fA-F]{1,4}|:|(?:\\d{1,3}\\.){3}\\d{1,3}))|(?:::\\d*))"+"/\\d{1,3}",getIPRegExp:function(_10d7){if(_10d7=="ipv6"){return _108e.IPV6RegExp;}else{if(_10d7=="ipv4"){return _108e.IPV4RegExp;}}return _108e.IPV4RegExp+"|"+_108e.IPV6RegExp;},hostNameRegExp:_1088.host({allowPort:false,allowLocal:true,allowIP:false}),ipHostRegExp:function(_10d8){return _108e.getIPRegExp(_10d8)+"|"+_108e.hostNameRegExp;},getUrlRegExp:function(){var _10d9="(https?|ftps?)\\://";var _10da="(\\:\\d+)?";var _10db="(("+_108e.getIPRegExp("ipv4")+"|"+_108e.getIPRegExp("ipv6")+"|"+_108e.hostNameRegExp+")"+_10da+"|\\["+_108e.getIPRegExp("ipv6")+"\\]"+_10da+")";var _10dc="(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?";return _10d9+_10db+_10dc;},capcityFormatter:function(value,item,mode){if(!value){_10dd=0;units="MB";}var _10dd,units=item.units?item.units:"MB";if(value>=1024&&units=="MB"){_10dd=value/1024;if(_10dd<1024){_10dd=_108e.numberFormatter(_10dd);units="GB";}else{_10dd/=1024;_10dd=_108e.numberFormatter(_10dd);units="TB";}}else{if(value>=1024&&units=="GB"){_10dd/=1024;_10dd=_108e.numberFormatter(_10dd);units="TB";}else{_10dd=_108e.numberFormatter(value);}}if(mode=="object"){return {value:_10dd,unit:units};}else{return _10dd+"&nbsp;&nbsp;"+paas.Base.messages[units];}},powerFormatter:function(_10de){var units=_10de.units;var _10df=_10de.minimum_input_power?_10de.minimum_input_power+units:"";var _10e0=_10de.maximum_input_power?_10de.maximum_input_power+units:"";var _10e1=dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLONCONN,[paas.Base.messages.INPUT_POWER_RANGE,_10df+" - "+_10e0]);var _10e2="<span class='span-in-table' style='padding-right:10px;'>"+_10e1+"</span>";var input=_10de.average_input_power?_10de.average_input_power+units:"-";var _10e3=dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLONCONN,[paas.Base.messages.AVERAGE_INPUT_POWER,input]);_10e2+="<span class='span-in-table'>"+_10e3+"</span>";return _10e2;},getIDFromURI:function(uri){var _10e4=uri.lastIndexOf("/");if(_10e4!=-1){if(_10e4!=uri.length){return uri.substring(_10e4+1);}else{return uri.substring(_10e4+1,uri.length-1);}}else{return uri;}},getImageHTMLofStatus:function(_10e5,_10e6,_10e7,_10e8){var icon=_108e.getStatusHealthImageHTML(_10e5,_10e6,_10e7,_10e8);if(!icon){icon=_108e.getStatusImageHTML(_10e5);}return icon;},getStatusIndicator:function(_10e9){var image="";if(_10e9!="RUNNING"&&_10e9!="TERMINATED"&&_10e9!="FAILED"&&_10e9!="ERROR"){image="<img style=\"vertical-align: bottom;\" src=\"/images/progressBarAnim.gif\" />";}return image;},convertArrayToString:function(input){if(dojo.isArray(input)){return input+"";}else{return input;}},getStatusHealthImageHTML:function(_10ea,_10eb,_10ec,_10ed,_10ee){var image="";_10ea=_108e.convertArrayToString(_10ea);_10eb=_108e.convertArrayToString(_10eb);if(_10ea=="RUNNING"&&_10eb){var _10ef="<img alt=\"${alt_name}\" title=\"${status_title}\" style=\"vertical-align: bottom;margin-left:10px\" src=\"/images/icon/${name}.png\" />";if(_10ed){_10ef="<img alt=\"${alt_name}\" title=\"${status_title}\" style=\"vertical-align: bottom;\" src=\"/images/icon/${name}.png\" />";}var _10f0=(_10eb=="NORMAL")?(_10ea+"_WITH_HEALTH"):(_10ea+"_BUT_HEALTH");var _10f1=_10ee;if(!_10f1){if(paas.Base.messages[_10f0]){_10f1=dojo.string.substitute(paas.Base.messages[_10f0],[paas.Base.messages["HEALTH_STATUS_"+_10eb]]);}else{_10f1="";}}var _10f2=_10ea+"_"+_10eb;var _10f3=paas.Base.messages[_10ea]?paas.Base.messages[_10ea]:_10ea;image=dojo.string.substitute(_10ef,{name:_10f2.toLowerCase(),alt_name:_10f3,status_title:_10f1});}else{if(_10ea=="RUNNING"){}}return image;},getStatusImageHTML:function(_10f4,_10f5){var image="";_10f4=_108e.convertArrayToString(_10f4);if(_10f4){var _10f6;if(_10f5){_10f6="<span alt=\"${alt_name}\" title=\"${status_title}\" style=\"vertical-align: bottom; display: inline-block\" class=\"wca-image-${name}-icon\"></span>";}else{_10f6="<span alt=\"${alt_name}\" title=\"${status_title}\" style=\"vertical-align: bottom; margin-left: 10px; display: inline-block\" class=\"wca-image-${name}-icon\"></span>";}var _10f7=_10f4;var _10f8=paas.Base.messages[_10f4]?paas.Base.messages[_10f4]:_10f4;image=dojo.string.substitute(_10f6,{name:_10f7.toLowerCase(),alt_name:_10f8,status_title:_10f8});}return image;},getHealthURLHTML:function(_10f9,_10fa){var _10fb="";if(_10f9&&_10fa!="TERMINATED"&&_10fa!="STOPPED"){return "<a class='icon icon-btn icon-arrows icon-fw-bold' onclick='window.open(\""+_10f9+"\")' href='javascript:;'><U>"+paas.Base.messages.MONITOR_TAB;+"</U></a>";}return _10fb;},isShowAdvanceLink:function(){var _10fc=false;if(window.globalSetting.isIPAS){_10fc=true;}else{_10fc=window.globalSetting.isMONITOR;}return _10fc;},getHealthURLHTMLWithRole:function(_10fd,_10fe,_10ff,_1100,label){var _1101="";var _1102=_108e.isShowAdvanceLink();if(_10fd&&_10fe!="TERMINATED"&&_10fe!="STOPPED"&&_1102){_1101=_108e.getHealthURLString(_10fd,_10ff,_1100,label||paas.Base.messages.MONITOR_TAB);}return _1101;},getHealthURLString:function(_1103,_1104,_1105,_1106){if(_1104){var _1107="";if(_1105){_1107="&resourcedeploymentID="+encodeURIComponent(_1105);}return "<a class='icon icon-btn icon-arrows icon-fw-bold' target='_blank' href='/resources/sharedServiceWebAdmin/"+_1104+"?postLoginTargetURI="+encodeURIComponent(_1103)+_1107+"'><U>"+_1106+"</U></a>";}else{return "<a class='icon icon-btn icon-arrows icon-fw-bold' target='_blank' href='"+_1103+"'><U>"+_1106+"</U></a>";}},getMonitoringURL:function(_1108){return dojo.string.substitute(dashboardInit.monitoringUrl,{deployment_id:_1108});},getHashFromID:function(id){if(!id){return "";}var _1109=id.lastIndexOf("/");if(_1109!=-1){if(_1109!=id.length){return id.substring(_1109+1);}else{return id.substring(_1109+1,id.length-1);}}else{return id;}},compareObjectByKey:function(a,b,key){if(a[key]>b[key]){return 1;}if(a[key]<b[key]){return -1;}return 0;},compareObjectByName:function(a,b){return _108e.compareObjectByKey(a,b,"name");},compareByNameIgnoreCase:function(a,b){return _108e.compareObjectByName({"name":a.name.toLowerCase()},{"name":b.name.toLowerCase()});},comparePatternType:function(a,b){if(a.shortname>b.shortname){return 1;}if(a.shortname<b.shortname){return -1;}var nums1=a.version.split(".");var nums2=b.version.split(".");var num=Math.max(nums1.length,nums2.length);for(var i=0;i<num;i++){if(nums1[i]==null){return 1;}if(nums2[i]==null){return -1;}var _110a=parseInt(nums1[i]);var _110b=parseInt(nums2[i]);if(_110a>_110b){return -1;}else{if(_110a<_110b){return 1;}}}return 0;},getSetviceType:function(_110c){if(_110c=="External"){return paas.Base.messages.EXTERNAL_SERVICE;}return "";},temperatureFormatter:function(value,item){if(value==null){return;}var _110d=_1082.format(value,{places:0});var unit=item.units||"";if(unit=="C"){var unit=dojox.html.entities.decode("&#176")+"C";}var _110e=_110d+unit;if(item.warning&&value>=item.warning){return _110e+"&nbsp;<img src=\"/images/icon/health-red.png\" title=\"warning\" style=\"vertical-align: top;\" />";}return _110e+"&nbsp;<img src=\"/images/icon/health-green.png\" title=\"warning\" style=\"vertical-align: top;\" />";},utilizationFormatter:function(value,item){var usage=new _108b({total:100,used:value,isSimpleVersion:true});return usage.domNode;},deploymentProgressFormatter:function(value){var usage=new _108b({total:100,used:value,isSimpleVersion:true,thresholdWarning:200,thresholdCritical:200});style.set(usage.domNode,"display","inline");return usage.domNode;},timeFormatter:function(value,item){var units=item.units||"ms";if(units=="ms"){if(value<1000){return _108e.numberFormatter(value)+"ms";}else{value=value/1000;return _108e.numberFormatter(value)+"s";}}else{if(units=="s"){return _108e.numberFormatter(value)+"s";}else{return _108e.numberFormatter(value)+units;}}},getHTMLForEndpointDialog:function(_110f,_1110){var _1111="";var _1112="";_1083.forEach(_110f,function(_1113){var _1114=_1113.external_uri;if(_1114){for(var _1115 in _1114){var _1116=_1114[_1115];if(_108e.isObject(_1116)){_1112+=_108e.openEndpointLinkFormatter(_1116,true,_1110);}}}});_1111+=" <a class='icon icon-btn icon-arrows icon-fw-bold' onclick='dashboardDep.showEndpoint(\""+_1112+"\")' href='javascript:;'><U>"+paas.Base.messages.DEPLOY_CLICK_HERE+"</U></a>";return _1111;},parseURLInfo:function(_1117){var _1118={};for(var key in _1117){var value=_1117[key];if("SSO"===key||"LABEL"==key||"extsso"==key){_1118[key]=value;}else{if(!_1118["LABEL"]){_1118["LABEL"]=key;}_1118["ENDPOINT"]=value;}}return _1118;},formatDeployDetailMessage:function(value,_1119){if(value==null){return "";}else{var _111a;var _111b="";if(!_1119){_1119=20;}var _111c=0;var _111d="";if(value.length>_1119){_111a=value.split(/\.|_/);_111b=_111a[0];_111d=_111b;_111c=_111b.length;for(var idx=1;idx<_111a.length;idx++){_111b+=value.charAt(_111c);_111d+=value.charAt(_111c);_111c+=1;if(_111d.length+_111a[idx].length>=_1119){_111b+="<br>";_111d=_111a[idx];}else{_111d+=_111a[idx];}_111b+=_111a[idx];_111c+=_111a[idx].length;}}else{_111b=value;}return _111b;}},openEndpointLinkFormatter:function(_111e,_111f,_1120){var info=_108e.parseURLInfo(_111e);var anEpt=info["LABEL"];var url=info["ENDPOINT"];var sso=info["SSO"];var _1121=info["extsso"];var _1122="";if(url){var _1123=url;if(url&&url.substring(0,4).toLowerCase()=="http"){if(_111f&&_1120){_1123="<a target=\\\"_blank\\\" href=\\\"/resources/sharedServiceWebAdmin/"+_1120+"?postLoginTargetURI="+encodeURIComponent(url)+"\\\">"+url+"</a>";}else{if(sso==true){_1123="<a target=\\\"_blank\\\" href=\\\"/resources/deploymentInletToken/"+_1120+"?postLoginTargetURI="+encodeURIComponent(url)+"\\\">"+url+"</a>";}else{if(_1121=="true"){_1123="<a target=\\\"_blank\\\" href=\\\"/resources/deploymentInletToken/"+_1120+"?postLoginTargetURI="+encodeURIComponent(url)+"&extsso=true"+"\\\">"+url+"</a>";}else{_1123="<a target=\\\"_blank\\\" href=\\\""+url+"\\\">"+url+"</a>";}}}}_1122=anEpt+": "+_1123+"<br /><br />";}return _1122;},formatEndpointForOneExternalURI:function(_1124,_1125,_1126){var _1127="";for(var _1128 in _1124){var _1129=_1124[_1128];if(_108e.isObject(_1129)){_1127+=_108e.endpointLinkFormatter(_1129,_1125,_1126);}}return _1127;},formatEndpointForServiceRegistry:function(_112a,_112b,_112c){var _112d="";_1083.forEach(_112a,function(_112e){var _112f=_112e.external_uri;if(_112f){_112d+=_108e.formatEndpointForOneExternalURI(_112f,_112b,_112c);}});return _112d;},endpointLinkFormatter:function(_1130,_1131,_1132){var info=_108e.parseURLInfo(_1130);var anEpt=info["LABEL"];var url=info["ENDPOINT"];var sso=info["SSO"];var _1133=info["extsso"];var _1134="";if(url){var _1135=url;if(url&&url.substring(0,4).toLowerCase()=="http"){if(_1131&&_1132){_1135="<a target=\"_blank\" href=\"/resources/sharedServiceWebAdmin/"+_1132+"?postLoginTargetURI="+encodeURIComponent(url)+"\">"+url+"</a>";}else{if(sso==true){_1135="<a target=\"_blank\" href=\"/resources/deploymentInletToken/"+_1132+"?postLoginTargetURI="+encodeURIComponent(url)+"\">"+url+"</a>";}else{if(_1133=="true"){_1135="<a target=\"_blank\" href=\"/resources/deploymentInletToken/"+_1132+"?postLoginTargetURI="+encodeURIComponent(url)+"&extsso=true"+"\">"+url+"</a>";}else{_1135="<a target=\"_blank\" href=\""+url+"\">"+url+"</a>";}}}}_1134=anEpt+": "+_1135+"<br /><br />";}return _1134;},numberFormatter:function(value,item){return _1082.format(value,{});},indentationFormatter:function(value,item){return "<div style=\"color: #666666; font-size: 11px; padding-left: 30px;\">"+value+"</div>";},indentationWithLocationFormatter:function(value,item){return "<div style=\"padding-left: 30px;\">"+value+"</div>";},permissionLabels:{"R":paas.Base.messages.ACCESS_RIGHT_R,"W":paas.Base.messages.ACCESS_RIGHT_W,"F":paas.Base.messages.ACCESS_RIGHT_F,0:"no",1:paas.Base.messages.ACCESS_RIGHT_R,2:paas.Base.messages.ACCESS_RIGHT_W,3:paas.Base.messages.ACCESS_RIGHT_C,4:paas.Base.messages.ACCESS_RIGHT_F},encodeIP:function(ip){return (ip&&ip.indexOf(":")>=0)?"["+ip+"]":ip;},isPluginConfigSupportInCurrentEnv:function(_1136){var _1137=window.globalSetting.isIPAS?"IPAS":"IWD";var _1138=[];if(_1136.requires&&_1136.requires.products){_1138=_1136.requires.products;}if(_1138.length==0){return true;}for(var i=0;i<_1138.length;i++){if(_1137==_1138[i].toUpperCase()){return true;}}return false;},COLUMN_COUNT:0,TWOCOLUMNTR_TD0_LABEL_PREFIX:"paasUtil_TwoColumnTR_td0_label_",createTwoColumnTR:function(name,value,_1139,_113a){var _113b=name||"";if(_1139!==false){_113b=dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLON,[_113b])+"&nbsp";}value=value||"";var tr=_1084.create("tr");var _113c=_1084.create("td",null,tr);style.set(_113c,"display","none");var td0=_1084.create("td",{className:"dashboard-detail-field-label form-table-column underlined-table-column",style:dojo.mixin({verticalAlign:"top"},_113a)},tr);_1084.create("span",{innerHTML:_113b+"&nbsp",style:"font-weight: bold",id:_108e.TWOCOLUMNTR_TD0_LABEL_PREFIX+(++_108e.COLUMN_COUNT)},td0);var td1=_1084.create("td",{className:"relationship-table-column underlined-table-column",style:_113a},tr);if(value.domNode){dojo.attr(value.domNode,"aria-labelledby",_108e.TWOCOLUMNTR_TD0_LABEL_PREFIX+_108e.COLUMN_COUNT);td1.appendChild(value.domNode);}else{if(value.nodeType){dojo.attr(value,"aria-labelledby",_108e.TWOCOLUMNTR_TD0_LABEL_PREFIX+_108e.COLUMN_COUNT);td1.appendChild(value);}else{var span=_1084.create("span",{innerHTML:value},td1);style.set(span,"color","#58595D");}}return tr;},createThreeColumnTR:function(name,value,_113d){var tr=_108e.createTwoColumnTR(name,value,_113d);var _113e=tr.childNodes[0];style.set(_113e,"display","");style.set(_113e,"paddingLeft","0");_113e.innerHTML="&nbsp;&nbsp;";_1085.add(_113e,"underlined-table-column form-table-toggle-column");return tr;},preferences:null,getPreference:function(name,_113f){if(_108e.preferences==null){var _1140=dojo.cookie("preferences");if(typeof _1140==="undefined"){_108e.preferences={};}else{try{_108e.preferences=json.parse(_1140);}catch(ex){_108e.preferences={};}}}var value=_108e.preferences[name];if((value==null||typeof _1140==="undefined")&&(typeof _113f!="undefined")){value=_113f;}return value;},createAnchorButton:function(args,_1141){var a=_1084.create("a",{"href":"javascript:void(0);"},_1141||null);var span=_1084.create("span",null,a);_1085.add(span,"wca-image-icon");if(args.src){var image=_1084.create("img",{title:args.alt||"",alt:args.alt||"",src:args.src},span);}else{if(args.iconClass){_1085.add(span,args.iconClass);span.title=args.alt;}else{span.innerHTML=args.alt;}}return a;},actionImageMap:{"refresh":"/images/refresh-icon.png","export":"/images/export-icon.png","start":"/images/start.gif","stop":"/images/stop.gif","delete":"/images/delete.gif","add":"/images/add-icon.gif","edit":"/images/edit-icon.gif","deploy":"/images/add-to-cloud-icon.gif","hide":"/images/disable_blue.png","unhide":"/images/disable_hidden.png","detail":"/images/sprites/action_listview.gif","logs":"/images/arrow_right.gif","clone":"/images/clone-icon.png","lock":"/images/locked_24.png","capture":"/images/capture-icon.png","resetall":"/images/reset.png","copy":"/images/ac16_copy_24.png","sync":"/images/synch-icon.png"},actionMessageMap:{"refresh":paas.Base.messages.widgets_gridview_Refresh,"edit":paas.Base.messages.EDIT,"export":paas.Base.messages.EXPORT,"delete":paas.Base.messages.DELETE,"add":paas.Base.messages.ADD,"hide":paas.Base.messages.HIDEEVENT,"unhide":paas.Base.messages.UNHIDEEVENT,"detail":paas.Base.messages.GRID_HEADER_DETAILS,"clone":paas.Base.messages.CLONE,"lock":paas.Base.messages.LOCK,"capture":paas.Base.messages.CAPTURE,"resetall":paas.Base.messages.APPMODEL_ORDERING_TOOLBAR_RESET,"copy":paas.Base.messages.COPYHINT,"sync":paas.Base.messages.SyncHINT},actionImageFormatter:function(_1142,title){var _1143=_1142.toLowerCase();return _108e.createAnchorButton({"src":_108e.actionImageMap[_1143],"alt":title||_108e.actionMessageMap[_1143]||_1143});},setAnchorButtonImage:function(_1144,_1145){var image=dojo.query("img",_1144)[0];attr.set(image,"src",_1145);},setPreference:function(name,value){var _1146=_108e.getPreference(name);if(_1146!=value){_108e.preferences[name]=value;dojo.cookie("preferences",json.stringify(_108e.preferences),{path:"/",secure:true});}return value;},find:function(array,func,_1147){if(!dojo.isArray(array)){return null;}for(var i=0;i<array.length;i++){if(func.call(_1147||dojo.global,array[i],i)){return array[i];}}return null;},calculateTimeInterval:function(value){var _1148=(new Date()).getTime();var _1149=_1148;if(value==="1"){_1149=_1148-3600000;}else{if(value="24"){_1149=_1148-3600000*24;}}return _1149;},getErrorMessage:function(resp){var _114a="";if(resp&&resp.responseText){var json=dojo.fromJson(resp.responseText);_114a=json.errorMessage||json.rootCause;}return _114a;},UserNameRegExp:"(?:[!#-'*+\\-\\/-9=?A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀䶵一鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ^-~]+[.])*[!#-'*+\\-\\/-9=?A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀䶵一鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ^-~]+",getEmailRegExp:function(){return _108e.UserNameRegExp+"@"+_1088.host();},isPageAccessible:function(_114b){if(!window.globalSetting.menu_roles||!window.globalSetting.menu_roles[_114b]){return false;}var _114c=window.globalSetting.menu_roles[_114b],flag=false;_1083.forEach(_114c,function(role){if(_1083.indexOf(window.globalSetting.rolesList,role)>-1){flag=true;return false;}},this);return flag;},sendXHR:function(_114d,url,data,_114e,sync,_114f){var xhr=new XMLHttpRequest();if(_114e){xhr.addEventListener("progress",_114e.onProgress,false);xhr.addEventListener("abort",_114e.onAbort,false);if(xhr.upload){xhr.upload.addEventListener("progress",_114e.onProgress,false);xhr.upload.addEventListener("abort",_114e.onAbort,false);}}xhr.open(_114d,url,sync?false:true);xhr.responseType=_114f?_114f:"text";xhr.send(data);xhr.onreadystatechange=function(e){if(xhr.readyState==4){var _1150=xhr.status.toString();if(_1150.indexOf("2")==0){if(_114e&&_114e.onLoad){_114e.onLoad(xhr.response,{status:xhr.status});}}else{if(_114e&&_114e.onError){_114e.onError(xhr.response,{status:xhr.status});}}}};return xhr;},supportFileAPI:function(){if(window.File){return true;}else{return false;}},wcaStatus:{"DRAFT":"RM01027","STARTED":"RM01006","DELETED":"RM01069","PARTIAL_START":"RM01070","FAILED":"RM01013","STOPPING":"RM01010","DELETING":"RM01024","STARTING":"RM01005","PROCESSING":"RM01002","TRANSFERING":"RM01003","TRANSFERED":"RM01004","INITIALIZING":"RM01000","DEPLOYING":"RM01037"},wcaIconMap:{RM01000:"/images/icon/pending_animation.gif",RM01001:"/images/success-icon.gif",RM01002:"/images/icon/pending_animation.gif",RM01003:"/images/icon/pending_animation.gif",RM01004:"/images/icon/pending_animation.gif",RM01005:"/images/icon/pending_animation.gif",RM01006:"/images/start-icon.gif",RM01007:"/images/esced_hypervisor.gif",RM01008:"/images/icon/pending_animation.gif",RM01009:"/images/quiesced_hypervisor.gif",RM01010:"/images/icon/pending_animation.gif",RM01011:"/images/stop-icon.gif",RM01012:"/images/success-icon.gif",RM01013:"/images/fail-icon.gif",RM01014:"/images/fail-icon.gif",RM01015:"/images/fail-icon.gif",RM01016:"/images/success-icon.gif",RM01017:"/images/inactive-icon.gif",RM01018:"/images/icon/pending_animation.gif",RM01019:"/images/icon/pending_animation.gif",RM01020:"/images/icon/pending_animation.gif",RM01021:"/images/icon/pending_animation.gif",RM01022:"/images/icon/pending_animation.gif",RM01023:"/images/inactive-icon.gif",RM01024:"/images/icon/pending_animation.gif",RM01025:"/images/maint-mode-icon.gif",RM01026:"/images/icon/pending_animation.gif",RM01027:"/images/draft-icon.gif",RM01028:"/images/read-only-icon.gif",RM01029:"/images/icon/pending_animation.gif",RM10173:"/images/warning-icon.png",RM10174:"/images/success-icon.gif",RM10175:"/images/warning-icon.png",RM10176:"/images/fail-icon.gif",RM01036:"/images/icon/pending_animation.gif",RM01035:"/images/icon/pending_animation.gif",RM01033:"/images/icon/pending_animation.gif",RM01037:"/images/icon/pending_animation.gif",RM01038:"/images/draft-icon.gif",RM10311:"/images/certificate-not-accepted-icon.gif",RM10312:"/images/certificate-accepted-icon.gif",RM01039:"/images/icon/pending_animation.gif",RM01042:"/images/icon/pending_animation.gif",RM01044:"/images/icon/pending_animation.gif",RM01047:"/images/icon/pending_animation.gif",RM01049:"/images/icon/pending_animation.gif",RM01043:"/images/success-icon.gif",RM01056:"/images/fail-icon.gif",RM01058:"/images/stored-icon.gif",RM01061:"/images/user-active-icon.gif",RM01062:"/images/user-inactive-icon.gif",RM01046:"/images/undo-icon.gif",RM01057:"/images/certificate-not-accepted-icon.gif",RM10110:"/images/cloud-connected-icon.gif",RM10111:"/images/warning-icon.png",RM10114:"/images/fail-icon.gif",RM10115:"/images/fail-icon.gif",RM10137:"/images/fail-icon.gif",RM10328:"/images/cloud-connected-icon.gif",RM10330:"/images/warning-icon.png",RM03702:"/images/managed-cloud-icon.gif",RM03703:"/images/managed-cloud-icon.gif",RM03713:"/images/unmanaged-cloud-icon.gif",RM10145:"/images/install-image-icon.gif",RM10343:"/images/application-artifact-icon.gif",RM01059:"/images/warning-icon.png",RM01069:"/images/deleted-icon.gif",RM01070:"/images/partial-run-icon.gif",RM01071:"/images/deleted-icon.gif",RM10354:"/images/websphere-icon.gif",RM10394:"/images/warning-icon.png",RM01075:"/images/move-machine.gif",RM01082:"/images/locked_24.png",RM01083:"/images/connected.gif",RM03751:"/images/managed-cloud-icon.gif",RM01084:"/images/connected.gif",RM01085:"/images/disconnected.gif"},wcaIconClassMap:{RM01000:"wca-image-initializing-icon",RM01001:null,RM01002:null,RM01003:"wca-image-transferring-icon",RM01004:null,RM01005:"wca-image-starting-icon",RM01006:"wca-image-status-job-started-icon",RM01007:null,RM01008:null,RM01009:null,RM01010:"wca-image-stopping-icon",RM01011:"wca-image-stopped-icon",RM01012:"wca-image-success-icon",RM01013:"wca-image-status-failed-icon",RM01014:null,RM01015:null,RM01016:null,RM01017:null,RM01018:null,RM01019:null,RM01020:null,RM01021:"wca-image-status-disconnected-icon",RM01022:null,RM01023:null,RM01024:null,RM01025:"wca-image-maint-mode-icon",RM01026:null,RM01027:null,RM01028:"wca-image-read-only-icon",RM01029:null,RM01030:null,RM01031:"wca-image-pause-icon",RM01032:"wca-image-resume-icon",RM01033:null,RM01034:null,RM01035:null,RM01036:null,RM01037:null,RM01038:null,RM01039:null,RM01040:null,RM01041:null,RM01042:null,RM01043:null,RM01044:null,RM01045:null,RM01046:null,RM01047:null,RM01048:null,RM01049:null,RM01050:null,RM01051:null,RM01052:null,RM01053:null,RM01054:null,RM01055:null,RM01056:null,RM01057:null,RM01058:"wca-image-stored-icon",RM01059:"wca-image-status-warning-icon",RM01060:null,RM01061:null,RM01062:"wca-image-inactive-icon",RM01063:null,RM01064:null,RM01065:null,RM01066:null,RM01067:null,RM01068:null,RM01069:null,RM01070:null,RM01071:"wca-image-detach-icon",RM01079:null,RM01080:null,RM01081:null,RM01082:"wca-image-lock-icon",RM01083:null,RM01075:null,RM01090:null,RM01091:"wca-image-configuring-icon",RM05007:"wca-image-status-failed-icon",RM05008:"wca-image-status-failed-icon",RM05009:"wca-image-status-warning-icon",RM05010:"wca-image-success-icon"},wcaStatusIconformatter:function(key,_1151){if(key=="RM01085"){key="RM01017";}else{if(key=="RM01084"){key="RM01016";}}var _1152=paas.Base.messages[key]||key;if(_1152=="RM05009"){_1152="Warning during execution of script package";}var _1153=_108e.wcaIconClassMap[key];var icon=_108e.wcaIconMap[key];if(_1153==null&&icon==null){return _1152;}var _1154=null;var _1155=[];if(_1153!=null){_1154="<span title=\"${1}\" class=\"wca-image-icon ${0}\"></span>${2}";_1155=[_1153,_1152,""];}else{_1154="<span class=\"wca-image-icon\"><img src=\"${0}\" title=\"${1}\" alt=\"\"/></span>${2}";_1155=[icon,_1152,""];}if(_1151===true){_1155[1]="";_1155[2]=_1152;}return dojo.string.substitute(_1154,_1155);},scriptExecutionIconAndLabelFormatter:function(_1156,date){return _108e.wcaStatusIconformatter(_1156)+_108e.formatDateFromISO8601(date);},vdcFormatter:function(vsys){var _1157="";if(window.globalSetting.isIPAS){if(window.globalSetting&&window.globalSetting.isCLOUDGROUP_ADMIN_READER){_1157="<a href='/systemconsole/cloud/cloud-groups/#"+this.getIDFromURI(vsys.vdc)+"'>"+vsys.cloud_name+"</a>";}else{_1157=vsys.cloud_name;}}else{if(window.globalSetting&&window.globalSetting.isCLOUD_ADMIN_READER){_1157="<a href='/dashboard/cloud/cloud-groups/#"+this.getIDFromURI(vsys.cloud)+"'>"+vsys.cloud_name+"</a>";}else{_1157=vsys.cloud_name;}}return _1157;},vmLinkFormatter:function(vm,_1158){var _1159=null;try{var _115a=vm.location;_1159=_115a.name.substring(_115a.name.indexOf("/")+1,_115a.name.length);if(_1159=="localhost"){_1159=null;}}catch(e){console.error("Format of vmLinkFormatter location is incorrect");}var _115b=_108e.formatDeployDetailMessage(vm.name,_1158);if(!window.globalSetting.isIPAS){return _115b;}else{if(_1159&&!_108d.isLocalId(_1159)){var _115c="<span title=\""+paas.Base.messages.REMOTEONLYWARNING+"\">"+_115b+"</span>";return _115c;}else{var vmId=vm.uuid;if(!vmId){var _115d=vm.runtimeid;vmId=_115d?_115d.substr(_115d.lastIndexOf("/")+1):"";}var _115e="<a style=\"textDecoration:underline;\" href=\"/dashboard/virtual-appliance-instances/?searchString="+encodeURIComponent(vm.name)+"#"+vmId+"\">"+_115b+"</a>";return _115e;}}},cloudgroupLocationFormatter:function(_115f){if(_115f.cloud_group==null){return null;}var _1160=null;try{_1160=_115f.name.substring(_115f.name.indexOf("/")+1,_115f.name.length);if(_1160=="localhost"){_1160=null;}}catch(e){console.error("Format of cloud group location is incorrect");}var vdc=_115f.cloud_group.name;if(vdc==null){return null;}if(_1160){if(_108d.isLocalId(_1160)){vdc=this.vdcFormatter({"cloud":_115f.cloud_group.id,"vdc":_115f.cloud_group.id,"cloud_name":_115f.cloud_group.name});_1160="Local";}return vdc+" @ "+_1160;}return vdc;},addonTypeFormatter:function(type){var _1161={"ADDON_DISK":"RM26118","ADDON_NIC":"RM26119","ADDON_USER":"RM26120","ADDON_NETWORK_ATTACHED_STORAGE":"RM26202","ADDON_BLOCK_DISK":"RM26282"};var _1162=_1161[type];if(_1162==null){return type;}else{return paas.Base.messages[_1162];}},getMultiCloud:function(vms){var _1163={};var _1164;try{for(var i=0;i<vms.length;i++){var _1165=vms[i].location;var _1166=_108e.getJsonObjectByPath(_1165,"cloud_group","name");if(_1166==null){_1166=_108e.getJsonObjectByPath(_1165,"placement","cloud_group","name");}if(_1166!=null){_108e.setJsonObjectByPath(_1165,_1166,"cloud_group","name");_1164=_1166+"@"+_1165.name;if(!_1163[_1164]){_1163[_1164]=_1165;}}}}catch(e){}var _1167=[];for(var key in _1163){var vdc=_108e.cloudgroupLocationFormatter(_1163[key]);if(vdc!=null){_1167.push(vdc);}}if(_1167.length==1){return _1167[0];}else{locationStr=_1167.join("<br>");return locationStr;}},setJsonObjectByPath:function(_1168,value,path){if(arguments==null||arguments.length<=2){return false;}var _1169=Array.prototype.slice.call(arguments);_1169.splice(1,1);_1169.splice(_1169.length-1,1);var _116a=_108e.getJsonObjectByPath.apply(_108e,_1169);if(_116a==null){return false;}else{var key=arguments[arguments.length-1];_116a[key]=value;return true;}},getJsonObjectByPath:function(_116b,path){var _116c=_116b;if(arguments==null||arguments.length<1){return _116c;}for(var i=1;i<arguments.length;i++){if(_116c==null){return;}var _116d=arguments[i];if(_116d==="*"){for(var key in _116c){if(_116c.hasOwnProperty(key)){_116d=key;break;}}}else{if(typeof (_116d)=="number"){if(!_116c instanceof Array){continue;}}else{if(typeof (_116d)=="string"){if(_116c instanceof Array){_116c=_116c[0];}}}}_116c=_116c[_116d];}return _116c;},instanceInfoMap:{"virtualApplication":{"baseUrl":"/dashboard/runtime/deployments","title":"VAPP_SECTION_TITLE"},"virtualSystem":{"baseUrl":"/dashboard/runtime/virtualsystems","title":"VSYS_SECTION_TITLE"},"sharedService":{"baseUrl":"/dashboard/runtime/shared-service","title":"SERVICE_SECTION_TITLE"},"classicVirtualSystem":{"baseUrl":"/dashboard/virtual","title":"VSC_SECTION_TITLE"}},getInstanceType:function(_116e){var type="virtualApplication";if(_116e.patterntype=="vsys"){type="virtualSystem";}else{if(_116e.app_type=="service"){type="sharedService";}else{if(_116e.app_type=="virtualsystem"){type="classicVirtualSystem";}}}return type;},deploymentLinkFormatter:function(_116f){var type=_116f.type||_108e.getInstanceType(_116f);var id=(type=="classicVirtualSystem")?_116f.virtualsystem_id:_116f.id;var _1170="<a href='${0}/#${1}'>${2}</a>";return dojo.string.substitute(_1170,[_108e.instanceInfoMap[type].baseUrl,id,_116f.deployment_name]);},deploymentTypeFormatter:function(type){var title=_108e.instanceInfoMap[type].title;return paas.Base.messages[title]||title;}};return _108e;});},"builder/workbench/palette/CategoryPaletteFolder":function(){define(["dojo/_base/declare","dojo/text!./templates/CategoryPaletteFolder.html","dijit/TitlePane","builder/util/FileUtil","builder/workbench/palette/CategoryPaletteItem","dijit/Menu","dijit/MenuSeparator","builder/base/dnd/DragSource","dojo/dom-attr","dojo/dom-class"],function(_1171,_1172,_1173,_1174,_1175,Menu,_1176,_1177,_1178,_1179){return _1171("builder.workbench.palette.CategoryPaletteFolder",[_1173],{templateString:_1172,items:null,categories:null,root:null,draggable:false,containerMenu:null,dndSourceList:null,constructor:function(){this.items=[];this.categories=[];this.dndSourceList=[];},postCreate:function(args){this.inherited(arguments);this.set("title",this.category.name);var style="border:none; width:100%";this.containerMenu=new Menu({"style":style,"aria-label":"sub menues"});this.containerMenu.startup();_1178.set(this.containerMenu.domNode,"cellpadding","0");this.set("content",this.containerMenu.domNode);this.root.containerNode.appendChild(this.domNode);},_setTitleAttr:function(title){var _117a=builder.util.Util.splitName(title);var _117b="";if(_117a.shortName){_117b="<div>"+_117a.shortName+"</div>";}if(_117a.longName){_117b=_117b+"<div class='supplement'>"+_117a.longName+"</div>";}this._set("title",_117b);this.titleNode.innerHTML=_117b;},addItem:function(data,_117c){var self=this;var opt={icon:_1174.getComponentIconPath(data.thumbnail),data:data,open:self.open};if(data["display"]==="none"||data["display"]===false){return;}var _117d=new _1175(opt);this.containerMenu.addChild(_117d);if(_117c){var _117e=new _1176();var _117f=dojo.query("td",_117e.domNode)[1];if(dojo.isIE===7){_117f&&(_117f.colSpan="4");}else{_117f&&_117f.setAttribute("colspan",4);}this.containerMenu.addChild(_117e);this.items.push([_117d,_117e]);}else{this.items.push([_117d,null]);}},addChildren:function(data){var index=0,len=0;if(this.category.items){len=this.category.items.length;}dojo.forEach(this.category.items,function(data){var _1180=data.items;if(_1180&&_1180.length>0){var _1181=_1180.length;var _1182=0;this.addSubCategory(data,false,(++_1182)<_1181);}else{this.addItem(data,(++index)<=len);}},this);},_setCss:function(){this.inherited(arguments);this.arrowNodeInner.innerHTML="";},addSubCategory:function(_1183,open,_1184){if(_1183.items==null||_1183.items.length==0){return;}var self=this;var opt={category:_1183,open:open,root:self};var _1185=new builder.workbench.palette.CategoryPaletteFolder(opt);var tr=dojo.create("tr");var td=dojo.create("td",{"colSpan":"5",className:"subcomponent"},tr);td.appendChild(_1185.domNode);this.containerMenu.containerNode.appendChild(tr);dojo.style(_1185.titleBarNode,"paddingLeft","15px");if(this.draggable){var _1186=new _1177(_1185.titleBarNode,_1183.subComponent?"SubComponent":"Component");_1185.arrowNodeInner.innerHTML="";_1186.params=_1183;this.dndSourceList.push(_1186);if(_1183.thumbnail){var icon=_1174.getComponentIconPath(_1183.thumbnail);var _1187=dojo.create("img",{src:icon,className:"paletteItemIcon"},_1185.iconNode);}_1179.add(_1185.domNode,"inner");dojo.style(_1185.titleBarNode,"paddingLeft","0");}var index=0;var len=_1183.items.length;dojo.forEach(_1183.items,function(data){if(index==0){var _1188=new _1176();var _1189=dojo.query("td",_1188.domNode)[1];if(dojo.isIE===7){_1189&&(_1189.colSpan="4");}else{_1189&&_1189.setAttribute("colspan",4);}_1185.containerMenu.addChild(_1188);}_1185.addItem(data,(++index)<len);});_1185.startup();if(_1184){var _118a=new _1176();var _118b=dojo.query("td",_118a.domNode)[1];if(dojo.isIE===7){_118b&&(_118b.colSpan="4");}else{_118b&&_118b.setAttribute("colspan",4);}this.containerMenu.addChild(_118a);}this.categories.push(_1185);},setReadOnlyMode:function(){if(this.draggable){dojo.forEach(this.dndSourceList,function(_118c){_118c.unregister();});}dojo.forEach(this.items,function(item){for(var i=0;i<item.length;i++){if(item[0].dndSourceList){dojo.forEach(item[0].dndSourceList,function(_118d){_118d.unregister();});}}});dojo.forEach(this.categories,function(_118e){_118e.setReadOnlyMode();});},uninitialize:function(){dojo.forEach(this.items,function(item){item[0]&&item[0].destroyRecursive&&item[0].destroyRecursive();item[1]&&item[1].destroyRecursive&&item[1].destroyRecursive();});dojo.forEach(this.categories,function(item){item.destroyRecursive&&item.destroyRecursive();});},isMatchKeyword:function(_118f){return this.category.name.toLowerCase().indexOf(_118f.toLowerCase())>-1;}});});},"builder/workbench/property/ExclusiveGroup":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ExclusiveGroup.html","dijit/form/RadioButton","builder/workbench/property/BaseExclusiveGroup"],function(_1190,_1191,_1192,_1193,_1194,_1195){return _1190("builder.workbench.property.ExclusiveGroup",[_1195,_1191,_1192],{templateString:_1193,prefix:"",containerWidget:null,postCreate:function(){var _1196=dojo.create("input",null,this.groupRadioContainer);this.groupRadio=new _1194({name:this.prefix+this.category},_1196);if(this.readOnly){this.groupRadio.set("disabled","true");}this.propsContainer.appendChild(this.content);this.groupTitle.innerHTML=this.title;this.domNode.title="";},setPropsEnable:function(_1197){try{this.inherited(arguments);this.groupRadio.set("checked",_1197);}catch(e){}},showGroup:function(){this.containerNode.style.display="";},hideGroup:function(){this.containerNode.style.display="none";},lockGroup:function(_1198){dojo.forEach(this.containerWidget.groups,function(group){group.groupRadio.set("disabled",_1198);});}});});},"builder/workbench/editor/ComponentFrame":function(){define(["dojo/_base/declare","builder/util/CssUtil","builder/util/Util","builder/base/dnd/Moveable","builder/command/MoveToLayerCommand","builder/workbench/editor/ModelToolbar","builder/workbench/editor/ToolbarItem","builder/workbench/MoveToLayerDialog","builder/workbench/PolicyWidget","builder/vsys/workbench/editor/AddonListWidget","builder/vsys/workbench/editor/ListvSysPoliciesWidget","paas/common/constants","paas/common/util","builder/util/ValidationUtil","builder/vsys/util/VSysUtil","paas/widgets/MappingDialog","builder/util/CommandFactoryUtil","dojo/dom-geometry","dojo/window"],function(_1199,_119a,Util,_119b,_119c,_119d,_119e,_119f,_11a0,_11a1,_11a2,_11a3,_11a4,_11a5,_11a6,_11a7,_11a8,_11a9,win){return _1199("builder.workbench.editor.ComponentFrame",[],{component:null,toolbar:null,readOnlyMode:false,figureMoveable:null,eventHandles:null,dndDropTarget:null,connectionPort:null,cardPropsWidget:null,createPort:function(){this.connectionPort=new builder.workbench.editor.Port({component:this.component});},_setDndTarget:function(){this.dndDropTarget=new builder.base.dnd.DropTarget(this.domNode,["Port"],dojo.hitch(this,"dropHandler"));dojo.connect(this.dndDropTarget,"onDragOver",this,"onDragOver");dojo.connect(this.dndDropTarget,"onDragOut",this,"onDragOut");dojo.connect(this.dndDropTarget,"onDropEnd",this,"onDropEnd");},unRegisterDropTarget:function(){if(this.dndDropTarget){this.dndDropTarget.unregister();}this.dndDropTarget=null;},dropHandler:function(_11aa,_11ab,_11ac,_11ad){var _11ae=_11aa.portWidget;var _11af=_11ae.component;var _11b0=this.component;if(_11a6.isDataDependsLink(_11af.metadata,_11b0.metadata)){if(!_11a5.allowDataDependsOnBetweenComps(_11af,_11b0)){return;}if(_11b0.metadata.outputs&&_11b0.metadata.outputs.length!=0&&_11af.metadata.attributes&&_11af.metadata.attributes.length!=0){var _11b1=new paas.widgets.MappingDialog();_11b1.showDialogWithComps(_11b0,_11af);}else{builder.util.ValidationUtil._publishMessage([["warning","DATA_DEPENDS_CONNECTION_NOT_POSSIBLE",_11af.metadata.id,_11b0.metadata.id]],true);}}else{var cmd=new builder.command.AddConnectionCommand(_11af,_11b0);builder.Environment.commandStack.executeCommand(cmd);}},setFrameInBorder:function(){if(parseInt(this.domNode.style.left)<0){this.domNode.style.left=0;}if(parseInt(this.domNode.style.top)<0){this.domNode.style.top=0;}this.component.rePaintComponent();},setName:function(name){var n=name.indexOf(":");if(n>=0){name=name.substring(n+1);}this.nameNode.set("value",name||"");},setStatus:function(_11b2,level){if(!this.statusContainer){return;}if(_11b2==null||_11b2.length<1){this.statusContainer.style.display="none";}else{this.statusContainer.style.display="";if(level&&level==="error"){dojo.removeClass(this.statusIconNode,"wca-image-attention-normal-icon");dojo.addClass(this.statusIconNode,"wca-image-error-message-icon");}else{dojo.removeClass(this.statusIconNode,"wca-image-error-message-icon");dojo.addClass(this.statusIconNode,"wca-image-attention-normal-icon");}var _11b3="";for(var i=0;i<_11b2.length;i++){_11b3+=_11b2[i]+"<br>";}this.tooltipLabel=_11b3;}if(this.component.metadata.deprecated){if(this.deprecationContainer){this.deprecationContainer.style.display="";}if(this.deprecatedIconNode){this.deprecatedIconNode.title=builder.Environment.messages.COMPONENT_DEPRECATED;}}},appendConnectionPort:function(){if(!this.connectionPort){return;}this.connectionPort.domNode.style.display="none";this.portContainer.appendChild(this.connectionPort.domNode);this.connectionPort.rePaint();},onDragOver:function(_11b4,evt){var _11b5=_11b4.component;var _11b6=this.component;if(_11b5==_11b6){return;}if(this.domNode){this.domNode.style.border="#FFAA55 dashed 1px";}if(!builder.util.ValidationUtil.supportedConnection(_11b5,_11b6,false)){if(this.linkSupportStatus){this.linkSupportStatus.style.display="";}}},onDragOut:function(){if(this.domNode){this.domNode.style.border="";}if(this.linkSupportStatus){this.linkSupportStatus.style.display="none";}},onDropEnd:function(){if(this.domNode){this.domNode.style.border="";}if(this.linkSupportStatus){this.linkSupportStatus.style.display="none";}},getPosition:function(){var ret={x:this.domNode.style.left,y:this.domNode.style.top};return ret;},setPosition:function(_11b7){this.domNode.style.left=_11b7.x;this.domNode.style.top=_11b7.y;},_setFigureMovable:function(){var self=this;this.figureMoveable=new builder.base.dnd.Moveable(this.domNode,{skip:true});this.figureMoveable.onMoved=function(mover,_11b8){self.component.diagram.setSurfaceArea(self.getPosition().x,self.getPosition().y,self.domNode);self.component.diagram.setSurface();self.component.rePaintComponent();};dojo.connect(this.figureMoveable,"onMoveStop",this,function(e){this.setFrameInBorder();this.component.diagram.resetSurfaceArea();this._publishDiagramChange();});this.figureMoveable.component=this.component;},unResigterMove:function(){if(this.figureMoveable){this.figureMoveable.destroy();this.figureMoveable=null;}},_publishDiagramChange:function(){dojo.publish("onDiagramChanged",null);},appendFigureToDiagram:function(_11b9){if(this.component.diagram.diagramNode){this.domNode.style.position="absolute";this.domNode.style.left=_11b9.x;this.domNode.style.top=_11b9.y;this.component.diagram.diagramNode.appendChild(this.domNode);}},registerEvents:function(){this.unregisterEvents();this.eventHandles=[];this.eventHandles.push(dojo.connect(this.domNode,"onkeydown",this,function(evt){if(evt.keyCode===dojo.keys.DELETE&&evt.target==this.domNode){this.onDelete(evt);dojo.stopEvent(evt);}}));},unregisterEvents:function(){dojo.forEach(this.eventHandles,dojo.disconnect);},getInnerBox:function(){return builder.util.Util.coords(this.contentContainer);},getOuterBox:function(){return builder.util.Util.coords(this.domNode);},onSelected:function(evt){},onUnselect:function(){},onNameChange:function(value){var _11ba=this.component.id;if(value===_11ba){return;}var _11bb=builder.util.ValidationUtil.componentNameCheck(this.component.diagram.components,this.component,value);if(!_11bb.isValid){dojo.publish("/builder/editor/notification",[["warning",_11bb.messager]]);this.nameNode.set("value",_11ba,false);}else{var cmd=_11a8.getCommmandFactory().getChangeComponentNameCommand(this.component.id,value);builder.Environment.commandStack.executeCommand(cmd);}},showTooltip:function(){dijit.showTooltip(this.tooltipLabel,this.statusContainer);},hideTooltip:function(){dijit.hideTooltip(this.statusContainer);},enable:function(){dojo.removeClass(this.domNode,"disabledLayer");dojo.addClass(this.domNode,"enabledLayer");this.registerEvents();if(!this.component.isReferenced()&&!this.component.readOnly){this.nameNode.set("disabled",false);}},disable:function(){dojo.removeClass(this.domNode,"enabledLayer");dojo.addClass(this.domNode,"disabledLayer");this.unregisterEvents();this.nameNode.set("disabled",true);if(this.component.isSelected()){this.component.diagram.selectModel(this.component.diagram);}},setUnchangable:function(){this.disableName();this.unResigterMove();this.disableToolbar();this.readOnlyMode=true;if(this.connectionPort){this.connectionPort.disableDragSource();}},isReferenced:false,setReferenced:function(){if(this.isReferenced===true){return;}this.disableName();this.isReferenced=true;},disableName:function(){this.nameNode.set("disabled",true);},disableToolbar:function(){},remove:function(){this.removeHelpWidget();this.removeFrameWidget();},removeHelpWidget:function(){if(this.helpWidget&&this.helpWidget.domNode){this.helpWidget.remove();}},removeFrameWidget:function(){this.unregisterEvents();this.unResigterMove();this.unRegisterDropTarget();this.removePort();if(dojo.isIE){this.domNode.outerHTML="";}else{this.destroyRecursive();}},removePort:function(){},onHover:function(){},onUnHover:function(){},focus:function(){this.domNode.focus&&this.domNode.focus();this.updateAddPolicyButton();},blur:function(){this.domNode.blur&&this.domNode.blur();},updateAddPolicyButton:function(){if(!this.component||!this.addPolicyBtn||!this.component.canAddPolicy){return;}var node=this.addPolicyBtn.domNode?this.addPolicyBtn.domNode:this.addPolicyBtn;if(this.component.canAddPolicy()){dojo.style(node,"display","");}else{dojo.style(node,"display","none");}},onDelete:function(evt){dojo.stopEvent(evt);var cmd=new builder.command.RemoveComponentCommand(this.component);builder.Environment.commandStack.executeCommand(cmd);},onEdit:function(evt){dojo.stopEvent(evt);if(this.nameNode){this.nameNode.edit();}},onShowPolicies:function(evt){if(evt){dojo.stopEvent(evt);}this.showPolicies(this.calculateShowPosition());},onAddComponent:function(evt){if(evt){dojo.stopEvent(evt);}var _11bc=dijit.byId("editCompDialog");var model={};model.properties=dojo.clone(this.component.properties);model.metadata=dojo.clone(this.component.metadata);model.id="copy of "+this.component.id;model.type=this.component.getType();model.patterntype=this.component.diagram.patterntype;model.version=this.component.diagram.version;_11bc.set("isNew",true);_11bc.show(model);},showPolicies:function(_11bd,type){if(this.policyWidget&&this.policyWidget.domNode){if(this.type===type){return;}else{this.type=type;this.policyWidget.destroyRecursive();}}if(!_11bd){return;}var left=_11bd.x+12;var top=_11bd.y+12;if(type===_11a3.ADDON){this.policyWidget=new _11a1({component:this.component});}else{if(Util.patternTypeIsVSys()){this.policyWidget=new _11a2({component:this.component});}else{this.policyWidget=new _11a0({component:this.component});}}if(!this.readOnlyMode){this.policyWidget.show();var size=_11a9.getContentBox(this.policyWidget.domNode);var vs=win.getBox();if(size.h>vs.h){size.h=vs.h;_11a9.setContentSize(this.policyWidget.domNode,size);}var top=size.h+_11bd.top>vs.h?vs.h-size.h-10:_11bd.top;this.policyWidget.setLocation(_11bd.left,top);}else{this.policyWidget.destroyRecursive();}},showCompOuterDisplayWidget:function(_11be){if(!_11be){return;}var self=this;var coord=builder.util.Util.coords(this.domNode,true);var card=new builder.workbench.editor.CompOuterDisplay({component:self.component,position:{left:coord.x,top:coord.y}});dojo.body().appendChild(card.domNode);},onHelp:function(evt){evt&&dojo.stopEvent(evt);var coord=builder.util.Util.coords(this.domNode,true);if(!this.helpWidget||!this.helpWidget.domNode){this.helpWidget=new builder.workbench.editor.Help({metadata:this.component.metadata,position:{left:coord.x,top:coord.y}});dojo.body().appendChild(this.helpWidget.domNode);this.helpWidget.setLocation(coord.x,coord.y);}else{this.helpWidget.setLocation(coord.x,coord.y);}this.helpWidget.focus();},highlight:function(){dojo.addClass(this.domNode,"highlight");},unHighlight:function(){dojo.removeClass(this.domNode,"highlight");}});});},"builder/workbench/layer/Layer":function(){define(["dojo/_base/declare","builder/util/Util","builder/util/array"],function(_11bf,Util,array){return _11bf("builder.workbench.layer.Layer",null,{components:null,id:null,enabled:true,referenceID:null,references:[],constructor:function(id,_11c0,refs){this.components=[];this.id=id;this.referenceID=_11c0;this.references=refs||[];},addComponent:function(_11c1){if(!_11c1){return;}this.components.push(_11c1);_11c1.setLayer(this);},removeComponent:function(_11c2){builder.util.array.remove(this.components,_11c2);_11c2.layer=null;},disable:function(){var _11c3=[];this.enabled=false;dojo.forEach(this.components,function(_11c4){_11c4.disable();dojo.forEach(_11c4.incomingConnections,function(_11c5){_11c3.push(_11c5);});dojo.forEach(_11c4.outgoingConnections,function(_11c6){_11c3.push(_11c6);});});dojo.forEach(_11c3,function(_11c7){if((!_11c7.fromComponent.layer.enabled)||(!_11c7.toComponent.layer.enabled)){_11c7.disable();}});dojo.publish("/layer/changeStatus",[this]);},enable:function(){var _11c8=[];this.enabled=true;dojo.forEach(this.components,function(_11c9){_11c9.enable();dojo.forEach(_11c9.incomingConnections,function(_11ca){_11c8.push(_11ca);});dojo.forEach(_11c9.outgoingConnections,function(_11cb){_11c8.push(_11cb);});});dojo.forEach(_11c8,function(_11cc){if((_11cc.fromComponent.layer.enabled)&&(_11cc.toComponent.layer.enabled)){_11cc.enable();}});dojo.publish("/layer/changeStatus",[this]);},isReferenced:function(){return this.referenceID;},serialize:function(){if(this.isReferenced()){return {id:this.id,referenceID:this.referenceID};}var _11cd=[];dojo.forEach(this.components,function(_11ce){_11cd.push(_11ce.id);});return {id:this.id,nodes:_11cd};}});});},"builder/util/DefaultCommandFactory":function(){define(["dojo/_base/declare","dojo/_base/lang","builder/command/AddPolicyCommand","builder/command/RemovePolicyCommand","builder/command/ChangeComponentNameCommand"],function(_11cf,lang,_11d0,_11d1,_11d2){return _11cf("builder.util.DefaultCommandFactory",[],{commandMaps:{"AddPolicyCommand":"builder.command.AddPolicyCommand","RemovePolicyCommand":"builder.command.RemovePolicyCommand","ChangeComponentNameCommand":"builder.command.ChangeComponentNameCommand"},getAddPolicyCommand:function(_11d3,_11d4,_11d5){return new lang.getObject(this.commandMaps.AddPolicyCommand)(_11d3,_11d4,_11d5);},getRemovePolicyCommand:function(model){return new lang.getObject(this.commandMaps.RemovePolicyCommand)(model);},getChangeComponentNameCommand:function(_11d6,_11d7){return new lang.getObject(this.commandMaps.ChangeComponentNameCommand)(_11d6,_11d7);}});});},"paas/widgets/EditDeletePatternAttrDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/EditDeletePatternAttrDialog.html","paas/widgets/Dialog","dojo/store/Memory","builder/util/Util"],function(_11d8,_11d9,_11da,_11db,_11dc,_11dd,_11de,util){return _11d8("paas.widgets.EditDeletePatternAttrDialog",[_11d9,_11da,_11db],{templateString:_11dc,widgetsInTemplate:true,propWidget:null,fromEdit:false,fromDelete:false,constructor:function(){if(this.fromDelete){this.app_deploy_dialog_title="Delete Pattern-level Parameter";}else{this.app_deploy_dialog_title="Edit Pattern-level Parameter";}this.app_deploy_dialog_OK_button=paas.Base.messages.APP_DEPLOY_DIALOG_OK_BUTTON;this.app_deploy_dialog_cancel_button=paas.Base.messages.APP_DEPLOY_DIALOG_CANCEL_BUTTON;},postCreate:function(){var self=this;if(this.fromEdit){self.editPatternAttr.style.display="block";}if(this.fromDelete){self.app_deploy_dialog_title="Delete Pattern-level Parameter";self.deletePatternAttr.style.display="block";self.patternName.innerHTML=this.propWidget.metadata.label;self.parameterType.innerHTML=this.propWidget.metadata.type;self.patternId.innerHTML=this.propWidget.metadata.id;self.patternDesc.innerHTML=this.propWidget.metadata.description;self.patternValue.innerHTML=this.propWidget.metadata.value;self.deleteMessage.innerHTML="Are you sure you want to delete?";}this.theDialog.onConfirm=dojo.hitch(this,"confirm");this.theDialog.onCancel=dojo.hitch(this,this.cancelDialog);dojo.style(this.theDialog.containerNode,{"maxHeight":"380px","overflowY":"auto","overflowX":"hidden"});dojo.style(this.theDialog.messageWidget.domNode,"top","20px");},showDialog:function(conn){this.theDialog.show();},changeValueType:function(){var self=this;if(this.parameterType.get("value")=="string"){self.typeString.style.display="block";}else{if(this.parameterType.get("value")=="number"){}else{if(this.parameterType.get("value")=="password"){}else{if(this.parameterType.get("value")=="boolean"){dojo.style(self.typeCheckBox,"visibility","hidden");self.typeString.style.display="none";}}}}},confirm:function(){if(this.fromDelete){delete this.propWidget.model.propertyMetadata[this.propWidget.metadata.id];var _11df=new paas.widgets.PatternAttrMainWidget({model:this.propWidget.model});_11df.updateSubWidget();}else{if(!this.theDialog.isValid()){dojo.publish("/builder/editor/notification",[["warning","Please enter required fields"]]);}else{var _11e0={};_11e0["name"]=this.name.get("value");_11e0["label"]=this.name.get("value");_11e0["type"]=this.parameterType.get("value");_11e0["id"]=this.patternAttrId.get("value");_11e0["description"]=this.description.get("value");_11e0["value"]=this.patternAttrValue.get("value");this.propWidget.addMetadata(_11e0);this.cancelDialog();}}},cancelDialog:function(){this.theDialog.hide();dijit.registry.remove(this);dojo.destroy(this.domNode);this.destroyRecursive();},isValid:function(){return true;}});});},"builder/util/PropertiesEnvUtil":function(){define(["dojo/_base/lang"],function(lang){var _11e1=lang.getObject("builder",true);var _11e2=lang.getObject("util.PropertiesEnvUtil",true,_11e1);_11e2=_11e1.util.PropertiesEnvUtil={transform:function(_11e3,_11e4){if(_11e4==null){return _11e3;}var _11e5=_11e3;for(var key in _11e4){if(_11e4.hasOwnProperty(key)){var _11e6="${"+key+"}";_11e5=_11e5.replace(_11e6,_11e4[key],"g");}}return _11e5;}};return _11e2;});},"builder/vsys/workbench/editor/DataDependsOnIconMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-construct","dojo/dom-style","dojo/query","dojo/dom-attr"],function(_11e7,dom,_11e8,_11e9,query,_11ea){return _11e7("builder.vsys.workbench.editor.DataDependsOnIconMixin",null,{inputIconWidth:null,outputIconWidth:null,inputIconLeft:null,outputIconLeft:null,addInputIcon:function(len,_11eb,mode){var _11ec=len-this.inputIconWidth;switch(mode){case 1:_11e8.place("<div class='"+_11eb+"'><div class='containerFrame_input_right_icon'></div></div>",this.domNode,"last");var _11ed=query("."+_11eb,this.domNode);_11e9.set(_11ed[0],{"position":"absolute","top":_11ec+"px","left":this.inputIconLeft+"px"});break;case 2:_11e8.place("<div class='"+_11eb+"'><div class='containerFrame_input_left_icon'></div></div>",this.domNode,"last");var _11ed=query("."+_11eb,this.domNode);_11ea.remove(_11ed[0],"left");_11e9.set(_11ed[0],{"position":"absolute","top":_11ec+"px","right":this.outputIconLeft+"px"});break;}},addOutputIcon:function(len,_11ee,mode){var _11ef=len-this.outputIconWidth;switch(mode){case 1:_11e8.place("<div class='"+_11ee+"'><div class='containerFrame_output_left_icon'></div></div>",this.domNode,"last");var _11f0=query("."+_11ee,this.domNode);_11ea.remove(_11f0[0],"left");_11e9.set(_11f0[0],{"position":"absolute","top":_11ef+"px","right":this.outputIconLeft+"px"});break;case 2:_11e8.place("<div class='"+_11ee+"'><div class='containerFrame_output_right_icon'></div></div>",this.domNode,"last");var _11f0=query("."+_11ee,this.domNode);_11ea.remove(_11f0[0],"right");_11e9.set(_11f0[0],{"position":"absolute","top":_11ef+"px","left":this.inputIconLeft+"px"});break;}},updateInputIcon:function(len,_11f1,mode){var _11f2=query("."+_11f1,this.domNode);var _11f3=len-this.inputIconWidth;switch(mode){case 1:_11e9.set(_11f2[0],{"position":"absolute","top":_11f3+"px","left":this.inputIconLeft+"px"});break;case 2:_11e9.set(_11f2[0],{"position":"absolute","top":_11f3+"px","right":this.outputIconLeft+"px"});}},updateOutputIcon:function(len,_11f4,mode){var _11f5=query("."+_11f4,this.domNode);var _11f6=len-this.outputIconWidth;switch(mode){case 1:_11e9.set(_11f5[0],{"position":"absolute","top":_11f6+"px","right":this.outputIconLeft+"px"});break;case 2:_11e9.set(_11f5[0],{"position":"absolute","top":_11f6+"px","left":this.inputIconLeft+"px"});}},removeIcon:function(_11f7){var _11f8=query("."+_11f7,this.domNode);_11e8.destroy(_11f8[0]);}});});},"builder/vsys/workbench/editor/DataDependsOnConnectionFrame":function(){define(["dojo/_base/declare","builder/workbench/editor/ConnectionFrame","paas/common/constants","builder/util/Util","paas/widgets/MappingDeleteDialog","builder/vsys/util/VSysUtil","builder/vsys/workbench/editor/VSysMiniLink"],function(_11f9,_11fa,_11fb,util,_11fc,_11fd,_11fe){return _11f9("builder.vsys.workbench.editor.DataDependsOnConnectionFrame",[_11fa],{paintingEnabled:true,onDelete:function(evt){dojo.stopEvent(evt);this.showDeleteDialog();},showDeleteDialog:function(){var _11ff=new _11fc({connection:this.connection});_11ff.showDialog();},setStrokeOpacity:function(_1200){if(this.connection._checkOnSameContainer()){if(dojo.isIE){this.link.pathShape.rawNode.stroke.opacity=0;}else{this.link.pathShape.rawNode.setAttribute("stroke-opacity",0);}}else{var _1201=_1200?1:0.2;if(dojo.isIE){this.link.pathShape.rawNode.stroke.opacity=_1201;}else{this.link.pathShape.rawNode.setAttribute("stroke-opacity",_1201);}}},paint:function(event){if(!this.paintingEnabled){return;}this.inherited(arguments);if(this.connection.betweenPatternComponent&&this.connection.betweenPatternComponent()){return;}this.previousInputLen=this.currentInputLen;this.currentInputLen=this.inportPos.h;this.previousOutputLen=this.currentOutputLen;this.currentOutputLen=this.outportPos.h;this.inputLen=this.inportPos.h;this.outputLen=this.outportPos.h;this.previousMode=this.currentMode;this.currentMode=this.connection.mode;this.connectionId=this.connection.id;if(!this.hasInputIcon){this.connection.toComponent.addInputIcon(this.inputLen,this.connectionId,this.currentMode);this.connection.fromComponent.addOutputIcon(this.outputLen,this.connectionId,this.currentMode);this.hasInputIcon=true;}else{if(this.currentMode!=this.previousMode){this.connection.toComponent.removeIcon(this.connectionId);this.connection.fromComponent.removeIcon(this.connectionId);this.connection.toComponent.addInputIcon(this.inputLen,this.connectionId,this.currentMode);this.connection.fromComponent.addOutputIcon(this.outputLen,this.connectionId,this.currentMode);}else{if(this.currentInputLen!=this.previousInputLen){this.connection.toComponent.updateInputIcon(this.currentInputLen,this.connectionId,this.currentMode);}if(this.currentOutputLen!=this.previousOutputLen){this.connection.fromComponent.updateOutputIcon(this.currentOutputLen,this.connectionId,this.currentMode);}}}},removeWidget:function(){this.inherited(arguments);if(this.connection.betweenPatternComponent&&this.connection.betweenPatternComponent()){return;}this.connectionId=this.connection.id;this.connection.toComponent.removeIcon(this.connectionId);this.connection.fromComponent.removeIcon(this.connectionId);},_createLink:function(){var link=new _11fe(this.connection.diagram);return link;},onClick:function(evt){this.connection.fromComponent.createPropertiesWidget();this.inherited(arguments);},display:function(_1202){this.paintingEnabled=_1202;if(dojo.isIE){this.link.pathShape.rawNode.stroke.opacity=_1202?1:0;}else{this.link.pathShape.rawNode.setAttribute("stroke-opacity",_1202?1:0);}}});});},"paas/widgets/FixpackWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/Button","dijit/form/CheckBox","dijit/form/FilteringSelect","dijit/form/ComboBox","dojo/store/Memory","dojo/data/ObjectStore","dijit/Dialog","dijit/form/TextBox","dijit/form/SimpleTextarea","dijit/form/Select","dojox/grid/DataGrid","paas/widgets/GridExt","dojo/data/ItemFileWriteStore","builder/vsys/util/VSysUtil","builder/util/Util","dojo/_base/array","dojo/_base/lang","dojo/dom-style","dojo/text!./templates/FixpackWidget.html"],function(_1203,_1204,_1205,_1206,_1207,_1208,_1209,_120a,_120b,_120c,_120d,_120e,_120f,_1210,_1211,_1212,_1213,_1214,util,_1215,lang,style,_1216){return _1203("paas.widgets.FixpackWidget",[_1204,_1205,_1206],{templateString:_1216,value:null,initiated:false,deploymentId:null,pluginName:null,roleType:null,propId:null,modelId:null,url:null,rawJson:null,selectBoxes:null,constructor:function(){},postCreate:function(){var self=this;this.url=paas.common.constants.IFIX_DEPLOYMENT_MAINT_URL+"?type=MAINTENANCE&fixpack";dojo.style(this.domNode,"width","400px");this.loadItems();this.initiated=true;},get:function(name){if(name=="value"){return this.value;}else{if(name=="disabled"){return false;}else{return this.inherited(arguments);}}},set:function(name,value){if(name=="value"){this.setValue(value);}else{this.inherited(arguments);}},setValue:function(value){var self=this;if(this.value!=null){return;}this.value=value;},loadItems:function(){var self=this;var args={url:this.url,sync:true,handleAs:"json",encoding:"utf-8",load:function(resp){if(!resp||!resp.items){self._showNoneItem();}else{self.rawJson=resp.items;self.buildappliedPanel();self.buildApplicablePanel();}},error:function(resp){self._showNoneItem();}};dojo.xhrGet(args);},_showNoneItem:function(){this.showNoneDiv.innerHTML=paas.Base.messages.FIXPACK_NONE;dojo.style(this.showNoneDiv,"display","");},buildappliedPanel:function(){var found=false;var self=this;if(this.rawJson["current_fixpacks"]){var _1217=this.rawJson["current_fixpacks"];for(var key in _1217){if(_1217.hasOwnProperty(key)){var _1218=key;var _1219=_1217[key];for(var key1 in _1219){var _121a=key1;if(_1219[key1]["version"]){_121a=key1+"/"+_1219[key1]["version"];}if(!found){found=true;dojo.style(this.appliedFixesMessageDiv,"display","");this.appliedFixesMessageDiv.innerHTML=paas.Base.messages.FIXPACK_APPLIED_MESSAGE;dojo.style(this.appliedFixesDiv,"display","");self.createTableHeader(self.appliedFixesTable,[paas.Base.messages.FIXPACK_APPLIED_VM_TEMPLATE,paas.Base.messages.FIXPACK_APPLIED_MIDDLEWARE]);}self.addRow(self.appliedFixesTable,[_1218,_121a],["150px","auto"]);}}}}if(!found){dojo.style(this.appliedFixesNoneDiv,"display","");this.appliedFixesMessageDiv.innerHTML=paas.Base.messages.FIXPACK_APPLIED_NONE_MESSAGE;}},buildApplicablePanel:function(){var found=false;var self=this;this.selectBoxes=[];if(this.rawJson["candidate_fixpacks"]){var _121b=this.rawJson["candidate_fixpacks"];for(var key in _121b){var _121c=_121b[key];var _121d=[];for(var i=0;i<_121c.length;i++){if(_121c[i]["version"]){var map={name:_121c[i]["version"],id:_121c[i]["version"]};_121d.push(map);}}if(_121d.length>0){if(!found){found=true;dojo.style(this.applicableFixesMessageDiv,"display","");self.applicableFixesMessageDiv.innerHTML=paas.Base.messages.FIXPACK_APPLICABLE_MESSAGE;dojo.style(this.applicableFixesDiv,"display","");self.createTableHeader(self.applicableFixesTable,[paas.Base.messages.FIXPACK_APPLIED_MIDDLEWARE,paas.Base.messages.FIXPACK_APPLICABLE_SELECT_FIXPACK]);}var store=new _120b({data:_121d});var _121e=new _1209({store:store,placeHolder:paas.Base.messages.FIXPACK_APPLICABLE_SELECT,required:false,searchAttr:"name",name:key});dojo.connect(_121e,"onChange",dojo.hitch(self,self.handleChange,key,_121e));self.selectBoxes.push(_121e);self.addRow(self.applicableFixesTable,[key,_121e.domNode],["150px","auto"]);}}}if(!found){dojo.style(this.applicableFixesMessageDiv,"display","");this.applicableFixesMessageDiv.innerHTML=paas.Base.messages.FIXPACK_APPLICABLE_NONE_MESSAGE;}},handleChange:function(key,obj){if(!key||!obj.get("value")){return;}for(var i=0;i<this.selectBoxes.length;i++){if(obj.get("name")!=this.selectBoxes[i].get("name")){this.selectBoxes[i].set("value","");}}this.computeValue(key,obj.get("value"));dojo.publish("onPropertyChanged",[[this.modelId,this.propId,this.value]]);},createTableHeader:function(table,_121f){var _1220=table.createTHead();_1220.style.borderBottom="solid";var row=_1220.insertRow(0);for(var i=0;i<_121f.length;i++){var cell=row.insertCell(i);cell.innerHTML="<b>"+_121f[i]+"</b>";}},addRow:function(table,_1221,_1222){var row=dojo.create("tr");for(var i=0;i<_1221.length;i++){var style="width: "+_1222[i]+";";var cell=dojo.create("td",{"style":style});dojo.addClass(cell,"default");if(dojo.isString(_1221[i])){cell.innerHTML=_1221[i];}else{cell.appendChild(_1221[i]);}row.appendChild(cell);}table.appendChild(row);},computeValue:function(_1223,_1224){var self=this;var _1225=[];if(this.rawJson["current_fixpacks"]){_1225=dojo.clone(this.rawJson["current_fixpacks"]);if(this.rawJson["candidate_fixpacks"]&&this.rawJson["candidate_fixpacks"][_1223]){var _1226=this.rawJson["candidate_fixpacks"][_1223];var _1227;for(var i=0;i<_1226.length;i++){if(_1226[i]["version"]==_1224){_1227=dojo.clone(_1226[i]);}}if(_1227){for(var key in _1225){if(_1225.hasOwnProperty(key)){if(_1225[key][_1223]){_1225[key][_1223]=_1227;}}}}}}self.value=_1225;}});});},"paas/widgets/MultiSelectIgnoreIPExt":function(){define(["dojo/_base/declare","paas/widgets/MultiSelectExt","paas/common/SolutionUtil"],function(_1228,_1229,_122a){return _1228("paas.widgets.MultiSelectIgnoreIPExt",[_1229],{deploymentId:null,pluginName:null,roleId:null,isLocked:null,roleType:null,pName:null,pVRMF:null,sameValues:function(_122b,_122c){var self=this;if(_122b!=null&&(_122b.indexOf("http:")==0)&&_122c!=null&&(_122c.indexOf("http:")==0)){return self.matchURL(_122b,_122c,"http");}if(_122b!=null&&(_122b.indexOf("https:")==0)&&_122c!=null&&(_122c.indexOf("https:")==0)){return self.matchURL(_122b,_122c,"https");}return _122b==_122c;},matchURL:function(url1,url2,_122d){var str1=url1.substring(_122d.length+3);var _122e=str1.indexOf("/");if(_122e==-1){str1="";}else{str1=str1.substring(_122e);}var str2=url2.substring(_122d.length+3);var _122f=str2.indexOf("/");if(_122f==-1){str2="";}else{str2=str2.substring(_122f);}return str1==str2;},disableIfRequired:function(){if(this.deploymentId!=null){for(var i in this.checkBoxs){var self=this;var _1230=self.checkBoxs[i];if(_1230.checkBox.checked){_1230.checkBox.set("disabled",true);}}}},constructOptionsURL:function(){var self=this;if(this.deploymentId!=null){if(this.roleType!=null&&this.roleType=="MAINTENANCE"){return paas.common.constants.IFIX_DEPLOYMENT_MAINT_URL+"?type=MAINTENANCE";}else{if(this.pluginName!=null){this.pName=self.getPluginName(this.pluginName);this.pVRMF=self.getPluginVRMF(this.pluginName);var _1231=paas.common.constants.IFIX_DEPLOYMENT_REST_URL+"?plugin="+this.pName+"&pluginVRMF="+this.pVRMF;return _1231;}}}else{if(this.pluginName!=null){this.pName=self.getPluginName(this.pluginName);this.pVRMF=self.getPluginVRMF(this.pluginName);return paas.common.constants.IFIX_DEPLOYMENT_REST_URL+"?plugin="+this.pName+"&pluginVRMF="+this.pVRMF;}else{if((typeof appId!="undefined")&&appId){return paas.common.constants.IFIX_DEPLOYMENT_REST_URL+"?appid="+appId;}}}},getPluginName:function(_1232){var _1233=_1232.indexOf("/");if(_1233==-1){return null;}else{return _1232.substring(0,_1233);}},getPluginVRMF:function(_1234){var _1235=_1234.indexOf("/");if(_1235==-1){return null;}else{return _1234.substring(_1235+1);}},tweakResponseAsNeeded:function(_1236){if(this.deploymentId!=null){if(this.roleType!=null&&this.roleType=="MAINTENANCE"){return _1236;}}else{var _1237={};_1237.items=_1236;_1237.label="name";_1237.identifier="url";return _1237;}},loadItems:function(){var _1238=false;var self=this;if(this.deploymentId==null){if(this.pluginName!=null){this.pName=self.getPluginName(this.pluginName);this.pVRMF=self.getPluginVRMF(this.pluginName);if(this.pName=="maintenance"){_1238=true;this.subscribe("pubUnlocked",function(_1239){var item;for(item in _1239){self.initiated=false;self.items=null;}});if(dojo.isArray(this.items)){return;}var _123a=builder.Environment.diagram.plugins;if(builder.Environment.diagram.isLocked()&&!builder.Environment.diagram.isFoundationLocked()){_123a=_122a.getPlugins(builder.Environment.diagram.patterntype,builder.Environment.diagram.version,false);}var _123b={"filters":{"plugins":_123a}};var args={headers:{"Content-Type":"application/json"},url:paas.common.constants.IFIX_DEPLOYMENT_REST_URL+"query",encoding:"utf-8",postData:dojo.toJson(_123b),sync:true,handleAs:"json",encoding:"utf-8",load:function(resp){self.itemStore=resp;},error:function(resp){self._showNoneItem();self.itemStore=null;}};dojo.xhrPost(args);this.items=[];if(this.itemStore){dojo.forEach(this.itemStore.items,function(item){var _123c={};_123c.name=item[self.itemStore.label];_123c.value=item[self.itemStore.identifier];self.items.push(_123c);});}}}}if(!_1238){this.inherited(arguments);}}});});},"builder/base/dnd/DropTarget":function(){define(["dojo/_base/declare","builder/base/dnd/DragManager"],function(_123d,_123e){return _123d("builder.base.dnd.DropTarget",null,{domNode:null,acceptedTypes:null,excludeTypes:null,dropHandler:null,constructor:function(node,_123f,_1240,_1241){var node=dojo.byId(node);if(node){this.domNode=node;this.acceptedTypes=_123f;this.dropHandler=_1240;if(_1241){this.excludeTypes=_1241.excludeTypes;}builder.base.dnd.dragManager.registerDropTarget(this);}},unregister:function(){builder.base.dnd.dragManager.unregisterDropTarget(this);},onDragOver:function(evt){},onDragOut:function(evt){},onDragMove:function(evt){},onDropStart:function(evt){},onDrop:function(evt){try{if(builder.base.dnd.dragManager.avatarRequired){var _1242=dojo.coords(builder.base.dnd.dragManager.avatar.node);this.dropHandler(builder.base.dnd.dragManager.currentDragSource,this,_1242.l,_1242.t);}else{this.dropHandler(builder.base.dnd.dragManager.currentDragSource,this,evt.pageX,evt.pageY);}}catch(e){console.error(paas.Base.messages.DIAGRAM_CONSOLE_ERROR+e);console.error(e);}},onDropEnd:function(evt){},accepts:function(_1243){return builder.base.dnd.acceptsType(this.acceptedTypes,_1243.type)&&!builder.base.dnd.acceptsType(this.excludeTypes,_1243.type);}});});},"paas/widgets/AddPatternAttrDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/AddPatternAttrDialog.html","paas/widgets/Dialog","dojo/store/Memory","builder/command/ChangePropertyCommand","builder/util/Util"],function(_1244,_1245,_1246,_1247,_1248,_1249,_124a,_124b,util){return _1244("paas.widgets.AddPatternAttrDialog",[_1245,_1246,_1247],{templateString:_1248,widgetsInTemplate:true,propWidget:null,fromEdit:false,fromDelete:false,patternWidget:null,mainWidget:null,refs:null,constructor:function(){this.app_deploy_dialog_title=builder.Environment.messages.PATTERN_ATTR_TITLE;this.app_deploy_dialog_OK_button=paas.Base.messages.APP_DEPLOY_DIALOG_OK_BUTTON;this.app_deploy_dialog_cancel_button=paas.Base.messages.APP_DEPLOY_DIALOG_CANCEL_BUTTON;this.component=builder.Environment.messages.PATTERN_ATTR_COMPONENT;this.availableParameters=builder.Environment.messages.PATTERN_ATTR_PARAM;this.name=dojo.string.substitute(paas.Base.messages.RM11251,[builder.Environment.messages.PATTERN_ATTR_NAME]);this.parameterType=dojo.string.substitute(paas.Base.messages.RM11251,[builder.Environment.messages.PATTERN_ATTR_PARAM_TYPE]);this.id=dojo.string.substitute(paas.Base.messages.RM11251,[builder.Environment.messages.PATTERN_ATTR_ID]);this.description=dojo.string.substitute(paas.Base.messages.RM11251,[builder.Environment.messages.PATTERN_ATTR_DESCRIPTION]);this.paramValue=dojo.string.substitute(paas.Base.messages.RM11251,[builder.Environment.messages.PATTERN_ATTR_VALUE]);this.PATTERN_ATTR_EXSITING_TITLE=builder.Environment.messages.PATTERN_ATTR_EXSITING_TITLE;this.PATTERN_ATTR_CREATE_TITLE=builder.Environment.messages.PATTERN_ATTR_CREATE_TITLE;},postCreate:function(){this.subTitle.innerHTML=builder.Environment.messages.PATTEN_ATTR_ADD;var self=this;if(this.fromEdit){this.subTitle.innerHTML=builder.Environment.messages.PATTEN_ATTR_EDIT;this.app_deploy_dialog_title=builder.Environment.messages.PATTEN_ATTR_EDIT;dojo.style(this.existingPatternRadioAttr,"display","none");dojo.style(this.existingPatternAttr,"display","none");dojo.style(this.newPatternRadioAttr,"display","none");dojo.style(this.newPatternAttr,"display","block");this.name.set("value",this.propWidget.metadata.label);this.setParamType(this.propWidget.metadata.type);this.parameterType.set("disabled",true);this.patternAttrId.set("value",this.propWidget.metadata.id);this.patternAttrId.set("disabled",true);this.description.set("value",this.propWidget.metadata.description);self.setPropertyValueByType(this.propWidget.metadata.sampleValue);dojo.style(this.patternMatching,"display","");this.patternMatching.innerHTML=builder.Environment.messages.PATTERN_ATTR_MAP;this.createMappingTableforPattenrAttr();}else{if(this.fromDelete){this.subTitle.innerHTML=builder.Environment.messages.PATTEN_ATTR_DELETE;this.app_deploy_dialog_title=builder.Environment.messages.PATTEN_ATTR_DELETE;dojo.style(this.existingPatternRadioAttr,"display","none");dojo.style(this.existingPatternAttr,"display","none");dojo.style(this.newPatternRadioAttr,"display","none");dojo.style(this.newPatternAttr,"display","block");this.name.set("value",this.propWidget.metadata.label);this.name.set("disabled",true);this.parameterType.set("value",this.propWidget.metadata.type);this.parameterType.set("disabled",true);this.patternAttrId.set("value",this.propWidget.metadata.id);this.patternAttrId.set("disabled",true);this.description.set("value",this.propWidget.metadata.description);this.description.set("disabled",true);self.setPropertyValueByType(this.propWidget.metadata.sampleValue);dojo.style(this.patternMatching,"display","");self.patternMatching.innerHTML=builder.Environment.messages.PATTERN_ATTR_MAP;this.deleteMessage.innerHTML=builder.Environment.messages.PATTERN_ATTR_DELETE_NOMAPPING_MESSAGE;this.createMappingTableforPattenrAttr();}else{this.connect(this.parameterType,"onChange",this.changeValueType);this.createComponentStore();this.connect(this.componentFiltering,"onChange",this.createOutputStore);}}this.theDialog.onConfirm=dojo.hitch(this,"confirm");this.theDialog.onCancel=dojo.hitch(this,this.cancelDialog);dojo.style(this.theDialog.containerNode,{"maxHeight":"380px","overflowY":"auto","overflowX":"hidden"});dojo.style(this.theDialog.messageWidget.domNode,"top","20px");},setParamType:function(val){if(val=="string"){if(this.propWidget.metadata.displayType=="password"){this.parameterType.set("value","password");this.parameterType.set("disabled","true");}else{this.parameterType.set("value","string");}}else{this.parameterType.set("value",val);}},createMappingTableforPattenrAttr:function(){var self=this;self.refs=[];var _124c=false;var _124d=false;var table=dojo.create("table",{"style":"width: 100%; padding: 5px 10px; border: 1px solid #B5BCC7;"},self.patternMatching);table.setAttribute("role","presentation");var tbody=dojo.create("tbody",null,table);var tr1=dojo.create("tr",null,tbody);if(!this.fromDelete){var td1=dojo.create("td",null,tr1);}var td2=dojo.create("td",{innerHTML:paas.Base.messages.PLUGIN_COMPONENTS},tr1);var td3=dojo.create("td",{innerHTML:paas.Base.messages.BUILDER_CLEDITOR_PROPERTIES},tr1);if(this.propWidget.model.mainWidget&&this.propWidget.model.mainWidget.references&&this.propWidget.model.mainWidget.references[this.propWidget.metadata.id]){self.refs=dojo.clone(this.propWidget.model.mainWidget.references[this.propWidget.metadata.id]);dojo.forEach(self.refs,function(ref){var index=ref.lastIndexOf(".");var _124e=ref.substring(index+1);var _124f=ref.substring(0,index);_124c=true;self.addReferenceRow(tbody,true,_124f,_124e);});}if(!this.fromDelete){dojo.forEach(builder.Environment.diagram.components,function(comp){dojo.forEach(comp.metadata.attributes,function(attr){if(attr.id==self.propWidget.metadata.id&&attr.type==self.propWidget.metadata.type&&self.refs.indexOf(comp.id+"."+attr.id)<0){_124d=true;self.addReferenceRow(tbody,false,comp.id,attr.id);}});});}if(_124c==true||_124d==true){if(self.fromDelete){this.deleteMessage.innerHTML=builder.Environment.messages.PATTERN_ATTR_DELETE_MESSAGE;}}else{self.patternMatching.innerHTML=builder.Environment.messages.PATTERN_ATTR_NO_MAPPINGS;dojo.style(self.patternMatching,"color","red");}_124c=false;_124d=false;},addReferenceRow:function(tbody,_1250,_1251,_1252){var self=this;var tr3=dojo.create("tr",null,tbody);if(!this.fromDelete){var td6=dojo.create("td",null,tr3);var _1253=new dijit.form.CheckBox({name:"patternCheckbox",checked:_1250,value:_1251+"."+_1252,onChange:function(b){if(_1253.get("checked")==false){var index=self.refs.indexOf(_1251+"."+_1252);self.refs.splice(index,1);}else{self.refs.push(_1251+"."+_1252);}}},td6);}var td7=dojo.create("td",null,tr3);var td8=dojo.create("td",null,tr3);td7.innerHTML=_1251;td8.innerHTML=_1252;},showDialog:function(conn){this.theDialog.show();},createComponentStore:function(){var _1254=dojo.filter(builder.Environment.diagram.components,function(_1255){return (_1255.metadata&&_1255.metadata.attributes!=null&&_1255.metadata.attributes.length>0&&_1255.metadata.type!="policy");});var _1256=new _124a({data:_1254});this.componentFiltering.set("store",_1256);},createOutputStore:function(){var _1257=this.componentFiltering.get("item");if(_1257!=null){var _1258=new _124a({data:_1257.metadata.attributes});this.attributeFiltering.set("store",_1258);}},toggleRadio:function(){var self=this;if(this.patternAttrRadio1&&this.patternAttrRadio1.get("checked")==true){this.newPatternAttr.style.display="none";this.existingPatternAttr.style.display="block";}else{this.newPatternAttr.style.display="block";this.existingPatternAttr.style.display="none";}},getPropertyValueByType:function(){var self=this;if(this.parameterType.get("value")=="string"){return self.patternAttrValue1.get("value");}else{if(this.parameterType.get("value")=="number"){return self.patternAttrValue2.get("value");}else{if(this.parameterType.get("value")=="password"){return self.patternAttrValue3.get("value");}else{if(this.parameterType.get("value")=="boolean"){return self.patternAttrValue4.get("checked");}}}}},setPropertyValueByType:function(val){var self=this;if(this.parameterType.get("value")=="string"){self.patternValueBox1.style.display="block";self.patternValueBox2.style.display="none";self.patternValueBox3.style.display="none";self.patternValueBox4.style.display="none";self.patternAttrValue1.set("value",val);self.patternAttrValue1.set("disabled",true);}else{if(this.parameterType.get("value")=="number"){self.patternValueBox2.style.display="block";self.patternValueBox1.style.display="none";self.patternValueBox3.style.display="none";self.patternValueBox4.style.display="none";self.patternAttrValue2.set("value",val);self.patternAttrValue2.set("disabled",true);}else{if(this.parameterType.get("value")=="password"){self.patternValueBox3.style.display="block";self.patternValueBox2.style.display="none";self.patternValueBox1.style.display="none";self.patternValueBox4.style.display="none";self.patternAttrValue3.set("value",val);self.patternAttrValue3.set("disabled",true);}else{if(this.parameterType.get("value")=="boolean"){self.patternValueBox4.style.display="block";self.patternValueBox2.style.display="none";self.patternValueBox3.style.display="none";self.patternValueBox1.style.display="none";if(val==""){val=false;}self.patternAttrValue4.set("checked",val);self.patternAttrValue4.set("disabled",true);}}}}},changeValueType:function(){var self=this;if(this.parameterType.get("value")=="string"){self.patternValueBox1.style.display="block";self.patternValueBox2.style.display="none";self.patternValueBox3.style.display="none";self.patternValueBox4.style.display="none";}else{if(this.parameterType.get("value")=="number"){self.patternValueBox2.style.display="block";self.patternValueBox1.style.display="none";self.patternValueBox3.style.display="none";self.patternValueBox4.style.display="none";}else{if(this.parameterType.get("value")=="password"){self.patternValueBox3.style.display="block";self.patternAttrValue3.set("disabled",true);self.patternValueBox2.style.display="none";self.patternValueBox1.style.display="none";self.patternValueBox4.style.display="none";}else{if(this.parameterType.get("value")=="boolean"){self.patternValueBox4.style.display="block";self.patternValueBox2.style.display="none";self.patternValueBox3.style.display="none";self.patternValueBox1.style.display="none";}}}}},confirm:function(){var self=this;if(this.fromDelete){self.mainWidget.deleteMetadata(this.propWidget.metadata.id);this.cancelDialog();}else{if(this.isValid()){var _1259={};if(!this.fromEdit&&this.patternAttrRadio1&&this.patternAttrRadio1.get("checked")==true){_1259=dojo.clone(this.attributeFiltering.get("item"));dojo.forEach(builder.Environment.diagram.components,function(comp){dojo.forEach(comp.metadata.attributes,function(attr){if(attr&&attr.id==_1259.id&&attr.type==_1259.type){var _125a=comp.properties[attr.id];var _125b="${pattern."+attr.id+"}";var _125c=new _124b(comp,attr.id,_125a,_125b);builder.Environment.commandStack.executeCommand(_125c);}});});}else{_1259["name"]=this.name.get("value");_1259["label"]=this.name.get("value");if(this.parameterType.get("value")=="password"){_1259["type"]="string";_1259["displayType"]=this.parameterType.get("value");}else{_1259["type"]=this.parameterType.get("value");}_1259["id"]=this.patternAttrId.get("value");_1259["description"]=this.description.get("value");_1259["sampleValue"]=self.getPropertyValueByType();_1259["required"]=true;}if(this.fromEdit){this.mainWidget.updateMetadata(_1259,self.refs);}else{this.mainWidget.addMetadata(_1259);}this.cancelDialog();}}},cancelDialog:function(){this.theDialog.hide();dijit.registry.remove(this);dojo.destroy(this.domNode);this.destroyRecursive();},isValid:function(){if(!this.fromEdit){if(this.patternAttrRadio1&&this.patternAttrRadio1.get("checked")==true){if(this.componentFiltering.get("value")==null||this.componentFiltering.get("value")==""){this.componentFiltering.displayMessage(this.componentFiltering.errorMsg);return false;}else{if(this.attributeFiltering.get("value")==null||this.attributeFiltering.get("value")==""){this.attributeFiltering.displayMessage(this.attributeFiltering.errorMsg);return false;}}}else{if(this.name.get("value")==null||this.name.get("value")==""){this.name.displayMessage(this.name.errorMsg);return false;}else{if(this.patternAttrId.get("value")==null||this.patternAttrId.get("value")==""){this.patternAttrId.displayMessage(this.patternAttrId.errorMsg);return false;}}}}else{if(this.name.get("value")==null||this.name.get("value")==""){this.name.displayMessage(this.name.errorMsg);return false;}}return true;}});});},"builder/vsys/util/VSysMiniPaintUtil":function(){define(["dojo/_base/lang","builder/util/PaintUtil","builder/vsys/util/VSysMiniPositionUtil","builder/util/Util","builder/vsys/util/VSysUtil"],function(lang,_125d,_125e,util,_125f){var _1260=lang.getObject("builder",true);var _1261=lang.getObject("vsys.util.VSysMiniPaintUtil",true,_1260);_1261=lang.mixin({},_125d);_1261.getPosition=function(_1262,_1263,_1264){if(!_1262.hostedOnComponent){_1262.hostedOnComponent=_125f.findHostedOnTarget(_1262.outgoingConnections);if(!_1262.hostedOnComponent){_1262.hostedOnComponent=_1262;}}if(!_1263.hostedOnComponent){_1263.hostedOnComponent=_125f.findHostedOnTarget(_1263.outgoingConnections);if(!_1263.hostedOnComponent){_1263.hostedOnComponent=_1263;}}this.computeConnectionMode(_1262.hostedOnComponent,_1263.hostedOnComponent,_1264);var _1265,_1266;switch(_1264.mode){case 1:_1265=_125e.getRightPosition(_1262.hostedOnComponent,_1264);_1266=_125e.getLeftPosition(_1263.hostedOnComponent,_1264);break;case 2:_1265=_125e.getLeftPosition(_1262.hostedOnComponent,_1264);_1266=_125e.getRightPosition(_1263.hostedOnComponent,_1264);break;case 3:_1265=_125e.getTopPosition(_1262.hostedOnComponent,_1264);_1266=_125e.getBottomPosition(_1263.hostedOnComponent,_1264);break;case 4:_1265=_125e.getBottomPosition(_1262.hostedOnComponent,_1264);_1266=_125e.getTopPosition(_1263.hostedOnComponent,_1264);break;}return {outportPos:_1265,inportPos:_1266};};_1261.notNeedComputeConnectionMode=function(_1267){return _1267.isSubComponentLink()&&!_1267.isHostedOnLink();};return _1261;});},"builder/util/ReferenceValueUtil":function(){define(["dojo/_base/lang","builder/util/Util","builder/util/CapabilityUtil","paas/common/constants","dojo/_base/array"],function(lang,Util,_1268,_1269,array){var _126a=lang.getObject("builder",true);var _126b=lang.getObject("util.ReferenceValueUtil",true,_126a);_126b=_126a.util.ReferenceValueUtil={getReferenceComponent:function(value){if(value==null){return null;}return value.substring(2,value.indexOf("."));},getReferenceAttribute:function(value){var _126c=this.getReferenceComponent(value);if(_126c==null){return null;}return value.substring(2+_126c.length+1,value.length-1);},isReferenceValue:function(value){if(typeof (value)==="string"){return value.indexOf("$")>-1;}return false;}};return _126b;});},"builder/workbench/componentsView/ComponentPropertyMapping":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentPropertyMapping.html"],function(_126d,_126e,_126f,_1270,_1271){return _126d("builder.workbench.componentsView.ComponentPropertyMapping",[_126e,_126f,_1270],{templateString:_1271,widgetsInTemplate:true,appModel:null,postCreate:function(){var _1272=this.cookbookAttributeColumn.insertRow(0);this.cookbookAttributeItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"type",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_LIFECYCLE_CHEF_COOKBOOK_ATTRIBUTE,type:"string",required:true},properties:{cookbookAttribute:""},labelWidth:"300px",model:this.appModel},_1272);var _1273=this.propertyColumn.insertRow(0);this.propertyItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"property",label:builder.Environment.messages.BUILDER_CLEDITOR_COMPONENT_LIFECYCLE_CHEF_PROPERTY,type:"string",required:true},properties:{property:""},labelWidth:"100px",model:this.appModel},_1273);var _1274=this.deleteColumn.insertRow(0);var _1275=document.createElement("img");_1275.src="/tooling/images/close_normal.png";_1275.style.cursor="pointer";_1274.appendChild(_1275);this.deleteHandle=dojo.connect(_1275,"onclick",dojo.hitch(this,"deleteItem"));},deleteItem:function(){},destroy:function(){dojo.disconnect(this.deleteHandle);if(this.nameItem!=null){this.nameItem.destroyRecursive();}if(this.implementationItem!=null){this.implementationItem.destroyRecursive();}this.inherited(arguments);},destroyArtifactColumn:function(){try{dijit.byId(this.artifactColumn.firstElementChild.firstElementChild.id).destroy();}catch(err){}},destroDeployPathColumn:function(){try{dijit.byId(this.deployPathColumn.firstElementChild.firstElementChild.id).destroy();}catch(err){}},getArtifact:function(){var _1276={};var _1277=this.artifactItem.getPropertyValue();var _1278=this.artifactTypeItem.getPropertyValue();_1276.artifactType=_1278;if(_1278=="rpm_list"||_1278=="rpmgroup_list"){var _1279=_1277.split(",");if(_1278=="rpm_list"){_1276.rpm_list=_1279;}else{if(_1278=="rpmgroup_list"){_1276.rpmgroup_list=_1279;}}}else{if(_1278=="file"){_1276.file=this.artifactItem.getPropertyValue();_1276.deployPath=this.deployPathItem.getPropertyValue();}else{if(_1278=="archive"){_1276.archive=this.artifactItem.getPropertyValue();_1276.deployPath=this.deployPathItem.getPropertyValue();}}}return _1276;}});});},"builder/vsys/workbench/editor/ListvSysPoliciesWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ListvSysPoliciesWidget.html","builder/workbench/PolicyItem","builder/util/CommandFactoryUtil","builder/base/command/CompoundCommand","builder/util/Util","builder/util/FileUtil","builder/vsys/util/VSysUtil","builder/util/CapabilityUtil","builder/util/array","builder/service/MetadataServiceExt","dijit/form/CheckBox","dijit/form/RadioButton","dojo/_base/array"],function(_127a,_127b,_127c,_127d,_127e,_127f,_1280,_1281,Util,_1282,_1283,_1284,_1285,_1286,_1287,_1288,array){return _127a("builder.vsys.workbench.editor.ListvSysPoliciesWidget",[_127b,_127c,_127d],{component:null,widgetsInTemplate:true,templateString:_127e,constructor:function(){var _1289=builder.Environment.messages;this.AVILABLE_POLICIES_TITLE=_1289.APPMODEL_TOOLING_AVILABLE_POLICIES_TITLE;},postCreate:function(){if(!this.component.isClosedVM()){this.getExistingPolicies();this.addBasicPolicies();}this.registerDestroy();},registerDestroy:function(){this.connect(this.domNode,"onmouseout",function(e){if(!this.rect){this.rect=builder.util.Util.coords(this.domNode);}var point={x:0,y:0};point.x=e.pageX||e.x;point.y=e.pageY||e.y;if(!builder.util.Util.isPointInRect(point,this.rect)){this.onAdd();this.domNode&&this.destroyRecursive();}});},getExistingPolicies:function(){this.existingPolicies=[];this.existingPolicyObj={};dojo.forEach(this.component.incomingConnections,function(it){var _128a=it.fromComponent.metadata;if(_128a.type=="policy"||_1283.isConfiguration(_128a)){this.existingPolicies.push(_128a.id);this.existingPolicyObj[_128a.id]=it.fromComponent;}},this);},addBasicPolicies:function(){var _128b=Util.getMetadataService().getComponentPoliciesByType(this.component.metadata.id);var self=this;array.forEach(_128b,function(_128c){if(_128c.type=="policy"&&_1283.pluginComponentLicenseAccepted(_128c)&&this._checkRequirements(_128c)){self.addBasicPolicy(_128c);}},this);},addBasicPolicy:function(_128d){if(!_128d){return;}var tr=dojo.create("tr",null,this.basicContainerNode);var _128e=dojo.create("td",{"style":"padding-left: 25px;"},tr);var _128f=this.existingPolicyObj[_128d.id]?true:false;var _1290=new _1287({name:_128d.id,value:_128d.id,checked:_128f},dojo.create("input",null,_128e));var _1291=dojo.create("td",{"className":"itemIcon"},tr);var icon=dojo.create("img",{"src":_1282.getComponentIconPath(_128d.thumbnail),"alt":builder.Environment.messages.IMAGE_ALT,"style":"width: 24px; height:24px"},_1291);var _1292=dojo.create("td",{"className":"itemName"},tr);var label=dojo.create("span",{"innerHTML":Util.splitName(_128d.label).shortName},_1292);},addAdvancedPolicies:function(_1293){var self=this;dojo.forEach(_1293,function(_1294){if(_1294.facets&&_1283.scriptComponentLicenseAccepted(_1294)){dojo.forEach(_1294.facets,function(facet){self.addFacet(facet,self.basicContainerNode);});}});},addFacet:function(facet,_1295){if(facet.label&&!facet.enablementoptionkey){}if(facet.type=="option"){var _1296=dojo.create("tr",{"className":"configuration-dialog-facet-row"},_1295);dojo.create("td",{innerHTML:facet.label,title:facet.infomessage||facet.label,colSpan:3,style:{paddingLeft:"25px"}},_1296);}var _1297=facet.options;if(_1297.length>0){var _1298=dojo.create("tr",{"className":"configuration-dialog-facet-row"},_1295);var _1299=dojo.create("td",{colSpan:3},_1298);var table=dojo.create("table",null,_1299);var tbody=dojo.create("tbody",null,table);dojo.forEach(_1297,function(opt){this.addOption(opt,facet,tbody);},this);}if(facet.facets){var _129a=dojo.create("tr",{"className":"configuration-dialog-facet-row"},_1295);var _129b=dojo.create("td",{colSpan:3},_1298);var _129c=dojo.create("table",null,_129b);var _129d=dojo.create("tbody",null,_129c);dojo.forEach(facet.facets,function(f){this.addFacet(f,_129d);},this);}},addOption:function(_129e,facet,_129f){var tr=dojo.create("tr",{"className":"configuration-dialog-facet-row"},_129f);dojo.create("td",{"className":"configuration-dialog-enabled-checkbox-cell"},tr);var _12a0=dojo.create("td",null,tr);dojo.create("td",{"innerHTML":_129e.label,"title":_129e.infomessage||_129e.label,colSpan:2},tr);var _12a1=this.existingPolicyObj[_129e.script]?true:false;if(facet.mincardinality==1&&facet.maxcardinality==1){var _12a2=new _1288({name:facet.name,value:_129e.script,checked:_12a1});_12a0.appendChild(_12a2.domNode);}else{var _12a3=new _1287({name:_129e.name,value:_129e.script,checked:_12a1});_12a0.appendChild(_12a3.domNode);}},onAdd:function(){var _12a4=this.form.get("value");var _12a5=[];for(var key in _12a4){var _12a6=_12a4[key];if(dojo.isArray(_12a6)&&_12a6.length>0){_12a5.push(_12a6[0]);}else{if(dojo.isString(_12a6)){_12a5.push(_12a6);}}}var _12a7=[];var _12a8=[];var tmp2={};dojo.forEach(_12a5,function(it){tmp2[it]=true;if(!this.existingPolicyObj[it]){_12a7.push(it);}},this);dojo.forEach(this.existingPolicies,function(it){if(!tmp2[it]){_12a8.push(it);}});delete tmp2;var _12a9=new _1281();dojo.forEach(_12a8,function(it){var _12aa=this.existingPolicyObj[it];if(!_12aa){return;}_12a9.add(_1280.getCommmandFactory().getRemovePolicyCommand(_12aa));},this);dojo.forEach(_12a7,function(it){_12a9.add(_1280.getCommmandFactory().getAddPolicyCommand(it,this.component));},this);builder.Environment.commandStack.executeCommand(_12a9);this.component.componentFrame&&this.component.componentFrame.updateAddPolicyButton();this.destroyRecursive();},show:function(){document.body.appendChild(this.domNode);},setLocation:function(left,top){dojo.style(this.domNode,{left:left+"px",top:top+"px"});},onCancel:function(){this.destroyRecursive();},_checkRequirements:function(_12ab){var _12ac=_1283.getJsonObjectByPath(_12ab,"capabilities","requires");if(_12ac==null){return true;}var _12ad=_1284.matches(this.component.getCombinedProvides(),_12ac);return (_12ad==null);}});});},"builder/workbench/ImportDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ImportDialog.html","dojox/grid/DataGrid","paas/widgets/TemplateThumbnail","paas/widgets/JsonRestStoreExt","builder/command/ImportApplicationCommand","dijit/layout/ContentPane","dojox/layout/ContentPane","dijit/form/Button","dijit/Dialog","dijit/layout/BorderContainer","dijit/layout/LayoutContainer","dijit/form/Textarea"],function(_12ae,_12af,_12b0,_12b1,_12b2,_12b3,_12b4,_12b5,_12b6){return _12ae("builder.workbench.ImportDialog",[_12af,_12b0,_12b1],{templateString:_12b2,templateResourceUrl:paas.common.constants.APPLICATION_REST_URL,templateId:null,templateGrid:null,gridIsUpdateable:null,templates:{},selectedItemID:null,templateInformationTodisplay:[],templateLayout:[],constructor:function(){this.dialog_title=builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_TITLE;this.dialog_subtitle=builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_SUBTITLE;this.dialog_ok=builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_OK;this.dialog_cancel=builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_CANCEL;this.dialog_details=builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_DETAILS;this.dialog_top_title=builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_TOP_TITLE;this.templateInformationTodisplay=[{field:"app_name",displayName:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_APP_NAME},{field:"app_id",displayName:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_APP_ID},{field:"Creator",displayName:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_CREATOR},{field:"LastModifier",displayName:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_LAST_MODIFIER},{field:"LastModified",displayName:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_LAST_MODIFIED,formatter:paasUtil.formatDateFromISO8601},{field:"CreateTime",displayName:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_CREATE_TIME,formatter:paasUtil.formatDateFromISO8601},{field:"description",displayName:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_DESCRIPTION},{field:"preview",displayName:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_PREVIEW}];this.templateLayout=[{field:"app_name",name:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_APP_NAME,width:"100%",styles:"text-align: left;"}];this.query={app_type:"application"};},postCreate:function(){dojo.connect(this.theDialog.domNode,"onkeypress",this,"triggerEnter");},createTemplateGrid:function(){var _12b7=builder.Environment.diagram;if(_12b7.patterntype&&_12b7.version){this.query.patterntype=_12b7.patterntype;this.query.version=_12b7.version;}var _12b8=new _12b5({target:this.templateResourceUrl});var self=this;this.templateGrid=new _12b3({store:_12b8,structure:this.templateLayout,autoHeight:true,selectionMode:"single",text_alignment:"left",query:this.query,queryOptions:{cache:true},noDataMessage:builder.Environment.messages.BUILDER_EDITOR_IMPORTDIALOG_NO_APPS,onSelectionChanged:dojo.hitch(this,this.onSlectionChanged),canSort:function(){return false;}},this.templateGridInHTML);var _12b9=this.templateGrid._onFetchComplete;var grid=this.templateGrid;var _12ba=function(items,req){if(grid.getSortProps()){items.sort(grid.store.makeComparator(grid.getSortProps().concat()));}for(var i=0;i<items.length;i++){if(items[i].app_id===builder.Environment.diagram.appId){items.splice(i,1);break;}}grid.updateRowCount(items.length);self.putBlankAtTheFirst(items);_12b9.apply(grid,[items,req]);self.setDefaultSelection();};this.templateGrid._onFetchComplete=_12ba;this.templateGrid.startup();this.templateGrid.sortInfo=1;},triggerEnter:function(evt){if(evt.keyCode==dojo.keys.ENTER&&this.theDialog.open){dojo.stopEvent(evt);this.importApplication();}},refreshTemplateGrid:function(){var self=this;var grid=this.templateGrid;this.gridIsUpdateable=grid.store.isUpdateable;grid.store.isUpdateable=function(){return false;};grid.store.fetch({start:0,isRender:true,query:self.query,queryOptions:{cache:true},onBegin:function(size,req){grid._onFetchBegin(size,req);},onComplete:function(items,req){grid.store.isUpdateable=self.gridIsUpdateable;grid._onFetchComplete(items,req);},onError:function(err,req){grid.store.isUpdateable=self.gridIsUpdateable;grid._onFetchError(err,req);}});},filterResult:function(){var _12bb=dijit.byId("queryText").attr("value");_12bb=dojo.string.trim(_12bb);if(_12bb!=""){this.templateGrid.filter({"app_name":_12bb});}else{refreshGrid();}},importApplication:function(){this.hideImportDialog();var cmd=new _12b6(this.templateId);builder.Environment.commandStack.executeCommand(cmd);},createApp:function(_12bc){showSplash(builder.Environment.messages.CREATING_APP,false);var _12bd=paas.common.constants.APPLICATION_REST_URL;if((_12bc!==undefined)&&(_12bc!==null)&&(_12bc!=="")){_12bd=_12bd+"?source="+_12bc;}var self=this;var _12be={headers:{"Content-Type":"application/json"},url:_12bd,encoding:"utf-8",load:function(resp,args){var appId=dojo.trim(resp.app_id);hideSplash();var url="../tooling/index.gt?isNew=true&appID="+appId;self.showEdit(url,appId);self.theDialog.hide();},error:function(resp,args){hideSplash();var _12bf=dojo.fromJson(resp.responseText).errorMessage;self.infoWithoutFade(_12bf,"error");},handleAs:"json",sync:true};dojo.xhrPost(_12be);},showEdit:function(url,name){dashboardApp.openWindow(url,name);},createFromTemplate:function(){this.createApp(this.templateId);},onSlectionChanged:function(e){var _12c0=this.templateGrid.selection.getSelected()[0];if(_12c0){this.informationTable.innerHTML="<span class='wca-image-progress-indicator-middle-icon' style='display:inline-block'></span>";this.previewTable.innerHTML="";this.templateId=_12c0.app_id;this.showSelectedItem(_12c0);}else{}},showSelectedItem:function(_12c1){var _12c2=_12c1.app_id;selectedItemID=_12c2;if(this.templates[_12c2]){this.refreshInformationTable(_12c1,this.templates[_12c2]);return;}var self=this;var _12c3={url:paas.common.constants.APPLICATION_REST_URL+_12c2+"?normalization=true",load:function(resp,args){if(selectedItemID==_12c2){self.refreshInformationTable(_12c1,resp);self.templates[_12c2]=resp;}},error:function(resp,args){self.informationTable.innerHTML=dojo.string.substitute(builder.Environment.messages.TEMPLATE_DIALOG_DATA_ERROR,[_12c2]);},handleAs:"json",sync:false};dojo.xhrGet(_12c3);},showDetails:function(){this.details.style.display="";},hideDetails:function(){this.details.style.display="none";},refreshInformationTable:function(_12c4,resp){this.detailsLabel.style.display="";this.informationTable.innerHTML="";this.previewTable.innerHTML="";this.details.innerHTML="";dojo.forEach(this.templateInformationTodisplay,dojo.hitch(this,function(att){if(_12c4.hasOwnProperty(att.field)){var _12c5=document.createElement("div");_12c5.className="template_dialog_informationTable_entry";var value=(att.formatter)?att.formatter(_12c4[att.field]):_12c4[att.field];_12c5.innerHTML=dojo.string.substitute("<div class='boldFont'>${name}: &nbsp; &nbsp; </div><span>${value}</span>",{"name":att.displayName,"value":value});this.details.appendChild(_12c5);}if(att.field==="description"){var model=resp.model;if(!model.description){model.description="";}var _12c5=document.createElement("div");var value=(att.formatter)?att.formatter(model.description):model.description;_12c5.innerHTML=dojo.string.substitute("<div class='boldFont'>${name}:</div><div style='margin-top:3px;'>${value}</div>",{"name":att.displayName,"value":value});this.informationTable.appendChild(_12c5);}if(att.field==="preview"){var _12c5=document.createElement("div");_12c5.innerHTML="<div class='boldFont'>"+att.displayName+":</div>";this.previewTable.appendChild(_12c5);var _12c6=document.createElement("div");this.previewTable.appendChild(_12c6);_12c6.className="thumbnailContainer";var _12c7=new _12b4(_12c6,resp);_12c7.postCreate();}}));},gridSort:function(){return false;},showTemplate:function(){this.theDialog.show();this.clearTemplates();this.clearInformationTable();if(this.templateGrid==null){this.createTemplateGrid();}else{this.refreshTemplateGrid();}},hideImportDialog:function(){this.clearTemplates();this.theDialog.hide();},putBlankAtTheFirst:function(items){for(var i=0;i<items.length;i++){if(items[i]["app_name"]==="Blank application"){var tempi=items[i];for(var j=i;j>0;--j){items[j]=items[j-1];}items[0]=tempi;return;}}},setDefaultSelection:function(){if(!this.templateGrid.selection.getSelected()[0]){if(this.templateGrid.getItem(0)){this.templateGrid.selection.addToSelection(0);}}else{this.onSlectionChanged();}},clearTemplates:function(){this.templates={};},clearInformationTable:function(){this.informationTable.innerHTML="";this.previewTable.innerHTML="";}});});},"builder/Startup":function(){require(["dojo/_base/declare","dojo/_base/lang","builder/util/LayoutUtil","dojo/on","dojo/parser","dojo/date/locale","dojox/timing","dijit/layout/BorderContainer","dijit/layout/ContentPane","dijit/layout/TabContainer","builder/Environment","paas/common/constants","paas/common/util","paas/widgets/EditCompDialog","builder/workbench/Container","builder/workbench/ImportDialog","builder/workbench/MessageBoxWidget","builder/workbench/editor/Help","builder/workbench/HintWidget","builder/workbench/palette/CategoryPalette","builder/workbench/layer/LayerPalette","builder/workbench/MessageBoxWidget","builder/workbench/SaveDialog","builder/workbench/property/PropertiesWidget","builder/workbench/ToolbarManager","builder/workbench/editor/Diagram","builder/workbench/editor/Container","builder/workbench/editor/EditorTabContainer","builder/workbench/BorderContainerExt","builder/workbench/property/PropertyView","builder/service/ModelService","builder/base/command/CommandProcessor","builder/util/FileResolver","builder/util/Util","builder/util/FileUploadManager","builder/service/DiagramToJson","builder/workbench/componentsView/ComponentsView","builder/workbench/linksView/LinksView","builder/workbench/componentsView/ComponentCategoryPalette","builder/workbench/linksView/LinkCategoryPalette","builder/workbench/orderView/SwapComponentsOrderCommand","paas/vsys/VSysInterchangeableDialog"],function(_12c8,lang,_12c9,on){var _12ca=lang.getObject("builder",true);_12ca.Startup=_12c8("builder.Startup",[],{});_12ca.Startup.onLoad=function(){dojo.byId("splash-page-text").innerHTML=_12ca.Environment.messages.APPMODEL_TOOLING_LOADING_APPLICATION_MESSAGE;var _12cb=dijit.byId("editorTab");_12cb.set("title",_12ca.Environment.messages.APPMODEL_TOOLING_TOOLBAR_DIAGRAM);var _12cc=dijit.byId("listArea");_12cc.set("title",_12ca.Environment.messages.APPMODEL_TOOLING_TOOLBAR_LISTVIEW);var _12cd=dijit.byId("sourceArea");_12cd.set("title",_12ca.Environment.messages.APPMODEL_TOLLING_TOOLBAR_SOURCE);var _12ce=dijit.byId("orderArea");_12ce.set("title",_12ca.Environment.messages.APPMODEL_ORDERING_TITLE);_12cb.set("tooltip",_12ca.Environment.messages.APPMODEL_TOOLING_TOOLBAR_DIAGRAM_TOOLTIP);_12cc.set("tooltip",_12ca.Environment.messages.APPMODEL_TOOLING_TOOLBAR_LISTVIEW_TOOLTIP);_12cd.set("tooltip",_12ca.Environment.messages.APPMODEL_TOLLING_TOOLBAR_SOURCE_TOOLTIP);_12ce.set("tooltip",_12ca.Environment.messages.APPMODEL_ORDERING_TOOLTIP);var _12cf=dijit.byId("diagramMessageWidget");_12cf.setMessages(_12ca.Environment.messages);var _12d0=dijit.byId("listViewMessageWidget");_12d0.setMessages(_12ca.Environment.messages);var _12d1=dijit.byId("sourceMessageWidget");_12d1.setMessages(_12ca.Environment.messages);var _12d2=["/builder/editor/notification","/builder/property/notification"];_12cf.addTopics(_12d2);var _12d3=dijit.byId("recoverMessageWidget");_12d3.addTopic("/builder/editor/recover");_12d3.set("confirmLabel",_12ca.Environment.messages.APPMODEL_TOOLING_APPLICATION_RECOVER);_12d3.set("cancelLabel",_12ca.Environment.messages.APPMODEL_TOOLING_APPLICATION_IGNORE);_12d0.addTopics(_12d2);_12d1.addTopics(_12d2);var _12d4=dijit.byId("controlContainer");_12d4.toggle(dijit.byId("layerContentPane"));_12d4.layout();dijit.byId("editCompDialog").setTitle(_12ca.Environment.messages.SAVE_AS_PRECONFIG_COMPONENT_TITLE);_12ca.Environment.editorArea=dijit.byId("diagramArea");_12ca.Environment.editor=dijit.byId("editor");_12ca.Environment.source=dojo.byId("source");_12ca.Environment.listViewContainer=dojo.byId("listView");_12ca.Environment.orderViewContainer=dojo.byId("orderView");_12ca.Environment.diagram=_12c9.createDiagramWidget();if(!appId||appId=="null"){appId="";}_12ca.Environment.diagram.appId=appId;_12ca.Environment.diagram.isNew=isNew;_12ca.Environment.commandStack=new _12ca.base.command.CommandProcessor();_12ca.Environment.orderViewCommandStack=new _12ca.base.command.CommandProcessor();_12ca.Environment.modelService=new _12ca.service.ModelService(_12ca.Environment.diagram);_12d3.onConfirm=function(){_12ca.Environment.modelService.cleanupModel();_12ca.Environment.modelService.loadApplication(true);};_12d3.onCancel=function(){_12ca.Environment.modelService.discardTemp();};_12ca.Environment.propertyView=dijit.byId("propertyView");_12ca.Environment.layerPalette=dijit.byId("layerPalette");_12ca.Environment.categoryPalette=dijit.byId("categoryPalette");var _12d5=dijit.byId("componentsArea");var _12d6=dijit.byId("linksArea");var _12d7=dijit.byId("toolingTabContainer");_12d5.set("title",_12ca.Environment.messages.BUILDER_CLEDITOR_COMPONENT_TITLE);_12d5.set("tooltip",_12ca.Environment.messages.BUILDER_CLEDITOR_COMPONENT_TOOLTIP);_12d6.set("title",_12ca.Environment.messages.BUILDER_CLEDITOR_LINK_TITLE);_12d6.set("tooltip",_12ca.Environment.messages.BUILDER_CLEDITOR_LINK_TOOLTIP);var _12d8=dijit.byId("componentsViewMessageWidget");_12d8.setMessages(_12ca.Environment.messages);var _12d9=dijit.byId("linksViewMessageWidget");_12d9.setMessages(_12ca.Environment.messages);var _12da=["/builder/componenteditor/notification","/builder/linkeditor/notification"];_12d8.addTopics(_12da);_12d9.addTopics(_12da);var _12db=dijit.byId("componentControlContainer");_12db.toggle(dijit.byId("componentLayerContentPane"));_12db.layout();dijit.byId("linkControlContainer").layout();_12ca.Environment.componentsViewContainer=dojo.byId("componentsView");_12ca.Environment.linksViewContainer=dojo.byId("linksView");_12ca.Environment.componentsView=new _12ca.workbench.componentsView.ComponentsView({appModel:_12ca.Environment.diagram});_12ca.Environment.linksView=new _12ca.workbench.linksView.LinksView({appModel:_12ca.Environment.diagram});_12ca.Environment.componentsArea=_12d5;_12ca.Environment.componentsAreaIndex=_12d7.getIndexOfChild(_12d5);_12ca.Environment.linksArea=_12d6;_12ca.Environment.linksAreaIndex=_12d7.getIndexOfChild(_12d6);_12d7.removeChild(_12d5);_12d7.removeChild(_12d6);_12ca.Environment.diagram.watch("patterntype",function(attr,_12dc,_12dd){if(_12dd=="vsys"){_12d7.addChild(dijit.byId("orderArea"),1);dojo.byId("orderArea").style.display="";dojo.destroy("layerContentPane");dojo.destroy("layerContentPane_splitter");dijit.byId("controlContainer").resize();}else{dojo.destroy("orderArea");}});if(!window.saveType){dojo.publish("/builder/modelservice/saveAsBtnStatus",[false]);}var _12de=null;if(appId==""){_12de=_12ca.Environment.modelService.createEmpty();_12de.addCallback(function(data){dojo.publish("/builder/editor/notification",[["error","APPMODEL_ID_NOT_EXIST"]]);});}else{_12de=_12ca.Environment.modelService.load();}_12de.addCallback(function(data){_12ca.Startup.terminateSplash();_12ca.Startup.autoScan();});};_12ca.Startup.autoScan=function(){var _12df=1000*5;var _12e0=new dojox.timing.Timer(_12df);_12e0.onTick=dojo.hitch(_12ca.service.AppBindingService,function(){this.scanDiagram();});_12e0.start();};_12ca.Startup.terminateSplash=function(){var _12e1=document.getElementById("splash-page-inception");var _12e2=_12e1.parentNode;_12e2.removeChild(_12e1);};_12ca.Startup.onUnLoad=function(){if(_12ca.util.FileUploadManager.hasFileUploading()){return _12ca.Environment.messages.APPMODEL_TOOLING_UPLOADING;}if((_12ca.Environment.diagram)&&(_12ca.Environment.diagram.changed)){return _12ca.Environment.messages.APPMODEL_TOOLING_UNSAVED;}};dojo.addOnLoad(_12ca.Startup.onLoad);window.onbeforeunload=_12ca.Startup.onUnLoad;var _12e3=_12ca.Environment.messages;return _12ca.Startup;});},"builder/workbench/property/DropdownGroups":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/DropdownGroups.html","dijit/form/ComboBox","builder/command/ChangeGroupCommand","dojo/store/Memory"],function(_12e4,_12e5,_12e6,_12e7,_12e8,_12e9,_12ea,_12eb){return _12e4("builder.workbench.property.DropdownGroups",[_12e5,_12e6,_12e7],{templateString:_12e8,groups:null,groupdata:null,postCreate:function(){this.groups=[];this.groupdata={identifier:"id",items:[]};this.handler=this.connect(this.groupsSelector,"onChange",this.selectGroup);this.groupsSelector.domNode.style.margin="5px 12px";},addGroup:function(group){this.groups.push(group);group.containerWidget=this;this.attibutesContainer.appendChild(group.domNode);group.setPropsEnable(group.enable,this.model);this.groupdata.items.push({"id":group.groupId,"name":group.title});var _12ec=new _12eb({data:this.groupdata});this.groupsSelector.set("store",_12ec);this.groupsSelector.startup();},disableOtherGroup:function(group){dojo.forEach(this.groups,function(_12ed){if(!group||_12ed.groupId!=group.groupId){_12ed.setPropsEnable(false);}});if(!group){this.groupsSelector.set("value",null);}},selectGroup:function(value){var _12ee,_12ef;dojo.forEach(this.groups,function(group){if(group.title==this.groupsSelector.get("value")){_12ee=group.groupId;}if(group.enable){_12ef=group.groupId;}},this);if(_12ee!=_12ef){var cmd=new _12ea(this.model.id,this.model,_12ef,_12ee);if(builder&&builder.Environment&&builder.Environment.commandStack){builder.Environment.commandStack.executeCommand(cmd);}else{cmd.canExecute()&&cmd.execute();}}},addSelector:function(_12f0){this.groupsSelector=_12f0;this.selectorContainer.appendChild(_12f0.domNode);},_setDisabledAttr:function(value){this.groupsSelector.set("disabled",value);this.disabled=value;},uninitialize:function(){for(var i in this.groups){var _12f1=this.groups[i];_12f1.domNode&&_12f1.destroyRecursive();}this.containerPane.destroyRecursive();}});});},"builder/vsys/util/VSysMiniPositionUtil":function(){define(["dojo/_base/lang","builder/util/PositionUtil"],function(lang,_12f2){var _12f3=lang.getObject("builder",true);var _12f4=lang.getObject("workbench.vsys.VSysMiniPositionUtil",true,_12f3);_12f4=lang.mixin({},_12f2);_12f4.getConnections=function(_12f5,pos,conn){return {"conns":[conn],"connIndex":0};};return _12f4;});},"builder/workbench/editor/PropertiesContainer":function(){define(["dojo/_base/declare"],function(_12f6){return _12f6("builder.workbench.editor.PropertiesContainer",null,{propertyMetadata:[],properties:{},getProperty:function(name,_12f7){if(name){var value=this.properties[name];return (value!==undefined)?value:_12f7;}return null;},setProperty:function(name,value){this.properties[name]=value;},removeProperty:function(name,value){delete this.properties[name];},getProperties:function(){return this.properties;},getGroups:function(){return this.groups;},checkValidation:function(){},getRequiredProperties:function(){var _12f8=[];for(var i=0;i<this.propertyMetadata.length;i++){if(this.propertyMetadata[i].required){_12f8.push(this.propertyMetadata[i]);}}return _12f8;},handleValidationResult:function(_12f9){throw new Error("Unimplemented API: builder.workbench.editor.PropertiesContainer.handleValidationResult");},setPropertyByName:function(_12fa,value){this.properties[_12fa]=value;},getPropertyByName:function(_12fb){return this.properties[_12fb];},setDefaultValue:function(){for(var i in this.propertyMetadata){if(this.propertyMetadata[i].sampleValue!=null){this.setPropertyByName(this.propertyMetadata[i].name,this.propertyMetadata[i].sampleValue);}}}});});},"builder/workbench/orderView/DependencyConnectionCommandMixin":function(){define(["dojo/_base/declare","builder/workbench/editor/Connection","dojo/topic","builder/workbench/orderView/DependencyConnection"],function(_12fc,_12fd,topic,_12fe){return _12fc("builder.workbench.orderView.DependencyConnectionCommandMixin",null,{_changeTargetPosition:function(){if(this.fromOrderFrame.x<this.toOrderFrame.x){return;}this.xShift=this.fromOrderFrame.x+this.fromOrderFrame.frameWidth+this.fromOrderFrame.frameSpace-this.toOrderFrame.x;this.toOrderFrame.setPosition(this.toOrderFrame.x+this.xShift,this.toOrderFrame.y,this.xShift);},_restoreTargetPosition:function(){if(this.xShift>0){this.toOrderFrame.setPosition(this.toOrderFrame.x-this.xShift,this.toOrderFrame.y,0-this.xShift);}},_addDependencyConnection:function(){var args={source:this.fromComponent,target:this.toComponent};this.connection=new _12fe(args);this.connection.paint();builder.Environment.orderView.addDependencyConnection(this.connection);},_removeDependencyConnection:function(){this.fromOrderFrame.removeFlowOutConnection(this.connection);this.toOrderFrame.removeFlowInConnection(this.connection);builder.Environment.orderView.deleteDependencyConnection(this.connection);this.connection.remove();},_disableUselessDependencyConnection:function(){var _12ff=builder.Environment.orderView.dependencyConnections;for(var i=0;i<_12ff.length;i++){var _1300=_12ff[i].fromComponent.orderFrame;var _1301=_12ff[i].toComponent.orderFrame;if(_1300.orderRow==this.fromOrderFrame.orderRow&&_1301.orderRow==this.toOrderFrame.orderRow){if(_1300.indexInRow<=this.fromOrderFrame.indexInRow&&_1301.indexInRow>=this.toOrderFrame.indexInRow){if(this.connection.id==_12ff[i].id){continue;}_12ff[i].hideLink();}}}},_restoreUselessDependencyConnection:function(){}});});},"builder/util/CssUtil":function(){define(["dojo/_base/lang"],function(lang){var _1302=lang.getObject("builder",true);var _1303=lang.getObject("util.CssUtil",true,_1302);_1303=_1302.util.CssUtil={getThumbnailBakImageByType:function(type){if(type=="policy"){return "images/policies-S.png";}else{return "images/components-S.png";}},getComponentBakImgByType:function(type){if(type=="policy"){return "firgureFrame_policy_backImage";}else{return "firgureFrame_component_backImage";}},getDefaultLinkStyle:function(){var _1304={color:"#4c7faf",width:2,clickcolor:"#FFFFFF",dashstyle:"solid",dasharray:"6,2",highlightcolor:"#F18626",highlightwidth:3,errordasharray:"6,2",errordashstyle:"dash"};return _1304;},getLinkStyleByConnectonType:function(type){var _1305={};if(type=="policyLink"){_1305.color="green";_1305.dashstyle="dash";}return _1305;},getLinkStyleByComponentType:function(type){var _1306={};if(type=="policy"){_1306.color="green";_1306.dashstyle="dash";}return _1306;}};return _1303;});},"paas/widgets/Dialog":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/Dialog","dijit/form/Form","dijit/_WidgetsInTemplateMixin","dijit/form/Button","builder/workbench/MessageBoxWidget","dijit/a11y","dojo/text!./templates/Dialog.html"],function(_1307,lang,_1308,Form,_1309,_130a,_130b,a11y,_130c){return _1307("paas.widgets.Dialog",[_1308,_1309],{templateString:_130c,widgetsInTemplate:true,description:"",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],description:{node:"descriptionNode",type:"innerHTML"},"aria-describedby":""}),draggable:false,isConfirmButtonDisplay:true,isCancelButtonDisplay:true,isEnterToSubmit:true,setBtnTextConfirm:function(text){this.confirmText.containerNode.innerHTML=text;this.confirmText.titleNode.title=text;},constructor:function(){this.btnTextConfirm=paas.Base.messages.OK;this.btnTextCancel=paas.Base.messages.CANCEL;},postCreate:function(){this.inherited(arguments);if(this.isConfirmButtonDisplay==false){this.confirmButtonNode.style.display="none";}if(this.isCancelButtonDisplay==false){this.closeButtonNode.style.display="none";}this.constructContent();if(this.isEnterToSubmit){this.connect(this.containerNode,"onkeypress",function(e){e=e?e:window.event;var _130d=e.which?e.which:e.keyCode;if(_130d==13){this.onConfirm();}});}},constructContent:function(){},show:function(){var _130e=this.inherited(arguments);if(dojo.isIE&&this.domNode.clientWidth<300){this.domNode.style.width="300px";dojo.query("table",this.domNode)[0].style.width="300px";}return _130e;},_getFocusItems:function(){var elems=a11y._getTabNavigable(this.domNode);this._firstFocusItem=elems.lowest||elems.first||this.closeButtonNode||this.domNode;this._lastFocusItem=elems.last||elems.highest||this._firstFocusItem;},onConfirm:function(){this.beforeConfirm();this.hide();},onCancel:function(){this.beforeCancel();this.inherited(arguments);},beforeConfirm:function(){},beforeCancel:function(){},showButtonConfirm:function(){this.confirmButtonNode.style.display="";},showCancelConfirm:function(){this.cancelButtonNode.style.display="";},hideButtonConfirm:function(){this.confirmButtonNode.style.display="none";},hideCancelConfirm:function(){this.cancelButtonNode.style.display="none";},enableConfirmButton:function(){this.confirmText.setAttribute("disabled",false);},disableConfirmButton:function(){this.confirmText.setAttribute("disabled",true);}});});},"builder/workbench/property/SliderWithOptions":function(){define(["dojo/_base/declare","dijit/form/HorizontalSlider","builder/workbench/property/Slider","builder/workbench/property/HorizontalRuleWithOptions"],function(_130f,_1310,_1311,_1312){var _1313=_130f("builder.workbench.property.HorizontalSliderWithOptions",[_1310],{options:null,postMixInProperties:function(){this.inherited(arguments);this.minimum=this.options[0].value;this.maximum=this.options[this.options.length-1].value;},_setPixelValue:function(_1314,_1315,_1316){if(this.disabled||this.readOnly){return;}var _1317=_1315/(this.maximum-this.minimum);var _1318=Math.round(_1314/_1317)+this.minimum;var value=this.minimum;if(_1318>=this.maximum){value=this.maximum;}else{if(_1318<=this.minimum){value=this.minimum;}else{for(var i=0;i<this.options.length;i++){if(this.options[i].value>_1318){value=Math.abs(_1318-this.options[i].value)<Math.abs(_1318-this.options[i-1].value)?this.options[i].value:this.options[i-1].value;break;}}}}this._setValueAttr(value,_1316);},_bumpValue:function(_1319,_131a){if(this.disabled||this.readOnly){return;}var value=this.value||this.minimum;var _131b=0;for(var i=0;i<this.options.length;i++){if(value==this.options[i].value){_131b=i;break;}}if(_1319>0){var index=_131b<this.options.length-1?_131b+1:this.options.length-1;}else{var index=_131b==0?0:_131b-1;}this._setValueAttr(this.options[index].value,_131a);}});return _130f("builder.workbench.property.SliderWithOptions",[_1311],{options:null,postMixInProperties:function(){this.inherited(arguments);this.minimum=this.options[0].value;this.maximum=this.options[this.options.length-1].value;},postCreate:function(){var _131c={intermediateChanges:true,slideDuration:500,style:"height:20px; margin-top:-5px;",options:this.options};this.slider=new _1313(_131c,this.sliderContainer);dojo.connect(this.slider,"onChange",dojo.hitch(this,"onSliderChange"));var _131d={numericMargin:0,constraints:{pattern:this.pattern},container:"topDecoration",style:"height:1.2em;font-size:75%;",options:this.options};this.topHorizontalRuleLable=new _1312(_131d,this.ruleLableContainer);this.slider.topDecoration.appendChild(this.topHorizontalRuleLable.domNode);this.topHorizontalRuleLable.domNode.style.marginTop="2px";dojo.connect(this.slider,"onChange",this,"onSliderChange");dojo.connect(this.slider,"onBlur",this,"onChange");},getShowValue:function(value){var _131e=this.options[0].name;for(var i=0;i<this.options.length;i++){if(value==this.options[i].value){_131e=this.options[i].name;break;}}return _131e;},onSliderChange:function(){showValue=this.getShowValue(arguments[0]);this.sliderInputValue.innerHTML=showValue;this.value=arguments[0];},set:function(name,value){if(name==="value"){if(!value||value===""){value=this.minimum;}var _131f=this.getShowValue(value);this.sliderInputValue.innerHTML=_131f;this.slider.set("value",value);this["value"]=value;}else{return this.inherited(arguments);}}});});},"builder/workbench/MessageBoxWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","builder/Environment","dijit/form/Button","dojo/dom-construct","dojo/on","dojo/_base/lang","dojo/_base/array","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/text!./templates/MessageBoxWidget.html"],function(_1320,_1321,_1322,_1323,_1324,_1325,_1326,on,lang,array,_1327,_1328,_1329,_132a){return _1320("builder.workbench.MessageBoxWidget",[_1321,_1322,_1323],{templateString:_132a,msgPane:null,msgPaneText:null,msgPaneIcon:null,topic:null,showConfirmButton:false,confirmButton:null,confirmText:"",showCancelButton:false,cancelButton:null,cancelText:"",constructor:function(){this.closebtn_title=builder.Environment.messages.MESSAGEBAR_MESSAGE_CLEAR_BUTTON;},showMessagePane:function(){var _132b=this.domNode.parentNode.childNodes;var _132c=0;array.forEach(_132b,function(_132d){if(_132d.id!==this.domNode.id&&_1327.contains(_132d,"message-box-widget")&&_132d.style.display!=="none"){var _132e=_1329.getMarginSize(_132d);_132c+=_132e.h;}},this);this.domNode.style.top=_132c+"px";this.domNode.style.display="";},showInfo:function(_132f,_1330,_1331){if(this.fadeLogMsg){window.clearTimeout(this.fadeLogMsg);}if(_132f!=undefined){if(_132f.nodeType){this.msgPaneText.innerHTML="";this.msgPaneText.appendChild(_132f);}else{this.msgPaneText.innerHTML=_132f;}}if(_1331!=undefined){dojo.removeClass(this.background,["message-box-info","message-box-error","message-box-warning","message-box-success"]);dojo.addClass(this.background,_1330);}if(_1331!=undefined){this.msgPaneIcon.className=_1331;this.msgPaneIcon.style.display="";}this.showMessagePane();},hideInfo:function(){this.msgPaneText.innerHTML="";this.tmsgPaneIcon.style.display="none";},hideMessagePane:function(){this.domNode.style.display="none";},hideMessagePaneKeyPress:function(evt){if(evt.keyCode==dojo.keys.ENTER||evt.charCode==dojo.keys.SPACE){this.hideMessagePane();}},fadeLogMsg:null,infoWithoutFade:function(msg){this.showInfo(msg,"message-box-info","wca-image-info-icon");},errorWithoutFade:function(msg){this.showInfo(msg,"message-box-error","wca-image-error-icon");},warningWithoutFade:function(msg){this.showInfo(msg,"message-box-warning","wca-image-warning-icon");},hide:function(){this.hideMessagePane();},info:function(msg,_1332){this.infoWithoutFade(msg);this.fade(_1332);},error:function(msg,_1333){this.errorWithoutFade(msg);},warning:function(msg,_1334){this.warningWithoutFade(msg);this.fade(_1334);},fade:function(_1335){if(!_1335){_1335=5000;}window.clearTimeout(this.fadeLogMsg);var self=this;this.fadeLogMsg=window.setTimeout(function(){self.hideMessagePane();},_1335);},messages:null,postCreate:function(){this.subscribes=[];if(this.topic){this.addTopics(this.topic);}if(this.showConfirmButton||this.showCancelButton){var td=_1326.create("td",{style:{"width":"280px"}},this.textTd,"after");if(this.showConfirmButton){this.confirmButton=new _1325({label:this.conformLabel});this.confirmButton.placeAt(td);this.own(on(this.confirmButton,"click",lang.hitch(this,this._onConfirm)));}if(this.showCancelButton){this.cancelButton=new _1325({label:this.cancelLabel});this.cancelButton.placeAt(td);this.own(on(this.cancelButton,"click",lang.hitch(this,this._onCancel)));}}},_onConfirm:function(){this.hideMessagePane();this.onConfirm();},onConfirm:function(){},_onCancel:function(){this.hideMessagePane();this.onCancel();},onCancel:function(){},_setConfirmLabelAttr:function(_1336){this.conformLabel=_1336;if(this.showConfirmButton){this.confirmButton.set("label",_1336);}},_setCancelLabelAttr:function(_1337){this.cancelLabel=_1337;if(this.showCancelButton){this.cancelButton.set("label",_1337);}},setMessages:function(_1338){this.set("messages",_1338);},addTopic:function(topic){var self=this;return this.subscribe(topic,function(args){self.handleMessage(args);});},addTopics:function(_1339){if(typeof (_1339)=="string"){_1339=[_1339];}dojo.forEach(_1339,function(topic){this.addTopic(topic);},this);},addSubEvent:function(_133a){this.subscribes.push(_133a);},handleMessage:function(args){if(!dojo.isArray(args)){return;}if(!this[args[0]]){return;}if(args.length==1){this[args[0]].apply(this,[]);return;}var _133b;if(args.length==2){_133b=(this.messages&&this.messages[args[1]])||args[1];}else{if(args.length>2){var _133c=[];for(var i=2;i<args.length;i++){var param=(args[i]==null)?"":args[i];_133c.push(param);}_133b=dojo.string.substitute((this.messages&&this.messages[args[1]])||args[1],_133c);}}this[args[0]].apply(this,[_133b]);},uninitialize:function(){dojo.forEach(this.subscribes,dojo.unsubscribe);}});});},"builder/workbench/PolicyItem":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/PolicyItem.html","builder/util/CssUtil"],function(_133d,_133e,_133f,_1340,_1341,_1342){return _133d("builder.workbench.PolicyItem",[_133e,_133f,_1340],{templateString:_1341,data:null,dndSource:null,isExcluded:false,postCreate:function(args,_1343,_1344){this.icon=builder.util.FileUtil.getComponentIconPath(this.data.thumbnail);if(this.itemImgNode){this.itemImgNode.src=this.icon;this.itemImgNode.alt=builder.Environment.messages.IMAGE_ALT;}if(builder.util.Util.isPatternComponent(this.data)){this.itemNameNode.innerHTML=this.data.label;}else{var _1345=builder.util.Util.splitName(this.data.label);this.itemNameNode.innerHTML=_1345.shortName;}this.domNode.title=this.data.label||this.data.name;if(this.data.enabled==false){dojo.style(this.disablePolicy,"display","");}dojo.connect(this.domNode,"onmouseover",this,"itemMouseOverHandler");dojo.connect(this.domNode,"onmouseout",this,"itemMouseOutHandler");},display:function(){this.domNode.style.display="";},hidden:function(){this.domNode.style.display="none";},isMatchKeyword:function(_1346){return this.data.name.toLowerCase().indexOf(_1346.toLowerCase())>-1;},itemMouseOverHandler:function(e){this.domNode.style.backgroundColor="#F4F4F4";},itemMouseOutHandler:function(e){this.domNode.style.backgroundColor="white";}});});},"paas/widgets/FileInputExt":function(){define(["dojo/_base/declare","paas/widgets/MetaDataDrivenInput","dojox/form/FileInput","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/FileInputExt.html","dijit/Tooltip","dojo/on","dojo/mouse"],function(_1347,_1348,_1349,_134a,_134b,_134c,_134d,on,mouse){return _1347("paas.widgets.FileInputExt",[_1348,_1349,_134a,_134b],{templateString:_134c,fileExtensions:null,invalidMessage:null,msgMethod:null,msgObject:null,submitIntervalMilliSec:5000,isDisplayCancel:true,postMixInProperties:function(){this.inherited(arguments);this.initExtensionData();this.noFileSelectedLabel=paas.Base.messages.NO_FILE_SELECTED;this.cancelText=paas.Base.messages.DELETE;this.label=paas.Base.messages.BROWSE;},_matchValue:function(){if(this.fileInput.value){var start=this.fileInput.value.lastIndexOf("\\");this.inputNode.value=this.fileInput.value.substring(start+1);}else{this.inputNode.value=this.fileInput.value;}},initExtensionData:function(){if(!this.model){return;}this.initMetaData();if(this.metadata&&this.metadata.fileExtensions){this.fileExtensions=this.metadata.fileExtensions;}},postCreate:function(){this.inherited(arguments);this.fileInput.title=this.noFileSelectedLabel;this.startup();dojo.connect(this.fileInput,"onchange",this,"onChange");this.fileInput.name=this.name;this.inputNode.id="fileInputFakeInput-"+this.fileInput.id;this.inputNode.name="";this.resizeFileInput();var self=this;if(this.promptMessage){new _134d({connectId:[self.domNode],label:self.promptMessage});}if(this.isDisplayCancel&&this.value){this._enableCancelButton();}else{this._disabledCancelButton();}},onChange:function(){if(this.isDisplayCancel){this._enableCancelButton();}},_enableCancelButton:function(){if(this.inputNode.value!=""){this.cancelNode.style.visibility="visible";dojo.fadeIn({node:this.cancelNode,duration:275}).play();}},_disabledCancelButton:function(){dojo.fadeOut({node:this.cancelNode,duration:275}).play();},get:function(name){if(name==="value"){var value=this.inputNode.value?this.inputNode.value:"";var _134e="";if(dojo.isIE||dojo.isChrome||dojo.isSafari){var index=value.lastIndexOf("\\")+1;_134e=value.slice(0,index);value=value.slice(index);}return _134e+encodeURIComponent(value);}else{return this.inherited(arguments);}},set:function(name,value){if(name==="disabled"){this.fileInput.disabled=value;}else{if(name==="value"){if(value&&value!=""){this.cancelNode.style.visibility="visible";dojo.fadeIn({node:this.cancelNode,duration:275}).play();}else{value="";}}}var ret=this.inherited(arguments);if(name==="value"&&value&&value!=""){this.inputNode.value=decodeURI(value);}return ret;},reset:function(){this.inherited(arguments);dojo.connect(this.fileInput,"onchange",this,"onChange");this.onChange();this.resizeFileInput();},resizeFileInput:function(){this.fileInput.style.width="220px";this.fileInput.size=25;},isValid:function(){var _134f="";if(!this.fileExtensions||this.fileExtensions===""){return true;}if(this.fileInput.value&&this.fileInput.value!=""){_134f=this.fileInput.value;}else{_134f=this.value;}if(!_134f&&_134f==""){return true;}var _1350=false;for(var i=0;i<this.fileExtensions.length;i++){if(this.fileExtensions[i]){if(this.fileExtensions[i]!=""){var _1351=_134f.length-this.fileExtensions[i].length;var _1352=_134f.length;try{if(this.fileExtensions[i]==_134f.substring(_1351,_1352)&&_134f.charAt(_1351-1)=="."){_1350=true;break;}}catch(e){}}else{_1350=true;break;}}}if(!_1350){this.reset();var _1353=dojo.map(this.fileExtensions,function(input){return "."+input;});dojo.publish("/builder/property/notification",[["info","widgets_fileinputauto_invalidExtension",_1353.join(" or ")]]);}return _1350;}});});},"builder/workbench/editor/LinkSelection":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/LinkSelection.html","dijit/Dialog","dijit/form/FilteringSelect","dojo/store/Memory","dijit/form/Form","dijit/form/TextBox","builder/workbench/editor/Connection","dijit/form/Button"],function(_1354,_1355,_1356,_1357,_1358,_1359,_135a,_135b,Form,_135c,_135d,_135e){return _1354("builder.workbench.editor.LinkSelection",[_1355,_1356,_1357],{templateString:_1358,widgetsInTemplate:true,callingWorkingObject:null,callbackFunction:null,connectionsMetadata:null,appModel:null,constructor:function(_135f,_1360,_1361){this.hintBtnOk=builder.Environment.messages.BUILDER_CLEDITOR_BTN_OK;this.hintBtnCancel=builder.Environment.messages.BUILDER_CLEDITOR_BTN_CANCEL;this.hintLinkSelectionDialog=builder.Environment.messages.BUILDER_CLEDITOR_LINK_SELECTION_LABEL;this.callingWorkingObject=_1361;this.callbackFunction=_1360;this.connectionsMetadata=_135f;},postCreate:function(){dojo.connect(this.linkSelectionCancel,"onClick",dojo.hitch(this,"cancelLinkSelectionDialog"));dojo.connect(this.linkSelectionSave,"onClick",dojo.hitch(this,"saveLinkSelectionDialog"));var _1362=new Array();for(var count in connectionsMetadata){var _1363=connectionsMetadata[count];conncetionId=_1363.id;connectionLabel=_1363.label;if(connectionLabel==""){connectionLabel=conncetionId;}connectionType=_1363.type;_1362.push({id:conncetionId,name:connectionLabel,type:connectionType});}var _1364=new dojo.store.Memory({"data":_1362});this.linkSelection.store=_1364;},cancelLinkSelectionDialog:function(){this.linkSelectionDialog.hide();},saveLinkSelectionDialog:function(){var _1365=this.linkSelection.get("item").id;var _1366=this.linkSelection.get("item").name;var _1367=this.connectionsMetadata;for(var count in _1367){var _1368=_1367[count];if(_1368.id==_1365){break;}}this.callbackFunction(this.callingWorkingObject,_1368);this.linkSelectionDialog.hide();}});});},"builder/workbench/layer/LayerPalette":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/LayerPalette.html","builder/workbench/layer/LayerPaletteItem","builder/workbench/layer/Layer","builder/util/Util","builder/command/AddLayerCommand","builder/command/RemoveLayerCommand","builder/command/ImportApplicationCommand","builder/workbench/layer/Help","dijit/layout/ContentPane","dijit/layout/BorderContainer","dijit/form/Button","dojo/parser"],function(_1369,_136a,_136b,_136c,_136d,_136e,Layer,Util,_136f,_1370,_1371,Help,_1372,_1373,_1374,_1375){return _1369("builder.workbench.layer.LayerPalette",[_136a,_136b,_136c],{templateString:_136d,widgetsInTemplate:true,diagram:null,items:null,selectedItem:null,container:null,layerButtons:[],readOnlyMode:false,constructor:function(){this.helpTitle=builder.Environment.messages.BUILDER_LAYER_PALETTE_HELP;this.layerTitle=builder.Environment.messages.BUILDER_LAYER_PALETTE_TITLE;this.newTitle=builder.Environment.messages.BUILDER_LAYER_PALETTE_NEW_TITLE;this.importTitle=builder.Environment.messages.BUILDER_LAYER_PALETTE_IMPORT_TITLE;this.delTitle=builder.Environment.messages.BUILDER_LAYER_PALETTE_DEL_TITLE;this.newLabel=builder.Environment.messages.LAYER_PALETTE_NEW_BTN_LABEL;this.importLabel=builder.Environment.messages.LAYER_PALETTE_IMPORT_BTN_LABEL;this.delLabel=builder.Environment.messages.LAYER_PALETTE_DELETE_BTN_LABEL;},postCreate:function(){this.items={};dojo.connect(this.helpBtn,"onmouseover",this,function(){this.helpImgNode.src="/tooling/images/help_hover.png";});dojo.connect(this.helpBtn,"onmouseout",this,function(){this.helpImgNode.src="/tooling/images/help_normal.png";});dojo.connect(this.helpBtn,"onclick",this,"onHelpClick");this.addBtn.onClick=dojo.hitch(this,"onAddClick");this.importBtn.onClick=dojo.hitch(this,"onImportClick");this.delBtn.onClick=dojo.hitch(this,"onDelClick");this.layerButtons.push(this.addBtn);this.layerButtons.push(this.importBtn);this.layerButtons.push(this.delBtn);},setReadOnlyMode:function(){for(i=0;i<this.layerButtons.length;i++){this.disableBtn(this.layerButtons[i]);}this.readOnlyMode=true;},_updateBtnStatus:function(_1376,_1377){if(_1376){_1376.set("disabled",_1377);}},disableBtn:function(_1378){this._updateBtnStatus(_1378,true);},enableBtn:function(_1379){this._updateBtnStatus(_1379,false);},load:function(){this.container=builder.Environment.diagram;dojo.forEach(this.container.layers,dojo.hitch(this,function(layer){this.addLayerItem(layer);if(this.readOnlyMode){this.getLayerItem(layer).setReadOnlyMode();}}));for(var i=0;i<this.container.layers.length;i++){if(!this.container.layers[i].isReferenced()){this.getLayerItem(this.container.layers[i]).onSelect();break;}}},addLayerItem:function(layer){if(this.items[layer.id]){return;}var opt={layer:layer};var _137a=new builder.workbench.layer.LayerPaletteItem(opt);this.paletteContainer.appendChild(_137a.domNode);this.items[layer.id]=_137a;_137a.onSelect();return _137a;},getLayerItem:function(layer){return this.items[layer.id];},removeLayerItem:function(layer){var _137b=this.items[layer.id];_137b.destroyRecursive();delete this.items[layer.id];var _137c=this.items[this.container.layers[0].id];_137c.onSelect();},updateLayerName:function(layer,newId){var item=this.items[layer.id];item.setLayerName(newId);this.items[layer.id]=null;this.items[newId]=item;layer.id=newId;},onImportClick:function(evt){if(evt){dojo.stopEvent(evt);}if(this.container&&this.container.isTemplate()===true){dojo.publish("/builder/editor/notification",[["info","NO_REFERENCE_IN_TEMPLATE"]]);return;}dijit.byId("importDialog").showTemplate();},onAddClick:function(){var cmd=new builder.command.AddLayerCommand();builder.Environment.commandStack.executeCommand(cmd);},onDelClick:function(){var cmd=new builder.command.RemoveLayerCommand(this.container.currentLayer);builder.Environment.commandStack.executeCommand(cmd);},onHelpClick:function(evt){dojo.stopEvent(evt);var coord=builder.util.Util.coords(this.helpBtn);if(!this.helpWidget||!this.helpWidget.domNode){this.helpWidget=new builder.workbench.layer.Help({position:{left:coord.x+22,top:coord.y-100}});dojo.body().appendChild(this.helpWidget.domNode);}this.helpWidget.setLocation(coord.x+22,coord.y-100);this.helpWidget.focus();}});});},"builder/vsys/workbench/editor/VSysMiniLink":function(){define(["dojo/_base/declare","builder/workbench/editor/Link"],function(_137d,Link){return _137d("builder.vsys.workbench.editor.VSysMiniLink",[Link],{paint:function(p1,p2,_137e,mode,_137f){var _1380=_137e?this.style.highlightcolor:this.style.color;var _1381=this.style.width;var _1382=(this.style.dashstyle==="dash")?this.style.dasharray:null;var _1383=1;var _1384=2;if(_137f){}var _1385={color:_1380,width:_1381,dasharray:_1382,dashstyle:this.style.dashstyle,opacity:_1383,join:_1384};var path=builder.util.PaintUtil.getPath(p1,p2,mode);var _1386=path.linePathD;if(this.pathShape&&this.pathShape.rawNode){if(!(dojo.isIE)){this.pathShape.rawNode.setAttribute("d",_1386);this.setPathShapeStyle(this.pathShape,_1385);}else{this.remove();this.pathShape=this.createPathShape(_1386,_1385);}}else{this.pathShape=this.createPathShape(_1386,_1385);}}});});},"builder/workbench/orderView/DependencyLink":function(){define(["dojo/_base/declare","builder/workbench/editor/Link","builder/workbench/orderView/PaintUtil","dojo/_base/lang"],function(_1387,Link,_1388,lang){return _1387("builder.workbench.orderView.DependencyLink",Link,{setSurface:function(_1389){this.surface=_1389;},paint:function(p1,p2,_138a,mode,_138b){var _138c=_138a?this.style.highlightcolor:this.style.color;var _138d=this.style.width;var _138e=(this.style.dashstyle==="dash")?this.style.dasharray:null;var _138f=1;var _1390=2;if(_138b){}var _1391={color:_138c,width:_138d,dasharray:_138e,dashstyle:this.style.dashstyle,opacity:_138f,join:_1390};var _1392={color:_138c,width:_138d,opacity:_138f,join:_1390};var path=_1388.getDependencyLinkPath(p1,p2);var _1393=path.linePathD;var _1394=path.arrowPathD;if(this.pathShape&&this.pathShape.rawNode){if(!(dojo.isIE)){this.pathShape.rawNode.setAttribute("d",_1393);this.arrowPathShape.rawNode.setAttribute("d",_1394);this.setPathShapeStyle(this.pathShape,_1391);this.setPathShapeStyle(this.arrowPathShape,_1392);}else{this.remove();this.pathShape=this.createPathShape(_1393,_1391);this.arrowPathShape=this.createPathShape(_1394,_1392);}}else{this.pathShape=this.createPathShape(_1393,_1391);this.arrowPathShape=this.createPathShape(_1394,_1392);}},createPathShape:function(path,_1395){var _1396=this.surface.createPath(path).setStroke(_1395);if(!(dojo.isIE)){_1396.rawNode.setAttribute("stroke-opacity",_1395.opacity);if(_1395.dasharray&&_1395.dasharray!=0){_1396.rawNode.setAttribute("stroke-dasharray",_1395.dasharray);}_1396.rawNode.setAttribute("style","cursor:pointer;");}else{_1396.rawNode.stroke.opacity=_1395.opacity;_1396.rawNode.stroke.dashstyle=_1395.dashstyle;_1396.rawNode.stroke.miterlimit=_1395.strokeMiterLimit;_1396.rawNode.style.cursor="pointer";}_1396.connect("onmouseover",lang.hitch(this,function(){this.onMouseover(_1396);}));_1396.connect("onmouseout",lang.hitch(this,function(){this.onMouseout(_1396,_1395);}));dojo.connect(_1396.rawNode,"onclick",this,"onclick");dojo.connect(_1396.rawNode,"onunfocus",this,"onunfocus");return _1396;},onunfocus:function(){},onMouseover:function(_1397){_1397.setStroke({width:3,color:"rgb(241, 134, 38)"});},onMouseout:function(_1398,_1399){_1398.setStroke(_1399);},remove:function(){if(this.pathShape){this.pathShape.removeShape();}if(this.arrowPathShape){this.arrowPathShape.removeShape();}this.pathShape=null;this.arrowPathShape=null;}});});},"paas/widgets/JsonRestStoreExt":function(){define(["dojo/_base/declare","dojox/data/ClientFilter","dojox/data/JsonRestStore"],function(_139a,_139b,_139c){return _139a("paas.widgets.JsonRestStoreExt",[_139c],{allowNoTrailingSlash:true,_skipMatchList:["simpleList","withCategory"],matchesQuery:function(item,_139d){if(_139d.query!=null&&_139d.query!=undefined){var query=_139d.query;dojo.forEach(this._skipMatchList,function(field){delete query[field];});}return this.inherited(arguments);},makeComparator:function(sort){var _139e=sort.shift();if(!_139e){return function(){return 0;};}var _139f=_139e.attribute;var _13a0=!!_139e.descending;var next=this.makeComparator(sort);var store=this;return function(a,b){var av=store.getValue(a,_139f);var bv=store.getValue(b,_139f);var ret=store.compare(av,bv,_13a0);if(ret===0){return next(a,b);}return ret;};},compare:function(av,bv,_13a1){if(dojo.isString(av)&&dojo.isString(bv)){av=av.toLowerCase();bv=bv.toLowerCase();}if(av!=bv){return av<bv==_13a1?1:-1;}return 0;},fetch:function(args){this.setClientFetch(args);return this.inherited(arguments);},setClientFetch:function(args){if(args){args.clientFetch=true;}},_doQuery:function(args){args=dojo.mixin({},args);if(args.sort){args.sort=null;}var def=this.inherited(arguments);def.addCallbacks(this["afterFetchResults"]);return def;},afterFetchResults:function(_13a2){},loadItem:function(args){if(args.item===undefined){return undefined;}return this.inherited(arguments);},hasAttribute:function(item,_13a3){return this.inherited(arguments);},_processResults:function(_13a4,_13a5){var _13a6=this.preProcessResults(_13a4,_13a5);return this.inherited(arguments);},preProcessResults:function(_13a7){return _13a7;}});});},"builder/command/RemoveLayerCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/command/RemoveComponentCommand","builder/base/command/CompoundCommand","builder/util/CommandFactoryUtil"],function(_13a8,_13a9,_13aa,_13ab,_13ac){return _13a8("builder.command.RemoveLayerCommand",[_13a9],{container:null,id:null,refID:null,refs:null,enabled:null,layer:null,constructor:function(layer){this.layer=layer;this.id=layer.id;this.refID=layer.referenceID;this.refs=layer.references;this.container=builder.Environment.diagram;this.layerPalette=builder.Environment.layerPalette;},execute:function(){var layer=this.container.getLayerById(this.id);this.enabled=layer.enabled;this.container.removeLayer(layer);this.layerPalette.removeLayerItem(layer);this.compoundCmd=new builder.base.command.CompoundCommand();dojo.forEach(layer.components,dojo.hitch(this,function(_13ad){if(!_13ad.isSubComponent()||_13ad.isAppPolicy()){var cmd=new builder.command.RemoveComponentCommand(_13ad);this.compoundCmd.add(cmd);}else{if(_13ad.isSubComponent()){var _13ae=_13ad.outgoingConnections[0].toComponent;if(_13ae.layer!=_13ad.layer){var cmd=_13ac.getCommmandFactory().getRemovePolicyCommand(_13ad);this.compoundCmd.add(cmd);}}}}));this.compoundCmd.execute();dojo.publish("onDiagramChanged");dojo.publish("/layer/remove",[layer]);},undo:function(){var layer=new builder.workbench.layer.Layer(this.id,this.refID,this.refs);layer.enabled=this.enabled;this.container.addLayer(layer);var item=this.layerPalette.addLayerItem(layer);this.compoundCmd.undo();item.setStatus(this.enabled);dojo.publish("onDiagramChanged");dojo.publish("/layer/add",[layer]);},canExecute:function(){var _13af=this.container.layers;if(_13af.length<=1){dojo.publish("/builder/editor/notification",[["warning","APPMODEL_TOOLING_LAYER_REMOVE"]]);return false;}return true;}});});},"builder/command/ChangeLayerNameCommand":function(){define(["dojo/_base/declare","builder/base/command/Command"],function(_13b0,_13b1){return _13b0("builder.command.ChangeLayerNameCommand",[_13b1],{oldName:null,newName:null,constructor:function(layer,_13b2){this.oldName=layer.id;this.newName=_13b2;this.container=builder.Environment.diagram;this.layerPalette=builder.Environment.layerPalette;},execute:function(){var layer=this.container.getLayerById(this.oldName);this.layerPalette.updateLayerName(layer,this.newName);dojo.publish("onDiagramChanged");dojo.publish("/layer/nameChange",[this.oldName,this.newName]);},undo:function(){var layer=this.container.getLayerById(this.newName);this.layerPalette.updateLayerName(layer,this.oldName);dojo.publish("onDiagramChanged");dojo.publish("/layer/nameChange",[this.newName,this.oldName]);},canExecute:function(){if(this.oldName===this.newName){return false;}return true;}});});},"builder/command/ChangeComponentNameCommand":function(){define(["dojo/_base/declare","builder/base/command/Command"],function(_13b3,_13b4){return _13b3("builder.command.ChangeComponentNameCommand",[_13b4],{oldName:null,newName:null,constructor:function(id,_13b5){this.oldName=id;this.newName=_13b5;},execute:function(){var model=builder.Environment.diagram.getComponentById(this.oldName);if(!model){return;}if(model.propertiesWidget){model.propertiesWidget.setName&&model.propertiesWidget.setName(this.newName);}model.setName(this.newName);model.updateConnectionName();dojo.publish("onDiagramChanged");},undo:function(){var model=builder.Environment.diagram.getComponentById(this.newName);if(!model){return;}if(model.propertiesWidget){model.propertiesWidget.setName&&model.propertiesWidget.setName(this.oldName);}model.setName(this.oldName);model.updateConnectionName();dojo.publish("onDiagramChanged");},canExecute:function(){if(this.oldName===this.newName){return false;}return true;}});});},"paas/widgets/PropertyWidget":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","builder/workbench/property/PropertyWidget","builder/workbench/property/FileSelectWidgetBase","paas/widgets/FileInputExt"],function(_13b6,_13b7,_13b8,_13b9,_13ba){return _13b6("paas.widgets.PropertyWidget",[_13b8],{lineMode:"one-line",_createValueWidget:function(type,value){if(!this.metadata.type){this.valueWidget=new _13b7({"class":"propertyView_value","name":this.metadata.id},this.valueNode);this.setPropertyValue(value);}else{if(this.metadata.type==="file"){if(this.supportRemoteFile===true){this.valueWidget=new _13b9({"baseClass":"propertyView_value",scannable:false,fileExtensions:this.metadata["extensions"],model:this.model,metadata:this.metadata,"name":this.metadata.id},this.valueNode);}else{this.valueWidget=new _13ba({"class":"propertyView_value","type":"file","name":this.metadata.id,"invalidMessage":this.metadata.invalidMessage,"promptMessage":this.metadata.promptMessage,fileExtensions:this.metadata["extensions"]},this.valueNode);}this.setPropertyValue(value);}else{this.inherited(arguments);}}},addToFileInputList:function(list){if(this.metadata.type==="file"){list.push(this.valueWidget.fileInput);}},validatePropertyChange:function(){var _13bb=this.properties[this.propertyId];var _13bc=this.getPropertyValue();if(!this.isInputValid(_13bc,_13bb)){if(this.metadata.type=="file"){this.setPropertyValue(this.initValue);this.properties[this.propertyId]=this.initValue;}else{this.setPropertyValue(_13bb);}return false;}if(this._isValueEqual(_13bb,_13bc)){return false;}return true;},onPropertyChange:function(){var valid=this.validatePropertyChange();if(valid){var _13bd=this.getPropertyValue();this.properties[this.propertyId]=_13bd;this.setPropertyValue(_13bd);if(this.isEmpty(_13bd)){delete this.properties[this.propertyId];}}},showRequired:function(){if(this.metadata.id=="name"&&this.metadata.required){this.requiredMark.className="requireShow";}}});});},"builder/vsys/util/VSysComponentFactory":function(){define(["dojo/_base/lang","builder/vsys/util/VSysUtil","paas/common/constants","builder/util/Util","paas/common/SolutionUtil","builder/command/AddComponentCommand","builder/command/AddConnectionCommand","builder/base/command/CompoundCommand","dojo/_base/array","builder/util/CommandFactoryUtil","dojo/topic","builder/util/ValidationUtil","builder/vsys/command/AddImageCommand"],function(lang,_13be,_13bf,Util,_13c0,_13c1,_13c2,_13c3,array,_13c4,topic,_13c5,_13c6){var _13c7=lang.getObject("builder",true);var _13c8=lang.getObject("vsys.util.VSysComponentFactory",true,_13c7);_13c8=_13c7.vsys.util.VSysComponentFactory={create:function(_13c9,_13ca,_13cb){if(_13ca&&_13ca.isClosedVM&&_13ca.isClosedVM()){topic.publish("/builder/editor/notification",["warning","APPMODEL_TOOLING_CLOSEDVM_VALIDATION"]);return;}var _13cc=this._getComponentMetadata(_13c9);var type=_13cc.id;if(Util.isSubComponent(_13cc)){if(_13ca){var _13cd=_13c5.checkSubComponentCapability(_13cc,_13ca);if(!_13cd.match){topic.publish("/builder/editor/notification",["warning","APPMODEL_TOOLING_CAPABILITY_VALIDATION",_13cd.reqKeys]);return;}}var _13ce=new _13c3();if(_13ca==null&&_13be.isPartComponent(_13cc)){_13ca=this._createImageContainer(_13cc,_13cb,_13ce);}if(_13ca==null){dojo.publish("/builder/editor/notification",[["warning","APPMODEL_TOOLING_SUBCOMPONENT_CANNOT_ADD"]]);return;}this._createSubComponent(_13cc,_13ca,_13ce);_13c7.Environment.commandStack.executeCommand(_13ce);dojo.publish("onDiagramChanged",null);return;}this._createImage(type,_13cb);},_createSubComponent:function(_13cf,_13d0,_13d1){var type=_13cf.id;var _13d2=_13d1.addAndExecute(_13c4.getCommmandFactory().getAddPolicyCommand({type:type},_13d0));},_getComponentMetadata:function(_13d3){var type=_13d3.type;if(_13d3["abstract"]===true){var _13d4=_13be.getLatestChildComponent(_13d3.type);if(_13d4!=null){return _13d4;}}return Util.getMetadataService().getComponentMetadata(type);},_getDefaultImageMetadata:function(_13d5){var _13d6=_13c0.getDefaultImage();var _13d7=_13be.getJsonObjectByPath(_13d5,"capabilities","requires","hypervisorType");var _13d8=null;for(var i=0;i<_13d6.length;i++){if(_13d6[i].virtual_image==null){continue;}if(_13d7==null||_13d6[i].hypervisor_type===_13d7){_13d8=_13d6[i].virtual_image;break;}}return _13be.findComponentByImageId(_13d8);},_createImageContainer:function(_13d9,_13da,_13db){var _13dc=this._getDefaultImageMetadata(_13d9);if(_13dc==null){return;}var _13dd=new _13c1({"type":_13dc.id},_13da);return _13db.addAndExecute(_13dd);},_createImage:function(type,_13de){var cmd=new _13c6({"type":type},_13de);_13c7.Environment.commandStack.executeCommand(cmd);}};return _13c8;});},"builder/workbench/property/ReferencePropertiesWidget":function(){define(["dojo/_base/declare","builder/workbench/property/PropertiesWidget","builder/workbench/property/ReferencePropertyWidget","builder/util/Util","builder/vsys/util/VSysUtil"],function(_13df,_13e0,_13e1,util,_13e2){return _13df("builder.workbench.property.ReferencePropertiesWidget",[_13e0],{constructor:function(args){if(util.patternTypeIsVSys()||(args["model"].metadata["extends"]=="VSYSPATTERNCOMPONENT"||args["model"].metadata["extends"]=="PATTERNCOMPONENT")){this.DEFAULT_PROPERTY_WIDGET_NAME="builder.workbench.property.ReferencePropertyWidget";if(_13e2.isPolicy(args["model"].metadata)||_13e2.isAddon(args["model"].metadata)){this.DEFAULT_PROPERTY_WIDGET_NAME="builder.workbench.property.PropertyWidget";}}}});});},"builder/util/FileUploadManager":function(){define(["dojo/_base/lang","builder/util/Util","builder/util/array"],function(lang,_13e3,_13e4){var _13e5=lang.getObject("builder",true);var _13e6=lang.getObject("util.FileUploadManager",true,_13e5);_13e6=_13e5.util.FileUploadManager=new function(_13e7){this.fileUploadingCount=0;this.uploadingFiles=[];this.incUploadingCount=function(_13e8){this.fileUploadingCount++;if(_13e8){this.uploadingFiles.push(_13e8);}};this.decUploadingCount=function(_13e9){this.fileUploadingCount--;if(_13e9){_13e5.util.array.remove(this.uploadingFiles,_13e9);}else{this.uploadingFiles.splice(0,1);}};this.hasFileUploading=function(){return this.uploadingFiles.length!=0;};this.isFileExist=function(file){if(_13e5.util.array.contains(this.uploadingFiles,file)){return true;}var _13ea=_13e5.Environment.diagram.components;for(var i in _13ea){var _13eb=_13ea[i].propertyMetadata;for(var j in _13eb){if("file"!==_13eb[j].type){continue;}var _13ec=_13ea[i].properties[_13eb[j].id];if(_13ec===file&&file!=this.sentFile){return true;}}}return false;};this.getUniqueFileName=function(file){if(!file){return;}var index=1;var _13ed=file;var _13ee=file.lastIndexOf("/")+1;var path=file.substring(0,_13ee);var _13ef=file.substring(_13ee);while(this.isFileExist(_13ed)){_13ed=path+index+"_"+_13ef;index++;}return _13ed;};};return _13e6;});},"builder/workbench/property/ReferencePropertyWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ReferencePropertyWidget.html","builder/workbench/property/PropertyWidget","builder/workbench/property/AddReferenceDialog","dojo/string","builder/vsys/util/VSysUtil","paas/common/constants","builder/command/RemoveConnectionCommand","dojo/_base/array","dojo/_base/lang","builder/command/ChangePropertyCommand","builder/vsys/util/VSysValidationUtil","dojo/dom-style"],function(_13f0,_13f1,_13f2,_13f3,_13f4,_13f5,_13f6,_13f7,_13f8,_13f9,_13fa,array,lang,_13fb,_13fc,_13fd){return _13f0("builder.workbench.property.ReferencePropertyWidget",[_13f5],{templateString:_13f4,deleteLinkOnRemoveReference:true,constructor:function(){this.addReference_alt="Add reference";this.removeReference_alt="Remove reference";this.deleteLinkOnRemoveReference=true;},postCreate:function(){this.inherited(arguments);this.connect(this.addReferenceNode,"onclick","addReference");},setDeleteLinkOnRemoveReference:function(flag){this.deleteLinkOnRemoveReference=flag;},addReference:function(){var self=this;if(this.addReferenceDialog==null){this.addReferenceDialog=new _13f6({fromComponent:this.model,refLabel:self.metadata.label});var self=this;this.connect(this.addReferenceDialog.dialog,"onConfirm",function(){if(this.referenceValueIsNotValid()){return;}var _13fe=new _13fb(self.model,self.propertyId,self.getPropertyValue(),self.addReferenceDialog.getReferenceValue());builder.Environment.commandStack.executeCommand(_13fe);self.postAddReference();});}this.addReferenceDialog.show(this.metadata.label,this.referenceTextBox.get("value"));},postAddReference:function(){dojo.publish("/builder/lockChange",[[this.model.id,true,this.propertyId]]);dojo.publish("/builder/refreshLockStatus",[[this.propertyId]]);this.setLocked(true,false);this.lockImgNode.src="/tooling/images/locked_disabled.png";this.lockDisabled=true;},showIcons:function(){var self=this;self.inherited(arguments);if(this.disableEditing||this.model.readOnly){return;}if(this.model&&this.model.isReferenced()){return;}if(this.referenceTextBox&&this.referenceTextBox.get("value")&&this._isReferenceValue(this.referenceTextBox.get("value"))){dojo.style(this.removeReferenceNode,"display","");}else{dojo.style(this.addReferenceNode,"display","");}},hideIcons:function(){this.inherited(arguments);dojo.style(this.addReferenceNode,"display","none");dojo.style(this.removeReferenceNode,"display","none");},referenceValueIsNotValid:function(){return !this.addReferenceDialog.valueIsValid||!this.addReferenceDialog.getReferenceValue()||(typeof this.addReferenceDialog.getReferenceValue()=="string"&&_13f7.trim(this.addReferenceDialog.getReferenceValue())=="");},createConnectionsIfNeeded:function(value){var _13ff={};var self=this;if(value.indexOf("${")>-1){dojo.forEach(builder.Environment.diagram.components,function(comp){if(value.indexOf("${"+comp.id+".")>-1){_13ff[comp.id]=comp;}});}for(key in _13ff){self.createSingleConnectionIfNeeded(key);}},createSingleConnectionIfNeeded:function(_1400){var self=this;var _1401=false;dojo.forEach(builder.Environment.diagram.connections,function(conn){if(conn.metadata.id==paas.common.constants.DATA_DEPENDS_LINK&&conn.fromComponent.id==self.model.id&&conn.toComponent.id==_1400){conn.implyOrder=true;_1401=true;}});if(!_1401){var _1402=builder.Environment.diagram.getComponentById(_1400);var args={source:self.model,target:_1402,type:paas.common.constants.DATA_DEPENDS_LINK};var _1403=builder.Environment.diagram.addConnectionByType(args);_1403.showWidget();}},removeReference:function(){var _1404=new _13fb(this.model,this.propertyId,this.getPropertyValue(),this.oldReferenceValue);builder.Environment.commandStack.executeCommand(_1404);this.lockDisabled=false;},deleteLinkIfAny:function(_1405){var _1406={};var self=this;dojo.forEach(builder.Environment.diagram.components,function(comp){if(comp.id===_1405){_1406[comp.id]=comp;}});for(var key in _1406){dojo.forEach(self.model.metadata.attributes,function(attr){if(self.propertyId!=attr.id){var _1407=self.model.properties[attr.id];if(dojo.isString(_1407)&&_13f8.containsNodeId(_1407,key)){dojo.forEach(builder.Environment.diagram.components,function(comp){if(_13f8.containsNodeId(_1407,comp.id)){delete _1406[comp.id];}});}}});}for(var key in _1406){dojo.forEach(builder.Environment.diagram.connections,function(conn){if(conn&&conn.metadata.id==paas.common.constants.DATA_DEPENDS_LINK&&conn.fromComponent.id==self.model.id&&conn.toComponent.id==key){var cmd=new builder.command.RemoveConnectionCommand(conn);cmd.execute();}});}},setReferenceValue:function(value){this.referenceTextBox.set("value",value);this.isReferenceNode=true;this.showReferenceNode();},uninitialized:function(){if(this.addReferenceDialog){this.addReferenceDialog.destroyRecursive&&this.addReferenceDialog.destroyRecursive();}},showReferenceNode:function(){dojo.style(this.referenceTextBox.domNode,"display","");dojo.style(this.valueWidget.domNode,"display","none");},hideReferenceNode:function(){dojo.style(this.referenceTextBox.domNode,"display","none");dojo.style(this.valueWidget.domNode,"display","");dojo.style(this.removeReferenceNode,"display","none");},getPropertyValue:function(){if(this.isReferenceNode){return this.referenceTextBox.get("value");}return this.inherited(arguments);},setPropertyValue:function(value){if(this._isReferenceValue(value)){if(this._isDataDependsOnValueValid(value)){this.oldReferenceValue=this.getPropertyValue();this.setReferenceValue(value);}else{this.model.properties[this.propertyId]=this.getPropertyValue();}}else{this.oldReferenceValue=this.getPropertyValue();this.isReferenceNode=false;this.referenceTextBox.set("value","");this.hideReferenceNode();this._onReferenceValueChange();this.inherited(arguments);}},beforeSetPropertyValue:function(){this.oldReferenceValue=this.getPropertyValue();},_isDataDependsOnValueValid:function(value){var _1408=_13f8.getDataDependsOnComponentIDs(value);if(_1408){for(var i=0;i<_1408.length;i++){if(!_13fc.checkDataDependsOnValid(this.model,this.model.diagram.getComponentById(_1408[i]))){return false;}}}return true;},isInputValid:function(_1409,_140a){if(this.isReferenceNode){return true;}if(this._isReferenceValue(_1409)||this._isReferenceValue(_140a)){return true;}return this.inherited(arguments);},_isReferenceValue:function(value){if(dojo.isString(value)&&value.indexOf("$")>-1){return true;}return false;},_onReferenceValueChange:function(){var _140b=this._findOldCompIdsNeedRemoved();var _140c=this._findNewCompIdsNeedAdded();array.forEach(_140b,lang.hitch(this,this._removeDataDependencyConnection));array.forEach(_140c,lang.hitch(this,this._addDataDependencyConnection));this._updatePatternAttrReferences();},_addDataDependencyConnection:function(_140d){this.createSingleConnectionIfNeeded(_140d);},_removeDataDependencyConnection:function(_140e){this.deleteLinkIfAny(_140e);},_updatePatternAttrReferences:function(){var value=this.getPropertyValue();if((this.oldReferenceValue&&dojo.isString(this.oldReferenceValue)&&(this.oldReferenceValue.indexOf("${pattern.")>-1))||(value&&dojo.isString(value)&&(value.indexOf("${pattern.")>-1))){dojo.publish("onPatternAttributeReferenceChanged");}},_findOldCompIdsNeedRemoved:function(){var _140f=_13f8.getDataDependsOnComponentIDs(this.oldReferenceValue)||[];var _1410=_13f8.getDataDependsOnComponentIDs(this.getPropertyValue())||[];var _1411=[];for(var i=0;i<_140f.length;i++){var _1412=false;for(var j=0;j<_1410.length;j++){if(_140f[i]===_1410[j]){_1412=true;break;}}if(!_1412){_1411.push(_140f[i]);}}return _1411;},_findNewCompIdsNeedAdded:function(){var _1413=_13f8.getDataDependsOnComponentIDs(this.oldReferenceValue)||[];var _1414=_13f8.getDataDependsOnComponentIDs(this.getPropertyValue())||[];for(var i=0;i<_1414.length;i++){var _1415=false;for(var j=0;j<_1413.length;j++){if(_1414[i]===_1413[j]){_1415=true;break;}}if(!_1415){newCompIdsNeedAdded=true;}}return _1414;},isEmpty:function(value){if(_13f8.isDataDependsOnValue(value)){return false;}if(value==undefined||(dojo.isString(value)&&value=="")||(this.metadata.type=="number"&&isNaN(value))){return true;}return false;},disableReferenceEditing:function(){this.disableEditing=true;_13fd.set(this.removeReferenceNode,"display","none");_13fd.set(this.lockArea,"display","none");},enableReferenceEditing:function(){this.disableEditing=false;_13fd.set(this.removeReferenceNode,"display","");_13fd.set(this.lockArea,"display","");}});});},"builder/workbench/componentsView/ComponentPatternType":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ComponentPatternType.html"],function(_1416,_1417,_1418,_1419,_141a){return _1416("builder.workbench.componentsView.ComponentPatternType",[_1417,_1418,_1419],{templateString:_141a,widgetsInTemplate:true,appModel:null,patternTypes:null,postCreate:function(){var _141b=this.nameColumn.insertRow(0);this.typeItem=new builder.workbench.componentsView.ComponentItem({metadata:{id:"type",label:builder.Environment.messages.BUILDER_CLEDITOR_TYPE,type:"string",displayType:"list",options:this.patternTypes},properties:{type:""},labelWidth:"60px",model:this.appModel},_141b);var _141c=this.deleteColumn.insertRow(0);var _141d=document.createElement("img");_141d.src="/tooling/images/close_normal.png";_141d.style.cursor="pointer";_141c.appendChild(_141d);this.deleteHandle=dojo.connect(_141d,"onclick",dojo.hitch(this,"deleteItem"));},deleteItem:function(){},destroy:function(){dojo.disconnect(this.deleteHandle);if(this.nameItem!=null){this.nameItem.destroyRecursive();}this.inherited(arguments);},getPatternType:function(){var _141e={};_141e.type=this.typeItem.getPropertyValue();return _141e;}});});},"builder/Environment":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(_141f,lang){var _1420=lang.getObject("builder",true);_1420.Environment=_141f("builder.Environment",[],{commandStack:null,diagram:null,editorArea:null,modelService:null,messageBox:null,propertyView:null,layerPalette:null,toolbarManager:null,help:null,messages:null,categories:null});_1420.Environment.messages=paas.Base.messages;_1420.Environment.categories=paas.Base.categaries;_1420.Environment.onModelValidated=function(){_1420.Environment.diagram.checkValidation();};_1420.Environment.onModelLoadSuccess=function(){_1420.Environment.isModelLoadSuccess=true;};return _1420.Environment;});},"builder/vsys/workbench/editor/VSysComponentFrame":function(){define(["dojo/_base/declare","builder/workbench/editor/ComponentFrame","builder/vsys/util/VSysComponentFactory","builder/vsys/command/RemoveImageCommand"],function(_1421,_1422,_1423,_1424){return _1421("builder.vsys.workbench.editor.VSysComponentFrame",[_1422],{_setDndTarget:function(){this.inherited(arguments);if(this.component.metadata.supportContainment){this.containerDropTarget=new builder.base.dnd.DropTarget(this.domNode,["SubComponent"],dojo.hitch(this,"addSubComponent"));}},onShowAddons:function(evt){if(evt){dojo.stopEvent(evt);}this.showPolicies(this.calculateShowPosition(),constants.ADDON);},addSubComponent:function(_1425){_1423.create(_1425.params,this.component);},unRegisterDropTarget:function(){this.inherited(arguments);if(this.containerDropTarget){this.containerDropTarget.unregister();}this.containerDropTarget=null;},onDelete:function(evt){dojo.stopEvent(evt);var cmd=new _1424(this.component);builder.Environment.commandStack.executeCommand(cmd);}});});},"builder/workbench/orderView/OrderConnectionCommandMixin":function(){define(["dojo/_base/declare","builder/workbench/orderView/OrderConnection","builder/workbench/orderView/DependencyConnectionCommandMixin"],function(_1426,_1427,_1428){return _1426("builder.workbench.orderView.OrderConnectionCommandMixin",_1428,{_addDependencyConnection:function(){if(!this.connection){var args={source:this.fromComponent,target:this.toComponent};this.connection=new _1427(args);}this.connection.paint();this.connection.addOrderingDependency();builder.Environment.orderView.addDependencyConnection(this.connection);},_removeDependencyConnection:function(){this.fromOrderFrame.removeFlowOutConnection(this.connection);this.toOrderFrame.removeFlowInConnection(this.connection);builder.Environment.orderView.deleteDependencyConnection(this.connection);this.connection.remove();this.connection.removeOrderingDependency();}});});},"builder/workbench/property/ConnectionPropertiesWidget":function(){define(["dojo/_base/declare","builder/workbench/property/PropertiesWidget"],function(_1429,_142a){return _1429("builder.workbench.property.ConnectionPropertiesWidget",[_142a],{isLockVisible:true,supportRemoteFile:true,createTitleWidget:function(){this.titleImageNode.src="/tooling/images/cloud/link_pal_24.gif";var _142b=builder.util.Util.splitName(this.model.fromComponent.metadata.label);var _142c=builder.util.Util.splitName(this.model.toComponent.metadata.label);this.titleNameNode.innerHTML="<span class='boldFont'>"+_142b.shortName+"</span>&nbsp;<img src='/tooling/images/cloud/arrow.gif' style='vertical-align:middle'"+" alt="+builder.Environment.messages.CONNECTION_TARGET_ALT+" />"+" &nbsp;<span class='boldFont'>"+_142c.shortName+"</span>";},createNameWidget:function(){this.nameNode.style.display="";var _142d=this.model.fromComponent;var _142e=this.model.toComponent;var _142f=_142d.id;if(_142d.layer&&_142d.layer.isReferenced()){_142f=builder.util.Util.getReferModelName(_142f,_142d.layer.id);}var toId=_142e.id;if(_142e.layer&&_142e.layer.isReferenced()){toId=builder.util.Util.getReferModelName(toId,_142e.layer.id);}this.nameNode.innerHTML="<span class='boldFont'>"+_142f+"</span>&nbsp;<img src='/tooling/images/cloud/arrow.gif' style='vertical-align:middle'/>"+" &nbsp;<span class='boldFont'>"+toId+"</span>";},postCreate:function(){this.inherited(arguments);this.hideReferencePropertyWidgets();},hideReferencePropertyWidgets:function(){for(var _1430 in this.propsMap){var _1431=this.propsMap[_1430];if(this._isReferencePropertyWidget(_1431)){if(!_1431.metadata.options||_1431.metadata.options.length==0){dojo.style(_1431.domNode,"display","none");}}}},changePropertyWidgets:function(_1432){for(var _1433 in this.propsMap){if(!_1432||!builder.util.array.contains(_1432,_1433)){var _1434=this.propsMap[_1433];if(this._isReferencePropertyWidget(_1434)){if(_1434.metadata.options&&_1434.metadata.options.length>0){dojo.style(_1434.domNode,"display","");}_1434.changeValueWidget();}}}},_isReferencePropertyWidget:function(_1435){return _1435&&_1435.metadata&&_1435.metadata.referenceType;}});});},"paas/widgets/MappingDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/MappingDialog.html","paas/widgets/MappingWidget","paas/widgets/Dialog","dojo/store/Memory","builder/util/Util","builder/command/ChangePropertyCommand","builder/base/command/CompoundCommand","builder/util/FileUtil","dojo/_base/array"],function(_1436,_1437,_1438,_1439,_143a,_143b,_143c,_143d,util,_143e,_143f,_1440,array){return _1436("paas.widgets.MappingDialog",[_1437,_1438,_1439],{templateString:_143a,widgetsInTemplate:true,connection:null,mappings:null,origMappings:null,tbody:null,showWarning:false,fromConfigure:false,subscribes:null,fromComponent:null,toComponent:null,constructor:function(){this.app_deploy_dialog_title=paas.Base.messages.CONFIGURE_DATA_DEPENDENCY;this.app_deploy_dialog_description="<hr/>"+paas.Base.messages.CONFIGURE_DATA_DEPENDENCY_SUBTITLE;this.mapping_sub=builder.Environment.messages.MAPPING_SUBTITLE;this.app_deploy_dialog_OK_button=paas.Base.messages.APP_DEPLOY_DIALOG_OK_BUTTON;this.app_deploy_dialog_cancel_button=paas.Base.messages.APP_DEPLOY_DIALOG_CANCEL_BUTTON;this.sourcePH=paas.Base.messages.MAPPING_SOURCE;this.targetPH=paas.Base.messages.MAPPING_TARGET;this.mapping_button=builder.Environment.messages.MAPPING_ADDBUTTON;this.mappings={};this.origMappings={};},postCreate:function(){this.theDialog.onConfirm=dojo.hitch(this,"confirm");this.theDialog.onCancel=dojo.hitch(this,this.cancelDialog);dojo.style(this.theDialog.descriptionNode,{"color":"#666666","font-size":"10px"});dojo.style(this.theDialog.confirmText,{"background-color":"#F4F4F4"});dojo.style(this.theDialog.containerNode,{"maxHeight":"500px","overflowY":"auto","overflowX":"hidden"});dojo.style(this.theDialog.messageWidget.domNode,"top","20px");},showDialog:function(conn){this.connection=conn;this.showDialogWithComps(conn.toComponent,conn.fromComponent);},showDialogWithComps:function(_1441,_1442){this.toComponent=_1441;this.fromComponent=_1442;this.showPossibleMappings(_1441,_1442);this.theDialog.show();},confirm:function(){this.updateModel();if(this.connection&&this.connection.propertiesWidget){this.connection.updateMappingWidget();}this.uninitialize();},cancelDialog:function(){this.uninitialize();},showPossibleMappings:function(_1443,_1444){var self=this;this.possibleMappingsFromComp.innerHTML=_1444.id;this.possibleMappingsToComp.innerHTML=_1443.id;this.fromCompTitleImageNode.src=builder.util.FileUtil.getComponentFigurePath(_1444.metadata.thumbnail);this.toCompTitleImageNode.src=builder.util.FileUtil.getComponentFigurePath(_1443.metadata.thumbnail);if(_1444.metadata.attributes&&_1443.metadata.outputs){self.populateAllTargetAttr(this.getEnabledAttributes(_1444),_1443.metadata.outputs);dojo.forEach(this.getEnabledAttributes(_1444),function(attr){var _1445=self.matches(_1444,_1443,attr.id,attr.type,attr.matchingKey||attr.id);if(_1445){self.createMapEntry(attr.id,attr.label,_1445,self.getLabelsForIDs(_1443.metadata.attributes,_1445));self.selectSourceAttr.store.remove(attr.id);self.selectSourceAttr.reset();}});this.addButton.set("label",this.mapping_button);}},matches:function(_1446,_1447,id,type,_1448){var self=this;var _1449=null;if(_1446.properties[id]){dojo.forEach(_1447.metadata.outputs,function(_144a){if(util.stringContainContent(_1446.properties[id],"${"+_1447.id+"."+_144a.id+"}")){if(_1449==null){_1449=_144a.id;}else{_1449+=", "+_144a.id;}self.origMappings[id]=_1449;}});if(_1449!=null){return _1449;}}if(!this.fromConfigure){dojo.forEach(_1447.metadata.outputs,function(_144b){if(_1448===_144b.id&&type===_144b.type){_1449=_144b.id;}});}return _1449;},getLabelsForIDs:function(attrs,ids){var _144c="";var self=this;var list=ids.split(",");dojo.forEach(list,function(id){if(_144c==""){_144c=self.getLabelForID(attrs,id);}else{_144c+=", "+self.getLabelForID(attrs,id);}});return _144c;},getLabelForID:function(attrs,id){var _144d=id;dojo.forEach(attrs,function(attr){if(attr.id==id&&attr.label){_144d=attr.label;}});return _144d;},createMapEntry:function(_144e,_144f,_1450,_1451){var self=this;var tr=this.possibleMappingsDiv.insertRow(0);tr.style.height="30px";tr.style.outline="thin solid";tr.style.outlineColor="#C9C9C9";var td0=dojo.create("td",{"style":"width: 35%;"},tr);td0.innerHTML=_144f;var td1=dojo.create("td",{"style":"width: 10%"},tr);td1.style.textAlign="center";td1.innerHTML="<img src='/images/patterncomponent/pc-arrow-sharp.png'/>";var td2=dojo.create("td",{"style":"width: 35%;"},tr);td2.innerHTML=_1451;var td3=dojo.create("td",{"style":"width: 20%;text-align: center;"},tr);var _1452=dojo.create("div",{title:builder.Environment.messages.REMOVE_DEPRECATED},td3);_1452.innerHTML="<img src='/images/delete.gif' width='16px' height='16px' />";dojo.connect(_1452,"onclick",dojo.hitch(this,function(){var _1453={};_1453.id=_144e;_1453.name=_144f;_1453.displayedValue=_144f;self.selectSourceAttr.store.put(_1453);dojo.destroy(tr);delete self.mappings[_144e];}));self.mappings[_144e]=_1450;},addEntry:function(){var self=this;if(this.fromComponent.properties[self.selectSourceAttr.get("value")]){this.showWarning=true;}if(self.selectSourceAttr.get("value")&&self.selectTargetAttr.get("value")){self.createMapEntry(self.selectSourceAttr.get("value"),self.selectSourceAttr.get("displayedValue"),self.selectTargetAttr.get("value"),self.selectTargetAttr.get("displayedValue"));self.selectSourceAttr.store.remove(self.selectSourceAttr.get("value"));self.selectSourceAttr.reset();self.selectTargetAttr.reset();}},updateModel:function(){var _1454=new _143f();var self=this;for(key in self.mappings){if(!self.origMappings[key]||self.mappings[key]!=self.origMappings[key]){var _1455="${"+self.toComponent.id+"."+self.mappings[key]+"}";var _1456=new _143e(this.fromComponent,key,this.fromComponent.properties[key],_1455);_1454.add(_1456);}}for(key in self.origMappings){if(!self.mappings[key]){var _1457=self.fromComponent.properties[key];var _1458=_1457;if(_1457&&_1457.indexOf("${"+self.toComponent.id+".")>=0){var _1459=new RegExp("\\${"+self.toComponent.id+"..[^}]*}","g");_1458=_1457.replace(_1459,"");var _145a=new _143e(this.fromComponent,key,_1457,_1458);_1454.add(_145a);}}}builder.Environment.commandStack.executeCommand(_1454);},populateAllTargetAttr:function(_145b,_145c){var self=this;var _145d=[];dojo.forEach(_145b,function(attr){var _145e={};_145e.id=attr.id;if(attr.label){_145e.name=attr.label;}else{_145e.name=attr.id;}if(attr.displayType!="hidden"){_145d.push(_145e);}});var _145f=new _143d({data:_145d});self.selectSourceAttr.set("store",_145f);var _1460=[];dojo.forEach(_145c,function(attr){var _1461={};_1461.id=attr.id;if(attr.label){_1461.name=attr.label;}else{_1461.name=attr.id;}if(attr.displayType!="hidden"){_1460.push(_1461);}});var _1462=new _143d({data:_1460});self.selectTargetAttr.set("store",_1462);},getEnabledAttributes:function(_1463){var _1464={};var _1465={};array.forEach(_1463.metadata.groups,function(group){array.forEach(group.attributes,function(attr){if(_1463.groups[group.id]){_1464[attr]=true;}else{_1465[attr]=true;}});});var _1466=[];array.forEach(_1463.metadata.attributes,function(attr){if(!(_1465[attr.id]&&!_1464[attr.id])){_1466.push(attr);}});return _1466;},uninitialize:function(){this.theDialog.hide();this.theDialog.destroy();}});});},"builder/workbench/editor/ModelToolbar":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ModelToolbar.html"],function(_1467,_1468,_1469,_146a,_146b){return _1467("builder.workbench.editor.ModelToolbar",[_1468,_1469,_146a],{templateString:_146b,onDelete:null,items:null,hasToolbarItems:false,postCreate:function(){this.items=[];dojo.connect(this.focusNode,"onkeypress",this,function(e){if(e.keyCode===dojo.keys.DELETE){this.onDelete(e);}dojo.stopEvent(e);});},addItem:function(item){if(!this.hasToolbarItems){this.toolbarTop.style.display="";this.toolbarBottom.style.display="";this.hasToolbarItems=true;}dojo.addClass(item.domNode,"toolbar_middle");this.domNode.insertBefore(item.domNode,this.toolbarBottom);this.items.push(item);},setUnchangable:function(){var _146c=false;dojo.forEach(this.items,function(item){if(!(item.isReadOnly)){item.setUnchangable();dojo.addClass(item.domNode,"unchangable");}else{_146c=true;}});if(!_146c){this.toolbarTop.style.display="none";this.toolbarBottom.style.display="none";}}});});},"builder/workbench/property/PolicyPropertiesWidget":function(){define(["dojo/_base/declare","builder/workbench/property/TitlePaneExt","builder/workbench/property/ComponentPropertiesWidget"],function(_146d,_146e,_146f){return _146d("builder.workbench.property.PolicyPropertiesWidget",[_146e],{realPropWidget:null,model:null,open:false,postCreate:function(){this.inherited(arguments);dojo.addClass(this.domNode,"propertyPanel");this.realPropWidget=new _146f({model:this.model,displayName:false,isTemplate:this.isTemplate});this.realPropWidget.set("title",this.model.id);this.titleNode.appendChild(this.realPropWidget.titleNode);dojo.style(this.realPropWidget.titleImageNode,{height:"23px",width:"23px"});dojo.style(this.realPropWidget.titleNode,"border","0px");dojo.style(this.realPropWidget.titleNode,"backgroundColor","transparent");dojo.style(this.realPropWidget.titleNode,"padding","0px");this.containerNode.appendChild(this.realPropWidget.tc);dojo.style(this.containerNode,"padding","0px");dojo.style(this.hideNode,"border","0px");this.set("open",this.open);},show:function(){dojo.style(this.domNode,"display","block");},hide:function(){dojo.style(this.domNode,"display","none");},update:function(){this.realPropWidget.update();},updatePropertyWidget:function(_1470,value){this.realPropWidget.updatePropertyWidget(_1470,value);},stopFileUploading:function(){this.realPropWidget.stopFileUploading();},setChangeable:function(){this.realPropWidget.setChangeable();},setUnchangable:function(){this.realPropWidget.setUnchangable();},set:function(name,value){if(name==="disabled"){this.realPropWidget.set(name,value);}this.inherited(arguments);},setName:function(name){this.realPropWidget.set("title",name);},uninitialize:function(){this.realPropWidget.uninitialize();},focus:function(){this.titleBarNode.focus();}});});},"builder/workbench/PolicyWidget":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/PolicyWidget.html","builder/workbench/PolicyItem","builder/util/Util","builder/util/CapabilityUtil","builder/util/CommandFactoryUtil","builder/vsys/util/VSysUtil"],function(_1471,_1472,_1473,_1474,_1475,_1476,Util,_1477,_1478,_1479){return _1471("builder.workbench.PolicyWidget",[_1472,_1473,_1474],{templateString:_1475,currentLayer:null,component:null,noPolicy:true,constructor:function(){this.AVILABLE_POLICIES_TITLE=builder.Environment.messages.APPMODEL_TOOLING_AVILABLE_POLICIES_TITLE;},postCreate:function(){this.createItems();if(this.noPolicy){var div=dojo.doc.createElement("div");div.innerHTML=this.getNoPolicyMessage();dojo.addClass(div,"noPolicy");this.domNode.appendChild(div);}dojo.connect(this.domNode,"onmouseout",this,function(e){if(!this.rect){this.rect=builder.util.Util.coords(this.domNode);}var point={x:0,y:0};point.x=e.pageX||e.x;point.y=e.pageY||e.y;if(!builder.util.Util.isPointInRect(point,this.rect)){this.destroyRecursive();}});},_checkPolicyIsValid:function(_147a){if(_147a.applicationPolicy){return false;}if(!this.component._checkPolicyIsValid(_147a)){return false;}if(!this._checkRequirements(_147a)){return false;}return this.checkPolicyExtension(_147a);},_checkRequirements:function(_147b){var _147c=_1479.getJsonObjectByPath(_147b,"capabilities","requires");if(_147c==null){return true;}var _147d=_1477.matches(this.component.getCombinedProvides(),_147c);return (_147d==null);},createItems:function(){this.buttons=[];var self=this;var _147e=builder.util.Util.getMetadataService().getComponentPoliciesByType(this.component.metadata.id);for(var i=0;i<_147e.length;i++){var _147f=_147e[i];if(!this._checkPolicyIsValid(_147f)){continue;}if(builder.Environment.diagram&&builder.Environment.diagram.patterntype!="vsys"&&_147f.name&&_147f.name.indexOf("BaseScalingPolicy")!=-1){continue;}this.addItem(_147f);this.noPolicy=false;}},addItem:function(data){var opt={icon:builder.util.FileUtil.getComponentIconPath(data.thumbnail),data:data,open:this.open,root:this.root};var item=new _1476(opt);dojo.connect(item.domNode,"onmousedown",this,function(e){dojo.stopEvent(e);var pos={x:e.pageX,y:e.pageY};if(!_1479.isAddon(data)){this.destroyRecursive();}var _1480=builder.Environment.diagram.getCoordinate(pos);var _1481={x:_1480.x+"px",y:_1480.y+"px"};var cmd=_1478.getCommmandFactory().getAddPolicyCommand(data.id,this.component);builder.Environment.commandStack.executeCommand(cmd);this.component.componentFrame&&this.component.componentFrame.updateAddPolicyButton();});this.policyContainer.appendChild(item.domNode);},show:function(){document.body.appendChild(this.domNode);},setLocation:function(left,top){dojo.style(this.domNode,{left:left+"px",top:top+"px"});},getNoPolicyMessage:function(){return builder.Environment.messages.APPMODEL_TOOLING_NO_AVIALABLE_POLICIES;},checkPolicyExtension:function(_1482){return true;}});});},"paas/widgets/ValidationTextBox":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","paas/widgets/MetaDataDrivenInput"],function(_1483,_1484,_1485){return _1483("paas.widgets.ValidationTextBox",[_1484,_1485],{postMixInProperties:function(){this.inherited(arguments);this.initMetaData();if(this.metadata){this.trim=true;if(this.metadata.required){this.required=this.metadata.required;}else{this.required=false;}if(this.metadata.description){this.promptMessage=this.metadata.description;}if(this.metadata.regExp){this.regExp=this.metadata.regExp;}if(this.metadata.maxLength){this.maxLength=this.metadata.maxLength;}if(this.metadata.invalidMessage){this.invalidMessage=this.metadata.invalidMessage;}}}});});},"builder/workbench/layer/Help":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/Help.html","builder/workbench/editor/FloatingPane"],function(_1486,_1487,_1488,_1489,_148a,_148b){return _1486("builder.workbench.layer.Help",[_1487,_1488,_1489],{widgetsInTemplate:true,templateString:_148a,constructor:function(){this.helpDialogTitle=builder.Environment.messages.HELP_DIALOG_TITLE;this.errorHelpContent=builder.Environment.messages.ERROR_HELP_CONTENT_TEXT;this.infoCenterTitle=builder.Environment.messages.HELP_INFO_CENTER_TITLE;this.loadingHelpText=builder.Environment.messages.HELP_LOADING_TEXT;this.contentTitle=builder.Environment.messages.LAYER_HELP_CONTENT_TITLE;this.contentDesc=builder.Environment.messages.LAYER_HELP_CONTENT_DESCRIPTION;this.actionNew=builder.Environment.messages.LAYER_HELP_ACTION_NEW;this.actionNewDesc=builder.Environment.messages.LAYER_HELP_ACTION_NEW_DESC;this.actionDel=builder.Environment.messages.LAYER_HELP_ACTION_DEL;this.actionDelDesc=builder.Environment.messages.LAYER_HELP_ACTION_DEL_DESC;this.actionImport=builder.Environment.messages.LAYER_HELP_ACTION_IMPORT;this.actionImportDesc=builder.Environment.messages.LAYER_HELP_ACTION_IMPORT_DESC;this.actionEdit=builder.Environment.messages.LAYER_HELP_ACTION_EDIT;this.actionEditDesc=builder.Environment.messages.LAYER_HELP_ACTION_EDIT_DESC;this.actionSelect=builder.Environment.messages.LAYER_HELP_ACTION_SELECT;this.actionSelectDesc=builder.Environment.messages.LAYER_HELP_ACTION_SELECT_DESC;this.actionDisable=builder.Environment.messages.LAYER_HELP_ACTION_DISABLE;this.actionDisableDesc=builder.Environment.messages.LAYER_HELP_ACTION_DISABLE_DESC;this.referenceLayersDesc=builder.Environment.messages.LAYER_HELP_REFERENCE_LAYER_DESC;this.infocenterLink=window.globalSetting.infocenterLink;this.infocenterLayerTopic=window.globalSetting.infocenterLayerTopic;this.infocenterBaseUrl=window.globalSetting.infocenterBaseUrl;},postCreate:function(){this.floatingPane.startup();this.floatingPane.titleNode.style.fontSize="15px";var _148c={w:550,h:400};if(this.position){_148c.l=this.position.left;_148c.t=this.position.top;}this.floatingPane.resize(_148c);this.floatingPane.bringToTop();dojo.connect(this.floatingPane,"close",this,function(e){this.destroyRendering(false);dijit.registry.remove(this.id);this._destroyed=true;});dojo.connect(this.floatingPane.domNode,"onkeydown",this,function(e){if(e.keyCode===dojo.keys.ESCAPE){this.remove();}});dojo.connect(this.floatingPane.focusNode,"onclick",this,function(e){this.focus();});dojo.addClass(this.floatingPane.focusNode,"dijitDialogTitleBar");dojo.addClass(this.floatingPane.closeNode,"dijitDialogCloseIcon");},setLocation:function(left,top){var _148d=this.floatingPane._currentState;this.floatingPane.resize(_148d);},remove:function(){this.floatingPane.close();},focus:function(){if(this.floatingPane&&this.floatingPane.domNode){this.floatingPane.focusNode.focus();}}});});},"builder/util/CommandFactoryUtil":function(){define(["dojo/_base/lang","builder/util/Util","builder/util/DefaultCommandFactory","builder/vsys/util/VSysCommandFactory"],function(lang,Util,_148e,_148f){var _1490=lang.getObject("builder",true);var _1491=lang.getObject("util.CommandFactoryUtil",true,_1490);_1491=_1490.util.CommandFactoryUtil={commandFactory:null,getCommmandFactory:function(){if(this.commandFactory){return this.commandFactory;}if(Util.patternTypeIsVSys()){this.commandFactory=new _148f();}else{this.commandFactory=new _148e();}return this.commandFactory;}};return _1491;});},"builder/workbench/listView/MissingPropLink":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/MissingPropLink.html"],function(_1492,_1493,_1494,_1495,_1496){return _1492("builder.workbench.listView.MissingPropLink",[_1493,_1494,_1495],{templateString:_1496,item:null,propDescription:null,propName:null,constructor:function(){this.attention_normal=paas.Base.messages.Status_Warning;},postCreate:function(){this.linkNode.innerHTML=this.propDescription+" - "+this.item.model.id;this.linkNode.href="#"+this.item.model.id;dojo.connect(this.linkNode,"onclick",this,"expandItem");},expandItem:function(){if(!this.item.isExpanded){this.item.changeDisplay();}if(this.propName){dojo.addClass(this.item.propsMap[this.propName].valueWidget.domNode,"missingPropBorder");this.item.propsMap[this.propName].focus();}}});});},"builder/workbench/ToolbarManager":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ToolbarManager.html","builder/util/FileUploadManager","dijit/form/Button","dijit/ToolbarSeparator","builder/command/ChangePropertyCommand","builder/command/EnableGroupCommand","dijit/form/SimpleTextarea","dijit/Dialog","builder/workbench/SaveDialog","dijit/Toolbar","builder/workbench/AppPolicyWidget","dojo/topic","dojo/_base/lang"],function(_1497,_1498,_1499,_149a,_149b,_149c,_149d,_149e,_149f,_14a0,_14a1,topic,lang){return _1497("builder.workbench.ToolbarManager",[_1498,_1499,_149a],{templateString:_149b,buttonIdListMap:{"diagram":["save","saveAs","layout","undo","redo"],"order":["save","saveAs","orderUndo","orderRedo","orderReset"],"list":["save","saveAs","undo","redo"],"source":["save","saveAs","edit","reset"],"components":["newComponent","saveComponent"],"links":["newLink","saveLink"]},defaultButtons:null,buttonListMode:"diagram",buttons:null,constructor:function(){this.defaultButtons={"save":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_SAVE,"event":"save","iconClass":"dijitEditorIcon dijitEditorIconSave"},"saveAs":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_SAVEAS,"event":"saveAs","iconClass":"menuItem menuItemSaveAs"},"layout":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_LAYOUT,"event":"layout","iconClass":"menuItem menuItemLayout","title":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_LAYOUT_TOOLTIP},"undo":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_UNDO,"event":"undo","iconClass":"dijitEditorIcon dijitEditorIconUndo"},"redo":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_REDO,"event":"redo","iconClass":"dijitEditorIcon dijitEditorIconRedo"},"listUndo":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_UNDO,"event":"undo","iconClass":"dijitEditorIcon dijitEditorIconUndo"},"listRedo":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_REDO,"event":"redo","iconClass":"dijitEditorIcon dijitEditorIconRedo"},"orderUndo":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_UNDO,"event":"orderUndo","iconClass":"dijitEditorIcon dijitEditorIconUndo"},"orderRedo":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_REDO,"event":"orderRedo","iconClass":"dijitEditorIcon dijitEditorIconRedo"},"orderReset":{"label":builder.Environment.messages.APPMODEL_ORDERING_TOOLBAR_RESET,"event":"orderReset","iconClass":"dijitEditorIcon dijitEditorIconReset"},"edit":{"label":builder.Environment.messages.EDIT,"event":"editSource","iconClass":"wca-image-edit-icon"},"reset":{"label":builder.Environment.messages.RESET,"event":"reset","iconClass":"dijitEditorIcon dijitEditorIconReset","disabled":true},"saveComponent":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_SAVE,"event":"saveComponent","iconClass":"dijitEditorIcon dijitEditorIconSave"},"newComponent":{"label":builder.Environment.messages.BUILDER_CLEDITOR_NEW,"event":"newComponent","iconClass":"dijitEditorIcon dijitEditorIconNewPage"},"cloneComponent":{"label":builder.Environment.messages.BUILDER_CLEDITOR_CLONE,"event":"cloneComponent","iconClass":"dijitEditorIcon dijitEditorIconCopy"},"deleteComponent":{"label":builder.Environment.messages.BUILDER_CLEDITOR_DELETE,"event":"deleteComponent","iconClass":"dijitEditorIcon dijitEditorIconDelete"},"saveLink":{"label":builder.Environment.messages.BUILDER_EDITOR_TOOLBAR_SAVE,"event":"saveLink","iconClass":"dijitEditorIcon dijitEditorIconSave"},"newLink":{"label":builder.Environment.messages.BUILDER_CLEDITOR_NEW,"event":"newLink","iconClass":"dijitEditorIcon dijitEditorIconNewPage"},"cloneLink":{"label":builder.Environment.messages.BUILDER_CLEDITOR_CLONE,"event":"cloneLink","iconClass":"dijitEditorIcon dijitEditorIconCopy"},"deleteLink":{"label":builder.Environment.messages.BUILDER_CLEDITOR_DELETE,"event":"deleteLink","iconClass":"dijitEditorIcon dijitEditorIconDelete"}};},postCreate:function(){this.buttons={};var _14a2=this.buttonIdListMap[this.buttonListMode];var size=_14a2.length;dojo.forEach(_14a2,dojo.hitch(this,function(_14a3){var _14a4=this.defaultButtons[_14a3];var _14a5=new _149d({label:_14a4.label,showLabel:true,onClick:dojo.hitch(this,_14a4.event),iconClass:_14a4.iconClass,disabled:(_14a4.disabled==true)?true:false,title:_14a4.title||_14a4.label});this.toolbar.addChild(_14a5);if(size-->1){this.toolbar.addChild(new _149e());}this.buttons[_14a3]=_14a5;}));this._disableCommandBtn();dojo.subscribe("/builder/diagram/modeChange",dojo.hitch(this,this.onModeChange));dojo.subscribe("onDiagramChanged",dojo.hitch(this,this._updateCommandBtn));dojo.subscribe("/builder/modelservice/saveAsBtnStatus",dojo.hitch(this,this.updateSaveASBtnStatus));dojo.subscribe("onOrderingChanged",dojo.hitch(this,this._updateOrderBtn));},onModeChange:function(mode){if(mode=="readOnly"){this.setReadOnlyMode();}if(mode=="disableAll"){this.setDisableAllMode();}},setReadOnlyMode:function(){if(window.globalSetting.isInMaintenance){this.setDisableAllMode();return;}for(var _14a6 in this.buttons){if(_14a6!="saveAs"){this.disableBtn(_14a6);}}},setDisableAllMode:function(){for(var _14a7 in this.buttons){this.disableBtn(_14a7);}},setEnableAllMode:function(){for(var _14a8 in this.buttons){this.enableBtn(_14a8);}},_disableCommandBtn:function(){this.disableBtn("undo");this.disableBtn("redo");this.disableBtn("orderUndo");this.disableBtn("orderRedo");},_updateBtnStatus:function(_14a9,_14aa){if(this.buttons[_14a9]){this.buttons[_14a9].set("disabled",_14aa);}},_updateCommandBtn:function(){var _14ab=builder.Environment.commandStack.canUndo();var _14ac=builder.Environment.commandStack.canRedo();if(this.buttonListMode=="list"){var _14ad=builder.Environment.commandStack.getUndoCommand();if(!(_14ad instanceof _149f)&&!(_14ad instanceof builder.command.ChangeComponentNameCommand)&&!(_14ad instanceof builder.command.ChangeGroupCommand)&&!(_14ad instanceof _14a0)){_14ab=false;}var _14ae=builder.Environment.commandStack.getRedoCommand();if(!(_14ae instanceof _149f)&&!(_14ae instanceof builder.command.ChangeComponentNameCommand)&&!(_14ad instanceof builder.command.ChangeGroupCommand)&&!(_14ad instanceof _14a0)){_14ac=false;}}this._updateBtnStatus("undo",!_14ab);this._updateBtnStatus("redo",!_14ac);},_updateOrderBtn:function(){var _14af=builder.Environment.orderViewCommandStack.canUndo();var _14b0=builder.Environment.orderViewCommandStack.canRedo();this._updateBtnStatus("orderUndo",!_14af);this._updateBtnStatus("orderRedo",!_14b0);},disableBtn:function(_14b1){this._updateBtnStatus(_14b1,true);},enableBtn:function(_14b2){this._updateBtnStatus(_14b2,false);},disableSaveBtn:function(){this.disableBtn("save");},_enableSaveBtn:function(){this.enableBtn("save");},disableSaveAsBtn:function(){this.disableBtn("saveAs");},enableSaveAsBtn:function(){this.enableBtn("saveAs");},updateSaveASBtnStatus:function(_14b3){if(_14b3){this.enableSaveAsBtn();}else{this.disableSaveAsBtn();}},_checkFileUploading:function(){if(_149c.hasFileUploading()){dojo.publish("/builder/editor/notification",[["warning","APPMODEL_TOOLING_WAIT_UPLOADING"]]);return true;}return false;},save:function(e){var _14b4=builder.Environment.messages.APPMODEL_DEFAULT_NAME;if(builder.Environment.diagram.getName()==_14b4){var _14b5=builder.Environment.diagram.getType();var _14b6=false;if(!window.saveType||window.saveType==_14b5){_14b6=true;}this.saveAs(e,_14b5,_14b6);return;}dojo.stopEvent(e);if(this._checkFileUploading()){return;}builder.Environment.diagram.selectModel(builder.Environment.diagram);if(builder.Environment.diagram.appId){builder.Environment.modelService.prepareSave(builder.Environment.diagram.getName(),builder.Environment.diagram.getDescription(),builder.Environment.diagram.getType()=="template"?true:false);}else{builder.Environment.modelService.create(appName,description,templateFlag);}},saveAs:function(e,_14b7,_14b8){dojo.stopEvent(e);if(this._checkFileUploading()){return;}var _14b9=dijit.byId("save_dialog");_14b9.hideMsg();var _14ba=builder.Environment.diagram;if(_14b8||_14b8===false){_14b9.saveAsTemplate.set("disabled",_14b8);}else{if(window.saveType!="both"){_14b9.saveAsTemplate.set("disabled",true);}}if(!_14b7){if(window.saveType=="both"){_14b7=builder.Environment.diagram.getType();}else{_14b7=window.saveType;}}if(_14ba.getName()==builder.Environment.messages.APPMODEL_DEFAULT_NAME){_14b9.setDefaultValue(_14b7);_14b9.show(builder.Environment.messages.BUILDER_EDITOR_SAVEDIALOG_TITLE,"save");}else{_14b9.resetValue(_14b7);_14b9.setDefaultValue(_14b7);_14b9.show(builder.Environment.messages.BUILDER_EDITOR_SAVEASDIALOG_TITLE,"saveAs");}},_autoGenerateName:function(){var name=builder.Environment.diagram.getName();var regex=/^(.*?)(\d+)$/;var index=1;var _14bb=name;if(regex.test(name)){_14bb=RegExp.$1;index=parseInt(RegExp.$2)+1;if(index<0){index=1;}}name=_14bb+index;return name;},layout:function(e){dojo.stopEvent(e);builder.Environment.modelService.layout();builder.Environment.diagram.resetSurfaceArea();},undo:function(e){builder.Environment.commandStack.undo();},redo:function(e){builder.Environment.commandStack.redo();},editSource:function(e){dojo.stopEvent(e);if(this._checkFileUploading()){return;}if(!this.isEditing){var _14bc=new builder.service.DiagramToJson(builder.Environment.diagram).getModel();delete _14bc.tooling;var str=dojo.toJson(_14bc,true);var _14bd=dijit.byId("sourceEditor");_14bd.set("value",str);dojo.style(builder.Environment.source,"display","none");dojo.style(_14bd.domNode,"display","");dojo.forEach(dijit.byId("toolingTabContainer").getChildren(),function(pane){pane.set("disabled",true);});dijit.byId("sourceArea").set("disabled",false);this.disableBtn("save");this.disableBtn("saveAs");this.enableBtn("reset");this.buttons["edit"].set("label",paas.Base.messages.DONE_EDITING);this.isEditing=true;}else{if(builder.Environment.diagram.appId){var _14bd=dijit.byId("sourceEditor");try{var _14be=dojo.fromJson(_14bd.get("value"));var model=_14be.model;var _14bf=builder.Environment.modelService.save(model.name,model.description,model.app_type=="template"?true:false,_14be);_14bf.then(function(resp,code){window.location.reload();});}catch(e){dojo.publish("/builder/editor/notification",[["error",paas.Base.messages.INVALID_JSON]]);return;}}}},orderUndo:function(e){builder.Environment.orderViewCommandStack.undo();},orderRedo:function(e){builder.Environment.orderViewCommandStack.redo();},orderReset:function(e){require(["builder/workbench/orderView/OrderController"],function(_14c0){_14c0.resetOrderView();});},reset:function(e){if(this.isEditing){var _14c1=new builder.service.DiagramToJson(builder.Environment.diagram).getModel();delete _14c1.tooling;var str=dojo.toJson(_14c1,true);dijit.byId("sourceEditor").set("value",str);}},saveComponent:function(event){builder.Environment.componentsView.saveComponent();},newComponent:function(event){builder.Environment.componentsView.newComponent();},cloneComponent:function(event){builder.Environment.componentsView.cloneComponent();},deleteComponent:function(event){builder.Environment.componentsView.deleteComponent();},saveLink:function(event){builder.Environment.linksView.saveLink();},newLink:function(event){builder.Environment.linksView.newLink();},cloneLink:function(event){builder.Environment.linksView.cloneLink();},deleteLink:function(event){builder.Environment.linksView.deleteLink();}});});},"paas/widgets/_FileContentSelectDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/_FileContentSelectDialog.html","dijit/form/CheckBox","paas/widgets/Dialog"],function(_14c2,_14c3,_14c4,_14c5,_14c6,_14c7,_14c8){return _14c2("paas.widgets._FileContentSelectDialog",[_14c3,_14c4,_14c5],{templateString:_14c6,widgetsInTemplate:true,btnTextConfirm:paas.Base.messages.SELECT,message:paas.Base.messages.UPLOAD_CONTENT_LINK_MESSAGE,select_file_title:paas.Base.messages.SELECT_FILE,show:function(){this.dialog.show();},hide:function(){this.contentLinkCheckbox.set("checked",false);this.dialog.hide();}});});},"builder/workbench/componentsView/ComponentCategoryPalette":function(){define(["dojo/_base/declare","builder/workbench/palette/CategoryPalette","builder/workbench/componentsView/ComponentCategoryPaletteFolder"],function(_14c9,_14ca,_14cb){http:return _14c9("builder.workbench.componentsView.ComponentCategoryPalette",[_14ca],{postCreate:function(){var _14cc=dijit.byId("componentControlContainer");if(_14cc){var self=this;this.connect(_14cc,"layout",function(){var _14cd=dojo.marginBox(self.assetContainer.domNode);if(_14cd&&_14cd.h>=60){self.menuContainer.style.height=(_14cd.h-60)+"px";}});this.connect(_14cc,"toggle",function(){_14cc.layout();});}},load:function(_14ce){dojo.forEach(this.folders,function(_14cf){_14cf.destroy();});while(this.containerNode.firstChild!=null){this.containerNode.removeChild(this.containerNode.firstChild);}var _14d0=builder.Environment.diagram;var ps=builder.service.PatternTypeService.getPaletteService(_14ce,null,null);ps.getCategories().then(dojo.hitch(this,function(_14d1){this.categories=_14d1;dojo.forEach(this.categories,function(_14d2){this.addFolder(_14d2,ps);},this);}));},getCategories:function(){return this.categories;},addFolder:function(_14d3,_14d4){if(_14d3.id==null){return;}if(!this.defaultCategory){this.defaultCategory=_14d3.id;}var self=this;var opt={category:_14d3,open:true,root:self};var _14d5=new builder.workbench.componentsView.ComponentCategoryPaletteFolder(opt);this.folders.push(_14d5);_14d4&&_14d4.getCategoryComponents(_14d3.id).then(function(_14d6){dojo.forEach(_14d6,function(data){_14d5.addItem(data);});_14d5.startup();});},handleItemSelected:function(item){for(var index in this.folders){var _14d7=this.folders[index];_14d7.clearSelected(item);}this.itemSelected(item);},itemSelected:function(item){}});});},"builder/vsys/command/AddImageCommand":function(){define(["dojo/_base/declare","builder/command/AddComponentCommand","builder/vsys/command/ImageCommandUtil"],function(_14d8,_14d9,_14da){return _14d8("builder.vsys.command.AddImageCommand",[_14d9,_14da],{execute:function(){this.inherited(arguments);this.afterExecute();},undo:function(){this.beforeUndo();this.inherited(arguments);this.updateHVImages();}});});},"paas/widgets/MappingDeleteDialog":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/MappingDeleteDialog.html","paas/widgets/MappingWidget","paas/widgets/Dialog","builder/util/Util","builder/command/ChangePropertyCommand","builder/base/command/CompoundCommand","builder/vsys/util/VSysUtil","paas/common/constants","builder/command/RemoveConnectionCommand"],function(_14db,_14dc,_14dd,_14de,_14df,_14e0,_14e1,util,_14e2,_14e3,_14e4,_14e5,_14e6){return _14db("paas.widgets.MappingDeleteDialog",[_14dc,_14dd,_14de],{templateString:_14df,widgetsInTemplate:true,connection:null,tbody:null,showWarning:false,fromConfigure:false,subscribes:null,constructor:function(){this.app_deploy_dialog_title=paas.Base.messages.DELETE_MAPPING_CONFIRMATION;this.app_deploy_dialog_description=paas.Base.messages.DELETE_MAPPING_CONFIRMATION_OK;this.app_deploy_dialog_OK_button=paas.Base.messages.APP_DEPLOY_DIALOG_OK_BUTTON;this.app_deploy_dialog_cancel_button=paas.Base.messages.APP_DEPLOY_DIALOG_CANCEL_BUTTON;},postCreate:function(){this.theDialog.onConfirm=dojo.hitch(this,"confirm");this.theDialog.onCancel=dojo.hitch(this,this.cancelDialog);dojo.style(this.theDialog.containerNode,{"maxHeight":"380px","overflowY":"auto","overflowX":"hidden"});dojo.style(this.theDialog.messageWidget.domNode,"top","20px");},showDialog:function(){this.showPossibleMappings();this.theDialog.show();},confirm:function(){this.clearReferences();this.uninitialize();},cancelDialog:function(){this.uninitialize();},showPossibleMappings:function(){var self=this;this.possibleMappingsFromComp.innerHTML=builder.util.Util.getCompName(this.connection.fromComponent);this.possibleMappingsToComp.innerHTML=builder.util.Util.getCompName(this.connection.toComponent);var table=dojo.create("table",{"style":"width: 100%; padding: 5px 10px; border: 0px solid #B5BCC7;"},this.possibleMappingsDiv);table.setAttribute("role","presentation");this.tbody=dojo.create("tbody",null,table);var _14e7=this.connection.fromComponent;var _14e8=this.connection.toComponent;dojo.forEach(_14e7.metadata.attributes,function(attr){var _14e9=self.matches(_14e7,_14e8,attr.id);if(_14e9){self.createMapEntry(attr.label,_14e9);}});},matches:function(_14ea,_14eb,id){var self=this;var _14ec=null;if(_14ea.properties[id]){dojo.forEach(_14eb.metadata.outputs,function(_14ed){if(_14e4.getDataDependencyRegexp(_14eb.id,_14ed.id).test(_14ea.properties[id])){if(_14ec==null){_14ec=_14ed.id;}else{_14ec+=", "+_14ed.id;}}});}return _14ec;},createMapEntry:function(_14ee,_14ef){var self=this;var tr=dojo.create("tr",null,self.tbody);var td0=dojo.create("td",{"class":"boldFont","style":"width: 3%;"},tr);if(self.showWarning){var image=dojo.create("div",{className:"wca-image-warning-icon",title:"The attribute has already a value."},td0);}var td=dojo.create("td",{"class":"boldFont","style":"width: 40%;"},tr);td.innerHTML=_14ee;var td1=dojo.create("td",{"innerHTML":"<img src='/tooling/images/cloud/arrow.gif'/>","class":"boldFont","style":"width: 10%;"},tr);var td2=dojo.create("td",{"innerHTML":_14ef,"class":"boldFont","style":"width: 40%;"},tr);var td3=dojo.create("td",{"style":"width: 10%;"},tr);},uninitialize:function(){this.theDialog.hide();this.theDialog.destroy();},clearReferences:function(){var _14f0=new _14e3();var self=this;var flag=false;dojo.forEach(this.connection.fromComponent.metadata.attributes,function(attr){var _14f1=self.connection.fromComponent.properties[attr.id];var _14f2=_14f1;if(_14f1&&util.stringContainContent(_14f1,"${"+self.connection.toComponent.id)){var _14f3=_14e4.getDataDependencyRegexp(self.connection.toComponent.id);_14f2=_14f1.replace(_14f3,"");var _14f4=new _14e2(self.connection.fromComponent,attr.id,_14f1,_14f2);_14f0.add(_14f4);flag=true;}});if(flag){builder.Environment.commandStack.executeCommand(_14f0);}else{if(this.connection.type!=_14e5.DATA_DEPENDS_LINK){var cmd=new _14e6(this.connection);builder.Environment.commandStack.executeCommand(cmd);}}}});});},"builder/vsys/util/VSysUtil":function(){define(["dojo/_base/lang","builder/util/Util","builder/util/CapabilityUtil","paas/common/constants","dojo/_base/array"],function(lang,Util,_14f5,_14f6,array){var _14f7=lang.getObject("builder",true);var _14f8=lang.getObject("vsys.util.VSysUtil",true,_14f7);_14f8=_14f7.vsys.util.VSysUtil={dataDependsOnPattern:/\$\{[^\}]{1,}(\[\d*\])?\.[^\}]{1,}\}/gi,dataDependsCompIDClusterPattern:/^.{1,}(\[\d*\])$/,findComponentByImageId:function(_14f9){if(_14f9==null){return null;}if(typeof (_14f9)=="string"||typeof (_14f9)=="number"){_14f9=[_14f9];}var _14fa=Util.getMetadataService().getComponents();for(var _14fb in _14fa){if(_14fa.hasOwnProperty(_14fb)&&dojo.indexOf(_14f9,_14fa[_14fb].imageId)>-1){return _14fa[_14fb];}}return null;},containsType:function(_14fc,type){return Util.getMetadataService().containsComponentType(type,_14fc["extends"]);},getLatestChildComponent:function(_14fd){var _14fe=Util.getMetadataService().getChildrenComponents(_14fd);return this.getLatestVersionComponent(_14fe);},getLatestVersionComponent:function(parts){if(parts==null||parts.length<=0){return null;}var _14ff=parts[0];for(var i=1;i<parts.length;i++){if(this._calculateVersionAbsoluteValue(this.getVersionFromMetadata(_14ff))<this._calculateVersionAbsoluteValue(this.getVersionFromMetadata(parts[i]))){_14ff=parts[i];}}return _14ff;},_calculateVersionAbsoluteValue:function(_1500){var base=100;var _1501=0;if(_1500==null){return _1501;}var _1502=_1500.split(".");for(var i=0;i<_1502.length;i++){_1501=_1501*base+_1502[i]*1;}return _1501;},getNameFromMetadata:function(_1503){if(this.isImage(_1503)){return _14f8.getJsonObjectByPath(_1503,"capabilities","provides","image","name");}return "";},getVersionFromMetadata:function(_1504){if(this.isPartComponent(_1504)){return _14f8.getJsonObjectByPath(_1504,"capabilities","provides","middleware","*","version");}else{if(this.isImage(_1504)){return _14f8.getJsonObjectByPath(_1504,"capabilities","provides","image","version");}else{if(this.isScript(_1504)){return _14f8.getJsonObjectByPath(_1504,"capabilities","provides","script","version");}else{if(this.isAddon(_1504)){return _14f8.getJsonObjectByPath(_1504,"capabilities","provides","script","version");}}}}},getJsonObjectByPath:function(_1505,path){return paasUtil.getJsonObjectByPath.apply(_14f8,arguments);},findHostedOnTarget:function(conns){for(var i=0;i<conns.length;i++){if(conns[i].type===_14f6.HOSTED_ON_LINK){return conns[i].toComponent;}}return null;},findHostedOnSources:function(conns){var _1506=[];for(var i=0;i<conns.length;i++){if(conns[i].getType()===_14f6.HOSTED_ON_LINK){_1506.push(conns[i].fromComponent);}}return _1506;},findContainerComponent:function(_1507){var _1508=_1507.outgoingConnections;for(var i=0;i<_1508.length;i++){var type=_1508[i].getType();if(type===_14f6.HOSTED_ON_LINK||type.indexOf("policy.")==0){return _1508[i].toComponent;}}},toDelegatedConnection:function(_1509){var _150a=_1509.fromComponent;var _150b=_1509.toComponent;var _150c=this.findHostedOnTarget(_150a.outgoingConnections);_150c=_150c?_150c:_150a;var _150d=this.findHostedOnTarget(_150b.outgoingConnections);_150d=_150d?_150d:_150b;if(!_150c.delegatedCompsConnsMap){_150c.delegatedCompsConnsMap={};}if(!_150d.delegatedCompsConnsMap){_150d.delegatedCompsConnsMap={};}if(_150c.delegatedCompsConnsMap[_150d.id]){return;}else{_1509.delegated=true;_150c.delegatedCompsConnsMap[_150d.id]=_1509;_150d.delegatedCompsConnsMap[_150c.id]=_1509;}},getDataDependsOnComponentIDs:function(attr){if(!lang.isString(attr)){return null;}var _150e=attr.match(this.dataDependsOnPattern);if(_150e&&_150e instanceof Array&&_150e.length>0){var _150f=[];for(var i=0;i<_150e.length;i++){var _1510=_150e[i].substring(2,_150e[i].indexOf("."));if(_1510){if(this.dataDependsCompIDClusterPattern.test(_1510)){_1510=_1510.substring(0,_1510.indexOf("["));}if(_1510.indexOf("pattern")!==0){_150f.push(_1510);}}}return _150f;}return null;},isDataDependsOnValue:function(value){if(!lang.isString(value)){return false;}this.dataDependsOnPattern.lastIndex=0;return this.dataDependsOnPattern.test(value);},isPolicy:function(_1511){if(_1511.type&&_1511.type==="policy"){return true;}return false;},isType:function(type,_1512){if(_1512&&_1512["extends"]){return Util.getMetadataService().containsComponentType(type,_1512["extends"]);}return false;},isAddon:function(_1513){return this.isType(_14f6.ADDON,_1513);},isScript:function(_1514){return this.isType(_14f6.SCRIPT_PACKAGE,_1514);},isConfiguration:function(_1515){return this.isType("CONFIGURATION",_1515);},isImage:function(_1516){return this.isType(_14f6.IMAGE,_1516);},isPartComponent:function(_1517){return this.isType(_14f6.PART,_1517);},isLinkableSubComponent:function(_1518){return this.isPartComponent(_1518)||this.isScript(_1518);},isSubComponent:function(_1519){return this.isPolicy(_1519)||this.isScript(_1519)||this.isPartComponent(_1519)||this.isConfiguration(_1519)||this.isAddon(_1519);},isHostedOnLink:function(_151a,_151b){return this.isLinkableSubComponent(_151a)&&this.isImage(_151b);},isDataDependsLink:function(_151c,_151d){var _151e=Util.getMetadataService();var link=_151e.getConnectionMetadataById(paas.common.constants.DATA_DEPENDS_LINK);return (link!=null)&&_151e.containsComponentType(link.source,_151c["extends"])&&_151e.containsComponentType(link.target,_151d["extends"]);},getConnectionType:function(_151f,_1520,_1521){var _1522=null;if(_151f&&_1521){if(this.isHostedOnLink(_151f.metadata,_1520.metadata)){_1522=_14f6.HOSTED_ON_LINK;}}else{if(_1520){if(this.isDataDependsLink(_151f.metadata,_1520.metadata)){_1522=_14f6.DATA_DEPENDS_LINK;}}}return _1522;},pluginComponentLicenseAccepted:function(_1523){if(_1523&&!_1523.licenseStatus){return false;}return true;},imageComponentLicenseAccepted:function(_1524){if(_1524&&_1524.licenseStatus==="F"){return false;}return true;},scriptComponentLicenseAccepted:function(_1525){if(_1525&&_1525.licensestatus==="F"){return false;}return true;},getDataDependencyRegexp:function(){var args=arguments;if(args.length===2){return new RegExp("\\$\\{"+args[0]+"(\\[\\d*\\])?\\."+args[1]+"\\}");}else{if(args.length===1){return new RegExp("\\$\\{"+args[0]+"(\\[\\d*\\])?\\.[^\\}]+\\}");}}return this.dataDependsOnPattern;},containsNodeId:function(value,_1526){return value.indexOf("${"+_1526+".")>-1||value.indexOf("${"+_1526+"[")>-1;}};return _14f8;});},"builder/workbench/palette/CategoryPalette":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/CategoryPalette.html","builder/workbench/palette/CategoryPaletteFolder","dijit/layout/ContentPane","builder/service/PatternTypeService","dojo/on","dojo/_base/lang","dijit/form/TextBox"],function(_1527,_1528,_1529,_152a,_152b,_152c,_152d,_152e,on,lang){return _1527("builder.workbench.palette.CategoryPalette",[_1528,_1529,_152a],{templateString:_152b,folders:null,defaultCategory:"",theme:"",defaultValue:null,status:null,draggable:false,defaultFilterName:"abstractFilter",constructor:function(){this.folders=[];this.defaultValue=builder.Environment.messages.BUILDER_PALETTE_SEARCH_DEFAULTVALUE;this.listViewTitle=builder.Environment.messages.BUILDER_PALETTE_LIST_VIEW_TITLE;this.tileViewTitle=builder.Environment.messages.BUILDER_PALETTE_TILE_VIEW_TITLE;this.assetsPanelTitle=builder.Environment.messages.APPMODEL_TOOLIGN_ASSET_PANEL_TITLE;},registerEvents:function(){this.own(on(this.searchKeyWordInput,"keyUp",lang.hitch(this,this.onUserEnter)));this.own(on(this.searchKeyWordInput,"focus",lang.hitch(this,this.clearKeyWordInput)));this.own(on(this.searchKeyWordInput,"blur",lang.hitch(this,this.setDefaultKeyWord)));},postCreate:function(){this.registerEvents();this.setDefaultKeyWord();},load:function(_152f){var _1530=builder.Environment.diagram;var _1531=this.getReusableComponents();this.ps=_152e.getPaletteService(_152f,_1530.patterntype,_1530.version);this.ps.getCategories().then(dojo.hitch(this,function(_1532){this.categories=_1532;this._mixin(this.categories,_1531);this.filterAndDisplayFolders();}));},getReusableComponents:function(){var _1533=builder.Environment.diagram;var cs=_152e.getComponentService(_1533.patterntype,_1533.version);return cs.getAllComponents();},_mixin:function(_1534,_1535){if(!_1535){return;}var tmp={};dojo.forEach(_1534,function(_1536){dojo.forEach(_1536.items,function(item){tmp[item.type]=item;});});dojo.forEach(_1535,function(_1537){if(!tmp[_1537.type]){return;}if(!tmp[_1537.type].components){tmp[_1537.type].components=[];}if(_1537.component_id||(_1537.id&&_1537.id.indexOf("ADDON")!==0)!=0){tmp[_1537.type].components.push(_1537);}});},setReadOnlyMode:function(){dojo.forEach(this.folders,function(_1538){_1538.setReadOnlyMode();});},_hasEmptyChildrenList:function(_1539){return (_1539.items==null||_1539.items.length==0)&&(_1539.categories==null||_1539.categories.length==0);},addFolder:function(_153a,_153b){if(_153a.id==null){return;}if(this._hasEmptyChildrenList(_153a)){return;}if(!this.defaultCategory){this.defaultCategory=_153a.id;}var _153c=false;if(this.defaultCategory==_153a.id&&!((_153a.collapse||_153a.collapse=="true"))){_153c=true;}var self=this;var opt={category:_153a,open:_153c,root:self,draggable:self.draggable};var _153d=new _152c(opt);_153d.addChildren();_153d.startup();this.folders.push(_153d);},_filterCurrentCategory:function(_153e){dojo.forEach(this.folders,function(_153f){var open=false;dojo.forEach(_153f.items,function(item){if(item[0].isMatchKeyword(_153e)){item[0].isExcluded=false;item[0].display();if(item[1]){item[1].domNode.style.display="";}open=true;}else{item[0].isExcluded=true;item[0].hidden();if(item[1]){item[1].domNode.style.display="none";}}});if(_153f.categories&&_153f.categories.length>0){dojo.forEach(_153f.categories,function(_1540){var _1541=_1540.isMatchKeyword(_153e);var _1542=false;dojo.forEach(_1540.items,function(item){if(item[0].isMatchKeyword(_153e)){_1542=true;item[0].isExcluded=false;item[0].display();if(item[1]){item[1].domNode.style.display="";}open=true;_1540.set("open",true);}else{item[0].isExcluded=true;item[0].hidden();if(item[1]){item[1].domNode.style.display="none";}}});if(!_1541&&!_1542){_1540.domNode.style.display="none";}else{_1540.domNode.style.display="";}});}_153f.set("open",open);});},clearKeyWordInput:function(){if(this.status=="default"){this.searchKeyWordInput.value="";dojo.removeClass(this.searchKeyWordInput,"novalue");this.status="typing";}},setDefaultKeyWord:function(){this.searchKeyWordInput.set("placeHolder",this.defaultValue);},getKeyWord:function(){return dojo.trim(this.searchKeyWordInput.get("value"));},onUserEnter:function(e){var _1543=this.getKeyWord();this._filterCurrentCategory(_1543);},_filterItems:function(_1544,_1545){if(_1545==null){return;}_1545.call(this,_1544);},filterAndDisplayFolders:function(_1546){this._filterItems(this.categories,_1546||this[this.defaultFilterName]);this.uninitialize();dojo.forEach(this.categories,dojo.hitch(this,function(_1547){if(_1547.display!=false){this.addFolder(_1547,this.ps);}}));},uninitialize:function(){if(this.folders){dojo.forEach(this.folders,function(_1548){_1548.destroyRecursive&&_1548.destroyRecursive();});}this.folders=[];}});});},"builder/workbench/componentsView/PropertyMappingListCollapsibleSection":function(){define(["dojo/_base/declare","builder/workbench/componentsView/ComponentPropertyMapping","builder/workbench/componentsView/ListCollapsibleSection"],function(_1549,_154a,_154b){return _1549("builder.workbench.componentsView.PropertyMappingListCollapsibleSection",[_154b],{createRowData:function(row){var _154c=this.getParent().appModel;var _154d=new _154a({appModel:_154c},row);return _154d;}});});},"builder/workbench/property/FileUploadWidget":function(){define(["dojo/_base/declare","dojo/text!./templates/FileUploadWidget.html","dijit/form/_FormWidget","paas/widgets/FileInputAuto","builder/service/AppBindingService"],function(_154e,_154f,_1550,_1551,_1552){return dojo.declare("builder.workbench.property.FileUploadWidget",[_1550],{templateString:_154f,cancelText:"",uploadURL:null,attributeName:null,uploader:null,handlers:null,scannable:true,envModel:null,constructor:function(){this.cancel_btn_title=builder.Environment.messages.CANCEL;this.cancelText=builder.Environment.messages.CANCEL;},postCreate:function(){this.handlers=[];this.createFileInput();},createFileInput:function(){this.fileUpload=new _1551({"name":"attachment","style":"","url":this.uploadURL,"fileExtensions":this.fileExtensions,"uploadRetryMax":this.uploadRetryMax,"cancelDomNode":this.cancelNode,"triggerEvent":"onchange",validateDuplicateArtifacts:dojo.hitch(this,this.validateDuplicateArtifacts)});this.fileUpload.startup();this.fileUpload.resizeRealInput();this.fileUploadContainer.appendChild(this.fileUpload.domNode);this.handlers.push(dojo.connect(this.fileUpload,"onComplete",this,this.onComplete));this.handlers.push(dojo.connect(this.fileUpload,"deleteFile",this,"onChange"));this.edit();},validateDuplicateArtifacts:function(_1553){return true;var i,j;var attrs;var _1554;var _1555=true;dojo.forEach(builder.util.FileUploadManager.uploadingFiles,function(_1556){if(this.fileUpload._tranformFilePath(_1553)===_1556){dojo.publish("/builder/property/notification",[["warning","APPMODEL_TOOLING_UPLOAD_SAME_NAME"]]);this.fileUpload.reset();_1555=false;}},this);if(!_1555){return _1555;}var _1557=this.fileUpload._tranformFilePath(_1553);var items=null;if(this.envModel){items=this.envModel.components;}else{if(builder&&builder.Environment&&builder.Environment.diagram){items=builder.Environment.diagram.components;}else{items=[this.model];}}dojo.forEach(items,function(_1558){attrs=_1558.propertyMetadata?_1558.propertyMetadata:[];for(j=0;j<attrs.length;j++){if(attrs[j].type&&attrs[j].type==="file"&&_1558.properties){_1554=_1558.properties[attrs[j].id];if(_1557==_1554){if(_1558.id==this.model.id&&attrs[j].id==this.metadata.id){}else{dojo.publish("/builder/property/notification",[["warning","APPMODEL_TOOLING_UPLOAD_SAME_NAME"]]);this.fileUpload.reset();_1555=false;}}}}},this);return _1555;},isCanceled:function(data){if(!data.file){return true;}return false;},onComplete:function(data,_1559,_155a){var _155b=this.fileUpload.inputNode.value;_155b=this.fileUpload._tranformFilePath(_155b);if(!this.hasError(data)){if(this.isCanceled(data)){}else{dojo.publish("/builder/property/notification",[["info","APPMODEL_TOOLING_UPLOAD_SUCCESS",data.fileName]]);this.fileUpload.sentFile=data.file;this.set("value",data.file);this.onChange();builder&&builder.Environment&&builder.Environment.modelService&&builder.Environment.modelService.autoSave();dojo.publish("onDiagramChanged",null);if(this.scannable!==false){_1552.loadAppBinding(this.model);}}}else{if(data.errorMessage&&data.errorMessage!=""){var msg=dojo.string.substitute(paas.Base.messages.APPMODEL_TOOLING_UPLOAD_FAIL,[_155b])+"<br>";msg+=dojo.string.substitute(paas.Base.messages.LABEL_WITHCOLON,[paas.Base.messages.ERROR_MESSAGE])+data.errorMessage;dojo.publish("/builder/property/notification",[["error",msg]]);}else{dojo.publish("/builder/property/notification",[["error","APPMODEL_TOOLING_UPLOAD_FAIL",_155b]]);}}this.edit();},displayUpload:function(){this.fileUpload.domNode.style.display="";this.fileUpload.overlay.innerHTML="";this.fileUpload.overlay.appendChild(document.createTextNode(""));},cancelUpload:function(){this.fileUpload.stopUploading();var _155c=this.fileUpload.sentFile;this.fileUpload.destroyRecursive();dojo.forEach(this.handlers,function(_155d){dojo.disconnect(_155d);});this.createFileInput();this.fileUpload.sentFile=_155c;this.set("value",this.fileUpload.sentFile);},edit:function(){this.cancelNode.style.display="none";this.fileUpload.reset();this.displayUpload();},set:function(name,value){if("disabled"==name){this.fileUpload.set(name,value);return;}var _155e=this.inherited(arguments);if("value"==name){this.fileUploadContainer.title=value?value:"";if(value==this.get("value")){return;}this.fileUpload.set("value",value);this.fileUpload.reset();this.displayUpload();}return _155e;},get:function(name){if(name==="value"){return this.fileUpload.get("value");}return this.inherited(arguments);},hasError:function(data){if(!data||data.name==="TypeError"||data.error||data.errorCode){return true;}return false;}});});},"builder/workbench/editor/Diagram":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/Diagram.html","builder/workbench/editor/Container","dojox/gfx","builder/base/dnd/DropTarget","builder/command/AddComponentCommand","builder/workbench/property/ContainerPropertiesWidget","builder/workbench/AppPolicyWidget","dojo/_base/lang"],function(_155f,_1560,_1561,_1562,_1563,_1564,gfx,_1565,_1566,_1567,_1568,lang){return _155f("builder.workbench.editor.Diagram",[_1560,_1561,_1562,_1564],{templateString:_1563,widgetsInTemplate:true,diagramNode:null,surface:null,surfaceArea:null,selectedModel:null,appId:null,changed:false,saving:false,creator:null,isNew:false,lastModified:null,readOnly:false,propertiesWidget:null,borderWidth:2,patterntype:null,version:null,constructor:function(){this.surfaceArea={width:0,height:0};},postCreate:function(){this.styleMixin();dojo.connect(builder.Environment.editorArea,"resize",this,function(){this.styleMixin();this.resetSurfaceArea();});this.createSurface();this.createDropTarget();dojo.byId("diagramArea").appendChild(this.domNode);if(this.addBtn){this.addBtn.set("label",builder.Environment.messages.ADD_APP_POLICY_LABEL);this.addBtn.set("title",builder.Environment.messages.ADD_APP_POLICY_HINT);this.addBtn.domNode.onmousedown=lang.hitch(this,this.addAppPolicy);}if(dojo.isIE){dojo.connect(this.diagramNode,"onmouseup",this,function(e){this.ignoreMouseEvent=false;var _1569=builder.base.dnd.dragManager.getDropTarget(e);if(_1569&&_1569.domNode!=this.diagramNode){this.ignoreMouseEvent=true;}});}},createPropertiesWidget:function(){this.propertiesWidget=new builder.workbench.property.ContainerPropertiesWidget({model:this});if(this.readOnly){this.propertiesWidget.setUnchangable();}return this.propertiesWidget;},setReadOnlyMode:function(){this.readOnly=true;if(this.propertiesWidget){this.propertiesWidget.setUnchangable();}dojo.forEach(this.components,function(_156a){_156a.setReadOnlyMode();});dojo.forEach(this.connections,function(_156b){_156b.setReadOnlyMode();});this.addBtn.set("disabled",true);},styleMixin:function(){var _156c=builder.Environment.editorArea;var _156d=builder.util.Util.coords(_156c.domNode);var width=_156d.w-this.borderWidth;var _156e=_156d.h-this.borderWidth;this.diagramNode.style.width=width+"px";this.diagramNode.style.height=_156e+"px";this.setSurfaceArea(parseInt(width),parseInt(_156e));if(this.surface){this.setSurface();}},onDiagramClick:function(e){var _156f=builder.base.dnd.dragManager.getDropTarget(e);if(_156f&&builder.base.dnd.isChild(this.diagramNode,_156f.domNode)){return;}if(dojo.isIE&&this.ignoreMouseEvent===true){return;}this.selectModel(this);},createDropTarget:function(){var _1570=["Component","*"];var _1571=["Port"];var _1572=dijit.byId("diagramArea").domNode;var _1573=new builder.base.dnd.DropTarget(this.diagramNode,_1570,dojo.hitch(this,"componentDropHandler"),{"excludeTypes":_1571});},componentDropHandler:function(_1574,_1575,x,y){var _1576=this._calculateDropPosition(x,y);if(_1576==null){return;}this.createComponent(_1574.params,_1576);},createComponent:function(_1577,_1578){var cmd=new builder.command.AddComponentCommand(_1577,_1578);builder.Environment.commandStack.executeCommand(cmd);},_calculateDropPosition:function(x,y){try{var _1579=dojo.coords(this.diagramNode);var posX=x-_1579.x;var posY=y-_1579.y;if(posX<0){posX=0;}if(posY<0){posY=0;}var _157a={x:posX+"px",y:posY+"px"};this.setSurfaceArea(x,y);this.setSurface();}catch(e){console.error(paas.Base.messages.DIAGRAM_CONSOLE_ERROR+e);console.error(e);}return _157a;},selectModel:function(model,evt){if(evt){dojo.stopEvent(evt);}if(this.selectedModel===model){return;}if(this.selectedModel&&this.selectedModel!=model){this.selectedModel.onUnselect(evt);}model.onSelected(evt);this.selectedModel=model;},onSelected:function(){this.showPropertiesWidget();},onUnselect:function(){},createSurface:function(wi){var width=this.diagramNode.style.width;var _157b=this.diagramNode.style.height;this.surface=dojox.gfx.createSurface(this.diagramNode,width,_157b);},getCoordinate:function(pos){var _157c={x:0,y:0};this.diagramNodeCenterPosition=dojo.coords(this.diagramNode,true);_157c.x=pos.x-this.diagramNodeCenterPosition.x;_157c.y=pos.y-this.diagramNodeCenterPosition.y;if(_157c.x<0||_157c.y<0){return pos;}return _157c;},setSurfaceArea:function(_157d,_157e,_157f){var x=parseInt(_157d);var y=parseInt(_157e);if(_157f){var _1580=dojo.position(_157f);x=x+_1580.w;y=y+_1580.h;}if(x>this.surfaceArea.width){this.surfaceArea.width=x;}if(y>this.surfaceArea.height){this.surfaceArea.height=y;}},resetSurfaceArea:function(){var _1581=builder.Environment.editorArea;var _1582=builder.util.Util.coords(_1581.domNode);var width=_1582.w-this.borderWidth;var _1583=_1582.h-this.borderWidth;this.surfaceArea.width=width;this.surfaceArea.height=_1583;var _1584;var self=this;dojo.forEach(this.components,function(_1585){if(_1585.isSubComponent()&&!_1585.isAppPolicy()){return;}if(_1585.componentFrame&&_1585.componentFrame.getPosition){self.setSurfaceArea(_1585.componentFrame.getPosition().x,_1585.componentFrame.getPosition().y,_1585.componentFrame.domNode);}});this.setSurface();},setSurface:function(){this.diagramNode.style.width=this.surfaceArea.width+"px";this.diagramNode.style.height=this.surfaceArea.height+"px";if(this.surface){this.surface.setDimensions(this.surfaceArea.width,this.surfaceArea.height);}},getAttachedPolicies:function(){var _1586=[];dojo.forEach(this.components,function(_1587){if(_1587.isSubComponent()&&_1587.outgoingConnections.length==0){_1586.push(_1587);}});return _1586;},showPropertiesWidget:function(){this.showPolicyPropsWidget();},appPolicyWidget:null,addAppPolicy:function(e){if(this.readOnly){return;}if(this.appPolicyWidget&&this.appPolicyWidget.domNode){return;}this.appPolicyWidget=this.getAppPolicyWidget();this.appPolicyWidget.setLocation(e.pageX-10,e.pageY-10);this.appPolicyWidget.show();dojo.stopEvent(e);return false;},getAppPolicyWidget:function(){return new _1568();}});});},"builder/workbench/orderView/OrderUtil":function(){define(["dojo/_base/lang","dojo/query","dojo/NodeList-traverse","dojo/dom-attr","dojo/dom-construct","dijit/registry","paas/common/constants","builder/workbench/orderView/OrderConstants","dojo/topic","builder/vsys/util/VSysUtil","dojo/_base/array"],function(lang,query,_1588,_1589,_158a,_158b,_158c,_158d,topic,_158e,array){var _158f=lang.getObject("builder",true);var _1590=lang.getObject("workbench.orderView.OrderUtil",true,_158f);_1590={componentTypes:{image:"IMAGE",part:"PART",script_package:"SCRIPT_PACKAGE",addon:"ADDON"},getDefaultOrderData:function(){var _1591=[];var self=this;require(["dojo/_base/array"],function(array){array.forEach(_158f.Environment.diagram.components,function(_1592){var _1593=self.getComponentRootType(_1592.metadata.id);if(_1593==null){return;}if(self.compareTwoString(_1593,self.componentTypes.image)){_1591.push({image:_1592,subComponents:[_1592]});}});array.forEach(_158f.Environment.diagram.connections,function(_1594){if(_1594.metadata.id===_158c.HOSTED_ON_LINK){var _1595=_1594.source;var _1596=_1594.target;var _1597=self.getComponentRootType(_1595.metadata.id);var _1598=self.getComponentRootType(_1596.metadata.id);if(self.compareTwoString(_1597,self.componentTypes.script_package)&&self.scriptPackageCanBeOrdering(_1595.metadata)||self.compareTwoString(_1597,self.componentTypes.part)){if(!array.some(_1591,function(_1599){if(self.compareTwoString(_1599.image.id,_1596.id)){_1599.subComponents.push(_1595);return true;}})){}}}});});return _1591;},compareTwoString:function(type1,type2){return type1!=null&&type2!=null&&(type1.indexOf(type2)>-1)&&(type2.indexOf(type1)>-1);},getComponentRootType:function(id){var _159a=this.getMetadataService().getComponentMetadata(id);if(!_159a){return null;}if(_159a["extends"]&&_159a["extends"] instanceof Array){return arguments.callee.call(this,_159a["extends"][0]);}return _159a.id;},getMetadataService:function(){if(this.metadataService){return this.metadataService;}this.metadataService=_158f.util.Util.getMetadataService();return this.metadataService;},moveUp:function(frame){var divId=_1589.get(frame.domNode,"id");var _159b=query("#"+divId).prev();if(_159b.length===0){return;}var _159c=_159b[0];var _159d=_1589.get(_159c,"id");if(_159d.indexOf("PolicyFrame")<0){return;}var _159e=_158b.byId(_159d);if(frame.component.isDataDependsOn(_159e.component)){topic.publish("/builder/editor/notification",["warning","APPMODEL_TOOLING_MOVE_INVALID"]);return;}this.swapOrder(frame,_159e);frame.component.rePaintComponent();_159e.component.rePaintComponent();},moveDown:function(frame){var divId=_1589.get(frame.domNode,"id");var _159f=query("#"+divId).next();if(_159f.length===0){return;}var _15a0=_159f[0];var _15a1=_1589.get(_15a0,"id");if(_15a1.indexOf("PolicyFrame")<0){return;}var _15a2=_158b.byId(_15a1);if(_15a2.component.isDataDependsOn(frame.component)){topic.publish("/builder/editor/notification",["warning","APPMODEL_TOOLING_MOVE_INVALID"]);return;}this.swapOrder(_15a2,frame);frame.component.rePaintComponent();_15a2.component.rePaintComponent();},swapOrder:function(_15a3,_15a4){this.swapPosition(_15a3,_15a4);this.swapIndexInComponents(_15a3.component,_15a4.component);this.swapIndexInConnections(_15a3.component,_15a4.component);},swapPosition:function(_15a5,_15a6){_158a.place(_15a5.domNode,_15a6.domNode,"before");},swapIndexInComponents:function(_15a7,_15a8){var comps=_158f.Environment.diagram.components;var _15a9=-1,_15aa=-1;for(var i=0;i<comps.length;i++){if(comps[i]===_15a7){_15a9=i;}if(comps[i]===_15a8){_15aa=i;}if(_15a9>-1&&_15aa>-1){break;}}comps[_15a9]=_15a8;comps[_15aa]=_15a7;},swapIndexInConnections:function(_15ab,_15ac){var conns=_158f.Environment.diagram.connections;var _15ad=-1,_15ae=-1;for(var i=0;i<conns.length;i++){if(conns[i].source===_15ab&&conns[i].type===_158c.HOSTED_ON_LINK){_15ad=i;}if(conns[i].source===_15ac&&conns[i].type===_158c.HOSTED_ON_LINK){_15ae=i;}if(_15ad>-1&&_15ae>-1){break;}}var temp=conns[_15ad];conns[_15ad]=conns[_15ae];conns[_15ae]=temp;},scriptPackageCanBeOrdering:function(_15af){var _15b0=_158e.getJsonObjectByPath(_15af,"capabilities","provides","execution_mode");if(_15b0===_158d.INSTANCE_CREATION_OR_MANUAL||_15b0===_158d.INSTANCE_CREATION){return true;}return false;},canBeOrdering:function(_15b1){if(_15b1.readOnly===true){return false;}var _15b2=this.getComponentRootType(_15b1.metadata.id);if(_15b2===this.componentTypes.image){return false;}return true;},canBeDropdown:function(_15b3,_15b4){if(_15b3===_15b4){topic.publish("/ordering/notice",["info",_158f.Environment.messages.APPMODEL_ORDERING_LOOP_CIRCUIT]);return false;}if(_158e.isImage(_15b4.component.metadata)){topic.publish("/ordering/notice",["info",_158f.Environment.messages.APPMODEL_ORDERING_IMAGE_START_FIRST]);return false;}if(this._checkExistingPath(_15b3,_15b4)){topic.publish("/ordering/notice",["info",_158f.Environment.messages.APPMODEL_ORDERING_USELESS_LINK]);return false;}if(this._checkExistingPath(_15b4,_15b3)){topic.publish("/ordering/notice",["info",_158f.Environment.messages.APPMODEL_ORDERING_LOOP_CIRCUIT]);return false;}return true;},hasDataDependency:function(_15b5,_15b6){var _15b7=_15b6.properties;for(var prop in _15b7){var _15b8=_158e.getDataDependsOnComponentIDs(_15b7[prop]);if(_15b8&&_15b8 instanceof Array&&_15b8.length>0){if(array.indexOf(_15b8,_15b5.id)!==-1){return true;}}}return false;},_checkExistingPath:function(_15b9,_15ba){var _15bb=_15b9.flowOutConnections;for(var i=0;i<_15bb.length;i++){if(_15bb[i].toComponent.orderFrame===_15ba){return true;}}for(var j=0;j<_15bb.length;j++){if(arguments.callee.call(this,_15bb[j].toComponent.orderFrame,_15ba)){return true;}}return false;}};return _1590;});},"builder/command/AddComponentCommand":function(){define(["dojo/_base/declare","builder/base/command/Command","builder/service/PatternTypeService","builder/util/Util","builder/util/CommandFactoryUtil"],function(_15bc,_15bd,_15be,Util,_15bf){return _15bc("builder.command.AddComponentCommand",[_15bd],{componentId:null,component:null,layerId:null,invisible:false,hasLayer:true,componentType:null,constructor:function(_15c0,_15c1,_15c2){if(_15c2==true){this.invisible=true;}this.params=_15c0;this.componentType=_15c0.type;this.position=_15c1;if(this.params.isPreconfig){var _15c3=builder.Environment.diagram;var cs=builder.service.PatternTypeService.getComponentService(_15c3.patterntype,_15c3.version);var resp=cs.getComponentAttribute(this.params.component_id);if(resp&&resp.attributes){this.props=dojo.clone(resp.attributes);for(var i in this.props){if(this.props[i]==null){delete this.props[i];}}cs.cloneArtifacts(this.params.component_id,this.componentType,this.props,builder.Environment.diagram.appId);}}if(!this.props){this.props={};}},execute:function(){var _15c4=builder.Environment.diagram;var id=this.params.isPreconfig?null:this.params.id;var args={id:id,type:this.componentType,properties:this.props,position:this.position,groups:this.params.groups,metadata:this.params.metadata};var _15c5=_15c4.addComponentByType(args);this.componentId=_15c5.id;this.component=_15c5;var layer;if(this.hasLayer===true){if(!this.layerId){layer=_15c4.currentLayer;this.layerId=_15c4.currentLayer.id;}else{layer=_15c4.getLayerById(this.layerId);}layer.addComponent(_15c5);}if(!this.invisible){_15c5.showWidget(this.position);builder.service.AppBindingService.loadAppBinding(_15c5);_15c4.selectModel(_15c5);}if(layer&&!layer.enabled){_15c5.disable();}this.createAutoAttachPolicyIfAny();dojo.publish("onDiagramChanged",null);return _15c5;},undo:function(){var _15c6=builder.Environment.diagram.getComponentById(this.componentId);if(_15c6.layer){_15c6.layer.removeComponent(_15c6);}_15c6.remove();dojo.publish("onDiagramChanged",null);},createAutoAttachPolicyIfAny:function(){var _15c7=builder.util.Util.getMetadataService().getComponentPoliciesByType(this.component.metadata.id);for(var i=0;i<_15c7.length;i++){var _15c8=_15c7[i];if(_15c8.applicationPolicy){continue;}if(_15c8.display&&_15c8.display.autoAttach){var cmd=new _15bf.getCommmandFactory().getAddPolicyCommand(_15c8.id,this.component);builder.Environment.commandStack.executeCommand(cmd);}}},canExecute:function(){if(!builder.Environment.diagram.currentLayer){return false;}if(!builder.Environment.diagram.currentLayer.enabled){dojo.publish("/builder/editor/notification",[["info","APPMODEL_TOOLING_COMPONENT_CANNOT_ADD"]]);return false;}if(builder.Environment.diagram.currentLayer.isReferenced()){dojo.publish("/builder/editor/notification",[["info","BUILDER_LAYER_REFERENCE_NO_ADD"]]);return false;}return this.inherited(arguments);}});});},"builder/command/ChangePropertyCommand":function(){define(["dojo/_base/declare","builder/base/command/Command"],function(_15c9,_15ca){return _15c9("builder.command.ChangePropertyCommand",[_15ca],{modelId:null,propertyId:null,newValue:null,oldValue:null,constructor:function(model,_15cb,_15cc,_15cd){this.model=model;this.modelId=model.id;this.propertyId=_15cb;this.oldValue=_15cc;this.newValue=_15cd;},execute:function(){var model=this._getModel();dojo.publish("onDiagramChanged");dojo.publish("onPropertyChanged",[[model.id,this.propertyId,this.newValue]]);if(model.fromComponent){dojo.publish("onReferencesChanged",[model.fromComponent.id,this.modelId,this.propertyId]);}},undo:function(){var model=this._getModel();dojo.publish("onDiagramChanged");dojo.publish("onPropertyChanged",[[model.id,this.propertyId,this.oldValue]]);if(model.fromComponent){dojo.publish("onReferencesChanged",[model.fromComponent.id]);}},canExecute:function(){return true;},_getModel:function(){return (builder&&builder.Environment&&builder.Environment.diagram&&builder.Environment.diagram.getModelById(this.modelId))||this.model;}});});},"builder/workbench/property/ComponentPropertiesWidget":function(){define(["dojo/_base/declare","builder/workbench/property/ReferencePropertiesWidget","builder/util/FileUtil","builder/util/ValidationUtil","builder/command/ChangeComponentNameCommand"],function(_15ce,_15cf,_15d0,_15d1,_15d2){return _15ce("builder.workbench.property.ComponentPropertiesWidget",[_15cf],{nameWidget:null,displayName:true,isLockVisible:true,supportRemoteFile:true,createTitleWidget:function(){var _15d3=this.model.metadata;this._setTitleAttr(_15d3.label);this.titleImageNode.src=_15d0.getComponentIconPath(_15d3.thumbnail);},_setTitleAttr:function(title){var _15d4=builder.util.Util.splitName(title);var _15d5=_15d4.shortName?_15d4.shortName:"";var _15d6=_15d4.longName?_15d4.longName:"";if(_15d6){this.titleNameNode.innerHTML="<div>"+_15d5+"</div> <div class='longName'>"+_15d6+"</div>";}else{this.titleNameNode.innerHTML="<div style='padding-top:5px'>"+_15d5+"</div>";}},createNameWidget:function(){if(!this.displayName){return;}var _15d7={id:"name",label:builder.Environment.messages.COMPONENT_PROP_WIDGET_CREATE_NAME_LABEL,type:"string",required:"true"};var _15d8={"name":this.model.id};this.nameWidget=new builder.workbench.property.PropertyWidget({metadata:_15d7,properties:_15d8,model:this.model});this.nameWidget.validatePropertyChange=dojo.hitch(this,"_validateNameChange");this.nameWidget.getChangePropertyCommand=dojo.hitch(this,function(){return new _15d2(this.model.id,this.nameWidget.getPropertyValue());});var table=dojo.create("table",{role:"presentation"},this.nameNode);var tbody=dojo.create("tbody",null,table);tbody.appendChild(this.nameWidget.domNode);this.nameNode.style.display="";var index=this.model.id.indexOf(":");if(index>0){var name=this.model.id.substring(index+1);this.nameWidget.validatePropertyChange=function(){return false;};this.setName(name);var _15d9=document.createElement("div");dojo.style(_15d9,{"paddingLeft":"3px","marginTop":"3px"});_15d9.innerHTML="<span class='boldFont'>From</span>:&nbsp;&nbsp;"+this.model.layer.id;this.nameNode.appendChild(_15d9);}return this.nameWidget;},setName:function(name){this.nameWidget.setPropertyValue(name);},_validateNameChange:function(){var _15da=this.nameWidget;var _15db=_15da.getPropertyValue();if(this.model.id===_15db){return false;}if(!_15da.isInputValid()){_15da.setPropertyValue(this.model.id);dojo.publish("/builder/property/notification",[["info","APPMODEL_TOOLIGN_ATTRIBUTE_INVALID",builder.Environment.messages.NAME,_15db,this.model.id]]);return false;}var _15dc=_15d1.componentNameCheck(builder.Environment.diagram.components,this.model,_15db);if(_15dc.isValid===false){_15da.setPropertyValue(this.model.id);dojo.publish("/builder/property/notification",[["info",_15dc.messager]]);return false;}return true;}});});},"builder/vsys/command/OrderCommandMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array"],function(_15dd,lang,array){return _15dd("builder.vsys.command.OrderCommandMixin",null,{updateStartsAfter:function(_15de,_15df){this.componentsUpdatedForStartsAfter={};var _15e0=builder.Environment.diagram.components;array.forEach(_15e0,lang.hitch(this,function(_15e1){if(_15e1.startsAfter){var sa=_15e1.startsAfter;this.componentsUpdatedForStartsAfter[_15e1.id]=lang.clone(sa);for(var i=0;i<sa.length;i++){if(sa[i].id===_15de){break;}}if(_15df){sa[i].id=_15df;}else{sa.splice(i,1);if(sa.length===0){delete sa;}}}}));},restoreStartsAfter:function(){var _15e2=builder.Environment.diagram.components;array.forEach(_15e2,lang.hitch(this,function(_15e3){if(this.componentsUpdatedForStartsAfter[_15e3.id]){_15e3.startsAfter=lang.clone(this.componentsUpdatedForStartsAfter[_15e3.id]);}}));}});});},"url:paas/widgets/templates/DateTimeTextBoxExt.html":"<div>\n\n\t\n\t\t<div>\n\t\t      <div dojoType=\"dijit.form.TimeTextBox\" dojoattachpoint='timeWidget'></div><br><br>\n\t  \t\t  <div dojoType=\"dijit.form.DateTextBox\" dojoattachpoint='dateWidget'></div>\n\t\t\t  \n\t\t</div>\n\n</div>\n","url:builder/workbench/templates/ImportDialog.html":"<div>\n\t<div dojoType=\"dijit.Dialog\" class=\"templateDialog importAsLayerDialog\" dojoAttachPoint=\"theDialog\" title=\"${dialog_top_title}\">\n\n\t\t<div>\n\t\t\t\n\t\t\t<div class=\"tableTitle\">${dialog_title}</div>\n\t\t\t<span>${dialog_subtitle}</span>\n\t\t\t\n\t\t\t<div class=\"vertical_white_space_20\"></div>\n\t\t\t    \t  \n\t\t\t<div dojoType=\"dojox.layout.ContentPane\" renderStyles=\"true\" class=\"templateContentPane\">\n\t\t\t\t<div dojoType=\"dijit.layout.BorderContainer\" design=\"headline\" liveSplitters=\"true\" dojoAttachPoint=\"dlgContent\">\n\t\t\t\t\t\n\t\t\t\t\t<div dojoType=\"dijit.layout.ContentPane\" splitter=\"true\" region=\"leading\" class=\"leadingRegion\">\n\t\t\t\t\t\t<div dojoAttachPoint=\"templateGridInHTML\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t<div dojoType=\"dijit.layout.ContentPane\" splitter=\"true\" region=\"center\" class=\"centerRegion\">\n\t\t\t\t\t\t<div style=\"height: 20px;\">\n\t\t\t\t\t\t\t<div class=\"detailsLabel\" dojoAttachPoint=\"detailsLabel\" style=\"display: none\"\n\t\t\t\t\t\t\tdojoAttachEvent=\"onmouseover: showDetails, onmouseout: hideDetails\">\n\t\t\t\t\t\t\t\t${dialog_details}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"details\" dojoAttachPoint=\"details\" style=\"display: none\"></div>\t\t\t\n\t\t\t\t\t\t<div class=\"informationTable\" dojoAttachPoint=\"informationTable\"></div>\n\t\t\t\t\t\t<div class=\"previewTable\" dojoAttachPoint=\"previewTable\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t        \t\n\t\t\t\t\n\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div dojoType=\"dijit.layout.ContentPane\" region=\"bottom\" class=\"buttonBar\" style=\"border: 0px\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<table role=\"presentation\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<button dojotype='dijit.form.Button' dojoAttachPoint=\"importBtn\" dojoAttachEvent=\"onClick:importApplication\">${dialog_ok}</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<button dojotype='dijit.form.Button' dojoAttachPoint=\"cancelBtn\" dojoAttachEvent=\"onClick:hideImportDialog\">${dialog_cancel}</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t</div>\n\n\n\n</div>\n","url:builder/workbench/linksView/templates/ListCollapsibleSection.html":"<div>\n   <div>\n      <img dojoAttachPoint=\"stateIcon\" style=\"position: relative; top: 3px; cursor: pointer;\"/>\n      <span class=\"boldFont\" style=\"padding-left: 6px;\">${label}</span>\n   </div>\n   <div dojoAttachPoint=\"containerNode\" style=\"padding: 5px 5px 5px 50px;\">\n      <table dojoAttachPoint=\"contentTable\" style=\"margin: 0px 0px 0px 0px; border-collapse: collapse;\">\n      </table>\n      <img dojoAttachPoint=\"addRowButton\" src=\"/tooling/images/add.gif\" style=\"cursor: pointer; padding-top: 5px; visibility:hidden\"/>\n   </div>\n\n</div>\n","url:builder/workbench/templates/MessageBoxWidget.html":"<div class=\"message-box-widget\" dojoAttachPoint=\"background\" style=\"display: none;\">\n\t<table style=\"width: 100%;\" role=\"presentation\"><tbody>\n    \t<tr>\n    \t\t<td style=\"width: 16px;\">\n\t\t\t\t<div dojoAttachPoint=\"msgPaneIcon\"></div>\n\t\t\t</td>\n\t\t\t<td data-dojo-attach-point=\"textTd\">\n\t\t\t\t<div class=\"message-box-text\" dojoAttachPoint=\"msgPaneText\"></div>\n\t\t\t</td>\n\t\t\t<td style=\"width: 20px;\">\n\t\t\t\t<div class=\"close-link\" dojoAttachEvent=\"onclick: hideMessagePane, onkeypress: hideMessagePaneKeyPress\" tabindex=\"0\">\n\t\t\t\t\t${closebtn_title}\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n    </tbody></table>\n\t\n</div>\n","url:builder/workbench/palette/templates/CategoryPaletteFolder.html":"<div>\n\t<div data-dojo-attach-event=\"ondijitclick:_onTitleClick, onkeydown:_onTitleKey\"\n\t\t\tclass=\"dijitTitlePaneTitle dijitTitlePaneTitle\" data-dojo-attach-point=\"titleBarNode\" id=\"${id}_titleBarNode\">\n\t\t<div class=\"dijitTitlePaneTitleFocus\" data-dojo-attach-point=\"focusNode\">\n\t\t\t<table cellpadding=\"0\" cellspacing=\"0\" with=\"100%\" role=\"presentation\">\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td><span data-dojo-attach-point=\"arrowNode\" class=\"dijitInline dijitArrowNode\" role=\"presentation\"></span></td>\n\t\t\t\t\t\t<td><span data-dojo-attach-point=\"iconNode\"></span></td>\n\t\t\t\t\t\t<td><span data-dojo-attach-point=\"arrowNodeInner\" class=\"dijitArrowNodeInner\"></span></td>\n\t\t\t\t\t\t<td><div data-dojo-attach-point=\"titleNode\" class=\"dijitTitlePaneTextNode\"></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\t<div class=\"dijitTitlePaneContentOuter\" data-dojo-attach-point=\"hideNode\" role=\"presentation\">\n\t\t<div class=\"dijitReset\" data-dojo-attach-point=\"wipeNode\" role=\"presentation\">\n\t\t\t<div class=\"dijitTitlePaneContentInner\" data-dojo-attach-point=\"containerNode\" role=\"region\" id=\"${id}_pane\" aria-labelledby=\"${id}_titleBarNode\">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n</div>\n","url:paas/widgets/templates/MappingDeleteDialog.html":"<div>\n\t<div dojoType=\"paas.widgets.Dialog\" dojoAttachPoint=\"theDialog\" title=\"${app_deploy_dialog_title}\" description=\"${app_deploy_dialog_description}\">\n\t\t<div dojoAttachPoint=\"possibleMappingsToComp\">\n\t\t\t<table style=\"width: 100%; padding: 5px 10px;\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div dojoAttachPoint=\"possibleMappingsFromComp\" style=\"font-weight: bold\"></div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div dojoAttachPoint=\"possibleMappingsToComp\" style=\"font-weight: bold\"></div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t<div dojoAttachPoint=\"possibleMappingsDiv\" dojoType=\"\">\n\t\t\t\n\t\t</div>\n\t\t\n\n\n</div>\n","url:builder/workbench/componentsView/templates/ComponentOperation.html":"<tr>\n   <td>\n      <table dojoAttachPoint=\"nameColumn\"           style=\"width: 280px; margin: 0px 0px 0px  0px; border-collapse: collapse; float: left;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"implementationColumn\" style=\"width: 400px; margin: 0px 0px 0px 30px; border-collapse: collapse; float: left;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"deleteColumn\"         style=\"width:  60px; margin: 0px 0px 0px  30px; border-collapse: collapse; float: left;\"></table>\n   </td>\n\n</tr>\n","url:builder/workbench/editor/templates/Help.html":"<div class=\"helpDialog\">\n<div dojoType=\"builder.workbench.editor.FloatingPane\" dojoAttachPoint=\"floatingPane\" title=\"${helpDialogTitle}\"  dockable=\"false\" resizable=\"true\">\n\t\n\t<div class=\"infoCenterContainer\">\n\t     <div class=\"infoCenter\" >\n\t\t   <a class=\"icon icon-btn icon-arrows icon-fw-bold\" dojoAttachPoint=\"infocenterLink\" style=\"display:none;\"\n\t\t\t   target=\"_blank\">${infoCenterTitle}</a>\n\t\t\t   \n\t     </div>\n\t</div>\n\t\n\t<div dojoAttachPoint=\"startContent\" style=\"display:none\">\n\t    <div class=\"loadingImage\">\n\t        <span class='wca-image-cloud-progress-indicator-middle-icon' style='display:inline-block'></span>\n        </div>\n\t    <div class='loadingText'>${loadingHelpText}</div>\n\t</div>\n\t\n\t<div dojoAttachPoint=\"errorContent\" class=\"errorContent\" style=\"display:none;\">\n\t       ${errorHelpContent}\n    </div>\n\t\n\t<div dojoAttachPoint=\"helpContent\" class=\"helpContent\">\t\n\t\n\t\t<div class=\"helpInformation\">\t\n\t\t\t<div class=\"title\" dojoAttachPoint=\"contentTitle\"></div>\n\t\t\t\n\t\t\t<div dojoAttachPoint=\"description\"></div>\n\t\t\t<div dojoAttachPoint=\"descAddition\" style=\"padding-left:20px;\"></div>\n\t\t\t\t\t\n\t\t\t<div dojoAttachPoint=\"standardInfo\">\n\t\t\t\t<div dojoType=\"dijit.TitlePane\" open=\"true\" title=\"${commonProperty}\">\n\t\t\t\t\t<div dojoAttachPoint=\"commonPropertyContainer\"></div>\n\t\t\t\t</div>\t\n\t\t\t\t<div style=\"display: none\" open=\"false\" dojoType=\"dijit.TitlePane\" dojoAttachPoint=\"groupCategoryContainer\" title=\"${groupCategory_header}\">\n\t\t\t\t\t<div dojoAttachPoint=\"groupCategoryContentNode\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t\t\n\t\t\t<div dojoAttachPoint=\"customizedInfo\" style=\"display: none\"></div>\n\t\t\t\n\t\t\t<div dojoAttachPoint=\"policies\" style=\"display: none\">\n\t\t\t\t<div dojoType=\"dijit.TitlePane\" open=\"false\" title=\"${policiesTitle}\">\n\t\t\t\t\n\t\t\t\t\t<table class=\"connectionTable\" style=\"width:680px;border-color:Black;\" dojoAttachPoint=\"policiesTable\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th width=\"160\">${policyName}</th>\n\t\t\t\t\t  \t\t<th width=\"450\">${policyDesc}</th>\n\t\t\t\t\t \t</tr>\t\t\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div dojoAttachPoint=\"applicableComponents\" style=\"display: none\">\n\t\t\t\t<div dojoType=\"dijit.TitlePane\" open=\"false\" title=\"${applicableComponentsTitle}\">\n\t\t\t\t\t\n\t\t\t\t\t<table class=\"connectionTable\" dojoAttachPoint=\"applicableComponentsTable\" style=\"width:680px;border-color:Black;\" >\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t  \t\t<th width=\"200\">${componentName}</th>\n\t\t\t\t\t  \t\t<th width=\"420\">${componentDesc}</th>\n\t\t\t\t\t \t</tr>\t\t\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div dojoAttachPoint=\"connections\">\n\t\t\t\t<div dojoType=\"dijit.TitlePane\" open=\"false\" title=\"${connetionsTitle}\">\n\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t<table class=\"connectionTable\" dojoAttachPoint=\"incomingConnectionsTable\" style=\"width:680px;border-color:Black;\" >\n\t\t\t\t\t\t<tr class=tableTitle>\n\t\t\t\t\t\t\t<td colspan=2 align=\"center\">${incomingTitle}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t  \t\t<th width=\"160\">${incomingName}</th>\n\t\t\t\t\t  \t\t<th width=\"450\">${incomingDesc}</th>\n\t\t\t\t\t \t</tr>\t\t\n\t\t\t\t\t</table>\n\t\t\t\t\t<br/>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t<table class=\"connectionTable\" dojoAttachPoint=\"outgoingConnectionsTable\" style=\"width:680px;border-color:Black;\" >\n\t\t\t\t\t\t<tr class=tableTitle>\n\t\t\t\t\t\t\t<td colspan=2 align=\"center\">${outgoingTitle}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t  \t\t<th width=\"160\">${outgoingName}</th>\n\t\t\t\t\t  \t\t<th width=\"450\">${outgoingDesc}</th>\n\t\t\t\t\t \t</tr>  \t\t\n\t\t\t\t\t</table>\n\t\t\t\t\t<br/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\t\n</div>\n\n\n</div>\n","url:builder/workbench/listView/templates/ListItem.html":"<div style=\"width:100%; margin:5px;\">\n\t<table class=\"title\" dojoAttachPoint=\"titleArea\" role=\"presentation\">\n\t\t<tbody>\n\t\t\n\t\t<tr>\n\t\t\t<td width='20px'>\n\t\t<a dojoAttachPoint='toggleNode' dojoAttachEvent=\"onclick:changeDisplay\">\n\t\t<img dojoattachpoint=\"toggleImageNode\" alt=${image_alt}></img></a>\n        </td>\n\t\t<td width='20px'>\n\t\t<span class=\"titleImagePane\" style=\"display:''\">\n            <img width=\"20px\" height=\"20px\" dojoAttachPoint=\"titleImageNode\"></img>\n        </span>\n\t\t</td>\n\t\t<td width='520px'>\n\t\t<span dojoAttachPoint=\"titleNameNode\" class=\"titleText\"></span>\t\n\t\t</td>\n\t\t<td width='24px'>\n\t\t<span dojoAttachPoint=\"validIconNode\" alt=\"${attention_normal}\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n\t\t</td>\n\t\t<td width='16px'>\n\t\t   <a dojoAttachPoint=\"lockNode\"  dojoAttachEvent=\"onclick:onLockChange\" style=\"display: none\">\n\t\t   \t   <span dojoAttachPoint=\"lockImgNode\" class=\"wca-image-lock-icon\" title=${image_alt} style=\"display:inline-block\"></span>\n\t\t   </a>\n\t\t</td>\n\t\t<td>\n\t\t<div class=\"helpBtn\" dojoattachpoint=\"helpBtnContainer\">\n\t\t</div>\n\t\t</td>\n\t\t</tr>\n\t\t</tbody>\n    </table>\n\t<div dojoAttachPoint='tc, nameNode' style=\"width:100%;\">\n\t</div>\n\n\t\n</div>","url:builder/workbench/layer/templates/LayerPalette.html":"<div class=\"layerPanel fullVertical\">\n    <div dojoType=\"dijit.layout.BorderContainer\" splitter=\"false\" class=\"fullVertical\">\n        <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" class=\"fullHorizontal\">\n           \n            <div class=\"control_panel_title\">\n                <span style=\"float:left;\">${layerTitle}</span>\n\t\t\t\t<a dojoattachpoint=\"helpBtn\" title=\"${helpTitle}\" style=\"float: right; margin-right: 15px;\">\n                \t<img dojoAttachPoint=\"helpImgNode\" alt=\"${helpTitle}\" src=\"/tooling/images/help_normal.png\">\n                 </a>\n            </div>\n\t        <div class=\"layer_section\" >\n\t            <div dojoType=\"dijit.Toolbar\" aria-label=\"toolbar\">\n\t            \t<span dojotype=\"dijit.form.Button\" dojoAttachPoint=\"addBtn\" label=\"${newLabel}\" \n\t            \t\tshowLabel=\"false\" iconClass=\"toolbarIcon new_layer\" title=\"${newTitle}\" >\n\t            \t</span>\n\t            \t<span dojoType=\"dijit.ToolbarSeparator\"></span>\n\t            \t<span dojotype=\"dijit.form.Button\" dojoAttachPoint=\"importBtn\" title=\"${importTitle}\"\n\t            \t\tlabel=\"${importLabel}\" showLabel=\"false\" iconClass=\"toolbarIcon new_reference_layer\" >\n\t            \t</span>\n\t            \t<span dojoType=\"dijit.ToolbarSeparator\"></span>\n\t            \t<span dojotype=\"dijit.form.Button\" dojoAttachPoint=\"delBtn\" label=\"${delLabel}\" \n\t            \t\tshowLabel=\"false\" iconClass=\" toolbarIcon trash\" title=\"${delTitle}\" >\n\t            \t</span>\n\t            </div>\n\t        </div>\n        </div>\n        <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" class=\"fullHorizontal layerPaletteContainer\">\n            <div dojoAttachPoint=\"paletteContainer\" >\n            </div>\n        </div>\n    </div>\n    \n</div>\n","url:paas/widgets/templates/MappingDialog.html":"<div>\n\t<div dojoType=\"paas.widgets.Dialog\" dojoAttachPoint=\"theDialog\" style=\"width:600px;\" title=\"${app_deploy_dialog_title}\" description=\"${app_deploy_dialog_description}\">\n\t\t<table style=\"width: 500px;padding: 0px;border-collapse: collapse;\" border=\"0\" role=\"presentation\">\n\t\t\t<tr>\n\t\t\t\t<td width=\"35%\">\n\t\t\t\t\t<table style=\"width: 100%\" role=\"presentation\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td width=\"30%\">\n                                <div style=\"display: inlline\"><img style='height:30px; width:30px;' dojoAttachPoint=\"fromCompTitleImageNode\" alt=\".\"></img></div>\n                            </td>\n\t\t\t\t\t\t\t<td width=\"70%\">\n                                <div dojoAttachPoint=\"possibleMappingsFromComp\" style=\"font-weight: bold;display: inline\"></div>\n                            </td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</td>\n\t\t\t\t<td width=\"10%\">\n                </td>\n                <td width=\"35%\">\n                    <table style=\"width: 100%\" role=\"presentation\">\n                        <tr>\n                            <td width=\"30%\">\n                                <div style=\"display: inlline\"><img style='height:30px; width:30px;' dojoAttachPoint=\"toCompTitleImageNode\" alt=\".\"></img></div>\n                            </td>\n                            <td width=\"70%\">\n                                <div dojoAttachPoint=\"possibleMappingsToComp\" style=\"font-weight: bold;display: inline\"></div>\n                            </td>\n                        </tr>\n                    </table>\n                </td>\n\t\t\t\t<td width=\"20%\">\n                </td>\n\t\t\t</tr>\n\t\t\t<tr style=\"background-color: #F1F8FF; outline: thin solid; outline-color: #C9C9C9;\">\n\t\t\t\t<td width=\"35%\">\n\t\t\t\t\t<select style=\"padding: 0px;border-collapse: collapse;\" dojoType=\"dijit.form.FilteringSelect\"  dojoAttachPoint=\"selectSourceAttr\" data-dojo-props=\"bidiSupport:true, searchAttr:'name'\" placeHolder=\"${sourcePH}\">\n                    </select>\n\t\t\t\t</td>\n\t\t\t\t<td width=\"10%\" align=\"center\">\n                    <div style=\"position: relative;vertical-align: center;horizontal-align: center\" ><img src='/images/patterncomponent/pc-arrow-sharp.png'/></div>\n                </td>\n                <td width=\"35%\">\n                \t<select style=\"padding: 0px;border-collapse: collapse;\" dojoType=\"dijit.form.FilteringSelect\"  dojoAttachPoint=\"selectTargetAttr\" data-dojo-props=\"bidiSupport:true, searchAttr:'name'\" placeHolder=\"${targetPH}\">\n                        \n                    </select>\n                </td>\n\t\t\t\t<td width=\"20%\" style=\"text-align: center;\">\n                    <input dojoType=\"dijit.form.Button\" dojoAttachPoint=\"addButton\" dojoAttachEvent=\"onClick:addEntry\" title=\"${mapping_button}\" />\n                </td>\n\t\t\t</tr>\n\t\t\t<tr style=\"height:10px;\">\n\t\t\t</tr>\n\t\t</table>\n\t\t<div>\n\t\t\t<table style=\"width: 500px;padding: 0px;border-collapse: collapse;\" border=\"0\" dojoAttachPoint=\"possibleMappingsDiv\" role=\"presentation\">\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\n\n</div>\n","url:paas/widgets/templates/FileSelectDialog.html":"<div>\n\n<div dojoType=\"paas.widgets.Dialog\" title=\"${dialogTitle}\" style=\"display: none; background-color:window;\" dojoattachpoint='theDialog'>\n    <div dojoType=\"dijit.layout.TabContainer\"  dojoattachpoint=\"fileSelectTabContainer\" style=\"width:430px;height:200px\">\n        <div dojoType=\"dijit.layout.ContentPane\" title=\"${local_upload_title}\" dojoattachpoint=\"uploadtab\">\n            \n            <form enctype=\"multipart/form-data\" dojoattachpoint=\"localForm\" method=\"post\">\n\t\t\t<table role=\"presentation\" class=\"patterntype-dialog-table\">\n                <tbody>\n                \t<tr> <td><label for=\"${id}_fileInput\">${local_upload_hint}</label>\n\t\t\t\t\t<br>\n\t\t\t\t\t${file_upload_warning}</td></tr>\n                    <tr>\n                        <td style=\"vertical-align:top\">\n                            <div class=\"dialogUploadInputField\">\n                                <input id=\"${id}_fileInput\" dojoType=\"paas.widgets.FileInputExt\" dojoattachpoint=\"fileInput\" triggerEvent='onchange' \n\t\t\t\t\t\t\t\t duration=\"1\" required=\"true\" style=\"width: 300px;\" name='${name}'/>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n\t\t\t</form>\n        </div>\n        <div dojoType=\"dijit.layout.ContentPane\" title=\"HTTP/HTTPS\" dojoattachpoint=\"urltab\">\n        \t<form dojoType=\"dijit.form.Form\" dojoattachpoint=\"remoteForm\">\n            <table role=\"presentation\" class=\"patterntype-dialog-table\">\n                <tbody>\n                \t<tr> <td colspan='3'>${remote_path_hint}</td></tr>\n                    <tr>\n                        <td>\n                            <span title=\"Information is required\" class=\"default requireShow\">*</span>\n                        </td>\n                        <td>\n                            <span><label for=\"${id}_url\">${url_label}</label></span>\n                        </td>\n                        <td>\n                            <div id=\"${id}_url\" dojoattachpoint=\"url\" dojoType=\"dijit.form.ValidationTextBox\" class=\"modal-extension-dialog-text\" \n\t\t\t\t\t\t\tstyle=\"border: 1px solid #C3D9FF;padding: 2px;width: 274px;\" required=\"true\" \n\t\t\t\t\t\t\tinvalidMessage=\"<%= message(user.lang[], 'RM10001', []) %>\" name=\"url\"/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                        </td>\n                        <td>\n                            <span><label for=\"${id}_userId\">${user_name_label}</label></span>\n                        </td>\n                        <td>\n                            <div id=\"${id}_userId\" dojoattachpoint=\"userId\" dojoType=\"dijit.form.ValidationTextBox\" class=\"modal-extension-dialog-text\" \n\t\t\t\t\t\t\tstyle=\"border: 1px solid #C3D9FF;padding: 2px;width: 274px;\" name=\"userid\"/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                        </td>\n                        <td>\n                           <span><label for=\"${id}_password\">${password_label}</label></span>\n                        </td>\n                        <td>\n                            <div id=\"${id}_password\" dojoattachpoint=\"password\" dojoType=\"dijit.form.ValidationTextBox\" type=\"password\" class=\"modal-extension-dialog-text\" \n\t\t\t\t\t\t\tstyle=\"border: 1px solid #C3D9FF;padding: 2px;width: 274px;\" name=\"password\"/>\n                        </td>\n                    </tr>\n\t\t\t\t\t<tr>\n                        <td>\n                        </td>\n                        <td>\n                           <span><label for=\"${id}_downloadBox\">${download_label}</label></span>\n                        </td>\n                        <td>\n                            <div id=\"${id}_downloadBox\" dojoattachpoint=\"downloadBox\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" checked=true name=\"download\"/>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n\t\t\t</form>\n        </div>\n    </div>\n</div>\n</div>","url:builder/workbench/editor/templates/LinkablePolicyFrame.html":"\t<div class=\"containerFrame_policyItem\" tabindex=\"0\" class=\"hideOutline containerFrame\">\n        <div dojoAttachPoint=\"contentContainer\" class=\"containerFrame_outer\">\n\n\t\t\t<div dojoAttachPoint=\"portContainer\" class=\"containerFrame_port\">\n\t    \t</div>\n\t\t\n\t\n\t\t    <div align=\"right\">\n\t\t        <div dojoType=\"dijit.Toolbar\" dojoAttachPoint=\"toolbar\" class=\"toolbar\" style=\"height:14px;display: none;\">\n\t\t        </div>\n\t\t    </div>\n\t\t    \n\t\t    <table style=\"width: 100%;margin: 2px 0px;\">\n\t\t        <tbody>\n\t\t            <tr>\n\t\t            \t<td style=\"height: 24px; width: 32px;\">\n\t\t                \t<img style=\"height: 24px; width: 24px; float:left\" dojoAttachPoint=\"imgNode\" />\n\t\t                </td>\n\t\t                \n\t\t                <td>\n\t\t                    <div dojoType=\"dijit.InlineEditBox\" dojoAttachPoint=\"nameNode\" class=\"inlineEditor\" style=\"max-width: 152px;\">\n\t\t                    </div>\n\t\t                    <div dojoAttachPoint=\"versionFilter\" data-dojo-type=\"dijit/form/Select\" style=\"width:70px\">\n                            </div>\n\t\t                </td>\n\t\t                \n\t\t            </tr>\n\t\t        </tbody>\n\t\t    </table>\n\t\t    <div align=\"right\">\n\t\t        <div dojoType=\"builder.workbench.editor.LayerItem\" dojoAttachPoint=\"layerNode\" style=\"height:20px;\">\n\t\t        </div>\n\t\t\t\t<span dojoAttachPoint=\"statusContainer\"   style=\"display: none; vertical-align: middle; cursor: pointer;\">\n\t\t\t\t    <span class=\"wca-image-attention-normal-icon\" title=\"${attention_normal}\" style=\"display:inline-block\"></span>\n\t\t\t\t</span>\n\t\t    </div>\n\t\t    <div dojoAttachPoint=\"disablePolicy\" class=\"wca-image-warning-icon\" style=\"vertical-align: bottom; alignment-adjust: right; display:none\" title=\"This policy is disabled\">\n\t    \t</div>\n\t    </div>\n\t    \n\t</div>\n","url:paas/widgets/templates/_FileContentSelectDialog.html":"<div>\n\n\t<div dojoType=\"paas.widgets.Dialog\" dojoAttachPoint=\"dialog\" title=\"${select_file_title}\">\n\t\t<div style=\"margin:20px 10px 10px 10px;\">\n\t\t\t<span>${message}</span>&nbsp;&nbsp;\n\t\t\t<input dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"contentLinkCheckbox\" type=\"checkbox\"/>\n\t\t</div>\n\t\t<span dojoAttachPoint=\"fileInputNode\" style=\"position:absolute; left:42px; top:45px;\">\n\t\t\t\n\t\t</span>\n\t</div>\n</div>","url:paas/widgets/templates/ScalingPolicyBadgeWidget.html":"<div dojoAttachPoint=\"vsysOuterDisplayNode\" dojoAttachEvent=\"onclick:showPolicyWidget\" class=\"badge\">\n\n        \t\t\t\t\n\t\t\t\t\t\n</div>","url:builder/workbench/templates/SaveDialog.html":"<div class=\"tundra\">\n\t<div dojoType=\"dijit.Dialog\" dojoAttachPoint=\"theDialog\" title=\"\">\n\t  <table role=\"presentation\" width=\"100%\">\n\t  <tr><td><div class=\"saveDialogMsg\" dojoAttachPoint=\"msgBox\" style=\"display:none;\"></div></td></tr>\n\t  <tr style=\"margin:10px 0px 0px 0px\">\n\t  \t<td width=\"20px\"><span style=\"color: red; padding-right: 3px\">*</span><label for=\"${id}_modelName\">${dialogname}</label></td>\n\t  </tr>\n\t  <tr style=\"margin:10px 0px 0px 0px\"> \n\t  \t<td align=\"left\">\n\t\t  \t<input id=\"${id}_modelName\" dojoAttachPoint=\"modelName\" type=\"text\" \n\t\t\tdojoType=\"paas.widgets.ValidationTextBox\" model=\"'application.tooling'\" field_id=\"'modelName'\" \n\t\t\ttrim=\"true\" align=\"right\" style=\"width:26em\" required=\"true\"></input>\n\t\t\t\n\t  \t</td>\n\t  </tr>\n\t  <tr style=\"margin:10px 0px 0px 0px\" dojoAttachPoint=\"versionLabelTr\">\n\t  \t<td width=\"20px\"><span style=\"color: red; padding-right: 3px\">*</span><label for=\"${id}_modelName\">${dialogVersion}</label></td>\n\t  </tr>\n\t  <tr style=\"margin:10px 0px 0px 0px\" dojoAttachPoint=\"versionTr\"> \n\t  \t<td align=\"left\">\n\t\t  \t<input id=\"${id}_modelVersion\" dojoAttachPoint=\"modelVersion\" type=\"text\" \n\t\t\tdojoType=\"paas.widgets.ValidationTextBox\" model=\"'application.tooling'\" field_id=\"'modelVersion'\" \n\t\t\ttrim=\"true\" align=\"right\" style=\"width:26em\" required=\"true\"></input>\n\t  \t</td>\n\t  </tr>\n\t  <tr style=\"margin:10px 0px 0px 0px\">\n\t  \t<td width=\"20px\"><label for=\"${id}_description\">${dialogdescription}</label></td>\n\t  </tr>\n\t  <tr style=\"margin:10px 0px 0px 0px\" align=\"left\">\n\t  \t<td align=\"left\"><textarea id=\"${id}_description\" dojoAttachPoint=\"description\" rows=\"3\"\n\t\t\t dojoType=\"paas.widgets.ValidationSimpleTextAreaExt\" model=\"'application.tooling'\" field_id=\"'modelDescription'\" \n\t\t\t style=\"padding:0px !important; border:1px solid #B3B3B3; font-family:sans-serif; font-size:100%; width:26em;margin:0 0.1em;\"></textarea></td>\n\t  </tr>\n\t  <tr style=\"margin:10px 0px 0px 0px\">\n\t  \t<td colspan=2>\n\t  \t\t<input id=\"${id}_save_as_template\" dojoAttachPoint=\"saveAsTemplate\" dojoType=\"dijit.form.CheckBox\" name=\"saveAsTemplate\" value=\"template\" type=\"radio\"/>\n\t  \t\t<label for='${id}_save_as_template'>${dialogsaveastemplate}</label>\n\t  \t</td>\n\t  </tr>\n\t  <tr style=\"margin:10px 0px 0px 0px\" align = \"right\">\n\t  \t<td align=\"middle\">\n\t  \t\t<button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"saveBtn\">${dialogok}</button>\n\t\t\t<button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"cancelBtn\">${dialogcancel}</button>\n\t\t</td>\n\t  </tr>\n\t  </table>\n\t</div>\n\t\n</div>","url:builder/workbench/editor/templates/LinkSelection.html":"<tr>\n<td>\n<div dojoType=\"dijit.Dialog\" dojoAttachPoint=\"linkSelectionDialog\" title=\"${hintLinkSelectionDialog}\">\n   <form dojoAttachPoint=\"linkSelectionForm\">\n\t   <div>\n\t  \t   \t<select id=\"${id}_link\" dojoAttachPoint=\"linkSelection\" dojoType=\"dijit.form.FilteringSelect\" style=\"width: 300px; margin: 0px 0px 0px 30px; border-collapse: collapse; float: left;\"></select>\n\t   </div>\n\t   <div>\n\t\t\t<table dojoAttachPoint=\"linkColumn\" style=\"width: 330px; margin: 0px 0px 0px 30px; border-collapse: collapse; float: left;\"></table>\n\t   </div>\n\t   \n\t   <div style=\"float: right; padding-top: 15px;\">\n\t      <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"linkSelectionSave\">${hintBtnOk}</button>\n\t      <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"linkSelectionCancel\">${hintBtnCancel}</button>\n\t   </div>\n   </form>\n</div>\n\n</td>\n</tr>","url:builder/workbench/orderView/templates/OrderFrame.html":"<div class=\"orderFrame_content\" tabindex=\"0\" style=\"outline:none;\" data-dojo-attach-point=\"orderFrameNode\">\n    <div>\n\t    <table style=\"width: 100%;margin: 2px 0px;\">\n\t        <tbody>\n\t            <tr>\n\t                <td style=\"width: 32px; height: 32px\">\n\t                    <img style=\"height: 24px; width: 24px; float:left\" data-dojo-attach-point=\"imgNode\" />\n\t                </td>\n\t                <td>\n\t                    <div data-dojo-type=\"dijit/InlineEditBox\" data-dojo-attach-point=\"nameNode\">\n\t                    </div>\n\t                </td>\n\t            </tr>\n\t        </tbody>\n\t    </table>\n    </div>\n\t<div data-dojo-attach-point=\"portContainer\" class=\"containerFrame_port\"></div>\n    \n</div>\n","url:builder/workbench/property/templates/FileUploadWidget.html":"\n\n<div>\n\t<div dojoAttachPoint=\"fileUploadContainer\" style=\"width:200px!important;\"></div>\t\t\n\t<input type=\"hidden\" readonly=\"true\"  dojoAttachPoint=\"focusNode,inputNode\" style=\"padding: 0; display:none\"/>\n\t\n\t\n    <div dojoAttachPoint=\"cancelNode\" dojoAttachEvent=\"onclick:cancelUpload\" class=\"dijitInline dijitFileInputText cancelNode\"\n\t style=\"display:none; text-align:center; padding:0;margin-top:-15px; margin-left:190px; z-index:5;\">${cancel_btn_title}</div>\n\n\n\t\n</div>","url:builder/workbench/editor/templates/InlineAnnotation.html":"<div style=\"position:absolute;z-index:9999999;\">\n    <div dojoAttachPoint=\"annotation\" aria-label=\"inlineeditbox\" dojoType=\"dijit.InlineEditBox\" \n\t\t noValueIndicator=\"\" dojoAttachEvent=\"onChange:onChange\">\n    </div>\n\t\n</div>\n","url:builder/workbench/componentsView/templates/ComponentProperty.html":"<tr>\n   <td>\n      <table dojoAttachPoint=\"nameColumn\"     style=\"width: 160px; margin: 0px 0px 0px  0px; border-collapse: collapse; float: left;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"descriptionColumn\"     style=\"width: 160px; margin: 0px 0px 0px  0px; border-collapse: collapse; float: left;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"typeColumn\"     style=\"width: 150px; margin: 0px 0px 0px 5px; border-collapse: collapse; float: left;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"valueColumn\"    style=\"width: 200px; margin: 0px 0px 0px 0px; border-collapse: collapse; float: left;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"advancedColumn\" style=\"width: 140px; margin: 0px 0px 0px 5px; border-collapse: collapse; float: left;\"></table>\n\n      <div dojoType=\"dijit.Dialog\" dojoAttachPoint=\"advancedSettingsDialog\" title=\"${hintAdvancedSettings}\">\n         <div>\n                \t   \n                <table>\n                        <tr>\n\t\t                \t<td>\n                        \t<table dojoAttachPoint=\"required\" style=\"width: 300px; margin: 0px 0px 0px 30px; border-collapse: collapse; float: left;\"></table>\n                        \t</td>\n                        </tr>\n                        <tr>\n                        \t<td>\n                        \t<table dojoAttachPoint=\"regex\" style=\"width: 300px; margin: 0px 0px 0px 30px; border-collapse: collapse; float: left;\"></table>\n                        \t</td>\n                        </tr>\n                        <tr>\n                        \t<td>\n                        \t<table dojoAttachPoint=\"validValues\" style=\"width: 300px; margin: 0px 0px 0px 30px; border-collapse: collapse; float: left;\"></table>\n                        \t</td>\n                        </tr>\n                </table>\n\n         </div>\n         <div style=\"float: right; padding-top: 15px;\">\n            <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"advancedSettingsSave\">${hintBtnOk}</button>\n            <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"advancedSettingsCancel\">${hintBtnCancel}</button>\n         </div>\n      </div>\n\n   </td>\n   <td>\n      <table dojoAttachPoint=\"deleteColumn\"   style=\"width:  10px; margin: 0px 0px 0px 10px; border-collapse: collapse; float: left;\"></table>\n   </td>\n\n</tr>\n","url:builder/vsys/workbench/editor/templates/RoutingPolicyItemWidget.html":"<div>\n\n\t<div data-dojo-type=\"dijit/TitlePane\" data-dojo-props=\"title: '${ENDPOINT_CONFIGURATION}'\">\n\t\t<table class=\"propertyContent\" role=\"presentation\">\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><span style=\"color: #FF0000;\">*</span><span>${ENDPOINT}</span></td>\n\t\t\t\t\t<td><input data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-attach-point=\"endPointTextBox\" data-dojo-props=\"value: 'http://virtualhost/context_root', invalidMessage: '${endPointTextBoxInvalidMsg}'\" type=\"text\" required=\"true\" ></input></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><span style=\"color: #FF0000;\">*</span><span>${PORT}</span></td>\n\t\t\t\t\t<td><input data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"portTextBox\" data-dojo-props=\"value: 9080, constraints: {pattern: '#'}\" type=\"text\" required=\"true\"></input></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><span style=\"color: #FF0000;\">*</span><span>${ENABLE_HTTPS}</span></td>\n\t\t\t\t\t<td><input data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"httpsCheckBox\"></input></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr style=\"display: none\" data-dojo-attach-point=\"httpsPortRow\">\n\t\t\t\t\t<td><span style=\"color: #FF0000;\">*</span><span>${HTTPS_PORT}</span></td>\n\t\t\t\t\t<td><input data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"httpsPortTextBox\" data-dojo-props=\"value: 9443, constraints: {pattern: '#'}\" type=\"text\"></input></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr data-dojo-attach-point=\"removeButtonRow\">\n\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t<span data-dojo-attach-point=\"removeButton\"><img src=\"/tooling/images/close_normal.png\" style=\"float: right; cursor: pointer;\"></img></span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</div>","url:builder/workbench/linksView/templates/LinksView.html":"<div dojoAttachPoint=\"container\" style=\"padding: 20px;\">\n\n   <div dojoAttachPoint=\"page\">\n\n   </div>\n</div>\n\n","url:paas/widgets/templates/FileInputExt.html":"<div class=\"dijitFileInput fileInputAuto\">\n\t<input id=\"${id}\" class=\"dijitFileInputReal\" type=\"file\" dojoAttachPoint=\"fileInput\" name=\"${name}\" />\n\t<div class=\"dijitFakeInput\">\n\t\t<input class=\"dijitFileInputVisible\" type=\"text\" dojoAttachPoint=\"focusNode, inputNode\" title=\"\" disabled=\"disabled\"/>\n\t\t<div class=\"dijitInline dijitButton fileInputButton\" dojoAttachPoint=\"titleNode\">\n\t\t\t<span class=\"dijitButtonNode\">${label}</span>\n\t\t</div>\n\t\t<div class=\"dijitInline dijitButton fileInputButton\" dojoAttachPoint=\"cancelNode\" dojoAttachEvent=\"onclick:reset\">\n\t\t\t<span class=\"dijitButtonNode\">${cancelText}</span>\n\t\t</div>\n\t</div>\t\n\t\t\n\t\n\n</div>\n","url:builder/workbench/palette/templates/CategoryPaletteItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t\n\t\t<img role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></img>\n\t</td>\n\t<td class=\"dijitReset\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"></td>\n\t<td class=\"dijitReset\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset\" role=\"presentation\">\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</span>\n\t</td>\n\n</tr>\n","url:builder/workbench/templates/ConfirmDialog.html":"<div>\n\t\n\t<div dojoAttachPoint=\"confirmDialog\" dojoType=\"dijit.Dialog\" title=\"${widgets_confirmdialog_title} ${action}\">\n\t\t<table>\n\t  \t  <tr>\n\t  \t    <td>\t\n\t  \t      <span dojoAttachPoint=\"confirmDialog\">${confirmMsg}</span>\n\t\t    </td>\n\t\t  </tr>\n\t\t  <tr>\n\t  \t    <td align=\"center\">\n\t  \t\t  <button dojoAttachPoint=\"confirmBtn\" dojoType=\"dijit.form.Button\">${widgets_confirmdialog_yes}</button>\n\t\t\t  <button dojoAttachPoint=\"cancelBtn\" dojoType=\"dijit.form.Button\">${widgets_confirmdialog_no}</button>\n\t\t    </td>\n\t      </tr>\n\t\t</table>\n\t</div>\n\n\n\n</div>\n","url:builder/workbench/property/templates/PatternAttrPropertyWidget.html":"<tr data-dojo-attach-event=\"onmouseover:showIcons,onmouseout:hideIcons\">\n    <td dojoAttachPoint=\"nameArea\" class=\"TD\">\n        <div class=\"nameArea\">\n        \n        \t\n        \t<span dojoAttachPoint=\"requiredMark\" class=\"require boldFont\">*</span>\n            <span class=\"name-node\" dojoAttachPoint=\"nameNode\"></span>\n            <span dojoattachpoint=\"deleteNode\" style=\"display: none; vertical-align: top\">\n\t\t\t\t<img style=\"vertical-align: top; float: right;\" class=\"icon-image\" alt=\"${deprecatedHint}\" title=\"${deprecatedHint}\" src=\"/images/delete-icon-small.gif\">\n\t\t\t</span>\n\t\t\t<span dojoattachpoint=\"scanningNode\" style=\"display: none; color: navy;\">&nbsp;&nbsp;\n\t\t\t\t<img style=\"vertical-align: text-top;\" class=\"icon-image\" alt=\"${scanningHint}\" title=\"${scanningHint}\" src=\"/images/cloud/progress-indicator-small.gif\">&nbsp;${scanningHint}\n\t\t\t</span>\n\t\t\t<span dojoAttachPoint=\"editAttrNode\" style='vertical-align: top; cursor: pointer; display: none; float: right;'>\n\t\t\t\t<img src=\"/images/edit.gif\" alt=\"${addReferenceAttr_alt}\" title=\"${addReferenceAttr_alt}\">\n\t\t\t</span>\n\t\t\t<span dojoAttachPoint=\"removeAttrNode\" style='vertical-align: top; cursor: pointer; display: none; float: right;'>\n\t\t\t\t<img src=\"/images/delete.gif\" alt=\"${removeReferenceAttr_alt}\" title=\"${removeReferenceAttr_alt}\">\n\t\t\t</span>\n\t\t\t<span dojoAttachPoint=\"lockArea\" style='vertical-align: top; float: right'>\n\t\t\t\t<a dojoAttachPoint=\"lockNode\" style=\"display: none\">\n\t\t  \t\t\t<img dojoAttachPoint=\"lockImgNode\" src=\"/tooling/images/locked_24.png\" alt=\"${image_alt}\">\n\t\t  \t\t</a>\n\t\t\t</span>\n        </div>\n        <div dojoAttachPoint=\"propertySplash\" class=\"splash\">\n\t\t\t\t<span style=\"position: absolute; display: inline; vertical-align: sub;\" class=\"wca-image-progress-indicator-small-icon\"></span>\n\t\t\t\t<span style=\"position: relative; left: 24px \">${loading_msg}</span>\n\t\t</div> \n    </td>\n    <td dojoAttachPoint=\"valueArea\">\n        <div dojoAttachPoint=\"valueNode\" class=\"value\"></div>\n    </td>\n\t<td style='vertical-align: top;'>\n\t\t<a dojoAttachPoint=\"statusNode\" style='display: none'>\n\t\t\t<span class=\"wca-image-attention-normal-icon\" dojoAttachPoint=\"statusImgNode\" style=\"display: inline-block\"></span>\n\t\t</a>\n\t</td>\n\t\n    \n</tr>\n","url:builder/workbench/property/templates/ExclusiveGroup.html":"<div>\n\t<div>\n\t\t<span dojoAttachPoint='groupRadioContainer'></span>\n\t\t<span dojoAttachPoint='groupTitle'></span>\n\t</div>\n\t<div dojoAttachPoint='propsContainer, containerNode'></div>\n \n  </div>\n","url:builder/workbench/templates/ToolbarManager.html":"<div>\n  <div dojoAttachPoint=\"toolbar\" dojoType=\"dijit.Toolbar\" aria-label=\"toolbar\">\n\n\t</div>  \n \t\n\n</div>\n\n","url:builder/workbench/listView/templates/MissingPropLink.html":"<div style=\"margin-top:15px;\">\n    <a dojoAttachPoint=\"linkNode\"></a>\n\t<span class=\"missing_property_icon\" alt=\"${attention_normal}\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n\n</div>","url:builder/workbench/layer/templates/LayerPaletteItem.html":"<div class=\"layerItem\">\n    <div class=\"layerNameBox\" dojoAttachPoint=\"layerNode\">\n\t\t<table role=\"presentation\">\n\t\t\t<tr>\n\t\t\t\t<td style=\"width: 10%;\">\n\t\t\t\t\t<div class=\"layerStatus layerEnable\" dojoAttachPoint=\"statusNode\" \n\t\t\t\t\t\ttitle=\"${toggleTitle}\" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\n\t\t        </td>\n\t\t\t\t<td style=\"width: 90%;\">\n\t\t\t\t\t<span class=\"layerNameText\" dojoAttachPoint=\"textEditNode\" \n\t\t\t\t\t      dojoType=\"dijit.InlineEditBox\"  dojoAttachEvent=\"onChange:onTitleChange\"\n\t\t\t\t\t\t  title=\"${editTitle}\">\t\t\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n    </div>\n\t\n</div>\n","url:builder/workbench/templates/Container.html":"<div role=\"main\">\n<div id=\"maximizeRoot\" dojoType=\"builder.workbench.BorderContainerExt\" splitter=\"true\" liveSplitters=\"true\" style=\"height:100%; width: 100%; background-color: white;\">\n            <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" style=\"width: 100%; overflow:hidden;\" splitter=\"false\">\n                <div id=\"top-banner\">\n                    <div id=\"top-banner-main-title\">${productTitle}</div>\n\t\t\t\t\t<div class='bannerTitle'></div>\n\t\t\t\t\t<div class=\"header-banner-user-id\">${userNameLabel}&nbsp; &nbsp;${userId}\n\t\t\t\t\t</div>\n\t\t            <div class=\"header-banner-ibm-logo\"></div>\n                </div>\n            </div>\n             \n       \t\t<div class=\"bannerAppTitle inlineEditor\"> <span id=\"modificationIndicator\" class=\"modificationIndicator\"></span><span id=\"appTitle\"></span>  </div>       \t\t\n       \t\t<div id=\"appPatternType\" class=\"bannerPatternType\"></div>\n       \t\t\n            <div style=\"top:37px; border: none !important\" dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"true\" persist=\"false\">\n            \t<div dojoType=\"builder.workbench.editor.EditorTabContainer\" class=\"editor\" id='toolingTabContainer' closable=\"false\" orientation=\"horizontal\">\n                \t<div dojoType=\"dijit.layout.ContentPane\" id=\"editorTab\">\n                        <div dojoType=\"builder.workbench.BorderContainerExt\" style=\"height:100%\">\n                            <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" splitter=\"false\" style=\"border:none !important;\">\n                                <div id=\"toolbarManager\" align=\"left\" dojoType=\"builder.workbench.ToolbarManager\" buttonListMode=\"diagram\">\n                                </div>\n\t                         </div>\n\t                         <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"false\" style=\"border:none !important;\">\n                                <div dojoType=\"builder.workbench.BorderContainerExt\" liveSplitters=\"true\">\n                                    <div id=\"controlPanel\" class=\"controlPanel\" dojoType=\"dijit.layout.ContentPane\" region=\"leading\" splitter=\"true\" minSize=\"1\" persist=\"false\" style=\"width: 280px; border: none !important\">\n                                        <div id=\"controlContainer\" dojoType=\"builder.workbench.BorderContainerExt\" liveSplitters=\"true\" style=\"width: 280px;\">\n                                            <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"false\" persist=\"false\">\n                                                <div dojoType=\"${categoryPaletteWidgetName}\" theme=\"list\"  id=\"categoryPalette\">\n                                                </div>\n                                            </div>\n                                            \n                                            <div dojoType=\"dijit.layout.ContentPane\" region=\"bottom\" splitter=\"true\" persist=\"false\" minSize=\"25\" style=\"height: 25%;\" class='fullHorizontal' id=\"layerContentPane\">\n                                                <div dojoType=\"builder.workbench.layer.LayerPalette\" id=\"layerPalette\">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    \n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div dojoType=\"dijit.layout.ContentPane\" region=\"center\" style=\"border:none;\">\n\t\t\t\t\t\t\t\t\t    <div dojoType=\"builder.workbench.MessageBoxWidget\" id=\"diagramMessageWidget\"></div>\n\t\t\t\t\t\t\t\t\t    <div dojoType=\"builder.workbench.MessageBoxWidget\" id=\"recoverMessageWidget\" showConfirmButton=\"true\" showCancelButton=\"true\"></div>\n\t\t\t\t\t\t\t\t\t\t<div dojoType=\"dijit.layout.BorderContainer\">\n\t\t\t\t\t\t\t\t           <div dojoType=\"dijit.layout.ContentPane\" id=\"diagramArea\" region=\"center\" >\n                                        </div>\n\t\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n                                    \n                                    <div dojoType=\"dijit.layout.ContentPane\" region=\"right\" splitter=\"true\" persist=\"false\" minSize=\"1\"  style=\"width: 300px; overflow: auto;\">\n                                        <div dojoType=\"builder.workbench.property.PropertyView\" style=\"overflow: visible;\" id=\"propertyView\">\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div dojoType=\"builder.workbench.HintWidget\">\n                        </div>\n                    </div>\n                    <div style=\"display: none\" dojoType=\"dijit.layout.ContentPane\" id=\"listArea\" splitter=\"false\">\n                        <div dojoType=\"builder.workbench.BorderContainerExt\">\n                            <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" splitter=\"false\" style=\"border:none !important;\">\n                                <div align=\"left\" dojoType=\"builder.workbench.ToolbarManager\" buttonListMode=\"list\"></div>\n                            </div>             \n\t                        <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"false\" style=\"border:none !important;\">\n\t                            <div dojoType=\"builder.workbench.BorderContainerExt\">\n\t                                <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" splitter=\"false\" style=\"height: 50px !important; border: none !important;\">\n\t\t\t                            <div dojoType=\"builder.workbench.MessageBoxWidget\" id=\"listViewMessageWidget\"> </div>\n\t\t\t                        </div>\n\t\t\t                        <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"false\" style=\"border: none !important;\">\n\t\t\t                        \t<div id=\"listView\"></div>\n\t\t                        \t</div>\n\t                        \t</div>\n\t                        </div>  \n                        </div>                          \n                    </div>\n                    <div dojoType=\"dijit.layout.ContentPane\" id=\"sourceArea\" splitter=\"false\">\n                    \t<div dojoType=\"builder.workbench.BorderContainerExt\">\n                            <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" splitter=\"false\" style=\"border: none !important;\">\n                               <div id=\"sourceToolbar\" align=\"left\" dojoType=\"builder.workbench.ToolbarManager\" buttonListMode=\"source\"></div>\n                            </div>\n\t                        <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"false\" style=\"border:none !important;\">\n\t                        \t<div dojoType=\"builder.workbench.MessageBoxWidget\" id=\"sourceMessageWidget\"></div>\n\t                            <pre id=\"source\" style='white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;'></pre>\n\t                        \t<div id=\"sourceEditor\" dojoType=\"dijit.form.SimpleTextarea\" style=\"display: none; height: 100%; width: 100%\"></div>\n\t                        </div>  \n                        </div>\n                    </div>\n\n                    \n                    <div style=\"display: none\" dojoType=\"dijit.layout.ContentPane\" id=\"componentsArea\" splitter=\"false\">\n                        <div dojoType=\"builder.workbench.BorderContainerExt\">\n                            <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" splitter=\"false\" style=\"border:none !important;\">\n                                <div align=\"left\" dojoType=\"builder.workbench.ToolbarManager\" buttonListMode=\"components\">\n                                </div>\n                            </div>\n                            <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"false\" style=\"border:none !important; border: 0px;\">\n                                <div dojoType=\"builder.workbench.BorderContainerExt\" liveSplitters=\"true\">\n                                    <div id=\"componentControlPanel\" class=\"controlPanel\" dojoType=\"dijit.layout.ContentPane\" region=\"leading\" splitter=\"true\" minSize=\"1\" persist=\"false\" style=\"width: 280px; border: none !important\">\n                                        <div id=\"componentControlContainer\" dojoType=\"builder.workbench.BorderContainerExt\" liveSplitters=\"true\" style=\"width: 280px;\">\n                                            <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"false\" persist=\"false\">\n                                                <div dojoType=\"builder.workbench.componentsView.ComponentCategoryPalette\" theme=\"list\"  id=\"componentCategoryPalette\">\n                                                </div>\n                                            </div>\n\n                                            \n                                            <div dojoType=\"dijit.layout.ContentPane\" region=\"bottom\" splitter=\"true\" persist=\"false\" minSize=\"25\" style=\"height: 25%;\" class='fullHorizontal' id=\"componentLayerContentPane\">\n                                                <div dojoType=\"builder.workbench.layer.LayerPalette\" id=\"componentLayerPalette\">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    \n\n                                    <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" style=\"border:none;\">\n                                       <div dojoType=\"builder.workbench.MessageBoxWidget\" id=\"componentsViewMessageWidget\">\n                                       </div>\n                                       <div dojoType=\"dijit.layout.BorderContainer\">\n                                          <div dojoType=\"dijit.layout.ContentPane\" id=\"componentWorkArea\" region=\"center\" >\n                                             <div id=\"componentsView\">\n                                             </div>\n                                          </div>\n                                       </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div style=\"display: none\" dojoType=\"dijit.layout.ContentPane\" id=\"linksArea\" splitter=\"false\">\n                        <div dojoType=\"builder.workbench.BorderContainerExt\">\n                            <div dojoType=\"dijit.layout.ContentPane\" region=\"top\" splitter=\"false\" style=\"border:none !important;\">\n                                <div align=\"left\" dojoType=\"builder.workbench.ToolbarManager\" buttonListMode=\"links\">\n                                </div>\n                            </div>\n                            <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"false\" style=\"border:none !important; border: 0px;\">\n                                <div dojoType=\"builder.workbench.BorderContainerExt\" liveSplitters=\"true\">\n                                    <div id=\"linkControlPanel\" class=\"controlPanel\" dojoType=\"dijit.layout.ContentPane\" region=\"leading\" splitter=\"true\" minSize=\"1\" persist=\"false\" style=\"width: 280px; border: none !important\">\n                                        <div id=\"linkControlContainer\" dojoType=\"builder.workbench.BorderContainerExt\" liveSplitters=\"true\" style=\"width: 280px;\">\n                                            <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" splitter=\"false\" persist=\"false\">\n                                                <div dojoType=\"builder.workbench.linksView.LinkCategoryPalette\" theme=\"list\" id=\"linkCategoryPalette\">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    \n\n                                    <div dojoType=\"dijit.layout.ContentPane\" region=\"center\" style=\"border:none;\">\n                                       <div dojoType=\"builder.workbench.MessageBoxWidget\" id=\"linksViewMessageWidget\">\n                                       </div>\n                                       <div dojoType=\"dijit.layout.BorderContainer\">\n                                          <div dojoType=\"dijit.layout.ContentPane\" id=\"linkWorkArea\" region=\"center\" >\n                                             <div id=\"linksView\">\n                                             </div>\n                                          </div>\n                                       </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n\n                </div>\n            </div>\n        </div>\n                  \n\n                \n          \n                \n\n\n</div>\n\n","url:builder/workbench/componentsView/templates/ComponentArtifact.html":"<tr>\n    <td>\n      <table dojoAttachPoint=\"artifactTypeColumn\" style=\"width: 230px; margin: 0px 0px 0px 0px; border-collapse: collapse; float: left; overflow: hidden;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"artifactColumn\" style=\"width: 320px; margin: 0px 0px 0px -15px; border-collapse: collapse; float: left; overflow: hidden;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"deployPathColumn\" style=\"width: auto; margin: 0px 0px 0px  10px; border-collapse: collapse; float: left;overflow: hidden; \"></table>\n      \n   </td>\n   <td>\n      <table dojoAttachPoint=\"deleteColumn\" style=\"width:  60px; margin: 0px 0px 0px  0px; border-collapse: collapse; float: left;\"></table>\n   </td>\n\n</tr>\n","url:paas/widgets/templates/MultiSelectExt.html":"<div>\n\t<div style=\"position:relative;\">\n\t\t<label style=\"display:none\" for=\"${id}_inputValueNode\">${label}</label>\n\t\t<div style=\"width:100%\" dojoAttachPoint='inputValueNode' id=\"${id}_inputValueNode\" readOnly='true' dojoType='dijit.form.SimpleTextarea' cols='30' rows='4' class=\"property_textarea\"></div>\n\t\t<span dojoAttachPoint='placeHolder' class=\"dijitPlaceHolder\">${hint}</span>\n\t</div>\n\t\n\t<span>\n\t\t<div dojoAttachPoint=\"optionsSelection\" dojoType=\"dijit.form.DropDownButton\">\n\t\t\t<span><label id=\"${id}_editTitle\">${editTitle}</label></span>\n\t\n\t        <div dojoType=\"dijit.TooltipDialog\" dojoAttachPoint=\"multiSelectDialog\" aria-labelledby=\"${id}_editTitle\">\n\t\t\t\t<div dojoAttachPoint=\"multiSelect\">\n\t\t\t\t\t<span width=\"400px\">\n\t\t\t\t\t<img style=\"vertical-align: text-top;\" class=\"icon-image\" alt=\"${loadingHint}\" title=\"${loadingHint}\" src=\"/images/cloud/progress-indicator-small.gif\"/>\n\t        \t\t&nbsp;&nbsp;${loadingHint}\n\t\t\t\t\t</span>\n\t\t\t\t</div>        \n\t        </div>\n\t\t</div>\n\t</span>\n\t\t\n\t\n\n\n</div>\n","url:paas/widgets/templates/EditDeletePatternAttrDialog.html":"<div>\n\t<div dojoType=\"paas.widgets.Dialog\" dojoAttachPoint=\"theDialog\" title=\"${app_deploy_dialog_title}\" description=\"\">\n\t\t\n\t\t<div data-dojo-type=\"dijit/form/Form\" data-dojo-id=\"myForm\" encType=\"multipart/form-data\" action=\"\" method=\"\">\n\t\t\t\n\t\t\t\t<div dojoAttachPoint=\"deletePatternAttr\" style=\"display: none\">\n\t\t\t\t\t\n\t\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\" role=\"presentation\">\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<label for=\"name\">Name:</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<div dojoAttachPoint=\"patternName\"></div>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<label for=\"parameterType\">Parameter Type:</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<div dojoAttachPoint=\"parameterType\"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<span>ID:</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<div dojoAttachPoint=\"patternId\"></div>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<label for=\"name\">Description:</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<div dojoAttachPoint=\"patternDesc\"></div>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<label for=\"value\">Value:</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<div dojoAttachPoint=\"patternValue\"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t\t</table>\n\t\t\t\t\t\n\t\t\t\t\t<div dojoAttachPoint=\"deleteMessage\"> </div>\n\t\t\t\t</div>\n\t\t\t\t<div dojoAttachPoint=\"editPatternAttr\" style=\"display: none\">\n\t\t\t\t\t\n\t\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\" role=\"presentation\">\n\t\t\t\t\t\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<span dojoAttachPoint=\"requiredMark\" class=\"requireShow\">*</span>\n\t\t\t\t\t\t\t<label for=\"name\">Name:</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input data-dojo-type=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"name\" name=\"name\" required=\"true\" size=\"30\"/>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<span dojoAttachPoint=\"requiredMark\" class=\"requireShow\">*</span>\n\t\t\t\t\t\t\t<label for=\"parameterType\">Parameter Type:</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<select dojoAttachPoint=\"parameterType\"  dojoType=\"dijit.form.FilteringSelect\" dojoAttachEvent=\"onChange:changeValueType\">     \n\t\t\t\t\t\t\t\t<option value=\"number\">number</option>     \n\t\t\t\t\t\t\t\t<option value=\"password\">password</option>     \n\t\t\t\t\t\t\t\t<option value=\"string\" selected=\"true\">string</option> \n\t\t\t\t\t\t\t\t<option value=\"boolean\">boolean</option>\n\t\t\t\t\t\t\t</select> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<span dojoAttachPoint=\"requiredMark\" class=\"requireShow\">*</span>\n\t\t\t\t\t\t\t<span>ID:</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input data-dojo-type=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"patternAttrId\" name=\"patternAttrId\" required=\"true\" size=\"30\"/>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<label for=\"name\">Description:</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input data-dojo-type=\"dijit.form.TextBox\" dojoAttachPoint=\"description\" name=\"description\" size=\"50\"/>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<label for=\"name\">Value:</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<span dojoAttchPoint=\"typeString\">\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input data-dojo-type=\"dijit.form.TextBox\" dojoAttachPoint=\"patternAttrValue\"  size=\"30\"/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span dojoattchpoint=\"typeCheckBox\" style=\"display: none;\"><input data-dojo-type=\"dijit.form.CheckBox\" dojoAttachPoint=\"patternAttrValue\" size=\"30\"/></span>\n\t\t\t\t\t\t\n\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t</div>\n\t</div>\n\n\n</div>\n","url:builder/workbench/templates/PolicyItem.html":"<tr>\n\t<td class=\"itemIcon\">\n\t\t<img style='width:24px; height:24px;' dojoAttachPoint=\"itemImgNode\" />\n\t</td>\n\t<td class=\"itemName\">\n\t\t<div dojoAttachPoint=\"itemNameNode\"></div>\n\t</td> \n\t<td>\n\t\t<div dojoAttachPoint=\"disablePolicy\" class=\"wca-image-warning-icon\" style=\"vertical-align: bottom; alignment-adjust: right; display:none\" title=\"This policy is disabled\">\n    \t</div>\n\t</td>\n\t\t\n</tr>","url:builder/workbench/componentsView/templates/CollapsibleSection.html":"<div>\n   <div>\n      <img dojoAttachPoint=\"stateIcon\" style=\"position: relative; top: 3px; cursor: pointer;\"/>\n      <span class=\"boldFont\" dojoAttachPoint=\"label\" style=\"padding-left: 6px;\"></span>\n   </div>\n   <div dojoAttachPoint=\"containerNode\" style=\"padding: 5px 5px 5px 50px;\">\n   </div>\n\n</div>\n","url:builder/workbench/property/templates/RadioGroup.html":"<div class='propertyView_value'>\n\t<table role=\"presentation\"><tbody dojoAttachPoint='radioContainer'>\n\t\t\n\t</tbody></table>\n\n</div>\n","url:builder/workbench/editor/templates/CompOuterDisplay.html":"<div class=\"helpDialog\">\n\t<div dojoType=\"dijit.Dialog\" dojoAttachPoint=\"compOuterDisplay\" class=\"helpContent\" resizable=\"true\" style=\"overflow-y: auto; overflow-x:hidden;\">\t\n\t\t<div dojoAttachPoint=\"compOuterDisplayContent\" title=\"${compOuterDisplayContentTitle}\" >\n\t\t</div>\n\t</div>\n</div>\n\n","url:builder/workbench/editor/templates/PolicyFrame.html":"<div class=\"containerFrame_policyItem\" tabindex=\"0\" style=\"outline:none\">\n    <div align=\"right\">\n        <div aria-label=\"toobar\" dojoType=\"dijit.Toolbar\" dojoAttachPoint=\"toolbar\" class=\"toolbar\" style=\"height:14px;display: none;\">\n        </div>\n    </div>\n    <table role=\"presentation\" style=\"width: 100%;margin: 2px 0px;\">\n        <tbody>\n            <tr>\n                <td width=\"32px\">\n                    <img style=\"height: 24px; width: 24px;float:left\" dojoAttachPoint=\"imgNode\" />\n                </td>\n                <td>\n                    <div dojoType=\"dijit.InlineEditBox\" dojoAttachPoint=\"nameNode\" class=\"inlineEditor\" style=\"max-width: 152px;\">\n                    </div>\n                    <div dojoAttachPoint=\"versionFilter\" data-dojo-type=\"dijit/form/Select\" style=\"width:70px\"></div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <div align=\"right\">\n        <div dojoType=\"builder.workbench.editor.LayerItem\" dojoAttachPoint=\"layerNode\" style=\"height:20px;\">\n        </div>\n\t\t<span dojoAttachPoint=\"statusContainer\"   style=\"display: none; vertical-align: middle; cursor: pointer;\">\n\t\t    <span class=\"wca-image-attention-normal-icon\" title=\"${attention_normal}\" style=\"display:inline-block\"></span>\n\t\t</span>\n    </div>\n    <div dojoAttachPoint=\"disablePolicy\" class=\"wca-image-warning-icon\" style=\"vertical-align: bottom; alignment-adjust: right; display:none\" title=\"This policy is disabled\">\n    \t</div>\n    \n</div>\n","url:builder/workbench/property/templates/TitlePane.html":"<div>\n\t<div dojoAttachEvent=\"onclick:_onTitleClick, onkeypress:_onTitleKey\"\n\t\t\tclass=\"dijitTitlePaneTitle\" dojoAttachPoint=\"titleBarNode\">\n\t\t<div class=\"dijitTitlePaneTitleFocus\" dojoAttachPoint=\"focusNode\">\n\t\t\t<span dojoAttachPoint='checkboxContainer' dojoAttachEvent=\"onclick:changeChangeable\">\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t</span>\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"arrowNode\" class=\"dijitArrowNode\" waiRole=\"presentation\" />\n\t\t\t<span dojoAttachPoint=\"arrowNodeInner\" class=\"dijitArrowNodeInner\"></span>\n\t\t\t<span dojoAttachPoint=\"titleNode\" class=\"dijitTitlePaneTextNode\"></span>\n\t\t</div>\n\t</div>\n\t<div class=\"dijitTitlePaneContentOuter\" dojoAttachPoint=\"hideNode\" waiRole=\"presentation\">\n\t\t<div class=\"dijitReset\" dojoAttachPoint=\"wipeNode\" waiRole=\"presentation\">\n\t\t\t<div class=\"dijitTitlePaneContentInner\" dojoAttachPoint=\"containerNode\" waiRole=\"region\" tabindex=\"-1\" id=\"${id}_pane\">\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n</div>\n","url:paas/widgets/templates/GenerateDynamicObjectWidget.html":"<div>\n\t<div style=\"position:relative;\">\n\t\t<div dojoAttachPoint='showNoneDiv'> </div>\n\t\t<div dojoAttachPoint=\"showPairsDiv\">\n\t\t\t\n\t\t</div>\n\t\t\n\t\t<div dojoAttachPoint='showNode' style=\"display: none;\">\n\t\t\t[<a href=\"javascript:void(0)\" dojoattachpoint='lessNode' dojoattachevent=\"onclick:toggleShow\"> </a>]\n\t\t</div>\n\t\t<div dojoAttachPoint=\"morePairs\" style=\"display: none;\">\n\t\t</div>\n\t\t<div dojoAttachPoint=\"createPair\">\n\t\t\t<br/>\n\t\t\t<input dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"varNameNode\" style=\"width:45%\" placeholder=\"${nameHint}\"/>\n\t\t\t<strong>&nbsp;=&nbsp;</strong><input dojoType=\"dijit.form.TextBox\" style=\"width:45%\" dojoAttachPoint=\"varValueNode\" placeholder=\"${valueHint}\"/>\n\t\t\t<button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"varAdd\" dojoattachevent=\"onClick:addPairToUI\" iconClass=\"toolbarIcon addIcon\" style=\"margin-left: 0\">${addButtonTitle}</button>\t\t\t\n\t\t</div>\n\t</div>\n\n\n</div>\n","url:paas/widgets/templates/ConfirmDialog.html":"<div>\n\t\n\t<div dojoAttachPoint=\"confirmDialog\" dojoType=\"dijit.Dialog\" title=\"${widgets_confirmdialog_title}\">\n\t\t<table role=\"presentation\">\n\t  \t  <tr>\n\t  \t    <td>\t\n\t  \t      <span dojoAttachPoint=\"confirmMsgContent\">${confirmMsg}</span>\n\t\t    </td>\n\t\t  </tr>\n\t\t  <tr>\n\t  \t    <td align=\"right\">\n\t  \t\t  <button dojoAttachPoint=\"confirmBtn\" dojoType=\"dijit.form.Button\">${widgets_confirmdialog_yes}</button>\n\t\t\t  <button dojoAttachPoint=\"cancelBtn\" dojoType=\"dijit.form.Button\">${widgets_confirmdialog_no}</button>\n\t\t    </td>\n\t      </tr>\n\t\t</table>\n\t</div>\n\n\n\n</div>\n","url:paas/widgets/templates/SimpleTextareaExt.html":"<div>\n\t<div dojoAttachPoint='inputValueNode' dojoType='dijit.form.SimpleTextarea' cols='20' class=\"property_textarea\"></div>\t\n\t\n\n\n</div>\n","url:builder/vsys/workbench/editor/templates/ListvSysPoliciesWidget.html":"<div class=\"policyWidget\" style='max-width: 400px'>\n\t<div class=\"title\">\n\t\t<div class=\"boldFont\">${AVILABLE_POLICIES_TITLE}</div>\n\t</div>\n\t<div data-dojo-attach-point='form' data-dojo-type='dijit/form/Form' >\n\t\t\t<table cellspacing='0' width=\"100%\" role=\"presentation\">\n\t\t\t\t<tbody data-dojo-attach-point=\"basicContainerNode\"></tbody>\n\t\t\t</table>\n\t</div>\n\t\n\t\n\n</div>","url:builder/workbench/property/templates/RangeSliderExt.html":"<div class='propertyView_value rangeSliderExt'>\n\t<div dojoAttachPoint=\"ruleLableContainer\"></div>\n\t<div dojoAttachPoint=\"ruleContainer\">\n\t</div>\n\t<div dojoAttachPoint=\"rangeSliderContainer\"></div>\n\t\n\t<div>\n        ${range_title}\n\t\t<span dojoAttachPoint=\"sliderInputMin\" disabled='true' style='width:40px!important;'></span>\n\t\t&nbsp;-&nbsp;\n\t\t<span dojoAttachPoint=\"sliderInputMax\"  disabled='true' style='width:40px!important;'></span>\n\t</div>\n\n</div>\n","url:builder/workbench/editor/templates/ModelToolbar.html":"<div class=\"figureFrame_toolbar\">\n    <div dojoAttachPoint=\"toolbarTop\" class=\"toolbar_top\" ></div>\n\t<input dojoAttachPoint=\"focusNode\" type=\"button\" \n\t\tstyle=\"left:8px; bottom:8px; background: none;border: medium none;width: 1px; height: 1px; font-size: 0;position:absolute; z-index:0\"/>\n\t\t\n\t<div dojoAttachPoint=\"toolbarBottom\" class=\"toolbar_bottom\" ></div>\n\t\n\n</div>\n","url:builder/workbench/linksView/templates/LinkCategoryPaletteItem.html":"<div>\n   <div dojoAttachPoint=\"container\" style=\"vertical-align: middle; cursor: pointer; height: 34px;\">\n      <span dojoAttachPoint=\"label\" style=\"padding-left: 15px; position: relative; top: 11px;\"></span>\n   </div>\n\n</div>\n","url:builder/workbench/componentsView/templates/ComponentPropertyMapping.html":"<tr>\n    <td>\n      <table dojoAttachPoint=\"cookbookAttributeColumn\" style=\"width: 400px; margin: 0px 0px 0px 30px; border-collapse: collapse; float: left;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"propertyColumn\" style=\"width: 360px; margin: 0px 0px 0px 30px; border-collapse: collapse; float: left;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"deleteColumn\" style=\"width:  60px; margin: 0px 0px 0px  0px; border-collapse: collapse; float: left;\"></table>\n   </td>\n\n</tr>\n","url:paas/widgets/templates/FixpackWidget.html":"<div>\n\t<div>\n\t\t<div dojoAttachPoint=\"showNoneDiv\" class=\"default\" width=\"100%\" style=\"display: none;\">\n\t\t</div>\n\t\t<div dojoAttachPoint=\"appliedFixesMessageDiv\" class=\"default\" width=\"100%\" style=\"display: none; height:25px;\">\n\t\t</div>\n\t\t<div dojoAttachPoint=\"appliedFixesDiv\" style=\"overflow-y: auto; max-height:150px; display: none; border-style: solid;border-width:1px;\">\n\t\t\t<table dojoAttachPoint=\"appliedFixesTable\" width=\"100%\" style=\"border-spacing: 10px;\">\n\t\t\t</table>\n\t\t</div>\n\t\t<div class=\"default\" width=\"100%\" style=\"height:25px;\">\n\t\t</div>\n\t\t<div dojoAttachPoint=\"applicableFixesMessageDiv\" class=\"default\" width=\"100%\" style=\"display: none; height:25px;\">\n\t\t</div>\n\t\t<div dojoAttachPoint=\"applicableFixesDiv\" style=\"overflow-y: auto; max-height:150px;display: none; border-style: solid;border-width:1px;\">\n\t\t\t<table dojoAttachPoint=\"applicableFixesTable\" width=\"100%\" style=\"border-spacing: 10px;\">\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\t\n\n\n</div>\n\n","url:paas/widgets/templates/EditCompDialog.html":"<div>\n\t<div dojoType=\"dijit.Dialog\" dojoAttachPoint=\"creationDialog\" title=\"${widget_editCompDialog_title}\">\n\t\t<div dojoType=\"builder.workbench.MessageBoxWidget\" dojoAttachPoint=\"messageWidget\" class='editCompDialogMsgBox'></div>\n\t\t<div dojoType=\"dojox.widget.Wizard\" dojoAttachPoint=\"creationWizard\" hideDisabled=\"true\" class=\"creationWizard\" dojoAttachEvent=\"cancelFunction:hide\">\n\t\t<div dojoAttachPoint=\"editPropertyPane\" dojoType=\"dojox.widget.WizardPane\" dojoAttachEvent=\"doneFunction:createComponentWithFile\" style=\"overflow-y: auto; overflow-x:hidden;\">\n\t\t\t<div dojoAttachPoint='propEditor' class=\"preConfigProps\"></div>\n\t\t</div>\n\t</div>\n\t\t\n\n</div>\n","url:builder/workbench/property/templates/PasswordWidget.html":"<div class=\"passwordTextBox\">\n        \n\t\t<div dojoType=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"initialInput\" \n\t\t      type=\"password\"  placeHolder=\"${initialPlaceHolder}\" class=\"propertyView_value\" dojoattachevent=\"onChange: triggerInitialChange, onKeyUp:_onPasswordChanging, onBlur:_onPasswordChanging\">\n        </div>\n        <br />\n        <div dojoType=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"verifyInput\"  class=\"propertyView_value\"\n\t\t\t      type=\"password\"  placeHolder=\"${verfiyPlaceHolder}\" dojoattachevent=\"onChange: triggerVerifyChange\"></div>\n        \n\t\t\n</div>\n","url:builder/workbench/editor/templates/ComponentFigureFrame.html":"<div tabindex=\"0\" class=\"hideOutline\">\n\t<table style=\"position:relative;\" >\n\t\t\n\t\t<tr>\n\t\t\t\n\t\t\t<td >\n\t\t\t\t<div dojoAttachPoint=\"frameBorderContainer\" class=\"firgureFrame_border\">\n\t\t\t\t\t\n\t\t\t\t\t<div align=\"left\" dojoAttachPoint=\"outerDisplayContainer\" style=\"position:absolute;top:-9px;left:-9px;display: none;\">\n        \t\t\t\n\t\t\t\t</div>\t\n\t\t\t\t\t<div dojoAttachPoint=\"backImageContainer\" class=\"firgureFrame_backImage\">\n\t\t\t\t\t\t<span dojoAttachPoint=\"statusContainer\"  class=\"componentFigureStatus\" style='vertial-align: middle; cursor: pointer;z-index: 9999'>\n\t\t\t\t\t\t\t<span class=\"wca-image-attention_normal-icon\" dojoAttachPoint=\"statusIconNode\"  style=\"display:inline-block\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div dojoAttachPoint=\"contentContainer\" class=\"firgureFrame_content\">\n\t\t\t\t\t\t\t<div dojoAttachPoint=\"figureImage\" ></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div dojoAttachPoint=\"portContainer\" class=\"firgureFrame_port\"></div>\n\t\t\t\t\t\t<div dojoAttachPoint=\"scanContainer\" style=\"display: none\" class=\"containerFrame_scan\">\t\t\t\t\t\t\n\t\t\t\t\t\t\t<img style=\"vertical-align: text-top;\" class=\"icon-image\" alt=\"${scanningHint}\" title=\"${scanningHint}\" src=\"/images/cloud/progress-indicator-small.gif\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div dojoAttachPoint=\"policyShortcutContainer\" class=\"policyShortcut\" style=\"display: none\" title=\"${available_policy_hint}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div dojoAttachPoint=\"nameNode\" dojoType=\"dijit.InlineEditBox\" class=\"firgureFrame_text\"  noValueIndicator=\"\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div dojoAttachPoint=\"toolbarContainer\" class=\"firgureFrame_toolbarContainer\">\n\t\t\t\t</div>\n\t\t\t\t<div dojoAttachPoint=\"linkSupportStatus\" class=\"firgureFrame_linkSupportStatus\" style=\"display:none\">\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t\t\n\t</table>\n\t\t\n\t\n</div>","url:builder/workbench/listView/templates/ListView.html":"<div class=\"listView\">\n\t<table dojoAttachPoint=\"listArea\" style=\"width:700px; margin:0 0 0 30px; border-collapse:collapse;\">\n\t\t\n\t</table>\n\t<div dojoAttachPoint=\"missingPropList\" style=\"margin:10px 30px;\">\n\t\t\n\t</div>\n\n</div>","url:builder/workbench/templates/HintWidget.html":"<div class=\"hintPanel\" title=\"${hintsToolTip}\">\n\t<div id=\"hintTitleBar\" class=\"hintTitleBar\">\n\t\t<div dojoAttachPoint=\"hintTitleBarImage\" class=\"hintTitleBarImage hintTitleBarImageHide\" \n\t\t  dojoAttachEvent=\"onclick:switchHintPanelStatus\" >${hintBarTitle}</div>\n\t</div>\n\n\t<div dojoAttachPoint=\"hintContent\" class=\"hintContent\" style=\"display: none;\">\n\t\t<div class=\"hintContentTitle\">\n\t\t\t<span class=\"hintStepText\" dojoAttachPoint=\"hintStepText\"></span>\n\t\t\t<span class=\"hintTitleText\" dojoAttachPoint=\"hintTitleText\"></span>\n\t\t</div>\n\t\n\t\t<div dojoAttachPoint=\"hintContentBox\" class=\"hintContentBox\"></div>\n\t\t\t\t\n\t\t<div class=\"hintContentNavigator\">\n\t\t\t<span dojoAttachPoint=\"hintPreviousPage\" dojoAttachEvent=\"onclick:previousHintPage\">${prePage}</span>\n\t\t\t<span dojoAttachPoint=\"hintNextPage\" dojoAttachEvent=\"onclick:nextHintPage\">${nextPage}</span>\n\t\t</div>\n\t</div>\n\n</div>","url:paas/widgets/templates/ValidationTextBoxWithLookup.html":"<div>\n\n  \n  <div data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-attach-point=\"textBoxWidget\" data-dojo-attach-event=\"onChange: triggerTextBoxChange\" class=\"propertyView_value propertyViewWithLookup_value\"></div>\n  <a href=\"javascript:void(0)\" data-dojo-attach-point=\"searchLink\" style=\"display:inline-block; vertical-align:middle\">\n    <img src=\"/tooling/images/asset/action_search.gif\" alt=${search_alt}>\n  </a>\n</div>\n","url:paas/vsys/templates/VSysInterchangeableDialog.html":"<div>\n\n\t<div data-dojo-type=\"paas/widgets/Dialog\" data-dojo-attach-point=\"dialog\" style=\"max-width: 750px;\">\n\t\t<table role=\"presentation\" style=\"display: none;\" data-dojo-attach-point=\"interchangeableTable\">\n\t\t\t<thead>\n\t\t\t\t<tr><th style=\"width: 50%;\">${componentNotExistedTitle}</th><th style=\"width: 50%;\">${interchangeableComponentTitle}</th></tr>\n\t\t\t</thead>\n\t\t\t<tbody data-dojo-attach-point=\"interchangeableList\">\n\t\t\t\t\n\t\t\t</tbody>\n\t\t</table>\n\t\t<table role=\"presentation\" style=\"display: none;\" data-dojo-attach-point=\"missingComponentsTable\">\n\t\t\t<tbody data-dojo-attach-point=\"missingComponentsList\">\n\t\t\t\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</div>","url:builder/workbench/componentsView/templates/ComponentsView.html":"<div dojoAttachPoint=\"container\" style=\"padding: 20px;\">\n\n   <div dojoAttachPoint=\"page\">\n\n   </div>\n</div>\n","url:builder/workbench/property/templates/Slider.html":"<div class='propertyView_value'>\n\t<div dojoAttachPoint=\"ruleLableContainer\"></div>\n\t<div dojoAttachPoint=\"ruleContainer\"></div>\n\t<div dojoAttachPoint=\"sliderContainer\"></div>\n\t\n\t<div>\n        ${value_input}\n\t\t<span dojoAttachPoint=\"sliderInputValue\" disabled='true' style='width:40px!important;'></span>\n\t</div>\n\n</div>\n","url:builder/workbench/property/templates/TitlePaneExt.html":"<div>\n\t<div dojoAttachEvent=\"onclick:_onTitleClick, onkeypress:_onTitleKey\"\n\t\t\tclass=\"dijitTitlePaneTitle\" dojoAttachPoint=\"titleBarNode\" style=\"padding: 0;\">\n\t\t<div class=\"dijitTitlePaneTitleFocus\" dojoAttachPoint=\"focusNode\" style=\"padding: 0; margin: 0;\">\n\t\t\t<table width=\"100%\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"arrowNode\" class=\"dijitArrowNode\" waiRole=\"presentation\"/>\n\t\t\t\t\t\t<span dojoAttachPoint=\"arrowNodeInner\" class=\"dijitArrowNodeInner\"></span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div dojoAttachPoint=\"titleNode\" class=\"dijitTitlePaneTextNode\"></div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\t<div class=\"dijitTitlePaneContentOuter\" dojoAttachPoint=\"hideNode\" waiRole=\"presentation\">\n\t\t<div class=\"dijitReset\" dojoAttachPoint=\"wipeNode\" waiRole=\"presentation\">\n\t\t\t<div class=\"dijitTitlePaneContentInner\" dojoAttachPoint=\"containerNode\" waiRole=\"region\" tabindex=\"-1\" id=\"${id}_pane\">\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n</div>\n","url:builder/vsys/workbench/editor/templates/VSysDiagram.html":"<div>\n    <div dojoAttachPoint=\"diagramNode\" dojoAttachEvent=\"onclick:onDiagramClick\" class=\"diagram\">\n        <div dojoType=\"dijit.form.Button\" dojoAttachPoint=\"addBtn\"  iconClass=\"toolbarIcon addIcon\" class=\"addAppPolicy\">\n        </div>\n        <div data-dojo-type=\"dijit/form/Button\" data-dojo-attach-point=\"advancedOptionsBtn\" iconClass=\"toolbarIcon addIcon\" class=\"advancedOptionsBtn\" \n        label=\"${ADVANCED_OPTIONS_LABEL}\" title=\"${ADVANCED_OPTIONS_HINT}\"></div>\n    </div>\n    \n</div>\n","url:builder/workbench/palette/templates/CategoryPalette.html":"<div class=\"assetPanel fullVertical\">\n    <div dojoType=\"dijit/layout/ContentPane\" class=\"fullVertical\" dojoattachpoint=\"assetContainer\">\n        <div style=\"width: 100%\">\n            <div id=\"assetPanelTitle\" class=\"control_panel_title dijitTitlePaneTitle\">\n                <label for=\"${id}_searchKeyWordInput\">${assetsPanelTitle}</label>\n            </div>\n            <div class=\"asset_section\">\n            \t<div style=\"margin:10px 13px 10px 10px\">\n            \t\t<input data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%;\" dojoAttachPoint=\"searchKeyWordInput\"/>\n            \t</div>\n            </div>\n        </div>\n        <div dojoattachpoint=\"menuContainer\" style=\"width: 100%\">\n            <div dojoAttachPoint=\"containerNode\" id=\"assetPanelList\" class=\"fullHorizontal assetPanelList\">\n            </div>\n        </div>\n    </div>\n    \n</div>\n","url:builder/vsys/workbench/editor/templates/RoutingPolicyPropertyWidget.html":"<div>\n\t\n\t<div data-dojo-attach-point=\"routingPolicyPropertyItems\"></div>\n\t<button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-point=\"addButton\" style=\"float: right;\">${ADD_ENDPOINT}</button>\n</div>","url:builder/workbench/property/templates/PropertyWidget.html":"<tr data-dojo-attach-event=\"onmouseover:showIcons,onmouseout:hideIcons\">\n    <td dojoAttachPoint=\"nameArea\" class=\"TD\">\n        <div class=\"nameArea\">\n        \n        \t\n        \t<span dojoAttachPoint=\"requiredMark\" class=\"require boldFont\">*</span>\n            <label id=\"${id}_label\" class=\"name-node\" dojoAttachPoint=\"nameNode\"></label>\n            <span dojoattachpoint=\"deleteNode\" style=\"display: none; vertical-align: top\">\n\t\t\t\t<img style=\"vertical-align: top; float: right;\" class=\"icon-image\" alt=\"${deprecatedHint}\" title=\"${deprecatedHint}\" src=\"/images/delete-icon-small.gif\">\n\t\t\t</span>\n\t\t\t<span dojoattachpoint=\"scanningNode\" style=\"display: none; color: navy;\">&nbsp;&nbsp;\n\t\t\t\t<img style=\"vertical-align: text-top;\" class=\"icon-image\" alt=\"${scanningHint}\" title=\"${scanningHint}\" src=\"/images/cloud/progress-indicator-small.gif\">&nbsp;${scanningHint}\n\t\t\t</span>\n        </div>\n        <div dojoAttachPoint=\"propertySplash\" class=\"splash\">\n\t\t\t\t<span style=\"position: absolute; display: inline; vertical-align: sub;\" class=\"wca-image-progress-indicator-small-icon\"></span>\n\t\t\t\t<span style=\"position: relative; left: 24px \">${loading_msg}</span>\n\t\t</div> \n    </td>\n    <td dojoAttachPoint=\"valueArea\">\n        <div dojoAttachPoint=\"valueNode\" class=\"value\"></div>\n    </td>\n\t<td dojoAttachPoint=\"lockArea\" style='vertical-align: bottom;'>\n\t\t  <a dojoAttachPoint=\"lockNode\" style=\"display: none\">\n\t\t  \t<img dojoAttachPoint=\"lockImgNode\" src=\"/tooling/images/locked_24.png\" alt=${image_alt}>\n\t\t  </a>\n    </td>\n\t<td style='vertical-align: bottom;'>\n\t\t<a dojoAttachPoint=\"statusNode\" style='display: none'>\n\t\t\t<span class=\"wca-image-attention-normal-icon\" dojoAttachPoint=\"statusImgNode\" style=\"display: inline-block\"></span>\n\t\t</a>\n\t</td>\n    \n</tr>\n","url:paas/widgets/templates/MappingWidget.html":"<div>\n\t\n\t<div dojoAttachPoint=\"possibleMappingsDiv\" dojoType=\"\"></div>\n\t\n\t<div>\n\t\t<input dojoType=\"dijit.form.Button\" dojoAttachPoint=\"configureButton\" dojoAttachEvent=\"onClick:showConfiguration\" title=\"Add more mappings\" iconClass=\"toolbarIcon addIcon\"/>\n\t</div>\n\n\n\n</div>\n","url:builder/workbench/componentsView/templates/ListCollapsibleSection.html":"<div>\n   <div>\n      <img dojoAttachPoint=\"stateIcon\" style=\"position: relative; top: 3px; cursor: pointer;\"/>\n      <span class=\"boldFont\" style=\"padding-left: 6px;\">${label}</span>\n   </div>\n   <div dojoAttachPoint=\"containerNode\" style=\"padding: 5px 5px 5px 20px;\">\n      <table dojoAttachPoint=\"contentTable\" style=\"margin: 0px 0px 0px 0px; border-collapse: collapse;\">\n      </table>\n      <img dojoAttachPoint=\"addRowButton\" src=\"/tooling/images/add.gif\" style=\"cursor: pointer; padding-top: 5px;\"/>\n   </div>\n\n</div>\n","url:builder/workbench/templates/MoveToLayerDialog.html":"<div class=\"moveToLayer\">\n    <div class=\"title\">${MOVE_TO_LAYER_TITLE}</div>  \n\t<div dojoType=\"dijit.Menu\" dojoAttachPoint=\"layers\" class=\"menu\"></div>\n\t\n\n</div>","url:paas/widgets/templates/IFixWidget.html":"<div>\n\t<div >\n\t\t<div dojoAttachPoint='showNoneDiv'style=\"margin-left: 6px;font-size: 12px;\ncolor: rgb(176, 176, 176) !important;\" > </div>\n\t\t<table dojoAttachPoint=\"appliedFixesDiv\" width=\"100%\" style=\"border-style: solid;border-width:1px;overflow-y:scroll;\">\n\t\t</table>\n\t\t<div dojoAttachPoint='showNode' style=\"display: none;\">\n\t\t\t[<a href=\"javascript:void(0)\" dojoattachpoint='lessNode' dojoattachevent=\"onclick:toggleShow\"> </a>]\n\t\t</div>\n\t\t<table dojoAttachPoint=\"moreAppliedFixesDiv\" width=\"100%\" style=\"display: none;border-style: solid;border-width:1px;\">\n\t\t</table>\n\t\t<div dojoAttachPoint=\"emptyDiv\">\n\t\t\t<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t<div dojoAttachPoint=\"availableFixesDiv\">\n\t\t</div>\n\t</div>\n\t\n\n\n</div>\n\n","url:builder/workbench/orderView/templates/OrderRow.html":"<div data-dojo-attach-point=\"orderRowNode\" style=\"padding: 10px;\" class=\"orderRow_content\">\n\t<div><span data-dojo-attach-point=\"imageTitleNode\"></span></div>\n\t<div data-dojo-attach-point=\"orderFramesNode\" class=\"orderRow_frames\">\n\t\t<div style=\"display: none; border-style: dashed; position: absolute; height: 42px;\" class=\"orderFrame_content\" data-dojo-attach-point=\"placeholderFrame\"></div>\n\t</div>\n</div>","url:builder/workbench/layer/templates/Help.html":"<div class=\"helpDialog\">\n<div dojoType=\"builder.workbench.editor.FloatingPane\" dojoAttachPoint=\"floatingPane\" \n     title=\"${helpDialogTitle}\"  dockable=\"false\" resizable=\"true\">\n\t\n\t<div class=\"infoCenterContainer\">\n\t     <div class=\"infoCenter\" >\n\t\t   <a class=\"icon icon-btn icon-arrows icon-fw-bold\" \n\t           href=\"${infocenterBaseUrl}?topic=${infocenterLayerTopic}\" \n\t\t\t   target=\"_blank\">${infoCenterTitle}</a>\n\t\t\t   \n\t     </div>\n\t</div>\t\n\t<div dojoAttachPoint=\"helpContent\" class=\"helpContent\">\t\n\t\n\t\t<div class=\"layerHelpInformation\">\t\n\t\t\t<div class=\"title\" dojoAttachPoint=\"contentTitle\">${contentTitle}</div>\t\t\n\t\t\t<div class=\"description\">${contentDesc}</div>\n\t\t\t\n\t\t\t<div class=\"actions\">\n\t\t\t\t\n\t\t\t\t<div class=\"action\">${actionNew}</div>\n\t\t\t\t<div class=\"description\">${actionNewDesc}</div>\n\t\t\t\t<div class=\"action\">${actionDel}</div>\n\t\t\t\t<div class=\"description\">${actionDelDesc}</div>\n\t\t\t\t<div class=\"action\">${actionSelect}</div>\n\t\t\t\t<div class=\"description\">${actionSelectDesc}</div>\n\t\t\t\t<div class=\"action\">${actionEdit}</div>\n\t\t\t\t<div class=\"description\">${actionEditDesc}</div>\n\t\t\t\t<div class=\"action\">${actionDisable}</div>\n\t\t\t\t<div class=\"description\">${actionDisableDesc}</div>\n\t\t\t\t<div class=\"action\">${actionImport}</div>\n\t\t\t\t<div class=\"description\">${actionImportDesc}</div>\n\t\t\t\t<div class=\"description\">${referenceLayersDesc}</div>\n\t\t\t\t\n\t\t\t</div>\t\n\t\t</div>\n\t\t\t\n\n\t</div>\n\t\n</div>\n\n\n</div>\n\n","url:builder/workbench/componentsView/templates/ComponentPatternType.html":"<tr>\n   <td>\n      <table dojoAttachPoint=\"nameColumn\"   style=\"width: 280px; margin: 0px 0px 0px  0px; border-collapse: collapse; float: left;\"></table>\n   </td>\n   <td>\n      <table dojoAttachPoint=\"deleteColumn\" style=\"width:  60px; margin: 0px 0px 0px 30px; border-collapse: collapse; float: left;\"></table>\n   </td>\n\n</tr>\n","url:builder/workbench/property/templates/PropertiesWidget.html":"<div class=\"propertyPanel\" data-dojo-attach-point=\"rootNode\">\n\t<div class=\"dijitTitlePaneTitle title\" dojoAttachPoint=\"titleNode\">\n\t\t<table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\"> \n\t\t\t<tr data-dojo-attach-point=\"titleTr\">\n        \t\t<td class=\"titleImagePane\">\n            \t\t<img style='height:30px; width:30px;' dojoAttachPoint=\"titleImageNode\" alt=\".\"></img>\n        \t\t</td>\n\t\t\t\t<td dojoAttachPoint=\"titleNameNode\" class=\"titleText\"></td>\t\n\t\t\t\t<td>\n\t\t\t\t\t<a title=\"${helpTitle}\" dojoattachpoint=\"helpBtn\" dojoAttachEvent=\"onclick: onHelp\">\n\t\t\t\t\t\t<span dojoAttachPoint=\"helpImgNode\" title=\"${helpTitle}\" class=\"wca-image-help-normal-icon\" style=\"display:inline-block\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>    \n\t\t\t\n    </div>\n    \n\n\t<div data-dojo-attach-point=\"contentNode\">\n\t\t<div align=\"right\" dojoAttachEvent=\"onclick:lockUnlockAllAttributes\" style=\"display:none\" dojoattachpoint=\"lockUnlockParentAllDiv\" class=\"control_panel_title dijitTitlePaneTitle\">\n        \t<a title=\"${lockAll}\" dojoattachpoint=\"lockUnlockParentAll\">${lockAll}</a>\n    \t</div>  \n\t\t<div dojoAttachPoint=\"nameNode\" class=\"name\" style=\"display:none\"></div>\n\t\t\n\t    <div dojoAttachPoint=\"tc\">\n\t    \t<div align=\"right\" dojoattachpoint=\"lockUnlockAllDiv\" dojoAttachEvent=\"onclick:lockUnlockAllAttributes\" style=\"display:none\" class=\"control_panel_title dijitTitlePaneTitle\">\n            \t<a title=\"${lockAll}\" dojoattachpoint=\"lockUnlockAll\">${lockAll}</a>\n        \t</div>\n\t    </div>\n\t    <div dojoAttachPoint=\"dataMappingNode\" class=\"name\" style=\"display:none\">hiiiii</div>\n\t</div>\n\t\n</div>\n","url:builder/workbench/property/templates/FileUploadExt.html":"<div class=\"dijitFileInput fileSelectWidget\">\n\t<div class=\"dijitFakeInput\" dojoAttachPoint=\"fakeNodeHolder\">\n\t\t<input id=\"${id}\" class=\"dijitFileInputVisible\" type=\"text\" readonly=true dojoAttachPoint=\"focusNode, inputNode\" />\n\t\t\n\t\t<div class=\"dijitInline dijitFileInputText fileInputButton\"\n\t\t dojoAttachPoint=\"titleNode\" style=\"padding:0 6px\">${label}</div>\n\t\t<div class=\"dijitInline dijitFileInputText fileInputButton\" dojoAttachEvent=\"onclick:deleteFile\"\n\t\t dojoAttachPoint=\"deleteNode\" style=\"padding:0 6px; display:none;\">${deleteText}</div>\n\t</div>\n\t\n\t<div style=\"position: absolute; top:0; width: 350px;\" dojoAttachPoint=\"progressDiv\">\n\t\t<div class=\"dijitInline\" dojoAttachPoint=\"progressBar\" style=\"width: 180px; position: absolute; height: 1em; border: 1px solid rgb(118, 157, 192); padding: 1px; background-color: rgb(170, 170, 170);\">\n\t\t\t<div class=\"dijitProgressOverlay dijitInline\" dojoAttachPoint=\"overlay\" style=\"padding: 0px 2px 2px 0px; width: 180px\"></div>\n\t\t\t<span style=\"position: absolute; left: 80px; top: 1px;\" dojoAttachPoint=\"progressNode\"></span>\n\t\t</div>\n\t\t<div class=\"dijitInline dijitFileInputButton fileInputButton\" dojoAttachPoint=\"cancelNode\" \n\t\tstyle=\"padding:0 6px; position:absolute; top:0; left:190px; visibility: visible\">${cancelText}</div>\n\t</div>\n\t\n</div>\n","url:paas/widgets/templates/PatternAttrMainWidget.html":"<div>\n\t<div data-dojo-type=\"dijit/TitlePane\" data-dojo-props=\"title: '${patternHeading}'\">\n\t\t<div>\n\t\t\t<input dojoType=\"dijit.form.Button\" dojoAttachPoint=\"addGlobalAttrButton\" dojoAttachEvent=\"onClick:showGlobalAttrWidget\" title=\"Add new parameter\" iconClass=\"toolbarIcon addIcon\" style=\"padding-top: 10px;\"/>\n\t\t\t<div style=\"padding-bottom: 10px\"></div>\n\t\t\t<div dojoAttchPoint=\"globalAttrEdit\" style=\"display:none\">\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t\t<div dojoAttachPoint=\"attrEdit\" style=\"display: none\">\n\t\t\t\n\t\t</div>\n\t</div>\n\n</div>","url:builder/workbench/property/templates/ReferencePropertyWidget.html":"<tr data-dojo-attach-event=\"onmouseover:showIcons,onmouseout:hideIcons\">\n    <td dojoAttachPoint=\"nameArea\" class=\"TD\">\n        <div class=\"nameArea\">\n        \n        \t\n        \t<span dojoAttachPoint=\"requiredMark\" class=\"require boldFont\">*</span>\n            <span class=\"name-node\" dojoAttachPoint=\"nameNode\"></span>\n            <span dojoattachpoint=\"deleteNode\" style=\"display: none; vertical-align: top\">\n\t\t\t\t<img style=\"vertical-align: top; float: right;\" class=\"icon-image\" alt=\"${deprecatedHint}\" title=\"${deprecatedHint}\" src=\"/images/delete-icon-small.gif\">\n\t\t\t</span>\n\t\t\t<span dojoattachpoint=\"scanningNode\" style=\"display: none; color: navy;\">&nbsp;&nbsp;\n\t\t\t\t<img style=\"vertical-align: text-top;\" class=\"icon-image\" alt=\"${scanningHint}\" title=\"${scanningHint}\" src=\"/images/cloud/progress-indicator-small.gif\">&nbsp;${scanningHint}\n\t\t\t</span>\n        </div>\n        <div dojoAttachPoint=\"propertySplash\" class=\"splash\">\n\t\t\t\t<span style=\"position: absolute; display: inline; vertical-align: sub;\" class=\"wca-image-progress-indicator-small-icon\"></span>\n\t\t\t\t<span style=\"position: relative; left: 24px \">${loading_msg}</span>\n\t\t</div> \n\t\t<div style=\"display: none; width: 230px\" data-dojo-attach-point=\"referenceTextBox\" data-dojo-attach-event=\"onChange: _onReferenceValueChange\" aria-labelledby=\"\" data-dojo-type=\"dijit/form/TextBox\" data-dojo-props=\"bidiSupport:true, intermediateChanges:true, disabled: 'disabled'\" field=\"value\" name=\"value\" required=\"true\"></div>\n\t\t\t\t\n    </td>\n\t<td dojoAttachPoint=\"valueArea\">\n        <div dojoAttachPoint=\"valueNode\" class=\"value\"></div>\n    </td>\n\t<td dojoAttachPoint=\"addReferenceNode\" style='vertical-align: bottom; cursor: pointer; display: none'>\n\t\t<img src=\"/tooling/images/toolbar/assignxslt_obj.gif\" alt=\"${addReference_alt}\" title=\"${addReference_alt}\">\n\t\t\n    </td>\n\t<td data-dojo-attach-point=\"removeReferenceNode\" data-dojo-attach-event=\"onclick: removeReference\" style='vertical-align: bottom; cursor: pointer; display: none'>\n\t\t<img src=\"/images/delete.gif\" alt=${removeReference_alt}>\n\t\t\n    </td>\n\t<td dojoAttachPoint=\"lockArea\" style='vertical-align: bottom;padding-bottom: 6px;'>\n\t\t  <a dojoAttachPoint=\"lockNode\" style=\"display: none\">\n\t\t  \t<img dojoAttachPoint=\"lockImgNode\" src=\"/tooling/images/locked_24.png\" alt=${image_alt}>\n\t\t  </a>\n    </td>\n\t<td style='vertical-align: bottom; padding-bottom: 6px;'>\n\t\t<a dojoAttachPoint=\"statusNode\" style='display: none'>\n\t\t\t<span class=\"wca-image-attention-normal-icon\" dojoAttachPoint=\"statusImgNode\" style=\"display: inline-block\"></span>\n\t\t</a>\n\t</td>\n    \n</tr>\n","url:builder/workbench/linksView/templates/ComponentPatternType.html":"<tr>\n   <td>\n      <table dojoAttachPoint=\"nameColumn\"   style=\"width: 280px; margin: 0px 0px 0px  0px; border-collapse: collapse; float: left;\"></table>\n   </td>\n \n\n</tr>\n","url:paas/widgets/templates/AddPatternAttrDialog.html":"\n<div>\n\t\n\t<div dojoType=\"paas.widgets.Dialog\" dojoAttachPoint=\"theDialog\" title=\"${app_deploy_dialog_title}\" description=\"\">\n\t\t<div dojoAttachPoint=\"subTitle\" style=\"align:top\"></div>\n\t\t<div data-dojo-type=\"dijit/form/Form\" data-dojo-id=\"myForm\" encType=\"multipart/form-data\" action=\"\" method=\"\">\n\t\t\t<div dojoAttachPoint=\"existingPatternRadioAttr\">\n\t\t\t\t<table  style=\"width: 100%; padding: 5px 10px;\" role=\"presentation;align=right;\">\t\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t<input type=\"radio\" data-dojo-type=\"dijit/form/RadioButton\" dojoAttachPoint=\"patternAttrRadio1\" name=\"patternAttrRadio\" checked=\"true\" value=\"existingAttr\" dojoAttachEvent=\"onChange:toggleRadio\">${PATTERN_ATTR_EXSITING_TITLE}</input>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t\t<div dojoAttachPoint=\"existingPatternAttr\">\n\t\t\t\t\t<span>\n\t\t\t\t\t<table  style=\"width: 100%; padding: 5px 10px;\" role=\"presentation;align=right;\">\t\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"attributeTitle\"><span id=\"${id}_component\">${component}</span></td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div data-dojo-attach-point=\"componentFiltering\" aria-labelledby=\"${id}_component\" data-dojo-type=\"dijit/form/FilteringSelect\" \n\t\t\t\t\t\t\t\t\t data-dojo-props=\"bidiSupport:true, searchAttr:'id'\" field=\"component\" name=\"component\" required=\"true\" class=\"attributeValue fullHorizontal\">\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\t\t\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"attributeTitle\"><span id=\"${id}_attribute\">${availableParameters}</span></td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div data-dojo-attach-point=\"attributeFiltering\" aria-labelledby=\"${id}_attribute\" data-dojo-type=\"dijit/form/FilteringSelect\" \n\t\t\t\t\t\t\t\t\t data-dojo-props=\"bidiSupport:true, searchAttr:'id'\" field=\"attribute\" name=\"attribute\" required=\"true\" class=\"attributeValue fullHorizontal\">\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t<div dojoAttachPoint=\"newPatternRadioAttr\">\n\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\" role=\"presentation\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t<input type=\"radio\" data-dojo-type=\"dijit/form/RadioButton\" dojoAttachPoint=\"patternAttrRadio2\" name=\"patternAttrRadio\"  value=\"newAttr\" dojoAttachEvent=\"onChange:toggleRadio\">${PATTERN_ATTR_CREATE_TITLE}</input>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t\t<div dojoAttachPoint=\"newPatternAttr\" style=\"display: none\">\n\t\t\t\t\t\n\t\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\" role=\"presentation\">\n\t\t\t\t\t\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<span dojoAttachPoint=\"requiredMark\" class=\"requireShow\">*</span>\n\t\t\t\t\t\t\t<label for=\"name\">${name}</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input data-dojo-type=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"name\" name=\"name\" required=\"true\" size=\"30\" data-dojo-props=\"trim:true\" class=\"fullHorizontal\"/>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<span dojoAttachPoint=\"requiredMark\" class=\"requireShow\">*</span>\n\t\t\t\t\t\t\t<label for=\"parameterType\">${parameterType}</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<select dojoAttachPoint=\"parameterType\"  dojoType=\"dijit.form.FilteringSelect\" class=\"fullHorizontal\">     \n\t\t\t\t\t\t\t\t<option value=\"number\">number</option>     \n\t\t\t\t\t\t\t\t<option value=\"password\">password</option>     \n\t\t\t\t\t\t\t\t<option value=\"string\" selected=\"true\">string</option> \n\t\t\t\t\t\t\t\t<option value=\"boolean\">boolean</option>\n\t\t\t\t\t\t\t</select> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<span dojoAttachPoint=\"requiredMark\" class=\"requireShow\">*</span>\n\t\t\t\t\t\t\t<label for=\"patternAttrId\">${id}</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input data-dojo-type=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"patternAttrId\" name=\"patternAttrId\" required=\"true\" size=\"30\" data-dojo-props=\"trim:true\" class=\"fullHorizontal\"/>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<label for=\"description\">${description}</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input data-dojo-type=\"dijit.form.Textarea\" dojoAttachPoint=\"description\" name=\"description\" size=\"50\" class=\"fullHorizontal\"/>\n\t\t\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td >\n\t\t\t\t\t\t\t<label for=\"patternAttrValue\">${paramValue}</label>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"patternValueBox\" class=\"fullHorizontal\"></div>\n\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"patternValueBox1\" class=\"fullHorizontal\"><input data-dojo-type=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"patternAttrValue1\" name=\"patternAttrValue1\" size=\"30\" class=\"fullHorizontal\"/></div>\n\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"patternValueBox2\" style=\"display:none\" class=\"fullHorizontal\"><input data-dojo-type=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"patternAttrValue2\" name=\"patternAttrValue2\" size=\"30\" type=\"number\" class=\"fullHorizontal\"/></div>\n\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"patternValueBox3\" style=\"display:none\" class=\"fullHorizontal\"><input data-dojo-type=\"dijit.form.ValidationTextBox\" dojoAttachPoint=\"patternAttrValue3\" name=\"patternAttrValue3\" type=\"password\" size=\"30\" class=\"fullHorizontal\"/></div>\n\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"patternValueBox4\" style=\"display:none\" class=\"fullHorizontal\"><input data-dojo-type=\"dijit.form.CheckBox\" dojoAttachPoint=\"patternAttrValue4\" name=\"patternAttrValue4\"/></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t\t<div dojoAttachPoint=\"patternMatching\">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div dojoAttachPoint=\"deleteMessage\" style=\"color: red;padding-top: 5px\">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t</div>\n\t</div>\n\n\n</div>\n","url:paas/widgets/templates/Dialog.html":"<div class=\"dijitDialog\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<table class=\"dialog-table\" role=\"presentation\" width=\"100%\">\n\t\t<tbody>\n\t\t\t\n\t\t\t\n\t\t\t<tr dojoAttachPoint=\"titleBar\" style=\"font: bold 12px Verdana,Arial,sans-serif;\">\n\t\t\t\t<td>\n\t\t\t\t\t<div id=\"${id}_title\" dojoAttachPoint=\"titleNode\"></div>\n\t\t\t\t\t<div id=\"${id}_description\" dojoAttachPoint=\"descriptionNode\" style=\"margin-top: 10px;\"></div>\n\t\t\t\t\t<div dojoType=\"builder.workbench.MessageBoxWidget\" dojoAttachPoint=\"messageWidget\"></div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t\n\t\t\t\n\t\t\t<tr class=\"create-dialog-dialog-extension-row\" role=\"presentation\">\n\t\t\t\t<td>\n\t\n\t\t\t\t\t<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t\n\t\t\t\n\t\t\t<tr id=\"${id}_button_group\">\n\t\t\t\t<td align=\"right\">\n\t\t\t\t<br>\n\t\t\t\t<span dojoAttachPoint=\"confirmButtonNode\">\n\t\t\t\t\t<button dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachPoint=\"confirmText\" dojoAttachEvent=\"onClick: onConfirm\" title=\"${btnTextConfirm}\">${btnTextConfirm}</button>\n\t\t\t\t</span>\n\t\t\t\t<span dojoAttachPoint=\"closeButtonNode\">\n\t\t\t\t\t<button dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachPoint=\"closeText\" dojoAttachEvent=\"onClick: onCancel\" title=\"${btnTextCancel}\" style=\"margin-left: 25px;\">${btnTextCancel}</button>\n\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t\n\t\t</tbody>\n\t</table>\n\t\n\n\n</div>\n\n","url:paas/widgets/templates/FileInputAuto.html":"<div class=\"dijitFileInput fileInputAuto\">\n\n\t<input id=\"${id}\" name=\"${name}\" class=\"dijitFileInputReal\" type=\"file\" dojoAttachPoint=\"fileInput\" />\n\t<div class=\"dijitFakeInput\" dojoAttachPoint=\"fakeNodeHolder\">\n\t\t<label style=\"display:none;\" for=\"fileInputAutoFakeInput-${id}\">file name</label>\n\t\t<input class=\"dijitFileInputVisible\" type=\"text\" style=\"width:150px\" dojoAttachPoint=\"focusNode, inputNode\" />\n\t\t\n\t\t<div class=\"dijitInline dijitButton fileInputButton\"dojoAttachPoint=\"titleNode\" style=\"padding-top:1px\">\n\t\t\t<span class=\"dijitButtonNode\">${label}</span>\n\t\t</div>\n\t\t<div class=\"dijitInline dijitButton fileInputButton\" dojoAttachPoint=\"cancelNode\" dojoAttachEvent=\"onclick:reset\" style=\"padding-top:1px\">\n\t\t\t<span class=\"dijitButtonNode\">${cancelText}</span>\n\t\t</div>\n\t\t<div class=\"dijitInline dijitButton fileInputButton\" dojoAttachEvent=\"onclick:deleteFile\" dojoAttachPoint=\"deleteNode\" style=\"padding-top:1px\">\n\t\t\t<span class=\"dijitButtonNode\">${deleteText}</span>\n\t\t</div>\n\t</div>\n\t<div style=\"position: absolute; top:0; width: 350px;\">\n\t\t<div class=\"dijitInline\" dojoAttachPoint=\"progressBar\" style=\"width: 180px; position: absolute; height: 1em; border: 1px solid rgb(118, 157, 192); padding: 1px; background-color: rgb(170, 170, 170);\">\n\t\t\t<div class=\"dijitProgressOverlay dijitInline\" dojoAttachPoint=\"overlay\" style=\"padding: 0px 2px 2px 0px;\"></div>\n\t\t\t<span style=\"position: absolute; left: 80px; top: 1px;\" dojoAttachPoint=\"progressNode\"></span>\n\t\t</div>\n\t\t<div class=\"dijitInline dijitButton fileInputButton\" dojoAttachEvent=\"onclick:stopUploading\" dojoAttachPoint=\"stopNode\" style=\"display:none; left:190px; position:absolute;\">\n\t\t\t<span class=\"dijitButtonNode\">${cancelText}</span>\n\t\t</div>\n\t</div>\n\t\n</div>\n","url:builder/workbench/editor/templates/HelpSmallGroup.html":"<div>\n \t\t<div class=\"itemListTitleTable\" style=\"padding-left:20px;\">\n\t\t        <br>\n \t\t\t\t<span dojoAttachPoint=\"expansionNode\" dojoAttachEvent=\"onclick:changeExpanded\" style='display: inline-block; vertical-align: bottom;' class=\"wca-image-section-expand-icon\">\n \t\t\t    </span>\n\t\t\t\t<span dojoAttachPoint=\"titleNode\" class=\"itemListTitle\" style=\"display:inline;\"></span>\n\t\t\t\t<div dojoAttachPoint=\"descContainer\" style=\"padding-left:20px;\">\n\t\t\t\t<br>\n\t\t\t\t     <div dojoAttachPoint='itemdescription'></div>\n\t\t\t\t</div>\n\t\t\t\t<br>\n\t\t\t\t<div dojoAttachPoint='itemsContainer' style=\"padding-left:20px;\"></div>\n\t\t</div>\n\t<div dojoAttachPoint='bottomBorderDiv' class=\"bottomBorderDiv\"></div>\n\n\n</div>","url:builder/workbench/property/templates/AddReferenceDialog.html":"<div>\n\t<div data-dojo-type=\"paas/widgets/Dialog\" style=\"max-width: none;\" data-dojo-attach-point=\"dialog\" title=\"${add_reference_dialog_title}\"  description=\"${subTitle}\"class=\"addReferenceDialog\">\n\t\t<div dojoAttachPoint=\"refTitle\" style=\"padding-top: 0px;\"></div>\n\t\t<div>\n\t\t\t\n\t\t\t<form data-dojo-type=\"dijit/form/Form\" data-dojo-attach-point=\"form\">\n\t\t\t\t<div data-dojo-type=\"dijit/layout/TabContainer\" style=\"width: 400px; height: 200px;\" tabStrip=\"true\">\n\t\t\t\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" title=\"${componentParam}\" selected=\"true\" >\n\t\t\t\t\t\t<div dojoAttachPoint=\"componentAttrDisplay\">\n\t\t\t\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\" role=\"presentation\">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"attributeTitle\"><span id=\"${id}_component\">${refComponent}</span></td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<div data-dojo-attach-point=\"componentFiltering\" aria-labelledby=\"${id}_component\" data-dojo-type=\"dijit/form/FilteringSelect\" \n\t\t\t\t\t\t\t\t\t\t\t\t data-dojo-props=\"bidiSupport:true, searchAttr:'id'\" field=\"component\" name=\"component\" required=\"true\" class=\"attributeValue\">\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\t\t\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"attributeTitle\"><span id=\"${id}_attribute\">${refOutputAttr}</span></td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<div data-dojo-attach-point=\"attributeFiltering\" aria-labelledby=\"${id}_attribute\" data-dojo-type=\"dijit/form/FilteringSelect\" \n\t\t\t\t\t\t\t\t\t\t\t\t data-dojo-props=\"bidiSupport:true, searchAttr:'id'\" field=\"attribute\" name=\"attribute\" required=\"true\" class=\"attributeValue\">\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div dojoattachpoint=\"addReferenceDisplay\">\n\t\t\t\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t\t\t\t<button style=\"float: right;\" data-dojo-attach-event=\"onClick: addComponentReference\" aria-labelledby=\"${id}_add\" data-dojo-type=\"dijit/form/Button\" data-dojo-props=\"bidiSupport:true\">${addButton}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</td>\t\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" title=\"${patternParam}\" selected=\"true\" dojoAttachPoint=\"patternAttrRadio1\">\n\t\t\t\t\t\t<div dojoAttachPoint=\"noDisplay\">\n\t\t\t\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\">\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t\t\t\t<div style=\"color: red\">${noPatternParam}</div>\n\t\t\t\t\t\t\t\t\t</td>\t\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div dojoAttachPoint=\"patternAttrDisplay\" style=\"display:none\">\n\t\t\t\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\"role=\"presentation\">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class=\"attributeTitle\"><span id=\"${id}_component\">${refAttribute}</span></td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<div data-dojo-attach-point=\"patternFiltering\" aria-labelledby=\"${id}_component\" data-dojo-type=\"dijit/form/FilteringSelect\" \n\t\t\t\t\t\t\t\t\t\t\t\t data-dojo-props=\"searchAttr:'id'\" field=\"patternAttrFilter\" name=\"patternAttrFilter\" required=\"true\" class=\"attributeValue\">\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\t\t\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div dojoattachpoint=\"addReferenceDisplayForPattern\" style=\"display:none\">\n\t\t\t\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t\t\t<button style=\"float: right;\" data-dojo-attach-event=\"onClick: addPatternReference\" aria-labelledby=\"${id}_add\" data-dojo-type=\"dijit/form/Button\" data-dojo-props=\"bidiSupport:true\">${addButton}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</td>\t\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>  \n\t\t\t\t<table style=\"width: 100%; padding: 5px 10px;\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t\t\t\t<div>${refAttrValue}</div>\n\t\t\t\t\t\t\t\t<div class=\"referenceValueTextBox\" data-dojo-attach-point=\"valueTextBox\" aria-labelledby=\"${id}_value\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props=\"bidiSupport:true\" field=\"value\" name=\"value\" required=\"true\"></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n\n\n</div>","url:builder/workbench/orderView/templates/OrderContainer.html":"<div>\n\t<div>\n\t\t<div data-dojo-type=\"builder/workbench/MessageBoxWidget\" id=\"orderingMessageWidget\"></div>\t\t\n\t\t<div style=\"position: absolute; left: 50px; top: 20px; background-color: #f5f5dc; padding: 5px 5px 0 5px;\">\n\t\t\t<span>${APPMODEL_ORDERING_INSTRUCTION}</span>\n\t\t\t<div style=\"width: 700px;\">\n\t\t\t\t<div data-dojo-attach-point=\"orderingLineCategory\" style=\"width: 120px; height: 80px; float: left;\"></div>\n\t\t\t\t<div style=\"float: left; width: 500px;\">\n\t\t\t\t\t<div style=\"position: relative; top: 12px\">${APPMODEL_ORDERING_FIXED_ORDERING}</div>\n\t\t\t\t\t<div style=\"position: relative; top: 27px\">${APPMODEL_ORDERING_CHANGABLE_ORDERING}</div>\n\t\t\t\t\t<div style=\"clear: both;\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div data-dojo-attach-point=\"orderContainerNode\" data-dojo-attach-event=\"onclick: onOrderContainerClick\">\n\t\t\n\t</div>\n</div>","url:builder/workbench/linksView/templates/Link.html":"<div>\n   <table dojoAttachPoint=\"nameTable\" style=\"width:700px; margin: 0px 0px 0px 0px; border-collapse: collapse;\">\n   </table>\n\n   <div dojoAttachPoint=\"sourcesSection\" dojoType=\"builder.workbench.linksView.LinkListCollapsibleSection\" label=\"${hintValidSources}\" style=\"clear: both; padding-top: 20px;\">\n   </div>\n\n   <div dojoAttachPoint=\"targetsSection\" dojoType=\"builder.workbench.linksView.LinkListCollapsibleSection\" label=\"${hintValidTargets}\" style=\"clear: both; padding-top: 20px;\">\n   </div>\n\n   <div dojoAttachPoint=\"propertiesSection\" dojoType=\"builder.workbench.componentsView.PropertyListCollapsibleSection\" label=\"${hintProperties}\" style=\"clear: both; padding-top: 20px;\">\n   </div>\n\n   <div dojoAttachPoint=\"linkOperationsSection\" dojoType=\"builder.workbench.componentsView.CollapsibleSection\" name=\"${hintLinkOps}\" style=\"padding-top: 20px;\">\n      <table dojoAttachPoint=\"linkOperationsTable\" style=\"margin: 0px 0px 0px 0px; border-collapse: collapse;\">\n   \t\t<tr>\n   \t\t\t<td><b>${sourceLabel}</b><br></td><td><b>${targetLabel}</b><br></td>\n   \t\t</tr>\n      \t<td>\n      \t\t<table dojoAttachPoint=\"sourceTable\" style=\"width: 450px; margin: 0px 0px 0px 0px; border-collapse: collapse; float: left;\"></table>\n\t\t</td>\n   \t\t<td>\n      \t\t<table dojoAttachPoint=\"targetTable\" style=\"width: 450px; margin: 0px 0px 0px 0px; border-collapse: collapse; float: left;\"></table>\n   \t\t</td>\n      </table>\n   </div>\n\n   <div dojoAttachPoint=\"customOperationsSection\" dojoType=\"builder.workbench.componentsView.OperationListCollapsibleSection\" label=\"${hintCustomOps}\" style=\"padding-top: 20px;\">\n   </div>\n\n\n</div>\n","url:builder/vsys/workbench/editor/templates/InterchangableComponentContainerFrame.html":"<div tabindex=\"0\" class=\"hideOutline containerFrame\">\n    <div style=\"position:relative;\">\n    \t\n        <div dojoAttachPoint=\"frameBorderContainer\" class=\"containerFrame_outer\">\n        \t<div align=\"left\" dojoAttachPoint=\"outerDisplayContainer\" style=\"position:absolute;top:-9px;left:-9px;display: none;\">\n        \t\t\t\n\t\t\t\t</div>\n        \t\n            <div dojoAttachPoint=\"frameInnerContainer\" class=\"containerFrame_inner\">\n            \t\n                <div dojoAttachPoint=\"portContainer\" class=\"containerFrame_port\">\n                </div>\n\t\t\t\t<div dojoAttachPoint=\"scanContainer\" style=\"display: none\" class=\"containerFrame_scan\">\n\t\t\t\t\t<img style=\"vertical-align: text-top;\" class=\"icon-image\" alt=\"${scanningHint}\" title=\"${scanningHint}\" src=\"/images/cloud/progress-indicator-small.gif\">\n\t\t\t\t</div>\n                <div dojoAttachPoint=\"policyShortcutContainer\" class=\"policyShortcut\" style=\"display: none\">\n                </div>\n                <div dojoAttachPoint=\"backImageContainer\" class=\"containerFrame_backImage\" style=\"display:none\">\n                </div>\n                <div dojoAttachPoint=\"figureImage\" style=\"display:none\">\n                </div>\n                <div dojoAttachPoint=\"contentContainer\" class=\"containerFrame_content\" >\n                \t<div align=\"right\" style=\"height:18px;top:0px;right:0\"> \n                        <div dojoType=\"dijit.Toolbar\" dojoAttachPoint=\"toolbar\" class=\"toolbar\"  style=\"height:14px;top:0px\">\n                        </div>\n                    </div>\n                    <div class=\"containerFrame_componentDetails\">\n                        <div class=\"title\" dojoAttachPoint=\"titleNode\">\n                            <table width=\"100%\" role=\"presentation\">\n                                <tr>\n                                    <td valign=\"top\" class=\"titleImagePane\">\n                                        <img dojoAttachPoint=\"titleImageNode\" alt=\"image\">\n                                        </img>\n                                    </td>\n\t\t\t\t\t\t\t\t\t<td class=\"titleText\">\n\t\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"nameNode\" dojoType=\"dijit.InlineEditBox\" class=\"containerFrame_text inlineEditor\" style=\"max-width: 130px;\">\n            \t\t\t\t\t\t\t</div>\n                                    \t<div>                                  \t\t\n                                    \t\t<span dojoAttachPoint=\"versionFilter\" data-dojo-type=\"dijit/form/Select\" style=\"width:70px\"></span>\n                                    \t</div>\n\t\t\t\t\t\t\t\t\t</td>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n                    <hr class=\"separateLine\" dojoAttachPoint=\"separator\" style=\"display: none;\">\n                    <div dojoAttachPoint=\"policiesNode\" style=\"display: none; background:transparent\" class=\"dijitTitlePane\">\n                    \t<span class=\"dijitTitlePaneTitleOpen\" data-dojo-attach-point=\"policiesIconNode\">\n                    \t\t<span class=\"dijitInline dijitArrowNode\"></span>\n                    \t<span class=\"subcomponents_title\">${SOFTWARES_AND_SCRIPTS}</span>\n                    \t</span>\n                    \t<div data-dojo-attach-point=\"policiesContentNode\"></div>\n                    </div>\n                    <hr class=\"separateLine\" data-dojo-attach-point=\"addonsSeparator\" style=\"display: none;\">\n                    <div data-dojo-attach-point=\"addonsNode\" style=\"display: none; background:transparent;\" class=\"dijitTitlePane\">\n                    \t<span class=\"dijitTitlePaneTitleOpen\" data-dojo-attach-point=\"addonsIconNode\">\n                    \t\t<span class=\"dijitInline dijitArrowNode\"></span>\n                    \t<span class=\"subcomponents_title\">${ADDONS}</span>\n                    \t</span>\n                    \t<div data-dojo-attach-point=\"addonsContentNode\"></div>\n                    </div>\n                    <hr class=\"separateLine\" data-dojo-attach-point=\"realPoliciesSeparator\" style=\"display: none;\">\n                    <div data-dojo-attach-point=\"realPoliciesNode\" style=\"display: none; background:transparent;\" class=\"dijitTitlePane\">\n                    \t<span class=\"dijitTitlePaneTitleOpen\" data-dojo-attach-point=\"realPoliciesIconNode\">\n                    \t\t<span class=\"dijitInline dijitArrowNode\"></span>\n                    \t<span class=\"subcomponents_title\">${POLICIES}</span>\n                    \t</span>\n                    \t<div data-dojo-attach-point=\"realPoliciesContentNode\"></div>\n                    </div>\n                </div>\n\t\t\t\t<div dojoAttachPoint=\"statusArea\">\n\t\t\t\t\t<div align=\"right\">\n    \t             <div dojoType=\"builder.workbench.editor.LayerItem\" dojoAttachPoint=\"layerNode\" style=\"height:20px;\"></div>\n\t\t\t\t\t <span dojoAttachPoint=\"statusContainer\"  style=\"display: none;vertical-align: middle; cursor: pointer;\">\n\t\t\t\t\t\t<span class=\"wca-image-attention-normal-icon\" dojoAttachPoint=\"statusIconNode\" title=\"${attention_normal}\" style=\"display:inline-block\"></span>\n\t\t\t\t\t </span>              \n                \t</div>\n\t\t\t\t</div>\n            </div>\n            \n        </div>\n        <div dojoAttachPoint=\"toolbarContainer\" class=\"containerFrame_toolbarContainer\">\n        </div>\n        <div dojoAttachPoint=\"linkSupportStatus\" class=\"containerFrame_linkSupportStatus\" style=\"display:none\">\n        </div>\n    </div>\n    \n</div>\n","url:builder/workbench/componentsView/templates/ComponentCategoryPaletteItem.html":"<div>\n   <div dojoAttachPoint=\"container\" style=\"vertical-align: middle; cursor: pointer; height: 34px;\">\n      <img dojoAttachPoint=\"iconImg\" style=\"position: relative; top: 1px; padding: 4px; 6px 1px 6px;\"/>\n      <span dojoAttachPoint=\"label\" style=\"position: relative; top: -10px; padding-left: 15px;\"></span>\n   </div>\n\n</div>\n","url:builder/workbench/editor/templates/ComponentContainerFrame.html":"<div tabindex=\"0\" class=\"hideOutline containerFrame\">\n    <div style=\"position:relative;\">\n    \t\n        <div dojoAttachPoint=\"frameBorderContainer\" class=\"containerFrame_outer\">\n        \t<div align=\"left\" dojoAttachPoint=\"outerDisplayContainer\" style=\"position:absolute;top:-9px;left:-9px;display: none;\">\n        \t\t\t\n\t\t\t\t</div>\n        \t\n            <div dojoAttachPoint=\"frameInnerContainer\" class=\"containerFrame_inner\">\n            \t\n                <div dojoAttachPoint=\"portContainer\" class=\"containerFrame_port\">\n                </div>\n\t\t\t\t<div dojoAttachPoint=\"scanContainer\" style=\"display: none\" class=\"containerFrame_scan\">\n\t\t\t\t\t<img style=\"vertical-align: text-top;\" class=\"icon-image\" alt=\"${scanningHint}\" title=\"${scanningHint}\" src=\"/images/cloud/progress-indicator-small.gif\">\n\t\t\t\t</div>\n                <div dojoAttachPoint=\"policyShortcutContainer\" class=\"policyShortcut\" style=\"display: none\">\n                </div>\n                <div dojoAttachPoint=\"backImageContainer\" class=\"containerFrame_backImage\" style=\"display:none\">\n                </div>\n                <div dojoAttachPoint=\"figureImage\" style=\"display:none\">\n                </div>\n                <div dojoAttachPoint=\"contentContainer\" class=\"containerFrame_content\" >\n                \t<div align=\"right\" style=\"height:18px;top:0px;right:0\"> \n                        <div dojoType=\"dijit.Toolbar\" dojoAttachPoint=\"toolbar\" class=\"toolbar\"  aria-label=\"toolbar\" style=\"height:14px;top:0px\">\n                        </div>\n                    </div>\n                    <div class=\"containerFrame_componentDetails\">\n                        <div class=\"title\" dojoAttachPoint=\"titleNode\">\n                            <table width=\"100%\" role=\"presentation\">\n                                <tr>\n                                    <td valign=\"top\" class=\"titleImagePane\">\n                                        <img dojoAttachPoint=\"titleImageNode\" alt=\"image\">\n                                        </img>\n                                    </td>\n\t\t\t\t\t\t\t\t\t<td class=\"titleText\">\n\t\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"nameNode\" dojoType=\"dijit.InlineEditBox\" class=\"containerFrame_text\">\n            \t\t\t\t\t\t\t</div>\n                                    \t<div dojoAttachPoint=\"titleNameNode\" style=\"font-size: 10px; color:#D4D4D4; text-align: center;\">\n                                    \t</div>\n\t\t\t\t\t\t\t\t\t</td>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n                    <hr class=\"separateLine\" dojoAttachPoint=\"separator\">\n                    <div dojoAttachPoint=\"policiesNode\">\n                    </div>\n                </div>\n\t\t\t\t<div dojoAttachPoint=\"statusArea\">\n\t\t\t\t\t<div align=\"right\">\n    \t             <div dojoType=\"builder.workbench.editor.LayerItem\" dojoAttachPoint=\"layerNode\" style=\"height:20px;\"></div>\n\t\t\t\t\t <span dojoAttachPoint=\"statusContainer\"  style=\"display: none;vertical-align: middle; cursor: pointer;\">\n\t\t\t\t\t\t<span class=\"wca-image-attention-normal-icon\" dojoAttachPoint=\"statusIconNode\" title=\"${attention_normal}\" style=\"display:inline-block\"></span>\n\t\t\t\t\t </span>\n                \n                </div>\n\t\t\t\t</div>\n            </div>\n            \n        </div>\n        <div dojoAttachPoint=\"toolbarContainer\" class=\"containerFrame_toolbarContainer\">\n        </div>\n        <div dojoAttachPoint=\"linkSupportStatus\" class=\"containerFrame_linkSupportStatus\" style=\"display:none\">\n        </div>\n    </div>\n    \n</div>\n","url:builder/workbench/editor/templates/Diagram.html":"<div>\n    <div dojoAttachPoint=\"diagramNode\" dojoAttachEvent=\"onclick:onDiagramClick\" class=\"diagram\">\n        <div dojoType=\"dijit.form.Button\" dojoAttachPoint=\"addBtn\"  iconClass=\"toolbarIcon addIcon\" class=\"addAppPolicy\">\n        </div>\n    </div>\n    \n</div>\n","url:builder/workbench/componentsView/templates/Component.html":"<div>\n   <table dojoAttachPoint=\"nameTable\" style=\"width:700px; margin: 0px 0px 0px 0px; border-collapse: collapse;\">\n   </table>\n\n\n   <div style=\"padding: 20px 0px; clear: both;\">\n      <span class=\"boldFont\" dojoAttachPoint=\"iconLabel\" style=\"float: left; padding-top: 7px; padding-right: 7px;\">\n         ${hintIcon}\n      </span>\n      <div dojoAttachPoint=\"iconContainer\" style=\"float: left; height: 64px; width: 64px; border: 1px dashed rgb(150, 150, 150); overflow: hidden;\">\n         <input type=\"file\" name=\"iconFileInput\" dojoAttachPoint=\"iconFileInput\" style=\"font-size: 22px; position: relative; top: -2px; left: -2px; opacity: 0; filter: alpha(opacity: 0);\" />\n      </div>\n\n      <span class=\"boldFont\" dojoAttachPoint=\"tnLabel\" style=\"float: left; padding-left: 50px; padding-top: 7px; padding-right: 7px;\">\n         ${hintThumbnail}\n      </span>\n      <div dojoAttachPoint=\"thumbnailContainer\" style=\"float: left; height: 48px; width: 48px; border: 1px dashed rgb(150, 150, 150); overflow: hidden;\">\n           <input type=\"file\" name=\"thumbnailFileInput\" dojoAttachPoint=\"thumbnailFileInput\" style=\"font-size: 22px; position: relative; top: -2px; left: -2px; opacity: 0; filter: alpha(opacity: 0);\" />\n      </div>\n   </div>\n   <div dojoAttachPoint=\"artifactsSection\" dojoType=\"builder.workbench.componentsView.ArtifactListCollapsibleSection\" label=\"${hintArtifacts}\" style=\"clear: both; padding-top: 20px;\">\n   </div>\n\n   <div dojoAttachPoint=\"propertiesSection\" dojoType=\"builder.workbench.componentsView.PropertyListCollapsibleSection\" label=\"${hintProperties}\" style=\"clear: both; padding-top: 20px;\">\n   </div>\n\n   <div dojoAttachPoint=\"lifecycleOperationsSection\" dojoType=\"builder.workbench.componentsView.CollapsibleSection\" name=\"${hintLifecycleOps}\" style=\"padding-top: 20px;\">\n      <table dojoAttachPoint=\"lifecycleOperationsTable\" style=\"margin: 0px 0px 0px 0px; border-collapse: collapse;\">\n      </table>\n      <table dojoAttachPoint=\"propertyMappingTable\" style=\"margin: 0px 0px 0px 0px; border-collapse: collapse;\">\n      </table>\n   </div>\n\n   <div dojoAttachPoint=\"customOperationsSection\" dojoType=\"builder.workbench.componentsView.OperationListCollapsibleSection\" label=\"${hintCustomOps}\" style=\"padding-top: 20px;\">\n   </div>\n\n\n</div>\n","url:builder/workbench/property/templates/DropdownGroups.html":"<div>\n\t<div dojoAttachPoint='groupsSelector' dojoType='dijit.form.ComboBox' class='propertyView_value'></div>\n\n\t<div dojoAttachPoint='attibutesContainer'></div>\n\n</div>\n","url:builder/workbench/templates/PolicyWidget.html":"<div class=\"policyWidget\">\n    <div class=\"title\"><div class=\"boldFont\">${AVILABLE_POLICIES_TITLE}</div></div>  \n\t<table cellspacing='0' width=\"100%\" role=\"presentation\">\n\t\t\t<tbody dojoAttachPoint=\"policyContainer\"></tbody>\n\t\t</table>\n\t\n\n</div>"}});define("dojo/tooling",[],1);